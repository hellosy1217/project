function get_states_ajax(country, box_id, fields) {
    return $.ajax({
        type: "POST",
        url: "/def/get_states_ajax/" + country,
        success: function(msg) {
            resp = eval("(" + msg + ")"), "OK" == resp.status && update_selectbox(resp.data, box_id, fields)
        }
    }), !1
}
function update_selectbox(e, t, i) {
    if (e.length > 0) {
        var n = $("#" + t)[0];
        n.options.length = 0;
        for (var o = 0; o < e.length; o++)
            n.options[n.options.length] = new Option(e[o][i[0]], e[o][i[1]])
    }
}
function object_size(e) {
    var t = 0;
    for (var i in e)
        t++;
    return t
}
function urlencode(e) {
    return e = (e + "").toString(), encodeURIComponent(e).replace(/!/g, "%21").replace(/'/g, "%27").replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/\*/g, "%2A").replace(/%20/g, "+")
}
function number_format(e, t, i, n) {
    e = (e + "").replace(",", "").replace(" ", "");
    var o = isFinite(+e) ? +e : 0,
        a = isFinite(+t) ? Math.abs(t) : 0,
        s = "undefined" == typeof n ? "," : n,
        r = "undefined" == typeof i ? "." : i,
        l = "",
        c = function(e, t) {
            var i = Math.pow(10, t);
            return "" + Math.round(e * i) / i
        };
    return l = (a ? c(o, a) : "" + Math.round(o)).split("."), l[0].length > 3 && (l[0] = l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, s)), (l[1] || "").length < a && (l[1] = l[1] || "", l[1] += new Array(a - l[1].length + 1).join("0")), l.join(r)
}
function in_array(e, t) {
    for (key in t)
        if (t[key] == e)
            return !0;
    return !1
}
function checkdate(e, t, i) {
    return e > 0 && e < 13 && i > 0 && i < 32768 && t > 0 && t <= new Date(i, e, 0).getDate()
}
function ucfirst(e) {
    e += "";
    var t = e.charAt(0).toUpperCase();
    return t + e.substr(1)
}
function strip_tags(e, t) {
    t = (((t || "") + "").toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join("");
    var i = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,
        n = /<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;
    return e.replace(n, "").replace(i, function(e, i) {
        return t.indexOf("<" + i.toLowerCase() + ">") > -1 ? e : ""
    })
}
function utf8_encode(e) {
    e = e.replace(/\r\n/g, "\n");
    for (var t = "", i = 0; i < e.length; i++) {
        var n = e.charCodeAt(i);
        n < 128 ? t += String.fromCharCode(n) : n > 127 && n < 2048 ? (t += String.fromCharCode(n >> 6 | 192), t += String.fromCharCode(63 & n | 128)) : (t += String.fromCharCode(n >> 12 | 224), t += String.fromCharCode(n >> 6 & 63 | 128), t += String.fromCharCode(63 & n | 128))
    }
    return t
}
function html_entity_decode(e, t) {
    var i = {},
        n = "",
        o = "",
        a = "";
    if (o = e.toString(), !1 === (i = this.get_html_translation_table("HTML_ENTITIES", t)))
        return !1;
    delete i["&"], i["&"] = "&amp;";
    for (n in i)
        a = i[n], o = o.split(a).join(n);
    return o = o.split("&#039;").join("'")
}
function htmlspecialchars(e, t, i, n) {
    var o = 0,
        a = 0,
        s = !1;
    "undefined" != typeof t && null !== t || (t = 2), e = e.toString(), n !== !1 && (e = e.replace(/&/g, "&amp;")), e = e.replace(/</g, "&lt;").replace(/>/g, "&gt;");
    var r = {
        ENT_NOQUOTES: 0,
        ENT_HTML_QUOTE_SINGLE: 1,
        ENT_HTML_QUOTE_DOUBLE: 2,
        ENT_COMPAT: 2,
        ENT_QUOTES: 3,
        ENT_IGNORE: 4
    };
    if (0 === t && (s = !0), "number" != typeof t) {
        for (t = [].concat(t), a = 0; a < t.length; a++)
            0 === r[t[a]] ? s = !0 : r[t[a]] && (o |= r[t[a]]);
        t = o
    }
    return t & r.ENT_HTML_QUOTE_SINGLE && (e = e.replace(/'/g, "&#039;")), s || (e = e.replace(/"/g, "&quot;")), e
}
function nl2br(e, t) {
    var i = t || "undefined" == typeof t ? "<br />" : "<br>";
    return (e + "").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, "$1" + i + "$2")
}
function isValidDate(e, t, i) {
    if (e = parseInt(e), t = parseInt(t), i = parseInt(i), i < 1e3 || i > 3e3 || 0 == t || t > 12)
        return !1;
    var n = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    return (i % 400 == 0 || i % 100 != 0 && i % 4 == 0) && (n[1] = 29), e > 0 && e <= n[t - 1]
}
function getScript(e, t) {
    if (window.scriptsLoaded = [], window.scriptsLoaded.indexOf(e) >= 0)
        t();
    else {
        window.scriptsLoaded.push(e);
        var i = document.createElement("script");
        i.async = "async", i.src = e, i.onload = function() {
            t()
        }, document.getElementsByTagName("head")[0].appendChild(i)
    }
}
function Get_Cookie(e) {
    var t = document.cookie.split(";"),
        i = "",
        n = "",
        o = "",
        a = !1,
        s = "";
    for (s = 0; s < t.length; s++) {
        if (i = t[s].split("="), n = i[0].replace(/^\s+|\s+$/g, ""), n == e)
            return a = !0, i.length > 1 && (o = unescape(i[1].replace(/^\s+|\s+$/g, ""))), o;
        i = null, n = ""
    }
    if (!a)
        return null
}
function Set_Cookie(e, t, i, n, o, a) {
    var s = new Date;
    s.setTime(s.getTime()), i && (i = 1e3 * i * 60 * 60 * 24);
    var r = new Date(s.getTime() + i);
    document.cookie = e + "=" + escape(t) + (i ? ";expires=" + r.toGMTString() : "") + (n ? ";path=" + n : "") + (o ? ";domain=" + o : "") + (a ? ";secure" : "")
}
function Delete_Cookie(e, t, i) {
    Get_Cookie(e) && (document.cookie = e + "=" + (t ? ";path=" + t : "") + (i ? ";domain=" + i : "") + ";expires=Thu, 01-Jan-1970 00:00:01 GMT")
}
function TRFB_init(e, t, i) {
    if (fb_process && t)
        var n = setInterval(function() {
            fb_complete && (clearInterval(n), t())
        }, 50);
    else
        $("#fb-root").length > 0 && (fb_process = !0, function() {
            var n = document.createElement("script");
            n.async = !0, n.src = document.location.protocol + "//connect.facebook.net/" + ("DE" == i ? "de_DE" : "en_US") + "/all.js", n.onload = function() {
                var i = {
                    appId: e,
                    status: !0,
                    cookie: !0,
                    xfbml: !0,
                    oauth: !0,
                    channelUrl: "https://www.tourradar.com/channel.php"
                };
                (navigator.appVersion.indexOf("MSIE") != -1 || parseFloat(navigator.appVersion.split("MSIE")[1]) < 9) && (i.channelUrl = window.location.protocol + "//www.tourradar.com/include/xd_receiver.htm"), FB.init(i), t && (fb_complete = !0, t())
            }, document.getElementById("fb-root").appendChild(n)
        }())
}
function TRFB_check_logging(e, t, i) {
    FB.getLoginStatus(function(n) {
        n && "connected" == n.status ? (fb_logged = FB.getUserID(), e && e()) : n && "not_authorized" == n.status && t ? t() : i && i()
    })
}
function TRFB_check_logging_and_permissions(e, t, i) {
    FB.getLoginStatus(function(n) {
        n && "connected" == n.status ? (console.log(n), TRFB_check_permissions(e, t, i)) : i && i()
    })
}
function TRFB_check_permissions(e, t, i) {
    console.log(e), fb_permissions = new Object, FB.api("/me/permissions", function(n) {
        if (n && n.data && n.data[0]) {
            console.log(n);
            for (var o = 0; o < n.data.length; o++)
                fb_permissions[n.data[o].permission] = !0;
            for (var a in n.data[0])
                n.data[0][a] && (fb_permissions[a] = !0)
        }
        for (var s = !0, a = 0; a < e.length; a++)
            if (console.log(6), !fb_permissions[e[a]]) {
                console.log(e[a]), s = !1;
                break
            }
        s ? (console.log(7), fb_logged = FB.getUserID(), t && (console.log(8), t())) : i && (console.log(9), i())
    })
}
function TRFB_login(e) {
    FB.login(function(t) {
        "connected" == t.status && (fb_logged = FB.getUserID(), e && e())
    }, {
        scope: "email"
    })
}
function TRFB_login_and_check_permissions(e, t) {
    FB.login(function(i) {
        "connected" == i.status && TRFB_check_permissions(e, t)
    }, {
        scope: e.join(",")
    })
}
function TRFB_logout(e) {
    FB.logout(function(t) {
        "unknown" == t.status && (fb_logged = null, fb_permissions = new Object, e && e())
    })
}
function RespCommon() {
    var e = this;
    e.month_names = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], svg4everybody(), window.location.origin || (window.location.origin = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : "")), e.base_url = location.origin.replace("https:", "") + "/", /^\/review\/([a-z0-9\-]+)$/.test(location.pathname) || TRFB_init(0x83040eda945f, function() {});
    var t = Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor") > 0;
    t && $("#svg_content_load").load(window.location.origin + "/images/responsive/svg/sprites.svg"), e.load_twitter = function() {
        !function(e, t, i) {
            var n,
                o = e.getElementsByTagName(t)[0],
                a = /^http:/.test(e.location) ? "http" : "https";
            e.getElementById(i) || (n = e.createElement(t), n.id = i, n.src = a + "://platform.twitter.com/widgets.js", o.parentNode.insertBefore(n, o))
        }(document, "script", "twitter-wjs")
    }, e.load_fb_button = function() {
        !function(e, t, i) {
            var n,
                o = e.getElementsByTagName(t)[0];
            e.getElementById(i) || (n = e.createElement(t), n.id = i, n.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=144053452313695", o.parentNode.insertBefore(n, o))
        }(document, "script", "facebook-jssdk")
    }, e.init_content_height = function() {}, e.is_element_on_screen = function(e, t) {
        t = "undefined" != typeof t ? t : 0;
        var i = $(e),
            n = $(window),
            o = n.scrollTop(),
            a = o + n.height(),
            s = i.offset().top,
            r = s + i.height() - t;
        return Math.min(r, a) >= Math.max(s, o)
    }, e.send_request = function(t, i, n, o, a) {
        if ("undefined" == typeof o)
            var o = {};
        console.log("SEND " + (o.type ? o.type : "POST") + ": " + t), $.ajax({
            url: t,
            data: i,
            dataType: o.dataType ? o.dataType : "json",
            type: o.type ? o.type : "POST",
            success: function(e) {
                n && n(e)
            },
            error: function(i) {
                e.show_request_error(t, i), a && a()
            }
        })
    }, e.user_login = function(t, i, n, o) {
        return $("#traveller_login #reminder, #traveller_login .error").remove(), $('#traveller_login input[type!="submit"]').css("border", "#d1d2d2 1px solid"), $("#traveller_login div.out").removeClass("out"), $("#form_signup").show(), $("#form_login").addClass("hidden").hide(), 0 == $("#darkscreen").length && $("body").append('<div style="width:' + $(document).width() + "px; height:" + $(document).height() + 'px;" id="darkscreen"></div>'), $(window).width() <= 600 ? ($("#traveller_login").css("top", "100px").fadeIn(500), $("body, html").animate({
            scrollTop: 50
        }, "slow")) : $("#traveller_login").css("top", Math.max($("html").scrollTop(), $("body").scrollTop()) + ($(window).height() - $("#traveller_login").height()) / 2 + "px").fadeIn(500), e.login_popup || ($("#traveller_login .close").click(function() {
            $("#traveller_login").fadeOut(500), $("#darkscreen").remove(), e.send_google_event("Header Click", "Close", $("#password_repeat_vis").is(":visible") ? "Sign Up" : "Log In")
        }), $('#traveller_login input[type!="submit"]').focus(function() {
            "password_" == $(this).attr("id").substr(0, 9) && $(this).attr("id").indexOf("vis") > 0 ? ($(this).hide(), $("#traveller_login form:visible").find("#" + $(this).attr("id").replace("vis", "hid")).show().focus().val("")) : "1" == $(this).attr("def") && $(this).attr("def", "0").css("color", "#000").val("")
        }).blur(function() {
            $.trim($(this).val()) || ("password_" == $(this).attr("id").substr(0, 9) ? ($(this).hide(), $("#traveller_login form:visible").find("#" + $(this).attr("id").replace("hid", "vis")).show()) : $(this).attr("def", "1").css("color", "#a7a8a9").val($(this).attr("deftext")))
        }), $("body").keydown(function(e) {
            27 == e.which && (e.preventDefault(), $("#traveller_login .close").click())
        }), $('#traveller_login #form_login input[type!="submit"]').keyup(function() {
            var e = $.trim($("#traveller_login #form_login #email").val()),
                t = $.trim($("#traveller_login #form_login #password_hid").val());
            e.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e) && t.length >= 6 ? $("#traveller_login #form_login #submit").addClass("active") : $("#traveller_login #form_login #submit").removeClass("active")
        }), $("#traveller_login #form_signup #grey").append('<label><input type="checkbox" id="subscribe"' + ("0" == e.get_cookie("tr_subscribe") ? "" : " checked") + ">Send me special deals to my inbox</label>"), $('#traveller_login #form_signup input[type!="submit"]').keyup(function() {
            var e = "1" == $("#traveller_login #form_signup #name").attr("def") ? "" : $.trim($("#traveller_login #form_signup #name").val()),
                t = "1" == $("#traveller_login #form_signup #email").attr("def") ? "" : $.trim($("#traveller_login #form_signup #email").val()),
                i = $.trim($("#traveller_login #form_signup #password_hid").val()),
                n = $.trim($("#traveller_login #form_signup #password_repeat_hid").val());
            e.length > 0 && t.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t) && i.length >= 6 && i == n ? $("#traveller_login #form_signup #submit").addClass("active") : $("#traveller_login #form_signup #submit").removeClass("active")
        }), $(".buttons .facebook, .buttons .facebook-in, .buttons .facebook-up").click(function() {
            e.user_facebook()
        }), $("#form_login form").submit(function() {
            e.submit_login()
        }), $("#form_login .link a:first").click(function() {
            e.password_reminder()
        }), $("#form_login .link a:last").click(function() {
            e.user_turn("signup", o)
        }), $("#form_signup form").submit(function() {
            e.submit_signup(t, i)
        }), $("#form_signup .link a").click(function() {
            e.user_turn("login", o)
        }), gapi.signin.render("signin_google", {
            callback: function(t) {
                e.user_google(t)
            },
            clientid: "399583607835.apps.googleusercontent.com",
            cookiepolicy: "single_host_origin",
            scope: "https://www.googleapis.com/auth/plus.login",
            width: "wide",
            scope: "https://www.googleapis.com/auth/userinfo.email"
        }), e.login_popup = !0), n && e.user_turn(n, o), e.login_member_saving && ($("#traveller_login #login-top div span").html(e.login_member_saving), $("#traveller_login #login-top").show(), $("#traveller_login .title").css("margin-top", "60px")), !1
    }, e.object_size = function(e) {
        var t,
            i = 0;
        for (t in e)
            e.hasOwnProperty(t) && i++;
        return i
    }, e.init_login_popup = function(t, i, n, o, a) {
        e.user_login(!1, n, o, a), a && a.texts && ($("#traveller_login .title").text(a.texts.header), a.texts.sub && 0 == $("#traveller_login .subtitle").length && $("#traveller_login .title").after('<p class="subtitle" style="margin-top:6px;line-height:14px;color:#999;font-size:12px;">' + a.texts.sub + "</p>"));
        var s = setInterval(function() {
            if ($("#traveller_login").is(":visible")) {
                var e = $("#traveller_login #traveller_success_id").html();
                e && 0 == $("#traveller_login .info1").length && (e = e.split("::"), 3 == e.length && "NaN" != parseInt(e[0]) && (clearInterval(s), t.params.traveller = {
                    id: parseInt(parseInt(e[0])),
                    facebook_id: parseInt(parseInt(e[1])),
                    google_id: parseInt(parseInt(e[2]))
                }, $("#traveller_login .close").click(), i()))
            } else
                clearInterval(s)
        }, 100)
    }, e.user_turn = function(e, t) {
        var i = "login" == e ? "in" : "up";
        return $("#traveller_login .error").hide(), $("#traveller_login #form_" + ("login" == e ? "signup" : "login")).slideUp(300, function() {
            $(".buttons .facebook-in, .buttons .facebook-up, .buttons .facebook").attr("class", "facebook-" + i), $(".buttons .google-in, .buttons .google-up, .buttons .google").attr("class", "google-" + i), $("#traveller_login #form_" + e).slideDown(400, function() {
                $("#traveller_login #form_" + e).removeClass("hidden"), $("#traveller_login .title").html("login" == e ? "Log In" : "Sign up"), t && t.texts && $("#traveller_login .title").text(t.texts.header)
            })
        }), !1
    }, e.get_cookie = function(e) {
        return document.cookie.length > 0 && (c_start = document.cookie.indexOf(e + "="), c_start != -1) ? (c_start = c_start + e.length + 1, c_end = document.cookie.indexOf(";", c_start), c_end == -1 && (c_end = document.cookie.length), unescape(document.cookie.substring(c_start, c_end))) : ""
    }, e.submit_signup = function(t, i) {
        $('#traveller_login #form_signup input[type!="submit"]').css("border", "#d1d2d2 1px solid"), $("#traveller_login .error").remove();
        var n = "1" == $("#traveller_login #form_signup #name").attr("def") ? "" : $.trim($("#traveller_login #form_signup #name").val()),
            o = "1" == $("#traveller_login #form_signup #email").attr("def") ? "" : $.trim($("#traveller_login #form_signup #email").val()),
            a = $.trim($("#traveller_login #form_signup #password_hid").val()),
            s = $.trim($("#traveller_login #form_signup #password_repeat_hid").val()),
            r = $("#traveller_login #form_signup #subscribe:checked").length,
            l = null;
        if (0 == n.length ? (l = "Please enter your name.", $("#traveller_login #form_signup #name").css("border", "Red 1px solid")) : 0 != o.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(o) ? a.length < 6 ? (l = "Enter min. 6 characters for the password.", $("#traveller_login #form_signup").find('input[id*="password_"]').css("border", "Red 1px solid")) : a != s && (l = "Passwords do not match.", $("#traveller_login #form_signup").find('input[id*="password_repeat_"]').css("border", "Red 1px solid")) : (l = "Please enter valid email address.", $("#traveller_login #form_signup #email").css("border", "Red 1px solid")), l)
            $("#traveller_login").append('<div class="error">' + l + "</div>");
        else {
            $("#traveller_login").append('<div class="error error-message">Please wait...</div>');
            var c = {
                name: n,
                email: o,
                password: a,
                subscribe: r
            };
            t && (c.redirect = t), $.ajax({
                url: "/travellers/signup",
                data: c,
                dataType: "json",
                type: "POST",
                success: function(t) {
                    $("#traveller_login .error").remove(), "OK" == t.status ? location.href.indexOf("book-now") > 0 ? location.reload() : "/review" != location.href.substr(-7) || i ? $("#traveller_login #traveller_success_id").html(t.traveller_id + "::0::0") : location.href = "/members/profile" : "repeat" == t.status ? ($("#traveller_login").append('<div class="error">' + t.message + "</div>"), $("#traveller_login #form_signup #email").css("border", "Red 1px solid"), $("#traveller_login .error").height() >= 25 && $("#traveller_login .error").css("bottom", "61px")) : e.error()
                },
                error: function() {
                    e.error()
                }
            })
        }
        return !1
    }, e.submit_login = function() {
        $('#traveller_login #form_login input[type!="submit"]').css("border", "#d1d2d2 1px solid"), $("#traveller_login .error").remove();
        var t = "1" == $("#traveller_login #form_login #email").attr("def") ? "" : $.trim($("#traveller_login #form_login #email").val()),
            i = $.trim($("#traveller_login #form_login #password_hid").val()),
            n = null;
        if (0 != t.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t) ? i.length < 6 && (n = "Enter min. 6 characters for the password.", $("#traveller_login #form_login").find('input[id*="password_"]').css("border", "Red 1px solid")) : (n = "Please enter valid email address.", $("#traveller_login #form_login #email").css("border", "Red 1px solid")), n)
            $("#traveller_login").append('<div class="error">' + n + "</div>");
        else {
            $("#traveller_login").append('<div class="error error-message">Please wait...</div>');
            var o = {
                email: t,
                password: i
            };
            $.ajax({
                url: "/travellers/login",
                data: o,
                dataType: "json",
                type: "POST",
                success: function(t) {
                    $("#traveller_login .error").remove(), "OK" == t.status ? $("#traveller_login #traveller_success_id").html(t.id + "::" + t.fb + "::" + t.gl) : "wrong" == t.status ? $("#traveller_login").append('<div class="error">Wrong email and/or password.</div>') : e.error()
                },
                error: function() {
                    e.error()
                }
            })
        }
        return !1
    }, e.shuffle = function(e) {
        for (var t, i, n = e.length; n; t = Math.floor(Math.random() * n), i = e[--n], e[n] = e[t], e[t] = i)
            ;
        return e
    }, e.isScrolledIntoView = function(e) {
        var t = $(e),
            i = $(window).scrollTop() + $(window).height(),
            n = t.offset().top;
        return n <= i
    }, e.user_facebook = function(t) {
        return /iPhone|iPad|iPod/i.test(navigator.userAgent) && /Mozilla/i.test(navigator.userAgent) ? (window.location.href = "https://www.facebook.com/v2.8/dialog/oauth?client_id=144053452313695&redirect_uri=https://www.tourradar.com/travellers/social_fb_ios_chrome_redirect&scope=public_profile,email&response_type=code", !1) : void TRFB_check_logging_and_permissions(["email"], function() {
            e.user_facebook_process(t)
        }, function() {
            TRFB_login_and_check_permissions(["email"], function() {
                e.user_facebook_process(t)
            })
        })
    }, e.sendAjaxSocial = function(t) {
        var i = t;
        $.ajax({
            url: "/travellers/social",
            data: t,
            dataType: "json",
            type: "POST",
            success: function(t) {
                if ("OK" == t.status) {
                    var n = {};
                    if (location.search.substr(1).split("&").forEach(function(e) {
                        var t = e.split("=");
                        n[t[0]] = t[1]
                    }), "undefined" != typeof n.red) {
                        var o = n.red;
                        window.location.href = decodeURIComponent(o)
                    } else
                        window.location.href = "/members/profile"
                } else
                    "email_false" == t.status ? e.askEmailPopup(i) : "blocked" == t.status ? (alert("Your account has been blocked."), location.reload()) : e.error()
            },
            error: function() {
                e.error()
            }
        })
    }, e.askEmailPopup = function(t) {
        $.fancybox({
            content: '<div class="ask-email"><div class="tit">Please enter your email to finish registration</div><div class="form"><input type="email" placeholder="Enter your Email"><div class="but">Continue</div></div></div>',
            hideOnOverlayClick: !1,
            hideOnContentClick: !1,
            enableEscapeButton: !1,
            showCloseButton: !1,
            padding: 0,
            onComplete: function() {
                $(".ask-email .but").click(function() {
                    if (!$(this).hasClass("wait")) {
                        $(this).addClass("wait");
                        var i = $.trim($(".ask-email input").val());
                        if ($(".ask-email .form .error").remove(), !i || !/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i))
                            return $(".ask-email .form input").after('<div class="error">Please enter valid email address.</div>'), void $(this).removeClass("wait");
                        t.email = i, $.fancybox.close(), e.sendAjaxSocial(t)
                    }
                })
            }
        })
    }, e.user_facebook_process = function(t) {
        if ("RespRegistration" == t) {
            var i = $("#subscribe:checked").length;
            if ($("#guide_sign_in").length > 0) {
                $("#message-sign-in").text("");
                var n = $("#g_oper").val(),
                    o = null;
                if (0 == n.length && (o = "Please choose your operator."), o)
                    return $("#message-sign-in").text(o), $("#guide_sign_in #g_oper").addClass("red-border"), !1
            }
            $(".reg-page .buttons").html('<p align="center" style="margin:0; padding-top:10px"><img src="/images/ajax_loader/fbstyle.gif" /></p>'), FB.api("/me", function(t) {
                var o = {
                    network: "facebook",
                    id: t.id,
                    name: t.name,
                    first_name: t.first_name,
                    email: t.email
                };
                t.location && t.location.name && (o.location = t.location.name), t.locale && (o.language = t.locale.substr(0, 2)), t.gender && (o.gender = t.gender), $("#guide_sign_in").length > 0 && (o.type = "guide", o.operator_id = n), o.subscribe = i, e.sendAjaxSocial(o)
            })
        } else {
            var i = $("#traveller_login #form_signup #subscribe:checked").length;
            if ($("#signup_guide_popup:visible").length > 0) {
                $("#signup_guide_popup .error").remove();
                var n = $("#g_oper").val(),
                    o = null;
                if (0 == n.length && (o = "Please choose your operator.", $("#signup_guide_popup #g_oper_chosen .chosen-single").css("border", "Red 1px solid")), o)
                    return $("#signup_guide_popup").append('<div class="error">' + o + "</div>"), !1
            }
            $("#traveller_login .buttons, #signup_guide_popup .buttons").html('<p align="center" style="margin:0; padding-top:10px"><img src="/images/ajax_loader/fbstyle.gif" /></p>'), FB.api("/me", function(t) {
                var o = {
                    network: "facebook",
                    id: t.id,
                    name: t.name,
                    first_name: t.first_name,
                    email: t.email
                };
                t.location && t.location.name && (o.location = t.location.name), t.locale && (o.language = t.locale.substr(0, 2)), t.gender && (o.gender = t.gender), $("#signup_guide_popup:visible").length > 0 && (o.type = "guide", o.operator_id = n), o.subscribe = i, $.ajax({
                    url: "/travellers/social",
                    data: o,
                    dataType: "json",
                    type: "POST",
                    success: function(t) {
                        "OK" == t.status ? $("#traveller_login #traveller_success_id").html(t.id + "::" + t.fb + "::" + t.gl) : "blocked" == t.status ? (alert("Your account has been blocked."), location.reload()) : e.error()
                    },
                    error: function() {
                        e.error()
                    }
                })
            })
        }
    }, e.user_google = function(t, i) {
        t["g-oauth-window"] && t.code && e.user_google_process(t.code, i)
    }, e.user_google_process = function(t, i) {
        if ("RespRegistration" == i) {
            var n = $("#subscribe:checked").length;
            if ($("#guide_sign_in").length > 0) {
                $("#message-sign-in").text("");
                var o = $("#g_oper").val(),
                    a = null;
                if (0 == o.length && (a = "Please choose your operator."), a)
                    return $("#message-sign-in").text(a), $("#guide_sign_in #g_oper").addClass("red-border"), !1
            }
            $(".reg-page .buttons").html('<p align="center" style="margin:0; padding-top:10px"><img src="/images/ajax_loader/fbstyle.gif" /></p>');
            var s = {
                network: "google",
                code: t
            };
            $("#guide_sign_in").length > 0 && (s.type = "guide", s.operator_id = o, s.subscribe = n), $.ajax({
                url: "/travellers/social",
                data: s,
                dataType: "json",
                type: "POST",
                success: function(t) {
                    if ("OK" == t.status) {
                        var i = {};
                        if (location.search.substr(1).split("&").forEach(function(e) {
                            var t = e.split("=");
                            i[t[0]] = t[1]
                        }), "undefined" != typeof i.red) {
                            var n = i.red;
                            window.location.href = decodeURIComponent(n)
                        } else
                            window.location.href = "/members/profile"
                    } else
                        "blocked" == t.status ? (alert("Your account has been blocked."), location.reload()) : e.error()
                },
                error: function() {
                    e.error()
                }
            })
        } else {
            var n = $("#traveller_login #form_signup #subscribe:checked").length;
            if ($("#signup_guide_popup:visible").length > 0) {
                $("#signup_guide_popup .error").remove();
                var o = $("#g_oper").val(),
                    a = null;
                if (0 == o.length && (a = "Please choose your operator.", $("#signup_guide_popup #g_oper_chosen .chosen-single").css("border", "Red 1px solid")), a)
                    return $("#signup_guide_popup").append('<div class="error">' + a + "</div>"), !1
            }
            $("#traveller_login .buttons, #signup_guide_popup .buttons").html('<p align="center" style="margin:0; padding-top:10px"><img src="/images/ajax_loader/fbstyle.gif" /></p>');
            var s = {
                network: "google",
                code: t,
                subscribe: n
            };
            $("#signup_guide_popup:visible").length > 0 && (s.type = "guide", s.operator_id = o), $.ajax({
                url: "/travellers/social",
                data: s,
                dataType: "json",
                type: "POST",
                success: function(t) {
                    "OK" == t.status ? $("#traveller_login #traveller_success_id").html(t.id + "::" + t.fb + "::" + t.gl) : "blocked" == t.status ? (alert("Your account has been blocked."), location.reload()) : e.error()
                },
                error: function() {
                    e.error()
                }
            })
        }
    }, e.password_reminder = function() {
        return $('#traveller_login div[class!="close"]').addClass("out"), $("#traveller_login").append("<div id='reminder'><p class='info1'>Enter your email to the field below to reset your password.</p><form class='clearfix' onsubmit='return false'><input id='rem_email' value='Email' def='1' deftext='Email' /><input class='button button-green' id='rem_submit' type='submit' value='Reset password' /></form><p class='info2'>If it takes more then 5 minutes please check your junk mail</p><div class='link'><div>&nbsp;</div><div>Already have an account? <a href='#' onclick='return false' id='signin-repeat'>Log In</a></div></div>"), $("#reminder form").submit(function() {
            e.password_reminder_process()
        }), $("#traveller_login #rem_email").focus(function() {
            "1" == $(this).attr("def") && $(this).attr("def", "0").css("color", "#000").val("")
        }).blur(function() {
            $.trim($(this).val()) || $(this).attr("def", "1").css("color", "#a7a8a9").val($(this).attr("deftext"))
        }).keyup(function() {
            var e = "1" == $(this).attr("def") ? "" : $.trim($(this).val());
            e.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e) ? $("#traveller_login #rem_submit").addClass("active") : $("#traveller_login #rem_submit").removeClass("active")
        }), $("#signin-repeat").click(function() {
            $("#darkscreen").remove(), e.user_login()
        }), !1
    }, e.password_reminder_process = function() {
        $("#traveller_login #rem_email").css("border", "#d1d2d2 1px solid"), $("#traveller_login .error").remove(), $("#traveller_login").append('<div class="error error-message">Please wait...</div>');
        var t = "1" == $("#traveller_login #rem_email").attr("def") ? "" : $.trim($("#traveller_login #rem_email").val());
        return 0 != t.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t) ? $.ajax({
            url: "/travellers/remind_password",
            data: {
                email: t
            },
            dataType: "json",
            type: "POST",
            success: function(t) {
                $("#traveller_login .error").remove(), "OK" == t.status ? ($('#traveller_login div[class!="close"]').addClass("out"), $("#traveller_login").append("<div class='reminder_form'><h2>We've sent you a reset password email</h2><p class='info1'>Please, check your email and click the link to reset your password</p><p class='info2'>If it takes more then 5 minutes please check your junk mail</p><div align='center'><input class='button button-green' id='closebutton' type='button' value='Close this window' /></div></div>"), $("#closebutton").click(function() {
                    $("#traveller_login .close").click(), $("#reminder, .reminder_form").remove(), $("#traveller_login .out").removeClass("out")
                })) : "wrong" == t.status ? ($("#traveller_login").append('<div class="error">This email address is not registered in our system.</div>'), $("#traveller_login #form_signup #email").css("border", "Red 1px solid")) : e.error()
            },
            error: function() {
                e.error()
            }
        }) : ($("#traveller_login .error").remove(), $("#traveller_login").append('<div class="error">Please enter valid email address.</div>'), $("#traveller_login #rem_email").css("border", "Red 1px solid")), !1
    }, e.show_error_message = function(e, t, i, n) {
        $("#content").append('<a id="payment_popup_link" href="#payment_popup"></a><div class="hidden"><div id="payment_popup"></div></div>'), $("#payment_popup").html(e + (i ? "" : '<p align="center" style="margin-top:20px"><input type="button" class="button button-grey" value="Close" /></p>')), $("#payment_popup_link").fancybox({
            width: 400,
            onComplete: function() {
                n ? $("#payment_popup .button").click(function() {
                    t()
                }) : $("#payment_popup .button").click(function() {
                    $.fancybox.close()
                })
            },
            onClosed: function() {
                $("#payment_popup_link").remove(), $("#payment_popup").parent().remove(), t && t()
            }
        }).click()
    }, e.send_google_event = function(e, t, i, n) {
        var o = {
            event: "gaEvent",
            eventCategory: e,
            eventAction: t,
            eventLabel: i ? i : ""
        };
        if (n)
            for (var a in n)
                o[a] = n[a];
        "undefined" != typeof ga ? (delete o.event, o.hitType = "event", ga("send", o)) : "undefined" != typeof dataLayer && dataLayer.push(o), console.log("EVENT: " + [o.eventCategory, o.eventAction, o.eventLabel].join("; ") + ("nonInteraction" in o ? "; nonInteraction:" + o.nonInteraction : ""));
        for (var s = [e, t, i], a = 0; a < s.length; a++)
            s[a] && (s[a] = s[a].toLowerCase().replace(/[^0-9a-z]/g, " "), s[a] = $.trim(s[a]).replace(/\s+/g, "-"));
        var s = s.join("/");
        "/" == s.substr(s.length - 1) && (s = s.substr(0, s.length - 1))
    }, e.optimizely_event = function(e) {
        window.optimizely = window.optimizely || [], window.optimizely.push(["trackEvent", e])
    }, e.send_google_pageview = function(e, t, i) {
        dataLayer.push({
            event: "gaPageview",
            eventCategory: e,
            eventAction: t,
            eventLabel: i ? i : ""
        })
    }, e.social_buttons_init = function(t, i, n, o) {
        $(".tour .soc-buttons .cube").click(function() {
            var n = "https://" + location.host + "/t/" + t,
                a = $(this).attr("class").split(" ")[1],
                s = encodeURIComponent(n);
            switch (a) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + s, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var r = "I'm thinking about going on this trip through";
                $.each(i, function(e, t) {
                    0 == e ? r = r + " " + t : 2 == e || 2 == i.length && 1 == e ? r = r + " and " + t : 1 == e && (r = r + ", " + t)
                }), r += ". Should I do it?", popUp = window.open("https://twitter.com/share?url=" + s + "&text=" + r + "&hashtags=TourRadar", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                popUp = window.open("https://plus.google.com/share?url=" + s, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                window.location = "whatsapp://send?text=" + encodeURIComponent("Check out this " + $(".tour h1.tour-name").text() + " tour I found. " + n);
                break;
            case "send":
                e.send_show_popup(t, o)
            }
        })
    }, e.send_show_popup = function(e, t) {
        $("#send_popup .bttn a.change").unbind("click").click(function() {
            var e = $(this).attr("id");
            $("#send_popup ." + e + ":visible").length > 0 ? ($("#send_popup ." + e).hide(), $(this).removeClass("blue").addClass("w-blue")) : ($("#send_popup .bttn .but").removeClass("blue").addClass("w-blue"), $(this).removeClass("w-blue").addClass("blue"), "yourself" == e ? $("#send_popup .friend").hide() : $("#send_popup .yourself").hide(), $("#send_popup ." + e).show())
        }), $("#send_popup_link").fancybox({
            padding: 0,
            margin: 0,
            onComplete: function() {
                function i(e) {
                    var t = $("#send_friend_email").val();
                    if (!(t.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)))
                        return e && alert("Please enter valid friend email"), !1;
                    email_send_fri = t;
                    var i = $("#send_youremail").val();
                    if (!(i.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i)))
                        return e && alert("Please enter valid your email"), !1;
                    if (email_send_you = i, $("#send_name").val().length < 0)
                        return e && alert("Please enter your name"), !1;
                    if ($("#send_text").val().length < 0)
                        return e && alert("Please enter your message"), !1;
                    var n = new Object;
                    return n.email_send_fri = email_send_fri, n.email_send_you = email_send_you, n.send_name = $.trim($("#send_name").val()), n.send_text = $.trim($("#send_text").val()), n
                }
                $("#send_popup #send_popup_yourself").unbind("click").click(function() {
                    var i = $("#send_yourself_email").val();
                    if (i.length < 1 || !/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i))
                        return alert("Please enter valid email"), !1;
                    $("#send_popup #send_popup_yourself .title").text("Please wait...");
                    var n = new Date,
                        o = n.getDate(),
                        a = n.getMonth() + 1,
                        s = n.getFullYear(),
                        r = o + "/" + a + "/" + s,
                        l = new Date,
                        c = l.getHours(),
                        d = l.getMinutes();
                    d < 10 && (d = "0" + d);
                    var u = c + ":" + d;
                    $.ajax({
                        url: "/serp/responsive_details_tab",
                        data: {
                            tab: "send_yourself",
                            id: e,
                            email: i,
                            user_date: r,
                            user_time: u,
                            description: t ? t : ""
                        },
                        dataType: "json",
                        type: "POST",
                        success: function(e) {
                            "OK" == e.status && ($("#send_popup #send_popup_yourself").text("Done!"), setTimeout(function() {
                                $.fancybox.close(), $("#send_popup #send_popup_yourself").text("Send email")
                            }, 1e3))
                        }
                    })
                }), $("#send_popup #send_popup_friend").unbind("click").click(function() {
                    return !!i(!0) && (checked_data = i(!0), $("#send_popup #send_popup_friend .title").text("Please wait..."), void $.ajax({
                            url: "/serp/responsive_details_tab",
                            data: {
                                tab: "send",
                                id: e,
                                email: checked_data.email_send_fri,
                                email_you: checked_data.email_send_you,
                                message: checked_data.send_text,
                                name: checked_data.send_name,
                                description: t
                            },
                            dataType: "json",
                            type: "POST",
                            success: function(e) {
                                "OK" == e.status && ($("#send_popup #send_popup_friend").text("Done!"), setTimeout(function() {
                                    $.fancybox.close(), $("#send_popup #send_popup_friend").text("Send email")
                                }, 1e3))
                            }
                        }))
                })
            }
        }).click()
    }, e.check_mobile = function() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
    }, e.error = function(e) {
        console.log("ERROR! Try again later.")
    }, e.query_string = function() {
        for (var e = {}, t = window.location.search.substring(1), i = t.split("&"), n = 0; n < i.length; n++) {
            var o = i[n].split("=");
            if ("undefined" == typeof e[o[0]])
                e[o[0]] = decodeURIComponent(o[1]);
            else if ("string" == typeof e[o[0]]) {
                var a = [e[o[0]], decodeURIComponent(o[1])];
                e[o[0]] = a
            } else
                e[o[0]].push(decodeURIComponent(o[1]))
        }
        return e
    }
}
function RespHF() {
    var e = this;
    e.params = new Object, e.common = new RespCommon, e.init = function() {
        e.common.init_content_height(), e.newsletter_top_banner.initiate(), e.olark_loaded_function(), e.init_search_bar(), e.init_newsletter(), e.init_pdf_popup(), e.init_video_file(), e.init_header_new(), e.init_top_banner(), e.init_recently_viewed_tours(), e.init_why_tourradar_box(), e.callback_popup.init(), e.common.user_turn("signup"),
        e.init_lazy()
    }, e.init_lazy = function() {
        setTimeout(function() {
            $("img.lazy, .img.lazy").unveil()
        }, 10)
    }, e.init_recently_viewed_tours = function() {
        if ($("#footer .block-rv_tours").length > 0) {
            var t = {
                rv_tours: $("#footer.rv_tours").attr("data-rv-tours"),
                except_tour: $("#footer.rv_tours").attr("data-current-tour-id")
            };
            $.ajax({
                url: "/serp/recently_viewed_tours_ajax",
                data: t,
                dataType: "json",
                type: "POST",
                success: function(t) {
                    "OK" == t.status ? ($("#footer .block-rv_tours .op-tours").html(t.html), e.init_lazy()) : $("#footer.rv_tours").remove()
                },
                error: function() {
                    $("#footer.rv_tours").remove()
                }
            })
        }
    }, e.init_top_banner = function() {
        if ($("#row-banner.boxing-day").click(function() {
            window.location = "/boxing-day"
        }), $("#header-new #row-banner.for_referred .btext.a4 .cls").click(function() {
            $("#header-new #row-banner.for_referred").hide("fast", function() {
                $("#header-new #row-banner.for_referred").hasClass("fifth") ? document.cookie = "ref_showed=1; max-age=31536000; path=/" : document.cookie = "ref_showed=2; max-age=31536000; path=/", $(".have-banner").removeClass("have-banner"), $(this).remove()
            })
        }), $("#header-new #row-banner").length > 0) {
            var t = parseInt($("#header-new #row-banner .btext.a4").attr("data-valid"));
            if (t > 0)
                var i = setInterval(function() {
                    if (t--, t > 0)
                        if (t > 86400) {
                            var e = Math.floor(t / 86400),
                                n = Math.floor((t - 86400 * e) / 3600),
                                o = Math.floor((t - 86400 * e - 3600 * n) / 60),
                                a = t - 86400 * e - 3600 * n - 60 * o;
                            $("#header-new #row-banner .btext.a4").removeClass("hidden"), $("#header-new #row-banner .btext.a4 span").html(e + "d " + n + "h " + o + "m " + a + "s")
                        } else {
                            var n = Math.floor(t / 3600),
                                o = Math.floor((t - 3600 * n) / 60),
                                a = t - 3600 * n - 60 * o;
                            $("#header-new #row-banner .btext.a4").removeClass("hidden"), $("#header-new #row-banner .btext.a4 span").html(n + "h " + o + "m " + a + "s")
                        }
                    else
                        $("#header-new #row-banner .btext.a4").removeClass("hidden").html("Expired"), clearInterval(i)
                }, 1e3);
            $("#header-new #row-banner .btext.a2.a-promocode").dblclick(function() {
                e.select_text("enter-lmd-code")
            });
            var n = !1;
            if ($("#header-new #row-banner #enter-lmd-code").data("html", "true"), $("#header-new #row-banner #enter-lmd-code").mouseenter(function() {
                $(this).popover("show"), n || (e.common.send_google_event("Experiment", "Goal", "Version " + $(this).parent().parent().attr("data-version") + " - How it Works"), n = !0)
            }).mouseleave(function() {
                var e = setInterval(function() {
                    0 == $("#header-new #row-banner #enter-lmd-code:hover").length && (clearInterval(e), $("#header-new #row-banner #enter-lmd-code").popover("hide"))
                }, 1500)
            }), $(".tour .line-lmd a").mouseenter(function() {
                $(this).popover("show")
            }).mouseleave(function() {
                var e = ".tour .line-lmd",
                    t = setInterval(function() {
                        0 == $(e + ":hover").length && (clearInterval(t), $(".tour .line-lmd a").popover("hide"))
                    }, 1500)
            }), $(".popover a.terms").live("click", function() {
                $.fancybox({
                    href: $(this).attr("href")
                })
            }), $("#sem-banner-unlock").length > 0) {
                var o = $("#header-new").data("b");
                $("#header-new #row-banner .btext a.multi, #row-banner.sem-banner .btext.a2.a-promocode.v1").click(function() {
                    $.fancybox({
                        padding: 0,
                        href: "#sem-banner-unlock",
                        onComplete: function() {
                            $("#sem-banner-unlock img.lazy").each(function() {
                                $(this).attr("src", $(this).attr("data-src")).removeClass("lazy")
                            }), setTimeout(function() {
                                $("#sem-banner-unlock input").focus()
                            }, 100), e.common.send_google_event("Sale Popup", "Show", o)
                        },
                        onClosed: function() {
                            e.common.send_google_event("Sale Popup", "Close", o)
                        }
                    })
                }), $("#row-banner").hasClass("open-b") && $("#row-banner .btext a.multi").click(), $("#sem-banner-unlock input").on("keyup", function(e) {
                    var t = e.keyCode ? e.keyCode : e.which;
                    13 == t && $("#sem-banner-unlock .t6 a:not(.grey)").click()
                }), $("#sem-banner-unlock .t6 a:not(.grey)").live("click", function() {
                    var t = $.trim($("#sem-banner-unlock .t5 input").val());
                    t && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t) ? ($("#sem-banner-unlock .t7").addClass("end"), $("#sem-banner-unlock .t6 .title").html('<img src="/images/ajax_loader/small.gif" />'), $.ajax({
                        url: "/welcome/add_email_banner",
                        data: {
                            email: t,
                            banner: o
                        },
                        dataType: "json",
                        type: "POST",
                        success: function(t) {
                            "OK" == t.status ? ($("#sem-banner-unlock img.lazy").each(function() {
                                $(this).attr("src", $(this).attr("data-src")).removeClass("lazy")
                            }), $("#sem-banner-unlock .t5").remove(), $("#sem-banner-unlock .t2").html("Congratulations!<br>Your Promo Code has been unlocked").addClass("pad"), t.code ? ($("#sem-banner-unlock .t3 .c2").html(t.code).addClass("n-line"), $("#row-banner.sem-banner .btext.a2.a-promocode.v2").text(t.code), $("#row-banner.sem-banner .btext.a2.a-promocode.v2").data("content") && $("#row-banner.sem-banner .btext.a2.a-promocode.v2").data("content", $("#row-banner.sem-banner .btext.a2.a-promocode.v2").data("content").replace("TG4UMY", t.code)), $("#row-banner.sem-banner .btext.a2.a-promocode.v2").data("title") && $("#row-banner.sem-banner .btext.a2.a-promocode.v2").data("title", $("#row-banner.sem-banner .btext.a2.a-promocode.v2").data("title").replace("TG4UMY", t.code))) : "wanderlust-april-2017" == o ? $("#sem-banner-unlock .t3 .c2").html("VFRXE").addClass("n-line") : $("#sem-banner-unlock .t3 .c2").html("NVFL4").addClass("n-line"), $("#row-banner.sem-banner .btext.a2.a-promocode").toggleClass("hidden"), $("#row-banner.sem-banner .btext.a2.p-text").toggleClass("hidden"), $("#sem-banner-unlock .t3").addClass("un").after('<dic style="padding-bottom:10px;font-weight:bold">What\'s next</div>'), $("#sem-banner-unlock .t4").html("Find your tour, click the Book Now or Instant Book button, redeem this Promo Code on the check out page and apply it to get your additional discount."), $("#sem-banner-unlock .t6 a").addClass("grey"), $("#sem-banner-unlock .t6 .title").text("Keep browsing"), $("#sem-banner-unlock .t7").addClass("end").text("Terms & Conditions").click(function() {
                                $.fancybox({
                                    href: "#terms-banner"
                                })
                            }), e.common.send_google_event("Sale Popup", "Unlock", o), _fbq.push(["track", "CompleteRegistration"])) : ($("#sem-banner-unlock .t6").removeClass("end"), $("#sem-banner-unlock .t6 .title").html("Unlock&nbsp;Promo&nbsp;Code&nbsp;&raquo;"), e.common.error())
                        },
                        error: function() {
                            $("#sem-banner-unlock .t6").removeClass("end"), $("#sem-banner-unlock .t6 .title").html("Unlock&nbsp;Promo&nbsp;Code&nbsp;&raquo;"), e.common.error()
                        }
                    })) : alert("Please enter valid email address")
                }), $("#sem-banner-unlock .t7:not(.end), #sem-banner-unlock .t6 a.grey").live("click", function() {
                    $.fancybox.close()
                })
            }
            $(window).scroll(function() {
                e.fly_banner()
            }), e.fly_banner()
        }
    }, e.fly_banner = function() {
        $(window).scrollTop() > 0 && $(window).width() > 767 ? ($("#header-new #row-banner-blank").height($("#header-new #row-banner").outerHeight()), $("#header-new #row-banner").hasClass("fly") || ($("#header-new #row-banner").addClass("fly"), $("#header-new #row-banner-blank").removeClass("hidden"), $("body.have-banner").addClass("banner-fly"))) : $("#header-new #row-banner").hasClass("fly") && ($("#header-new #row-banner").removeClass("fly"), $("#header-new #row-banner-blank").addClass("hidden"), $("body.have-banner").removeClass("banner-fly"))
    }, e.select_text = function(e) {
        var t,
            i,
            n = document,
            o = n.getElementById(e);
        n.body.createTextRange ? (t = document.body.createTextRange(), t.moveToElementText(o), t.select()) : window.getSelection && (i = window.getSelection(), t = document.createRange(), t.selectNodeContents(o), i.removeAllRanges(), i.addRange(t))
    }, e.init_video_file = function() {
        var e = "auto",
            t = "auto";
        if ($(window).width() >= 1300 && $(window).height() >= 740)
            var e = 1280,
                t = 720;
        else if ($(window).width() >= 873 && $(window).height() >= 460)
            var e = 853,
                t = 480;
        else if ($(window).width() >= 660 && $(window).height() >= 380)
            var e = 640,
                t = 360;
        else if ($(window).width() >= 580 && $(window).height() >= 335)
            var e = 560,
                t = 315;
        else if ($(window).width() >= 340 && $(window).height() >= 200)
            var e = 320,
                t = 180;
        else
            var e = 267,
                t = 150;
        $("#why-no-fees .right-part #watch").click(function() {
            return $.fancybox({
                padding: 0,
                autoScale: !1,
                transitionIn: "none",
                transitionOut: "none",
                width: e,
                height: t,
                href: $(this).attr("video"),
                type: "iframe"
            }), !1
        })
    }, e.init_search_bar = function() {
        $("#header-new #row-2 #block-0").click(function() {
            $(this).hasClass("active") ? ($(this).removeClass("active"), $("#mobile_menu").hide()) : ($(this).addClass("active"), $("#mobile_menu").height($("#content").height()).width($("#content").width()).css("z-index", 12).show(), $("body, html").animate({
                scrollTop: 0
            }, "slow"), "undefined" == typeof $(this).attr("data-loaded") && $.ajax({
                url: "/welcome/load_mobile_menu",
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($(this).attr("data-loaded", !0), $("#mobile_menu").html(e.html))
                },
                error: function() {
                    e.common.error()
                }
            }))
        }), $("body").on("click", "#mobile_menu ul li.title", function() {
            if ($(this).hasClass("theme")) {
                var e = $(this).attr("id").substr(6);
                $("#dtheme-" + e).is(":visible") ? $("#dtheme-" + e).hide() : ($("#mobile_menu ul li.details").hide(), $("#mobile_menu ul li.title").removeClass("active"), $("#dtheme-" + e).show())
            } else if ("undefined" != typeof $(this).attr("id")) {
                var e = $(this).attr("id").substr(6);
                $("#dcont-" + e).is(":visible") ? $("#dcont-" + e).hide() : ($("#mobile_menu ul li.details").hide(), $("#mobile_menu ul li.title").removeClass("active"), $("#dcont-" + e).show())
            }
        })
    }, e.search_format_item = function(t, i, n) {
        0 == i && (e.params.search_type = null);
        var o = "",
            a = "c" == t[1] ? "operator" : "d" == t[1] ? "tour" : "destination";
        return e.params.search_type ? e.params.search_type != a && (e.params.search_type = a, o = "search_block search_block_" + a) : (e.params.search_type = a, o = "search_block search_block_" + a + " search_block_noline"), t[0] + (o ? '<div class="' + o + '">' + ("c" == t[1] ? "Operators" : "d" == t[1] ? "Tours" : "Destinations") + "</div>" : "")
    }, e.search_select_item = function(t) {
        switch (t.extra[0]) {
        case "a":
        case "b":
        case "e":
            location.href = e.common.base_url + "d/" + t.extra[2] + "?from=search";
            break;
        case "c":
            location.href = e.common.base_url + t.extra[2] + "?from=search";
            break;
        case "d":
            location.href = e.common.base_url + "t/" + t.extra[1] + "?from=search"
        }
    }, e.init_newsletter = function() {
        $("#newslettersign").click(function() {
            $("#newsletteremail").css("border", "2px inset"), $("#errormessage .error").remove();
            var t = $.trim($("#newsletteremail").val());
            0 != t.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t) ? (e.common.send_google_event("Newsletter - Signup", "SignedUp"), $.ajax({
                url: "/welcome/newsletter_check",
                data: {
                    email: t
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($(".block-newsletter .inputfield").css("display", "none"), $("#errormessage").append('<div class="error success">Thank you for signing up!<br />You\'ll receive a welcome email soon.</div>'))
                }
            })) : ($("#errormessage").append('<div class="error">Please enter valid email address.</div>'), $("#newsletteremail").css("border", "#FF5505 2px inset"))
        })
    }, e.init_pdf_popup_ajax = function(e, t) {
        if (window.location.href.indexOf("?popup=1") != -1 && (e.force = 1), "1" == e.force || "1" == e[3])
            var i = !1;
        else
            var i = !0;
        if (document.cookie.indexOf("pdf-v3-17" + e[0].substr(5)) > 0)
            var n = "shown";
        else
            var n = "first";
        $.ajax({
            url: "/welcome/popup_init/" + e[0].substr(5) + "/v3/" + n + "?nc=" + Math.ceil(1e4 * Math.random()),
            dataType: "json",
            success: function(n) {
                if ("OK" == n.status) {
                    if ($("#pdf_v3_popup").html(n.html), 17 == e[0].substr(5) && "shown" == n.shown)
                        $("#pdf_v3_link").fancybox({
                            autoDimensions: !0,
                            width: 322,
                            height: "auto",
                            scrolling: "no",
                            padding: 0,
                            showCloseButton: i,
                            onClosed: function() {}
                        });
                    else {
                        $.ajax({
                            url: "/welcome/popup_remember"
                        });
                        setTimeout(function() {
                            $("#pdf_v3_link").fancybox({
                                autoDimensions: !0,
                                width: 322,
                                height: "auto",
                                scrolling: "no",
                                padding: 0,
                                showCloseButton: i,
                                onClosed: function() {}
                            }).click()
                        }, 1500)
                    }
                    $("#pdf_v3_popup form a.multi-line-button").click(function() {
                        $("#pdf_v3_popup #submit").click()
                    }), $("#pdf_v3_popup form").submit(function() {
                        if (null !== document.getElementById("emailp")) {
                            var t = $.trim($("#pdf_v3_popup #emailp").val());
                            if (!t || !/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t))
                                return alert("Please enter valid email address"), !1
                        } else {
                            if (!($("#button_action").val().length > 0))
                                return $.fancybox.close(), !1;
                            location.href = $("#button_action").val()
                        }
                        $.ajax({
                            url: "/welcome/popup_init/" + e[0].substr(5) + "/v3",
                            dataType: "json",
                            type: "POST",
                            data: {
                                email: t,
                                tick: $("#pdf_v3_popup #checkbox").attr("checked") ? 1 : 0
                            },
                            success: function(e) {
                                "OK" == e.status && ($(".popups_content .success_text").length > 0 ? ($(".popups_content .innerblock").hide(), $(".popups_content .success_text").show(), setTimeout(function() {
                                    $.fancybox.close()
                                }, 3e3)) : $.fancybox.close())
                            }
                        })
                    }), t && t()
                }
            }
        })
    }, e.init_pdf_popup = function() {
        $("#pdf_v3 div.popup_").each(function(t, i) {
            var n = $(this).attr("id").split(" "),
                o = n[0].substr(5),
                a = e.common.get_cookie("p_" + o + "_count");
            if (a ? parseInt(a) < parseInt($(".popup_.pnum_" + o).attr("data-count")) && (a = parseInt(a) + 1, document.cookie = "p_" + o + "_count=" + a + "; max-age=31536000; path=/") : (a = 1, document.cookie = "p_" + o + "_count=1; max-age=31536000; path=/"), a == parseInt($(".popup_.pnum_" + o).attr("data-count"))) {
                if (2 == n[1])
                    if (n[2].indexOf("|") !== -1)
                        for (var s = n[2].split("|"), r = 0; r < s.length; ++r)
                            window.location.href.indexOf(s[r]) != -1 && e.init_pdf_popup_ajax(n);
                    else
                        window.location.href.indexOf(n[2]) != -1 && e.init_pdf_popup_ajax(n);
                if (6 == n[1] && (window["IntPopup" + t] = setInterval(function() {
                    if (n[2].indexOf("|") !== -1)
                        for (var i = n[2].split("|"), o = 0; o < i.length; ++o)
                            window.location.href.indexOf(i[o]) != -1 && (clearInterval(window["IntPopup" + t]), e.init_pdf_popup_ajax(n));
                    else
                        window.location.href.indexOf(n[2]) != -1 && (clearInterval(window["IntPopup" + t]), e.init_pdf_popup_ajax(n))
                }, 1e3)), 3 == n[1])
                    if (n[2].indexOf("|") !== -1)
                        for (var s = n[2].split("|"), r = 0; r < s.length; ++r)
                            window.location.pathname != "/" + s[r] && window.location.pathname != "/" + s[r] + "?popup=1" || e.init_pdf_popup_ajax(n);
                    else
                        window.location.pathname != "/" + n[2] && window.location.pathname != "/" + n[2] + "?popup=1" || e.init_pdf_popup_ajax(n);
                if (4 == n[1] && (window.location.href.indexOf("/t/") != -1 && $('dd[itemprop="brand"] a').length > 0 && $('dd[itemprop="brand"] a').html() == n[2] || window.location.href.indexOf(n[2].toLowerCase()) != -1 && $('span[itemprop="name"]').length > 0 && $('span[itemprop="name"]').html() == n[2]) && e.init_pdf_popup_ajax(n), 5 == n[1])
                    if (n[2].indexOf("|") !== -1) {
                        for (var s = n[2].split("|"), l = !0, r = 0; r < s.length; ++r)
                            window.location.href.indexOf(s[r]) != -1 && (l = !1);
                        l && e.init_pdf_popup_ajax(n)
                    } else
                        window.location.href.indexOf(n[2]) != -1 || e.init_pdf_popup_ajax(n);
                1 == n[1] && e.init_pdf_popup_ajax(n)
            }
            window.location.href.indexOf("popuptest=1") != -1 && e.init_pdf_popup_ajax(n)
        })
    }, e.init_header_new = function() {
        $("#header-new #row-2 #block-6").hasClass("logged") || $("#logbackin, #imaguide").click(function() {
            e.common.send_google_event("Header Click", "Open", "Log In"), location.href = "/login"
        }), $("#header-new #row-2 input.gsc-input").live("focus", function() {
            $(this).focusout(function(t) {
                var i = Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor") > 0;
                $(t.relatedTarget).hasClass("gsc-search-button") || i || ($("#header-new #row-2 #block-1-2").width(""), $("#header-new #cart").removeClass("sopen"), e.common.send_google_event("Header Click", "Close", "Search"), $("#header-new #row-2 #block-2, #header-new #row-2 #block-7.logged").show(), $("#media").addClass("shadow"), $("#header-new #row-2 input.gsc-input").attr("placeholder", "Search").val(""))
            }), $("#header-new #row-2 #block-2, #header-new #row-2 #block-7.logged").hide(), e.common.send_google_event("Header Click", "Open", "Search"), $("#header-new #cart").addClass("sopen"), $(this).attr("placeholder", "Continent, Country or specific tour"), $("#header-new #row-2 #block-1-2").width(335)
        });
        var t = setInterval(function() {
            $("#header-new #row-2 input.gsc-input").length > 0 && (clearInterval(t), $("#header-new #row-2 input.gsc-input").attr("placeholder", "Search").val(""))
        }, 10);
        $("#header-new #row-1 #block-6, #header-new #row-2 #block-5-2").click(function() {
            $(window).width() > 450 ? $("#header-new #why_blocks").hasClass("active") ? ($(this).removeClass("active"), $("#header-new #why_blocks").removeClass("active").slideUp(200), e.common.send_google_event("Header Click", "Close", "Help")) : ($(this).addClass("active"), $("#header-new #why_blocks").addClass("active").slideDown(200), $("#header-new #row-2 #block-5-1").removeClass("active"), $("#header-new #row-5").addClass("hidden"), e.common.send_google_event("Header Click", "Open", "Help")) : (window.location = $("a#call-to-tr").attr("href"), $(this).removeClass("active"), $("#header-new #why_blocks").removeClass("active").slideUp(200), e.common.send_google_event("Phone Header", "Call via Mobile", $("a#call-to-tr").attr("href").substr(4)))
        }), $("#header-new #row-4 .title.destination").hover(function() {
            var t = $(this).attr("class").split(" ")[2].substr(18);
            $.isNumeric(t) && t >= 197 && !e.header_menu_loaded && (e.header_menu_loaded = !0, $.ajax({
                url: "/welcome/load_menu_countries",
                type: "POST",
                dataType: "json",
                success: function(i) {
                    "OK" == i.status ? ($("#themes_bar").html(i.html2), $("#countries_bar .countries_bar_content").prepend(i.html), $("#header-new #row-4 .title.destination").removeClass("active"), $("#header-new #row-4 .destination-block-" + t).addClass("active"), $("#header-new .continents-bar").addClass("hidden"), $("#header-new .continents-bar#continent-bar-" + t).removeClass("hidden")) : e.common.error()
                },
                error: function() {
                    e.common.error()
                }
            })), e.header_timeout && clearTimeout(e.header_timeout), e.header_timeout_2 = setTimeout(function() {
                $("#header-new #row-4 .destination-block-" + t).length > 0 && ($("#header-new #row-4 .title.destination").removeClass("active"), $("#header-new #row-4 .destination-block-" + t).addClass("active"), 2 == t ? $("#header-new #countries_bar").show().css("background", "transparent") : $("#header-new #countries_bar").show().css("background", ""), $("#header-new .continents-bar").addClass("hidden"), $("#header-new .continents-bar#continent-bar-" + t).removeClass("hidden"))
            }, 250)
        }, function() {
            e.header_timeout = setTimeout(function() {
                e.header_timeout_2 && clearTimeout(e.header_timeout_2), $("#header-new #countries_bar").hide(), $("#header-new .continents-bar").addClass("hidden"), $("#header-new #row-4 .title.destination").removeClass("active")
            }, 10)
        }), $("#countries_bar").hover(function() {
            e.header_timeout && clearTimeout(e.header_timeout)
        }, function() {
            e.header_timeout = setTimeout(function() {
                e.header_timeout_2 && clearTimeout(e.header_timeout_2), $("#header-new #countries_bar").hide(), $("#header-new .continents-bar").addClass("hidden"), $("#header-new #row-4 .title.destination").removeClass("active")
            }, 10)
        }), $("#header-new #row-4 .title.theme, #header-new #themes_bar").hover(function() {
            e.header_menu_loaded || (e.header_menu_loaded = !0, $.ajax({
                url: "/welcome/load_menu_countries",
                type: "POST",
                dataType: "json",
                success: function(t) {
                    "OK" == t.status ? ($("#countries_bar .countries_bar_content").prepend(t.html), $("#themes_bar").html(t.html2), $("#header-new #themes_bar").show(), $("#header-new #row-4 .title.theme").addClass("active"), $("#header-new .themes_bar_content").addClass("hidden"), $("#header-new .themes_bar_content#themes").removeClass("hidden")) : e.common.error()
                },
                error: function() {
                    e.common.error()
                }
            })), $("#header-new #themes_bar").show(), $("#header-new #row-4 .title.theme").addClass("active"), $("#header-new .themes_bar_content").addClass("hidden"), $("#header-new .themes_bar_content#themes").removeClass("hidden")
        }, function() {
            $("#header-new #themes_bar").hide(), $("#header-new #row-4 .title").removeClass("active"), $("#header-new .themes_bar_content#themes").removeClass("hidden")
        }), $("#header-new .themes_bar_content .block .more, #header-new .themes_bar_content .block .title-blue a").live("mouseover", function() {
            var e = $(this).parents(".block").first().attr("class").split(" ")[1].substr(12);
            $("#header-new .themes_bar_content").addClass("hidden"), $("#header-new #themes-" + e).removeClass("hidden")
        }), $("#header-new #row-2 #block-5-1").click(function() {
            $(this).toggleClass("active"), $("#header-new #row-5").toggleClass("hidden"), $("#header-new #row-2 #block-5-2").removeClass("active"), $("#header-new #why_blocks").hide()
        }), $(window).width() > 600 ? $("#header-new #row-2 #block-5, #header-new #cart").hover(function() {
            $("#header-new #row-2 #block-5").addClass("active"), $("#header-new #cart").addClass("active").slideDown(200)
        }, function() {
            $("#header-new #row-2 #block-5").removeClass("active"), $("#header-new #cart").removeClass("active").slideUp(200)
        }) : $("#header-new #row-2 #block-5").click(function() {
            $("#header-new #row-2 #block-5").hasClass("active") ? ($("#header-new #row-2 #block-5").removeClass("active"), $("#header-new #cart").removeClass("active").slideUp(200)) : ($("#header-new #row-2 #block-5").addClass("active"), $("#header-new #cart").addClass("active").slideDown(200))
        }), $("#header-new #cart .block .content").click(function(e) {
            var t = $(this).parents(".block");
            location.href = t.attr("link")
        }), $("#header-new #cart .block svg").click(function(t) {
            var i = $(this).parents(".block");
            confirm("Are you sure?") && $.ajax({
                url: "/travellers/remove_enquiry_from_cart/" + i.attr("id").substr(4),
                type: "POST",
                dataType: "json",
                success: function(t) {
                    "OK" == t.status ? (i.slideUp(200), $("#block-5 .indicator").html(parseInt($("#block-5 .indicator").html()) - 1)) : e.common.error()
                },
                error: function() {
                    e.common.error()
                }
            })
        }), $("#header-new #row-2 #block-6.logged, #header-new #dashboard_expand").hover(function() {
            $("#header-new #row-2 #block-6").addClass("active"), $("#header-new #dashboard_expand").addClass("active").slideDown(200)
        }, function() {
            $("#header-new #row-2 #block-6").removeClass("active"), $("#header-new #dashboard_expand").removeClass("active").slideUp(200)
        }), $("#block-8 .svd, #block-9 .svd").click(function(t) {
            t.preventDefault(), $("#header-new #row-2 #block-6").hasClass("logged") ? location.href = "/wishlists/traveller/" + $("#header-new #row-2 #block-6").attr("data-logged") : e.common.init_login_popup(e, function(e) {
                location.href = "/wishlists/traveller"
            }, !1, "login")
        })
    }, e.init_why_tourradar_box = function() {
        $(".why-box").length > 0 && (e.why_block = !1, $(".why-box .points .content a").on("click", function() {
            var t = $(this).attr("href");
            if (e.why_block) {
                if ($.fancybox({
                    href: t
                }), "#why-box-popup2" == t) {
                    var i = Math.floor($("#why-box-popup2 #video").width());
                    $("#why-box-popup2 #video iframe").css({
                        width: i,
                        height: Math.floor(315 * i / 560)
                    })
                }
            } else
                $.ajax({
                    url: "/welcome/why_box_templates",
                    dataType: "json",
                    type: "POST",
                    success: function(i) {
                        if ("OK" == i.status) {
                            e.why_block = !0, $(".why-box").append(i.html.all_popups), $("#why-box-popup1 .agents").html(i.html.popup1), $("#why-box-popup4 #why-no-fees").html(i.html.popup4);
                            var n = $("#why-box-popup4 .no-fees-table tr:first td").length;
                            if (n > 0 && $("#why-box-popup4 .no-fees-table tr").each(function() {
                                $(this).find("td:first").css("width", "40%"), $(this).find("td").not(":first").css("width", 60 / (n - 1) + "%")
                            }), $(".why-box-popup .open-olark").click(function() {
                                e.olarkIntegration.startEnquiryDialog(), $("#fancybox-close").click()
                            }), $(".why-box-popup .close_popup").click(function() {
                                $.fancybox.close()
                            }), $.fancybox({
                                href: t
                            }), "#why-box-popup2" == t) {
                                var o = Math.floor($("#why-box-popup2 #video").width());
                                $("#why-box-popup2 #video iframe").css({
                                    width: o,
                                    height: Math.floor(315 * o / 560)
                                })
                            }
                        } else
                            e.common.error()
                    }
                })
        }))
    }, e.callback_popup = {
        $popup: "",
        init: function() {
            $("#callbackOpen").click(function(t) {
                t.preventDefault(), $("head").append($("<link>", {
                    rel: "stylesheet",
                    type: "text/css",
                    href: "/include/js/pikaday/css/pikaday.css?_r=" + Math.random()
                })), $.getScript("/include/js/pikaday/pikaday.js").done(function() {
                    $.ajax({
                        url: "/pw_common/callback_popup",
                        dataType: "json",
                        type: "GET",
                        success: function(t) {
                            e.callback_popup.$popup = $(t.popup), e.callback_popup.open()
                        }
                    })
                })
            })
        },
        open: function() {
            var t = $("#callbackOpen").text();
            $.fancybox({
                type: "html",
                content: e.callback_popup.$popup,
                onComplete: function() {
                    e.common.send_google_event("Appointment", "Open", t);
                    var i = this,
                        n = $(i.content),
                        o = n.find("form");
                    o.submit(function(i) {
                        i.preventDefault();
                        var a = o.find("select[name=hours]").val(),
                            s = o.find("select[name=minutes]").val(),
                            r = a && s ? a + ":" + s : "",
                            l = {
                                name: o.find("input[name=name]").val(),
                                age: o.find("select[name=age]").val(),
                                destination: o.find("input[name=destination]").val(),
                                phone: o.find("input[name=phone]").val(),
                                date: o.find("input[name=date]").val(),
                                time: r,
                                email: o.find("input[name=email]").val()
                            };
                        if (!l.name)
                            return void alert("Enter your name!");
                        if (!l.phone)
                            return void alert("Enter your phone!");
                        var c = l.phone.match(/[A-Za-z]/g);
                        return c && c.length ? void alert("Enter valid phone!") : l.date ? l.time ? l.email ? void $.ajax({
                            url: "/pw_common/callback_popup_submit",
                            dataType: "json",
                            data: l,
                            type: "POST",
                            success: function(i) {
                                if (e.common.send_google_event("Appointment", "Submit", t), "OK" == i.status) {
                                    var o = n.find(".step.final"),
                                        a = o.html().replace("-DATE-", l.date).replace("-TIME-", l.time).replace("-PhoneNumber-", l.phone);
                                    o.html(a), o.addClass("active").siblings(".step").removeClass("active"), e.common.send_google_event("Appointment", "Success Open", t)
                                } else
                                    alert(i.message)
                            }
                        }) : void alert("Enter email!") : void alert("Enter preferred time of call!") : void alert("Enter preferred date of call!")
                    });
                    var a = o.find("input.date"),
                        s = new Date,
                        r = new Date(s.getTime() + 864e5);
                    new Pikaday({
                        field: a[0],
                        minDate: s,
                        defaultDate: r,
                        setDefaultDate: !0,
                        onSelect: function() {
                            var t = this.getDate();
                            a.val([t.getDate(), e.common.month_names[t.getMonth()], t.getFullYear()].join(" "))
                        }
                    });
                    a.val([r.getDate(), e.common.month_names[r.getMonth()], r.getFullYear()].join(" ")), n.on("click", ".but.cls", function(e) {
                        e.preventDefault(), $.fancybox.close()
                    })
                },
                onClosed: function() {
                    e.common.send_google_event("Appointment", "Close", t)
                }
            })
        }
    }, e.olarkIntegration = {
        askSubmit: function(t, i) {
            var n = 0 | $.trim(t.find('input[name="tour_id"]').val()),
                o = $.trim(t.find("textarea").val()) || "",
                a = t.find('input[name="email"]').length > 0 ? $.trim(t.find('input[name="email"]').val()) : null,
                s = t.find('input[name="phone"]'),
                r = t.find('input[name="name"]').val(),
                l = 0 | t.find('input[name="live_chat"]').val(),
                c = $.trim(s.val()),
                d = t.find('select[name="currency"]'),
                u = t.find('select[name="source"]'),
                h = t.find('select[name="date"]'),
                p = t.find('select[name="transport"]'),
                f = !1;
            if (o ? !(t.find('input[name="email"]').length > 0) || a && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a) ? c && c.length < 5 && (f = "Please enter your phone.") : f = "Please enter valid email address." : f = "Please enter your question.", p.length > 0 && !p.hasClass("hid") && (o = o + "\n\nI would like an offer for this room: " + p.val()), f)
                return void alert(f);
            if (e.olark.isAvailable() && l) {
                olark("api.box.expand");
                var m = $("#olark-wrapper");
                return m.find("#olark-form-input-fname").val(r).trigger("input"), m.find("#olark-form-input-email").val(a).trigger("input"), c && m.find("#olark-form-input-phone").val(c).trigger("input"), m.find(".olark-form-send-button").click(), m.find(".olark-feedback-cancel-button").click(), setTimeout(function() {
                    m.find(".olark-chat-input").val(o), m.find(".olark-chat-send-button").click()
                }, 1e3), $.magnificPopup.close(), void e.common.send_google_event("Ask A Question", "Question Asked - Live Chat", i.name)
            }
            var g = {
                type: "t",
                id: n,
                enquiry_source: "",
                email: a,
                details_phone: c,
                first_name: r,
                source: "tr",
                source_id: 0,
                pax: 1,
                name: r,
                details_type: 4,
                comment: o,
                note: i.note || ""
            };
            d.length > 0 && (g.currency = d.val(), h.length > 0 && 10 == h.val().length && (g.date = h.val()), "0" != u.val() && (g.create_source = u.val())), e.common.send_request(t.attr("action"), g, function(t) {
                if ("OK" != t.status)
                    return !1;
                e.common.send_google_event("Ask A Question", "Question Asked" + (i.note ? " - General" : ""), i.name), $("#ask_popup_success .but.blue").attr("href", t.href), $.magnificPopup.close();
                var n = $(".ask_link_success");
                n.magnificPopup({
                    closeOnBgClick: !0,
                    closeMarkup: '<div title="Close (Esc)" class="close mfp-close"></div>'
                }), n.magnificPopup("open"), $("#ask_popup_success .but:not(.blue)").click(function() {
                    n.magnificPopup("close")
                }), "function" == typeof onEnquiryCreatedGlobal && onEnquiryCreatedGlobal()
            })
        },
        defaultTour: {
            id: -1,
            name: location.href,
            note: "User comes from " + location.href
        },
        startEnquiryDialog: function(t) {
            var i = this;
            return t || (t = this.defaultTour), $.magnificPopup ? this._initialized ? void $(".ask_link").magnificPopup("open") : (this._initialized = !0, void e.common.send_request("/pw_tour/ask_question_popup", {
                id: t.id
            }, function(n) {
                $("body").append(n.component), window.olark && olark("api.box.shrink"), $("#ask_popup form").submit(function(e) {
                    e.preventDefault(), i.askSubmit($(this), t)
                });
                var o = $("#ask_popup .expect"),
                    a = $("#ask_popup .but.blue");
                o.data("expect", o.text());
                var s = $(".ask_link"),
                    r = null;
                s.magnificPopup({
                    closeOnBgClick: !0,
                    closeMarkup: '<div title="Close (Esc)" class="close mfp-close"></div>',
                    mainClass: "ask-popup",
                    fixedContentPos: !0,
                    callbacks: {
                        open: function() {
                            r = setInterval(function() {
                                var t = 0 | $('input[name="live_chat"]').val();
                                t && e.olark.isAvailable() ? o.text("Immediate response") : o.text(o.data("expect")), a.text("Submit Question")
                            }, 500)
                        },
                        close: function() {
                            clearInterval(r)
                        }
                    }
                }), s.magnificPopup("open")
            })) : ($.getScript("/include/js/magnific-popup/magnific-popup.v1-0-1.min.js").done(function(e, n) {
                i.startEnquiryDialog(t)
            }), void $("head").append($("<link>", {
                rel: "stylesheet",
                type: "text/css",
                href: "/include/pw/olark/styles.css?_r=" + Math.random()
            })))
        }
    }, e.olark = {
        _isAvailable: !0,
        isAvailable: function() {
            return "undefined" != typeof forceOlarkStatus ? !!forceOlarkStatus : this._isAvailable
        },
        isExpand: !1,
        isLoaded: !1
    }, e.olark_loaded_function = function() {
        var t = setInterval(function() {
            "function" == typeof olark && (clearInterval(t), olark("api.chat.onReady", function() {
                $("body .olark").remove(), $(document).trigger("olark:loaded", [!0])
            }), olark("api.chat.onMessageToOperator", function(e) {
                var t = !1;
                olark("api.visitor.getDetails", function(e) {
                    e.pageCountForThisVisit >= 3 || t || "undefined" != typeof tracker && (t = !0, tracker("addEvent", "tracker", "email", e.emailAddress, {}))
                })
            }), olark("api.chat.onOperatorsAvailable", function() {
                localStorage && localStorage.setItem("olark.isAvailable", !0), e.olark._isAvailable = !0
            }), olark("api.chat.onOperatorsAway", function() {
                localStorage && localStorage.setItem("olark.isAvailable", !1), e.olark._isAvailable = !1
            }), olark("api.box.onExpand", function() {
                e.olark.isAvailable() || (setTimeout(function() {
                    olark("api.box.shrink")
                }, 1), e.olarkIntegration.startEnquiryDialog()), e.olark.isExpand = !0
            }), olark("api.box.onShrink", function() {
                e.olark.isExpand = !1
            }), olark("api.chat.onBeginConversation", function() {
                olark("api.visitor.getDetails", function(e) {
                    var t = $.trim(e.emailAddress),
                        i = $.trim(e.fullName);
                    t && $.ajax({
                        url: "/travellers/olark_traveller_information",
                        data: {
                            email: e.emailAddress,
                            tour_id: -1,
                            visitor_name: i,
                            phone: e.phoneNumber
                        },
                        dataType: "json",
                        type: "POST",
                        success: function(e) {
                            if ("OK" == e.status) {
                                window.tracker && tracker("appendParameters", e.parameters || []);
                                var t = Array(),
                                    i = Array(),
                                    n = e.information;
                                if (n.traveller && "id" in n.traveller ? t[t.length] = "Travel Credits: " + n.traveller.referral_balance : t[t.length] = "Travel Credits: Not a customer yet", n.traveller && "location" in n.traveller && (t[t.length] = "Customer Location: " + n.traveller.location), n.traveller && "medical_conditions" in n.traveller && (t[t.length] = "Medical Condition: " + n.traveller.medical_conditions), n.traveller && "age" in n.traveller && (t[t.length] = "Age: " + n.traveller.age), n.enquiries && (t[t.length] = "# of Enquiries : " + n.enquiries.length, n.enquiries.length)) {
                                    var o = ["", "Availability request", "Brochure request", "Ready to book", "Have a question", "Hold 48 hours"];
                                    i[i.length] = "CUSTOMER HAS FOLLOWING ENQUIRIES / BOOKINGS:", $.each(n.enquiries, function(e, t) {
                                        if (e < 10) {
                                            if ("approval" == t.payment_provider_status)
                                                var n = "Waiting for user approval";
                                            else if (3 == parseInt(t.status) || "confirmed" == t.payment_provider_status)
                                                var n = "Confirmed booking";
                                            else if ("declined_by_operator" == t.payment_provider_status || 6 == parseInt(t.status) || 4 == parseInt(t.status) || "payment_failed" == t.payment_provider_status || "declined_by_system" == t.payment_provider_status || "failed" == t.payment_provider_full_payment_status)
                                                var n = "Declined";
                                            else
                                                var n = "Initial enquiry";
                                            i[i.length] = t.id + " - " + t.added_formated + " - " + o[parseInt(t.type)] + " - " + n + " - " + t.pax + " pax - " + t.full_price + t.per_person_currency + " - " + t.tour_name + " - https://www.tourradar.com/admin/enquiries/go/" + t.id
                                        }
                                    })
                                }
                                if (n.pdf && (t[t.length] = "# of Downloaded PDF : " + n.pdf.length, n.pdf.length && (i[i.length] = "CUSTOMER HAS THE FOLLOWING PDF DOWNLOADS:", $.each(n.pdf, function(e, t) {
                                    e < 10 && (i[i.length] = t.time_create + " - " + t.name + " - https://www.tourradar.com/t/" + t.tour_id)
                                }))), n.traveller && "inviter" in n.traveller && (i[i.length] = "CUSTOMER DETAILS:", i[i.length] = "Invited by : " + n.traveller.inviter.name + " - https://www.tourradar.com/admin/travellers/edit/" + n.traveller.inviter.id), olark("api.chat.updateVisitorStatus", {
                                    snippet: t
                                }), i.length) {
                                    var a = 0;
                                    $.each(i, function(e, t) {
                                        setTimeout(function() {
                                            olark("api.chat.sendNotificationToOperator", {
                                                body: t
                                            })
                                        }, a), a += 120
                                    })
                                }
                            }
                        }
                    })
                })
            }))
        }, 10)
    }, e.newsletter_top_banner = {
        initiated: !1,
        max_window_width: 980,
        show_from: 56,
        initiate: function() {
            window.location.href.indexOf("europe-my-way") === -1 && (e.newsletter_top_banner.all_checks() && e.newsletter_top_banner.show(), $(window).bind("resize scroll", function() {
                e.newsletter_top_banner.all_checks() ? e.newsletter_top_banner.show() : e.newsletter_top_banner.check()
            }))
        },
        all_checks: function() {
            return !$("#header-new #row-2 #block-6").hasClass("logged") && !e.common.get_cookie("tnbcls") && 0 == $(".standard-contest").length && 0 == $(".reg-page").length && 0 == $("#row-banner").length && 0 == $("#content.content_review").length && window.location.href.indexOf("/review/") < 0 && $(window).scrollTop() >= e.newsletter_top_banner.show_from && !e.common.check_mobile() && $(window).width() >= e.newsletter_top_banner.max_window_width && window.location.href.indexOf("/book-now/") < 0 && window.location.href.indexOf("/booking/") < 0
        },
        show: function() {
            e.newsletter_top_banner.initiated ? e.newsletter_top_banner.check() : (e.newsletter_top_banner.initiated = !0, $.ajax({
                url: "/welcome/newsletter_signups",
                dataType: "json",
                type: "POST",
                success: function(t) {
                    if ("OK" == t.status) {
                        $("body").addClass("here_tnb").append(t.html);
                        var i = "#tnb .tnb1 .in",
                            n = $(i + " input").attr("placeholder");
                        $(i + " div").click(function() {
                            var e = $.trim($(i + " input").val());
                            return e && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e) ? void $.ajax({
                                url: "/welcome/newsletter_check",
                                dataType: "json",
                                type: "POST",
                                data: {
                                    email: e
                                },
                                success: function(e) {
                                    "OK" == e.status && ($(i).html("<b>Thanks! You will receive an email soon</b>"), document.cookie = "tnbcls=1; max-age=31536000; path=/")
                                }
                            }) : ($(i + " input").addClass("red").attr("placeholder", "Please, enter a valid email").val("").focus(function() {
                                $(this).removeClass("red").attr("placeholder", n).val(e)
                            }), !1)
                        }), $(i + " input").live("keyup", function(e) {
                            var t = e.keyCode ? e.keyCode : e.which;
                            13 == t && $(i + " div").click()
                        }), $("#tnb .tnb1 .cls").click(function() {
                            $("#tnb").remove(), document.cookie = "tnbcls=1; max-age=31536000; path=/"
                        }), e.newsletter_top_banner.check()
                    }
                }
            }))
        },
        check: function() {
            e.newsletter_top_banner.initiated && (e.newsletter_top_banner.all_checks() ? $("#tnb").removeClass("na") : $("#tnb").addClass("na"))
        }
    }
}
function RespPaym(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.init = function() {
        $("<img />").attr("src", "/images/responsive/saving.png?v=1"), $("<img />").attr("src", "/images/responsive/saved.png?v=1"), $('input[name="payment_type"]').click(function() {
            $(".payment-type").removeClass("active"), $(this).parents(".payment-type").addClass("active"), $("#price span").html(number_format($(this).attr("amount"), 0, "", ",")), $("#payment_date").attr("class", "yes" == $(this).attr("showdate") ? "" : "hidden")
        }), $('input[name="payment_type"]').first().click();
        var e = new Date;
        e.setFullYear(e.getFullYear() - 24), $("input#input_7").datepicker({
            dateFormat: $(this).attr("format") ? $(this).attr("format") : "dd/mm/yy",
            changeMonth: !0,
            changeYear: !0,
            yearRange: parseInt((new Date).getFullYear()) - 100 + ":" + parseInt((new Date).getFullYear()),
            defaultDate: e,
            onSelect: function(e) {
                $(this).parents("tr").find("td:last").addClass("save").html('<div style="margin-left:10px"><img src="/images/responsive/saving.png?v=1" /></div>'), t.submit_saving($(this), $(this).attr("name"), e)
            }
        }), $("input.date").not(".hasDatepicker").datepicker({
            dateFormat: $(this).attr("format") ? $(this).attr("format") : "dd/mm/yy",
            changeMonth: !0,
            changeYear: !0,
            yearRange: parseInt((new Date).getFullYear()) - 100 + ":" + (parseInt((new Date).getFullYear()) + 30),
            onSelect: function(e) {
                $(this).parents("tr").find("td:last").addClass("save").html('<div style="margin-left:10px"><img src="/images/responsive/saving.png?v=1" /></div>'), t.submit_saving($(this), $(this).attr("name"), e)
            }
        }), $('input[name="terms"]').click(function() {
            $(this).attr("checked") ? $("input.button").removeClass("button-grey").addClass("button-green") : $("input.button").removeClass("button-green").addClass("button-grey")
        }), $("#payment_form").submit(function() {
            return $("#form-submit").hasClass("button-green") ? t.validate_form() : alert("Please accept the terms and conditions."), !1
        }), $("#billing_same").click(function() {
            $(this).attr("checked") && ($('input[name*="billing-"], select[name*="billing-"]').each(function() {
                var e = $(this).attr("name").substr(8);
                $(this).val($('input[name="' + e + '"]').length > 0 ? $('input[name="' + e + '"]').val() : $('select[name="' + e + '"]').val())
            }), $('input[name*="billing-"], select[name*="billing-"]').each(function() {
                $(this).removeClass("error");
                var e = $.trim($(this).val()),
                    i = t.params.fields[$(this).attr("name").substr(8)].type;
                e && ("phone" == i && /[^\(\)\+ 0-9]+/.test(e) ? $(this).addClass("error") : "email" != i || /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e) ? "numeric" == i && /[^0-9]+/.test(e) ? $(this).addClass("error") : ($(this).parents("tr").find("td:last").addClass("save").html('<div style="margin-left:10px"><img src="/images/responsive/saving.png?v=1" /></div>'), t.submit_saving($(this), $(this).attr("name"), e)) : $(this).addClass("error"))
            }))
        }), t.init_saving(), t.init_visa_check(), t.init_success_page(), $("#conv-right-composition").length > 0 && t.init_price_composition(), $('.cc_source input[type="radio"]:first').click(function() {
            $(".secure .forp").addClass("hidden")
        }), $('.cc_source input[type="radio"]:last').click(function() {
            $(".secure .forp").removeClass("hidden")
        }), $(".info").mouseover(function() {
            $(this).popover("show").mouseleave(function() {
                $(this).popover("hide")
            })
        })
    }, t.init_price_composition = function() {
        $("#conv-right-composition table, #conv-right-composition img").remove(), $("#conv-right-composition").append('<img src="/images/ajax_loader/fbstyle.gif" />'), $.ajax({
            url: "/booking/payment/" + t.params.code,
            dataType: "json",
            type: "POST",
            data: {
                action: "get_price_composition"
            },
            success: function(e) {
                "OK" == e.status && ($("#conv-right-composition img").remove(), $("#conv-right-composition").append(e.html))
            }
        })
    }, t.init_saving = function() {
        $(".traveller input").blur(function() {
            $(this).removeClass("error");
            var e = $.trim($(this).val());
            if ("repeat-" == $(this).attr("name").substr(0, 7))
                var i = t.params.fields[$(this).attr("name").substr(7).split("[")[0]].type;
            else if ("billing-" == $(this).attr("name").substr(0, 8))
                var i = t.params.fields[$(this).attr("name").substr(8)].type;
            else
                var i = t.params.fields[$(this).attr("name")].type;
            e && ("phone" == i && /[^\(\)\+ 0-9]+/.test(e) ? $(this).addClass("error") : "email" != i || /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e) ? "numeric" == i && /[^0-9]+/.test(e) ? $(this).addClass("error") : ($(this).parents("tr").find("td:last").addClass("save").html('<div style="margin-left:10px"><img src="/images/responsive/saving.png?v=1" /></div>'), t.submit_saving($(this), $(this).attr("name"), e)) : $(this).addClass("error"))
        }), $(".traveller select").change(function() {
            $(this).removeClass("error");
            var e = $(this).val();
            e && ($(this).parents("tr").find("td:last").addClass("save").html('<div style="margin-left:10px"><img src="/images/responsive/saving.png?v=1" /></div>'), t.submit_saving($(this), $(this).attr("name"), e))
        })
    }, t.submit_saving = function(e, i, n) {
        t.saving_process = !0, $.ajax({
            url: "/booking/payment_success/" + t.params.code,
            dataType: "json",
            type: "POST",
            data: {
                action: "save_field",
                field: i,
                value: n
            },
            success: function(i) {
                "OK" == i.status ? (e.parents("tr").find("td:last").find("div").length || e.parents("tr").find("td:last").html("<div></div>"), e.parents("tr").find("td:last").addClass("save").find("div").html('<img src="/images/responsive/saved.png?v=1" />'), t.init_user_profile(), t.saving_process = !1, setTimeout(function() {
                    e.parents("tr").find("td:last").removeClass("save").html("")
                }, 1500)) : t.common.error(!0)
            },
            error: function() {
                t.common.error(!0)
            }
        })
    }, t.init_visa_check = function() {
        $("#visa").change(function() {
            $(this).val() > 0 ? ($("#visa_result").html("<p>Please wait...</p>"), $.ajax({
                url: "/serp/check_visa",
                dataType: "json",
                type: "POST",
                data: {
                    tour: t.params.enquiry.object_id,
                    nationality: $("#visa").val()
                },
                success: function(e) {
                    if ("OK" == e.status) {
                        if (e.visa.noinfo.length > 0)
                            var i = "<p>Sorry, we don't have details for this place.</p>";
                        else if (e.visa.noentry.length > 0) {
                            for (var i = "<p>Please check with your embassy for entry restrictions:</p><p><ul>", n = 0; n < e.visa.noentry.length; n++)
                                i += "<li>" + e.visa.noentry[n] + "</li>";
                            i += "</ul></p><p>Please contact the operator for any assistance.</p>"
                        } else if (e.visa.visa.length > 0) {
                            for (var i = "<p>You may need to get visas for the following place" + (1 == e.visa.visa.length ? "" : "s") + ":</p><p><ul>", n = 0; n < e.visa.visa.length; n++)
                                i += "<li>" + e.visa.visa[n] + "</li>";
                            i += "</ul></p><p>Please contact the local embassy for help applying for visas to these place" + (1 == e.visa.visa.length ? "" : "s") + ".</p>"
                        } else
                            var i = "<p>Good news, it doesn't look like you need any visas for this tour.</p>";
                        $("#visa_result").html(i)
                    } else
                        t.common.error()
                },
                error: function() {
                    t.common.error()
                }
            })) : $("#visa_result").html("")
        })
    }, t.validate_form = function() {
        $(".error").removeClass("error"), $(".traveller").find("input, select").each(function() {
            if ($(this).attr("name") && t.params.fields[$(this).attr("name")]) {
                var e = $.trim($(this).val()),
                    i = t.params.fields[$(this).attr("name")].type;
                "1" != $(this).attr("req") || e ? e && "phone" == i && /[^\(\)\+ 0-9]+/.test(e) ? $(this).addClass("error") : e && "email" == i && !/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e) ? $(this).addClass("error") : e && "numeric" == i && /[^0-9]+/.test(e) && $(this).addClass("error") : $(this).addClass("error")
            }
        }), (0 == $('.cc_source input[type="radio"]').length || $('.cc_source input[type="radio"]:last').prop("checked")) && ($.trim($("#cc_name").val()) || $("#cc_name").addClass("error"), ($("#cc_number").val().length < 13 || /[^0-9 ]+/.test($("#cc_number").val())) && $("#cc_number").addClass("error"), ($("#cc_cvv").val().length < 3 || /[^0-9]+/.test($("#cc_cvv").val())) && $("#cc_cvv").addClass("error"), $("#cc_exp_month, #cc_exp_year").each(function() {
            "0" == $(this).val() && $(this).addClass("error")
        })), $(".error").length > 0 ? $("body, html").animate({
            scrollTop: $(".error").first().offset().top - 60
        }, "slow") : t.process()
    }, t.process = function() {
        if ($("#continue-loader").removeClass("hidden"), $("#form-submit").removeClass("button-green").addClass("button-grey").val("Processing...").attr("disabled", !0), $("#cc_number").val($("#cc_number").val().replace(/ /g, "")), 0 == $('.cc_source input[type="radio"]').length || $('.cc_source input[type="radio"]:last').prop("checked")) {
            if (39879 == t.params.tour_id)
                var e = Braintree.create("MIIBCgKCAQEA0Nq4VrlySnZfnbL/Lw0CG92WlrW+jq3jda92sXnn02Oxun9DPs9WrkT7mZAJ6zHZx2nWBdFb1tSpXizwqLYP6ZrK1ctRwEcVKrlFQRjNT41TwUcvOMalPXwzKtD5uKHHplfS/fbarqvoBL4iYfmAfEZK3zq79dXkD9B9m1nc0gdV9izCq2Agf2tHQdUiv13/87h38+fuSQ+0CeUhMEeiSZJyLYCIsaic+lM1lgcoBV4i41m4BCa+f6+fcwmNDP/LZPTQyaVc9CQu2izKIuEZgNc6wJ7e0IptSHvtxCK7INTGWNY9dB4BxZ35ZuDZqoY16Bouy4d5+XhEIuCP2iigMQIDAQAB");
            else
                var e = Braintree.create("MIIBCgKCAQEAv5TIEcjooijuyImr0rvqrk7JxyGNZfAMMEr5x8zVfo55mzqeT3wWmalVLKskUV+qnsgwb9c7Rjfd8q514kPS7IJg7O1fMkTA4VPWj+CM+1CO95491VPqeciq4wCvY3jfgjEUaD7KSSPGHfQQrOIh3+obOLzABiBt4RX9NFYuVQS9gF51/MnLwY0VQZNvoMJl42FDc8w6X4RrvftpQj07jalJCA4QVuA44gU2CWcZlkpF3P8wBcdfTSBju0elEjDpM/H7T0WuNfCK23BKtX6r8SVORDAvedpqaq3Gjc9kK1Q3s4vPO9JJREkGt4Zqtitdzh5PDcT+F7QeMUSfcgc1WwIDAQAB");
            e.encryptForm("payment_form")
        } else
            $("#payment_form").append('<input type="hidden" name="payment_source" value="exist" />');
        return $.ajax({
            url: location.href,
            data: $("#payment_form").serialize(),
            dataType: "json",
            type: "POST",
            success: function(e) {
                $("#continue-loader").addClass("hidden"), "OK" == e.status ? location.href = e.href : ($("#form-submit").addClass("button-green").removeClass("button-grey").val("Continue >").attr("disabled", !1), $("#content").append('<a id="payment_popup_link" href="#payment_popup"></a><div class="hidden"><div id="payment_popup"></div></div>'), $("#payment_popup").html('<p style="margin-bottom:20px"><strong>Opps, something went wrong</strong></p>' + e.message + '<p align="center" style="margin-top:20px"><input type="button" class="button button-grey" value="Close" /></p>'), $("#payment_popup_link").fancybox({
                    width: 400,
                    onComplete: function() {
                        $("#payment_popup .button").click(function() {
                            $.fancybox.close()
                        })
                    },
                    onClose: function() {
                        $("#payment_popup_link").remove(), $("#payment_popup").parent().remove()
                    }
                }).click())
            },
            error: function() {
                t.common.error()
            }
        }), !1
    }, t.init_success_page = function() {
        $(".conv-payment-success .traveller tr td.title a").click(function() {
            var e = $(this).attr("id").substr(6);
            $(this).hasClass("active") ? ($(this).removeClass("active"), $(".block-" + e).addClass("hidden")) : ($(this).addClass("active"), $(".block-" + e).removeClass("hidden"))
        }), $(".conv-payment-success .traveller tr td.title a").each(function() {
            var e = $(this).attr("id").substr(6);
            0 == $("tr.block-" + e).length ? $(this).parent().parent().remove() : $(this).click()
        }), $(".conv-payment-success .print").click(function() {
            window.print()
        }), "#print" == location.hash && window.print(), $(".conv-payment-success").length > 0 && t.init_user_profile(), $("#login").click(function() {
            t.common.init_login_popup(function() {
                location.href = "/members/profile"
            })
        }), $("#payment-success-popup").length > 0 && $("#payment-success-popup-link").fancybox({
            padding: 20,
            margin: 0,
            width: 595,
            autoSize: !1,
            type: "inline"
        }).click(), $("#hold-cancelled").length > 0 && setInterval(function() {
            var e = parseInt(t.params.enquiry_data.added) + parseInt(3600 * t.params.enquiry_data.hold_period_hours) - Math.round(new Date / 1e3);
            if (e > 0) {
                var i = Math.floor(e / 3600),
                    n = Math.floor((e - 3600 * i) / 60),
                    o = e - 3600 * i - 60 * n;
                $("#hold-cancelled").html(i + "h " + n + "m " + o + "s")
            } else
                $("#hold-cancelled").html("0h 0m"), $(".block .hold-buttons").remove()
        }, 1e3), t.common.social_buttons_init(t.params.enquiry.object_id, t.params.twcountry, t.params.enquiry.name, "")
    }, t.init_user_profile = function() {
        $(".value span, .novalue input, .novalue select").unbind("click").click(function() {
            var e = $(this).parent(),
                i = e.hasClass("novalue") ? "" : $.trim($(this).html()),
                n = e.attr("id").substr(6);
            if ("repeat-" == n.substr(0, 7))
                var o = n.substr(7).split("[")[0];
            else if ("billing-" == n.substr(0, 8))
                var o = n.substr(8);
            else
                var o = n;
            if (t.params.fields[o])
                switch (e.find("span").remove(), t.params.fields[o].type) {
                case "dropdown":
                case "country":
                case "range":
                    if (e.find("option").length <= 1)
                        if (e.html('<select id="input_' + n + '" style="width:100%; box-sizing:border-box;">' + (i ? "" : '<option value="">-- select --</option></select>')), "dropdown" == t.params.fields[o].type)
                            for (var a = 0; a < t.params.fields[o].options.options.length; a++) {
                                var s = $.trim(t.params.fields[o].options.options[a]);
                                e.find("select").append('<option value="' + s + '" ' + (i.toLowerCase() == s.toLowerCase() ? "selected" : "") + ">" + s.charAt(0).toUpperCase() + s.slice(1) + "</option>")
                            }
                        else if ("country" == t.params.fields[o].type)
                            for (var a = 0; a < t.params.countries.length; a++) {
                                var s = t.params.countries[a].name;
                                e.find("select").append('<option value="' + s + '" ' + (i == s ? "selected" : "") + ">" + s + "</option>")
                            }
                        else if ("range" == t.params.fields[o].type)
                            for (var a = t.params.fields[o].options.min_value; a <= t.params.fields[o].options.max_value; a++)
                                e.find("select").append('<option value="' + a + '" ' + (i == a ? "selected" : "") + ">" + a + "</option>");
                    break;
                case "date":
                    var r = {
                        January: "01",
                        February: "02",
                        March: "03",
                        April: "04",
                        May: "05",
                        June: "06",
                        July: "07",
                        August: "08",
                        September: "09",
                        October: "10",
                        November: "11",
                        December: "12"
                    };
                    i = i.split(" "), i = [i[0].length > 1 ? i[0] : "0" + i[0], r[i[1]], i[2]].join("/"), e.html('<input id="input_' + n + '" value="' + i + '" style="width:70%; box-sizing:border-box;" readonly />'), $('input[id="input_' + n + '"]').datepicker({
                        dateFormat: t.params.fields[o].options && t.params.fields[o].options.format ? t.params.fields[o].options.format : "dd/mm/yy",
                        changeMonth: !0,
                        changeYear: !0,
                        yearRange: 18 == o || 35 == o ? (new Date).getFullYear() + ":" + (parseInt((new Date).getFullYear()) + 30) : parseInt((new Date).getFullYear()) - 100 + ":" + (new Date).getFullYear(),
                        defaultDate: i,
                        onSelect: function(i) {
                            t.submit_saving(e, n, i);
                            var o = {
                                "01": "January",
                                "02": "February",
                                "03": "March",
                                "04": "April",
                                "05": "May",
                                "06": "June",
                                "07": "July",
                                "08": "August",
                                "09": "September",
                                10: "October",
                                11: "November",
                                12: "December"
                            };
                            i = i.split("/"), i = [parseInt(i[0]), o[i[1]], i[2]].join(" "), e.html("<span>" + i + "</span>"), e.removeClass("novalue").addClass("value")
                        }
                    }).focus();
                    break;
                default:
                    e.html('<input id="input_' + n + '" value="' + i + '" style="width:100%; box-sizing:border-box;" />'), $("#input_" + n).focus().select()
                }
            e.find("input").blur(function() {
                var i = $.trim($(this).val());
                i && "date" != t.params.fields[o].type && (t.submit_saving(e, n, $.trim($(this).val())), e.html("<span>" + i + "</span>"), e.hasClass("novalue") && e.removeClass("novalue").addClass("value"))
            }), e.find("select").bind("change blur", function() {
                var i = $(this).val();
                i && (t.submit_saving(e, n, $(this).val()), 26 == n && (i = i.charAt(0).toUpperCase() + i.slice(1)), e.html("<span>" + i + "</span>"), e.hasClass("novalue") && e.removeClass("novalue").addClass("value"))
            }), e.find("input, select").unbind("keyup").keyup(function(i) {
                13 != i.keyCode && 27 != i.keyCode || (i.preventDefault(), t.submit_saving(e, n, $(this).val()), e.html("<span>" + $(this).val() + "</span>"), e.hasClass("novalue") && e.removeClass("novalue").addClass("value"))
            })
        }), $(window).unbind("beforeunload").bind("beforeunload", function(e) {
            if (t.saving_process)
                return "WARNING: You are currently editing information on this page. Those edits will be lost if you leave this page.\n Are you sure you want to leave this page?"
        })
    }
}
function RespLMD(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.params.data = [], t.init = function() {
        function e(e) {
            if (e--, e > 0) {
                var t = Math.floor(e / 86400),
                    i = Math.floor((e - 86400 * t) / 3600),
                    n = Math.floor((e - 86400 * t - 3600 * i) / 60),
                    a = e - 86400 * t - 3600 * i - 60 * n;
                $(".black-friday .c-dur .cnt").html(t + "d " + i + "h " + n + "m " + a + "s")
            } else
                $("..black-friday .c-dur").html("Expired"), clearInterval(o);
            return e
        }
        t.scroll_init(), t.social_buttons_init(), t.sorting_init();
        var i = setInterval(function() {
            "object" == typeof OpenLayers && (clearInterval(i), t.show_map_init())
        });
        if ($("#visualization").length > 0 && $.getScript("https://www.google.com/jsapi").done(function() {
            var e = setInterval(function() {
                "object" == typeof google && (clearInterval(e), google.load("visualization", "1", {
                    packages: ["geochart"],
                    callback: function() {
                        t.load_continets()
                    }
                }))
            })
        }), $("#oe-slideshow a").length > 0 && $("#oe-slideshow").fotorama({
            width: $(".online-expo-2016 .lmd_page").first().width(),
            ratio: 16 / 9
        }), $(".online-expo-2016 .continents-fixed").length > 0 && ($(window).scroll(function() {
            var e = [];
            if ($(".lmd_page_full.black-friday-content").each(function() {
                if (!$(this).hasClass("brands")) {
                    var i = $(this).attr("id").substr(10),
                        n = $(this),
                        o = $(".online-expo-2016 .continents-fixed table td.region-" + i);
                    o.length > 0 && t.common.is_element_on_screen(n, 44) && e.push(o), $(".online-expo-2016 .continents-fixed table td").removeClass("active"), e.length > 0 && e[0].addClass("active")
                }
            }), $(".online-expo-2016 .black-friday-continents:visible").length > 0) {
                var i = $(".lmd_page_full.brands").offset().top - $(".online-expo-2016 .black-friday-continents .region").last().outerHeight();
                $(window).scrollTop() >= i ? $(".online-expo-2016 .continents-fixed").css("display", "block") : $(".online-expo-2016 .continents-fixed").css("display", "none")
            } else
                $(".online-expo-2016 .continents-fixed").css("display", "none")
        }), $(".online-expo-2016 .continents-fixed table td").click(function() {
            $(".online-expo-2016 .black-friday-continents .region#" + $(this).attr("class")).click()
        })), $(".lmd_page_full.black-friday .lmd_page .items .item .chat").click(function() {
            t.olarkIntegration.startEnquiryDialog(), $("#fancybox-close").click()
        }), t.params.width = $(window).width(), $(window).bind("resize", function() {
            t.params.width != $(window).width() && $(window).width() >= 780 && (t.params.width = $(window).width(), t.load_continets())
        }), $(".lmd_page_full.earth .line_top div select").live("change", function() {
            var e = "203-204" == $(this).val() ? "203" : $(this).val();
            e > 0 && ($("body, html").animate({
                scrollTop: $("#continent-" + e).offset().top
            }, "slow"), window.location.hash = $("#continent-" + e).attr("data-continent-name"))
        }), $("#terms").fancybox(), $(".lmd_page_full").on("click", "td.td6 .send", function() {
            t.params.id = parseInt($(this).attr("data-tour")), t.send_show_popup()
        }), $(".black-friday .c-dur").length > 0) {
            var n = parseInt($(".black-friday .c-dur").attr("valid"));
            if (n > 0) {
                n = e(n);
                var o = setInterval(function() {
                    n = e(n)
                }, 1e3)
            }
        }
        $(".online-expo-2016").length > 0 && ($(".mob-send .send-oe-button.m-open").on("click", function() {
            $(this).hasClass("done") || $.fancybox({
                href: "#ttp-mob",
                padding: 20,
                margin: 20,
                onComplete: function() {},
                onClosed: function() {}
            })
        }), $(".lmd_page_full.earth.online-expo-2016 .ins .l3 a.terms").click(function() {
            $.fancybox({
                href: "#terms-content",
                padding: 20,
                margin: 20,
                onComplete: function() {},
                onClosed: function() {}
            })
        }), $(".send-oe-button:not(.done):not(.m-open)").on("click", function() {
            if (!$(this).hasClass("done")) {
                if ($(this).hasClass("m-send"))
                    var e = "#ttp-mob ";
                else if ($(this).hasClass("d-send"))
                    var e = ".online-expo-2016 .lmd_page_full .ttp ";
                var i = $.trim($(e + "#email").val().toLowerCase());
                if (i && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i))
                    if ($(e + ".day").val().length <= 1)
                        alert("Please select date");
                    else if ("" != $(e + ".email").val()) {
                        var n = jstz.determine(),
                            o = {
                                email: i,
                                name: $(e + "#name").val(),
                                date: $(e + ".day").val(),
                                phone: $(e + "#phone").val(),
                                time: $(e + "select.hour").val() + ":" + $(e + "select.minutes").val(),
                                tz: n.name
                            };
                        $.ajax({
                            url: "/welcome/online_expo_2016",
                            data: o,
                            dataType: "json",
                            type: "POST",
                            success: function(i) {
                                if ("OK" == i.status) {
                                    $(".send-oe-button").addClass("done").css("cursor", "default").html('<svg viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z"></path></svg>');
                                    var n = $(".online-expo-2016 .lmd_page_full .ttp td .send-oe-button").clone();
                                    $(".online-expo-2016 .lmd_page_full .ttp td input, .online-expo-2016 .lmd_page_full .ttp td select").remove(), $(".online-expo-2016 .lmd_page_full .ttp td:last-child").html(n), $(".online-expo-2016 .lmd_page_full .ttp td b").text("Thank you for booking your appointment"), $(".online-expo-2016 .lmd_page_full .ttp td .small").text("One of our Customer Support Team members will contact you shortly to confirm"), $.fancybox.close(), t.common.send_google_event("Enter Email", "Expo Signup", $(e + "#name").val())
                                } else
                                    $.fancybox.close(), alert("An error occured. Please, try again later.")
                            },
                            error: function() {
                                alert("An error occured. Please, try again later.")
                            }
                        })
                    } else
                        alert("Please, enter your email.");
                else
                    alert("Please enter valid email address")
            }
        }))
    }, t.load_continets = function() {
        var e = new google.visualization.DataTable;
        e.addColumn("string", "Country"), e.addColumn("number", "Value"), e.addColumn({
            type: "string",
            role: "tooltip",
            p: {
                html: !0
            }
        });
        var i = (new Array, 0);
        $.each(t.params.continents_values, function(n, o) {
            t.params.go_to_continent = t.params.go_to_continent || {}, t.params.go_to_continent[i] = n, e.addRows([[{
                v: o.v.toString(),
                f: o.name.toString()
            }, i, '<div id="tooltip-continent" data-c-id="' + n + '"><div class="a1">up to</div><div class="a2">' + t.params.currencies_symbols[t.params.currency] + o.max_discount + ' OFF</div><div class="a3">' + o.name + '</div><div class="a3"><b>' + o.tours_count + " tour" + (o.tours_count > 1 ? "s" : "") + "</b></div></div>"]]), i++
        });
        var n = {
                colorAxis: {
                    minValue: 0,
                    maxValue: 4,
                    colors: ["#7bc1e5", "#d3eaf6", "#4facdd", "#bde0f2", "#65b6e1"]
                },
                legend: "none",
                backgroundColor: {
                    fill: "transparent",
                    stroke: "#FFFFFF",
                    strokeWidth: 0
                },
                datalessRegionColor: "#FFFFFF",
                displayMode: "regions",
                enableRegionInteractivity: "true",
                resolution: "continents",
                sizeAxis: {
                    minValue: 1,
                    maxValue: 1,
                    minSize: 10,
                    maxSize: 10
                },
                region: "world",
                keepAspectRatio: !0,
                height: $(".earth-img").height(),
                width: $(".earth-img").width(),
                tooltip: {
                    isHtml: !0,
                    trigger: "focus",
                    showTitle: !1
                }
            },
            o = new google.visualization.GeoChart(document.getElementById("visualization"));
        google.visualization.events.addListener(o, "select", function() {
            var e = o.getSelection(),
                i = "203-204" == t.params.go_to_continent[e[0].row] ? "203" : t.params.go_to_continent[e[0].row];
            $("body, html").animate({
                scrollTop: $("#continent-" + i).offset().top
            }, "slow"), window.location.hash = $("#continent-" + i).attr("data-continent-name")
        }), google.visualization.events.addListener(o, "ready", function() {
            t.init_continent_tooltip()
        }), o.draw(e, n)
    }, t.init_continent_tooltip = function() {
        $(".lmd_page_full #visualization #tooltip-continent").live("click", function() {
            var e = "203-204" == $(this).attr("data-c-id") ? "203" : $(this).attr("data-c-id");
            $("body, html").animate({
                scrollTop: $("#continent-" + e).offset().top
            }, "slow"), window.location.hash = $("#continent-" + e).attr("data-continent-name")
        }), location.hash && location.hash.substr(1).length > 0 && $('.lmd_page_full[data-continent-name="' + location.hash.substr(1) + '"]').length && setTimeout(function() {
            $("body, html").animate({
                scrollTop: $('.lmd_page_full[data-continent-name="' + location.hash.substr(1) + '"]').offset().top
            }, "slow")
        }, 100)
    }, t.sorting_init = function() {
        $(".lmd_page_full .parameters .months div").live("click", function() {
            var e = $(this).parents(".lmd_page_full").attr("id").substr(10);
            if (t.params.data[e] = t.params.data[e] || {}, $(this).hasClass("active"))
                $("#continent-" + e + " .parameters .months div").removeClass("active"), delete t.params.data[e].month;
            else {
                $("#continent-" + e + " .parameters .months div").removeClass("active"), $(this).addClass("active");
                var i = $(this).attr("data-month");
                t.params.data[e].month = i
            }
            t.params.data[e].page = 1, t.load_tours(e, !1)
        }), $(".lmd_page_full .parameters .side .cities select").live("change", function() {
            var e = $(this).parents(".lmd_page_full").attr("id").substr(10);
            t.params.data[e] = t.params.data[e] || {};
            var i = $(this).val();
            i > 0 ? t.params.data[e].start_city = i : delete t.params.data[e].start_city, t.params.data[e].page = 1, t.load_tours(e, !1)
        }), $(".lmd_page_full .parameters .side .countries select").live("change", function() {
            var e = $(this).parents(".lmd_page_full").attr("id").substr(10);
            t.params.data[e] = t.params.data[e] || {};
            var i = $(this).val();
            i > 0 ? t.params.data[e].country_id = i : delete t.params.data[e].country_id, t.params.data[e].page = 1, t.load_tours(e, !1)
        }), $(".lmd_page_full .parameters .side .operators select").live("change", function() {
            var e = $(this).parents(".lmd_page_full").attr("id").substr(10);
            t.params.data[e] = t.params.data[e] || {};
            var i = $(this).val();
            i > 0 ? t.params.data[e].operator = i : delete t.params.data[e].operator, t.params.data[e].page = 1, t.load_tours(e, !1)
        }), $(".lmd_page_full table .first td div").live("click", function() {
            var e = $(this).parents(".lmd_page_full").attr("id").substr(10);
            t.params.data[e] = t.params.data[e] || {}, $("#continent-" + e + " table .first td div").removeClass("active"), $(this).addClass("active");
            var i = $(this).attr("data-sort");
            $(this).hasClass("asc") ? (t.params.data[e].sort_type = "desc", $(this).removeClass("asc").addClass("desc")) : (t.params.data[e].sort_type = "asc", $(this).removeClass("desc").addClass("asc")), t.params.data[e].sort = i, t.params.data[e].page = 1, t.load_tours(e, !1)
        }), $(".lmd_page_full a.multi-line-button").live("click", function() {
            var e = $(this).parents(".lmd_page_full").attr("id").substr(10);
            t.params.data[e] = t.params.data[e] || {}, t.params.data[e].page = t.params.data[e].page || 1, t.params.data[e].page++, t.load_tours(e, !0)
        }), $(".lmd_page_full table .td7 a").live("click", function() {
            var e = $(this).attr("data-tour-id");
            $(".link-to-" + e).remove(), $(".hidden-" + e).hide().removeClass("hidden").show(1e3).removeClass("hidden-" + e)
        })
    }, t.load_tours = function(e, i) {
        if (i) {
            var n = $("#continent-" + e + " .load_more .title").text();
            $("#continent-" + e + " .load_more .title").html('<img src="/images/ajax_loader/small.gif">')
        } else
            $("#continent-" + e).append('<div class="loading">LOADING<br><img src="/images/ajax_loader/horiz.gif"></div>');
        var o = {
            ptype: t.params.ptype,
            continent_id: e,
            params: t.params.data[e]
        };
        $(".sub_page").length > 0 && (o.operator = $(".sub_page").val()), $.ajax({
            url: "/serp/quick_serp_ajax/sort",
            data: o,
            dataType: "json",
            type: "POST",
            success: function(o) {
                $("#continent-" + e + " .no_results").remove(), "OK" == o.status ? (i ? ($("#continent-" + e + " .second:last").after(o.html), $("#continent-" + e + " .load_more .title").html(n)) : ($("#continent-" + e + " .second").remove(), $("#continent-" + e + " .first").after(o.html)), $("#continent-" + e + " .loading").remove(), o.count <= o.to_tour ? $("#continent-" + e + " .load_more").addClass("hidden") : $("#continent-" + e + " .load_more").removeClass("hidden"), "start_city" in t.params.data[e] || ($("#continent-" + e + " .cities select option").each(function() {
                    "0" != $(this).val() && $(this).remove()
                }), $.each(o.city, function(t, i) {
                    $("#continent-" + e + " .cities select option").last().after('<option value="' + t + '">' + i + " (" + o.city_count[t] + ")</option>")
                }))) : "error" == o.status && ($("#continent-" + e + " .loading").remove(), $("#continent-" + e + " .main_table").after('<div class="no_results">No results found</div>'), $("#continent-" + e + " .second").remove())
            }
        })
    }, t.social_buttons_init = function() {
        $(".soc-buttons .cube").click(function() {
            var e = location.href,
                t = $(this).attr("class").split(" ")[1],
                i = encodeURIComponent(e);
            switch (t) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var n = urlencode("Get up to 55% OFF at the TourRadar Online Expo Jan 23rd 2016.");
                popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + n + "&hashtags=gotouring,TourRadar", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                popUp = window.open("https://plus.google.com/share?url=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                window.location = "whatsapp://send?text= " + i
            }
        })
    }, t.show_map_init = function() {
        $(".td2.length a").live("click", function() {
            var e = $(this).attr("data-tour-name"),
                i = $(this).attr("data-tour-id"),
                n = $(this).attr("data-tour-date");
            $.ajax({
                url: "/pw_tour/load",
                data: {
                    action: "locations",
                    id: i
                },
                dataType: "json",
                type: "POST",
                success: function(o) {
                    "OK" == o.status && (t.params.locations = o.locations, $(window).width() < 600 && $("#lmd-map").css("width", $(window).width() - 80), $(window).height() < 600 && $("#lmd-map").css("height", Math.max($(window).height() - 80, $(window).width() - 80)), $("#lmd-show-map").html(""), $("#lmd-map .name").text(e), $("#lmd-map .lmd-book").attr("href", "/book-now/" + i + "?date=" + n), $.fancybox({
                        href: "#lmd-map",
                        padding: 20,
                        margin: 20,
                        onComplete: function() {
                            $("#lmd-show-map").height($("#lmd-map").height() - $("#lmd-map .name").outerHeight() - $("#lmd-map .map-buttons").height() - 2), $.getScript("https://www.google.com/jsapi").done(function() {
                                var e = setInterval(function() {
                                    "object" == typeof google && (clearInterval(e), google.load("maps", "3", {
                                        other_params: "key=" + o.component.google_map_key,
                                        callback: function() {
                                            t.locations = o.component.locations, t.google_map_style = o.component.google_map_style, t.show_g_map("lmd-show-map")
                                        }
                                    }))
                                })
                            })
                        },
                        onClosed: function() {}
                    }))
                }
            })
        }), $("#lmd-map .lmd-close").live("click", function() {
            $.fancybox.close()
        })
    }, t.show_g_map = function(e) {
        map = new google.maps.Map(document.getElementById(e), {
            styles: JSON.parse(t.google_map_style),
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            disableDefaultUI: !0,
            zoomControl: !0,
            center: {
                lat: parseFloat(t.locations[0].city_x),
                lng: parseFloat(t.locations[0].city_y)
            },
            zoom: 10
        });
        for (var i = new Array, n = new Array, o = new Array, a = new google.maps.LatLngBounds, s = 0; s < t.locations.length; s++) {
            var r = t.locations[s],
                l = new google.maps.MarkerImage(0 == s ? "https://bit.ly/2g50Ny8" : s == t.locations.length - 1 ? "https://bit.ly/2g47U9Y" : "https://bit.ly/2kH4xLr", 0 == s || s == t.locations.length - 1 ? new google.maps.Size(16, 16) : new google.maps.Size(11, 11), new google.maps.Point(0, 0), 0 == s || s == t.locations.length - 1 ? new google.maps.Point(8, 8) : new google.maps.Point(5.5, 5.5)),
                c = new google.maps.Marker({
                    position: {
                        lat: parseFloat(r.city_x),
                        lng: parseFloat(r.city_y)
                    },
                    map: map,
                    icon: l,
                    title: r.city_name + ", " + r.country_name
                }),
                o = new google.maps.InfoWindow;
            content = r.city_name + ", " + r.country_name, google.maps.event.addListener(c, "click", function(e, t, i) {
                return function() {
                    i.setContent(t), i.open(map, e), setTimeout(function() {
                        i.close()
                    }, 3e3)
                }
            }(c, content, o)), n.push({
                lat: parseFloat(r.city_x),
                lng: parseFloat(r.city_y)
            }), i[i.length] = {
                x: parseFloat(r.city_x),
                y: parseFloat(r.city_y)
            }, a.extend(new google.maps.LatLng(parseFloat(r.city_x), parseFloat(r.city_y)))
        }
        var d = new google.maps.Polyline({
            path: n,
            geodesic: !1,
            strokeColor: "#409CD1",
            strokeOpacity: 1,
            strokeWeight: 2
        });
        d.setMap(map), 1 != t.locations.length && (map.setCenter(a.getCenter()), map.fitBounds(a)), t.load_google_map_runner(i, map)
    }, t.load_google_map_runner = function(e, i) {
        var n = new Array,
            o = new Array,
            a = new Array,
            s = 0;
        t.runner = !1, clearInterval(t.runner_interval);
        for (var r = 0; r < e.length - 1; r++)
            o[o.length] = Math.sqrt(Math.pow(e[r + 1].x - e[r].x, 2) + Math.pow(e[r + 1].y - e[r].y, 2)), s += o[o.length - 1];
        for (var r = 0; r < o.length; r++)
            a[r] = Math.round(o[r] / s * 1e3);
        for (var r = 0; r < e.length - 1; r++)
            for (var l = 1; l <= a[r]; l++)
                n[n.length] = new google.maps.LatLng(e[r].x + l / a[r] * (e[r + 1].x - e[r].x), e[r].y + l / a[r] * (e[r + 1].y - e[r].y));
        var c = new google.maps.MarkerImage("/images/responsive/tour/runner.png?v=1", new google.maps.Size(10, 10), new google.maps.Point(0, 0), new google.maps.Point(5, 5)),
            r = 0;
        t.runner_interval = setInterval(function() {
            r < n.length ? (t.runner ? t.runner.setPosition(n[r]) : t.runner = new google.maps.Marker({
                position: n[r],
                map: i,
                icon: c
            }), r++) : r = 0
        }, 10)
    }, t.scroll_init = function() {
        $(".back-to-top").click(function() {
            $("body, html").animate({
                scrollTop: 0
            }, "slow"), window.location.hash = "#"
        }), $(".region").click(function() {
            if (!$(this).hasClass("active")) {
                var e = $(this).attr("id").substr(7);
                $(".region.active").removeClass("active"), $(this).addClass("active"), $("body, html").animate({
                    scrollTop: $("#continent-" + e).offset().top - ($(".online-expo-2016 .continents-fixed").length > 0 ? 80 : 0)
                }, "slow"), window.location.hash = e
            }
        }), location.hash && $("#continent-" + location.hash.substr(1)).length > 0 && $("#continent-" + location.hash.substr(1)).length && setTimeout(function() {
            $("body, html").animate({
                scrollTop: $("#continent-" + location.hash.substr(1)).offset().top - 20 - ($(".online-expo-2016 .continents-fixed").length > 0 ? 80 : 0)
            }, "slow"), $("#region-" + location.hash.substr(1)).addClass("active")
        }, 100)
    }, t.send_show_popup = function() {
        $("#send_popup .bttn a").unbind("click").click(function() {
            var e = $(this).attr("id");
            $("#send_popup ." + e + ":visible").length > 0 ? ($("#send_popup ." + e).hide(), $("#" + e + " .title .triangle").removeClass("up").addClass("down")) : ($("#send_popup .bttn a .title .triangle").removeClass("up").addClass("down"), $("#" + e + " .title .triangle").removeClass("down").addClass("up"), "yourself" == e ? $("#send_popup .friend").hide() : $("#send_popup .yourself").hide(), $("#send_popup ." + e).show())
        }), $("#send_popup_link").fancybox({
            padding: 0,
            margin: 0,
            onComplete: function() {
                function e(e) {
                    var t = $("#send_friend_email").val();
                    if (!(t.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)))
                        return e && alert("Please enter valid friend email"), !1;
                    email_send_fri = t;
                    var i = $("#send_youremail").val();
                    if (!(i.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i)))
                        return e && alert("Please enter valid your email"), !1;
                    if (email_send_you = i, $("#send_name").val().length < 0)
                        return e && alert("Please enter your name"), !1;
                    if ($("#send_text").val().length < 0)
                        return e && alert("Please enter your message"), !1;
                    var n = new Object;
                    return n.email_send_fri = email_send_fri, n.email_send_you = email_send_you, n.send_name = $.trim($("#send_name").val()), n.send_text = $.trim($("#send_text").val()), n
                }
                $("#send_popup #send_popup_yourself").unbind("click").click(function() {
                    var e = $("#send_yourself_email").val();
                    if (!(e.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)))
                        return alert("Please enter valid email"), !1;
                    email_send = e, $("#send_popup #send_popup_yourself .title").text("Please wait...");
                    var i = new Date,
                        n = i.getDate(),
                        o = i.getMonth() + 1,
                        a = i.getFullYear(),
                        s = n + "/" + o + "/" + a,
                        r = new Date,
                        l = r.getHours(),
                        c = r.getMinutes();
                    c < 10 && (c = "0" + c);
                    var d = l + ":" + c;
                    $.ajax({
                        url: "/serp/responsive_details_tab",
                        data: {
                            tab: "send_yourself",
                            id: t.params.id,
                            email: email_send,
                            user_date: s,
                            user_time: d,
                            description: $("#content_details .best span").text(),
                            source: "bf"
                        },
                        dataType: "json",
                        type: "POST",
                        success: function(e) {
                            "OK" == e.status && ($("#send_popup #send_popup_yourself .title").text("Done!"), setTimeout(function() {
                                $.fancybox.close()
                            }, 1e3), setTimeout(function() {
                                $("#send_popup #send_popup_yourself .title").text("Send email")
                            }, 1e3))
                        }
                    })
                }), $("#send_popup #send_popup_friend").unbind("click").click(function() {
                    return !!e(!0) && (checked_data = e(!0), $("#send_popup #send_popup_friend .title").text("Please wait..."), void $.ajax({
                            url: "/serp/responsive_details_tab",
                            data: {
                                tab: "send",
                                id: t.params.id,
                                email: checked_data.email_send_fri,
                                email_you: checked_data.email_send_you,
                                message: checked_data.send_text,
                                name: checked_data.send_name,
                                description: $("#content_details .best span").text(),
                                source: "bf"
                            },
                            dataType: "json",
                            type: "POST",
                            success: function(e) {
                                "OK" == e.status && ($("#send_popup #send_popup_friend .title").text("Done!"), setTimeout(function() {
                                    $.fancybox.close()
                                }, 1e3), setTimeout(function() {
                                    $("#send_popup #send_popup_friend .title").text("Send email")
                                }, 1e3))
                            }
                        }))
                })
            }
        }).click()
    }
}
function RespSerp(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.process = !1, t.masonry_reload = !1, t.compare_button = function() {
        $(".serp #results .block .bottom .bottom-row .compare").unbind("hover").hover(function() {
            var e = $(this).attr("id").substr(8),
                i = $(this).children(".active");
            $(i).addClass("hidden"), $(i).hasClass("gray") ? $(this).children(".save").unbind("click").click(function() {
                t.params.traveller ? t.common.send_google_event("Save Tour", "Add", "Logged in Success") : t.common.send_google_event("Save Tour", "Add", "Logged Out"), t.save_process("save", e)
            }).removeClass("hidden") : $(i).hasClass("saved") && $(this).children(".remove").unbind("click").click(function() {
                t.common.send_google_event("Save Tour", "Remove", "Logged in Success"), t.save_process("remove", e)
            }).removeClass("hidden")
        }, function() {
            var e = $(this).children(".active");
            $(e).hasClass("gray") ? ($(this).children(".gray").removeClass("hidden"), $(this).children(".save").addClass("hidden")) : $(e).hasClass("saved") && ($(this).children(".saved").removeClass("hidden"), $(this).children(".remove").addClass("hidden"))
        })
    }, t.load_map_tours = function(e, i, n) {
        var o = new Object,
            a = new Object;
        n = "undefined" != typeof n ? n : "bottom-map-", $.each(e, function(s, r) {
            if (0 == $("#" + n + s + ".olMap").length || i) {
                for (var l = 1e3, c = 1e3, d = -1e3, u = -1e3, h = 0; h < e[s].length; h++)
                    e[s][h].city_zoom > 0 && (c = Math.min(c, e[s][h].city_x), u = Math.max(u, e[s][h].city_x), l = Math.min(l, e[s][h].city_y), d = Math.max(d, e[s][h].city_y));
                o[s] = new OpenLayers.Map(n + s), o[s].addLayer(new OpenLayers.Layer.OSM("MapQuest-OSM Tiles", ["http://otile1.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg", "http://otile2.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg", "http://otile3.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg", "http://otile4.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg"])), o[s].zoomToExtent(new OpenLayers.Bounds(l, c, d, u).transform(new OpenLayers.Projection("EPSG:4326"), new OpenLayers.Projection("EPSG:900913"))), o[s].getZoom() > 13 && o[s].zoomTo(13), $(".go-experience").length > 0 && (n + s == "map-73346" ? o[s].zoomTo(5) : n + s == "map-79142" && o[s].zoomTo(12)), a[s] = new OpenLayers.Layer.Markers("Markers"), o[s].addLayer(a[s]);
                for (var p = o[s].getControlsByClass("OpenLayers.Control.Navigation"), f = 0; f < p.length; f++)
                    p[f].disableZoomWheel(), $(window).width() <= 1024 && "olControlNavigation" == p[f].displayClass && p[f].deactivate();
                for (var m = new Array, h = (new Array, 0); h < e[s].length; h++)
                    if (e[s][h].city_zoom > 0) {
                        m[m.length] = new OpenLayers.Geometry.Point(e[s][h].city_y, e[s][h].city_x).transform(new OpenLayers.Projection("EPSG:4326"), o[s].getProjectionObject());
                        var g = new OpenLayers.Marker(new OpenLayers.LonLat(e[s][h].city_y, e[s][h].city_x).transform(new OpenLayers.Projection("EPSG:4326"), o[s].getProjectionObject()), new OpenLayers.Icon("/images/responsive/tour/marker.png?v=1", new OpenLayers.Size(21, 21), new OpenLayers.Pixel((-12), (-12))));
                        g.icon.imageDiv.title = e[s][h].city_name + ", " + e[s][h].country_name, a[s].addMarker(g)
                    }
                var v = new OpenLayers.Layer.Vector("Line Layer");
                o[s].addLayer(v), v.addFeatures([new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(m), null, {
                    strokeColor: "#409cd1",
                    strokeOpacity: 1,
                    strokeWidth: 2
                })]), OpenLayers.Control.Click = OpenLayers.Class(OpenLayers.Control, {
                    defaultHandlerOptions: {
                        single: !0,
                        "double": !1,
                        pixelTolerance: 0,
                        stopSingle: !1,
                        stopDouble: !1
                    },
                    initialize: function(e) {
                        this.handlerOptions = OpenLayers.Util.extend({}, this.defaultHandlerOptions), OpenLayers.Control.prototype.initialize.apply(this, arguments), this.handler = new OpenLayers.Handler.Click(this, {
                            click: this.trigger
                        }, this.handlerOptions)
                    },
                    trigger: function(e) {
                        "bottom-map-" == n && ($("#bottom-map-" + s + " .olMapViewport").hide(), $("#bottom-map-" + s).toggleClass("open"), $("#bottom-map-" + s).height(""), $("#bottom-map-" + s).parent().children(".params").show(), $("#bottom-map-" + s).children("img").show(), $("#bottom-map-" + s).children(".expand").text("Expand"), t.common.send_google_event("Map on SERP", "Close", s))
                    }
                });
                var _ = new OpenLayers.Control.Click;
                o[s].addControl(_), _.activate(), $(o[s].layers[object_size(o[s].layers) - 1].div).css("z-index", 329).parent().css({
                    height: "100%"
                })
            }
        })
    }, t.init_similar = function() {
        $(".image-place").each(function() {
            $(this).attr("src", $(this).attr("orig")), $(this).removeAttr("orig").removeClass("image-place")
        }), $("#results").imagesLoaded(function() {
            $("#results").masonry({
                itemSelector: ".block",
                isFitWidth: !0,
                isAnimated: !0
            })
        })
    }, t.save_process = function(e, i, n) {
        t.params.traveller ? ("save" == e ? ($("#compare-" + i + " .active").removeClass("active"), $("#compare-" + i + " .saved").addClass("active").removeClass("hidden"), $("#compare-" + i + " .save").addClass("hidden"), $("#compare-" + i + " .gray").addClass("hidden")) : "remove" == e && ($("#compare-" + i + " .active").removeClass("active"), $("#compare-" + i + " .gray").addClass("active").removeClass("hidden"), $("#compare-" + i + " .remove").addClass("hidden"), $("#compare-" + i + " .saved").addClass("hidden")), $.ajax({
            url: "/serp/responsive_details_tab",
            data: {
                tab: e,
                id: i,
                traveller: t.params.traveller.id
            },
            dataType: "json",
            type: "POST",
            success: function(t) {
                if ("OK" == t.status)
                    if (n)
                        location.reload();
                    else if ($("#header-new #row-2 #block-6.logged").length > 0) {
                        var i = parseInt($("#header-new #row-2 #block-6.logged").find(".indicator").html());
                        $("#header-new #row-2 #block-6.logged").find(".indicator").html(i + ("save" == e ? 1 : -1)), $("#header-new #row-2 #block-6.logged").addClass("active"), setTimeout(function() {
                            $("#header-new #row-2 #block-6.logged").removeClass("active")
                        }, 500)
                    }
            }
        })) : t.common.init_login_popup(t, function() {
            t.save_process(e, i, !0)
        })
    }
}
function RespApp() {
    var e = this;
    e.common = new RespCommon, e.init = function() {
        $("#watch a").fancybox({
            transitionIn: "none",
            transitionOut: "none",
            type: "iframe",
            width: 960,
            height: 540
        }), e.init_get_popup()
    }, e.init_get_popup = function() {
        $("#get-it-now").length > 0 && ($("#get-it-now").fancybox({
            onClosed: function() {
                $("#app_get_popup #info .adv").remove(), $("#app_get_popup #info form").show(), $("#app_get_popup #email").val(""), $("#app_get_popup #checkbox input").attr("checked", !0)
            }
        }), $("#app_get_popup form").submit(function() {
            var e = $.trim($("#app_get_popup #email").val());
            return e && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e) ? void $.ajax({
                url: "/welcome/app",
                dataType: "json",
                type: "POST",
                data: {
                    action: "send",
                    email: e,
                    tick: $("#app_get_popup #checkbox input").attr("checked") ? 1 : 0
                },
                success: function(e) {
                    "OK" == e.status && ($("#app_get_popup #info form").hide(), $("#app_get_popup #info").append('<p style="margin-top:12px;" class="adv">Please check your inbox in 1 minute!</p><p class="adv"><a href="#" id="app_get_popup_close">close popup</a></p>'), $("#app_get_popup #info #app_get_popup_close").click(function() {
                        $.fancybox.close()
                    }))
                }
            }) : (alert("Please enter valid email address"), !1)
        }))
    }
}
function RespScholarship() {
    var e = this;
    e.common = new RespCommon, e.social_buttons_init = function() {
        $(".scholarship-banner .soc-buttons .cube").click(function() {
            var e = location.origin + "/scholarship",
                t = $(this).attr("class").split(" ")[1],
                i = encodeURIComponent(e);
            switch (t) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var n = "A $2,000 prize Scholarship Program for travel lovers";
                popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + n + "&hashtags=TourRadar", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                popUp = window.open("https://plus.google.com/share?url=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                window.location = "whatsapp://send?text=A $2,000 prize Scholarship Program for travel lovers " + i
            }
        })
    }, e.init = function() {
        e.common.load_twitter(), e.social_buttons_init()
    }
}
function RespOperNew(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.we_load_jsapi = !1, t.comparison = function() {
        t.load_jsapi_and_compare_stat(), t.common.load_twitter(), $(".videos0").fotorama({
            maxwidth: $(".videos0").width(),
            ratio: 1.5
        }), $(".videos1").fotorama({
            maxwidth: $(".videos1").width(),
            ratio: 1.5
        }), $(".comparison_page .inside .comparison .zero").length > 0 && ($(window).bind("load scroll", function() {
            $("#header-new #row-banner.fly").length && ($(".comparison_page .a_menu").css("top", $("#header-new #row-banner.fly").outerHeight() + "px"), $(".comparison_page .inside .comparison .zero").css("top", $("#header-new #row-banner.fly").outerHeight() + 44 + "px")), $(window).scrollTop() >= $(".comparison_page .inside .comparison .first").offset().top && ($(".comparison_page .inside .comparison .zero").hasClass("fly") || ($(".comparison_page .inside .comparison .zero").addClass("fly"), $(".comparison_page .inside .comparison .first:first .one").css("padding-top", $(".comparison_page .inside .comparison .zero").outerHeight()))), $(window).scrollTop() < $(".comparison_page .inside .comparison").offset().top && ($(".comparison_page .inside .comparison .zero").css("width", ""), $(".comparison_page .inside .comparison .zero").removeClass("fly"), $(".comparison_page .inside .comparison .first:first .one").css("padding-top", "")), $(window).scrollTop() >= $(".comparison_page .a_menu").offset().top && ($(".comparison_page .a_menu").hasClass("fly") || $(".comparison_page .a_menu").addClass("fly")), $(".comparison_page .inside .content").length && $(window).scrollTop() < $(".comparison_page .inside .content").offset().top && $(".comparison_page .a_menu").hasClass("fly") && ($(".comparison_page .a_menu").css("width", ""), $(".comparison_page .a_menu").removeClass("fly"))
        }), $(window).bind("load resize scroll", function() {
            if ($(window).width() < 830) {
                var e = $(window).width() - 20;
                $(".comparison_page .inside .comparison .zero").css("width", e), $(".comparison_page .c_menu").css("width", e), $(".comparison_page .a_menu").css("width", e)
            } else
                $(".comparison_page .inside .comparison .zero").css("width", 978), $(".comparison_page .c_menu").css("width", 978), $(".comparison_page .a_menu").css("width", 978)
        }), $(".comparison_page #cl_re").bind("click", function() {
            $("body, html").animate({
                scrollTop: $("#Reviews").offset().top - 280
            }, "slow")
        }), $(".comparison_page #cl_to").bind("click", function() {
            $("body, html").animate({
                scrollTop: $("#Tours").offset().top - 280
            }, "slow")
        }), $(".comparison_page #cl_de").bind("click", function() {
            $("body, html").animate({
                scrollTop: $("#Destinations").offset().top - 280
            }, "slow")
        }), $(".comparison_page #cl_po").bind("click", function() {
            $("body, html").animate({
                scrollTop: $("#Policies").offset().top - 280
            }, "slow")
        }))
    }, t.load_jsapi_and_compare_stat = function() {
        $(window).width() > 500 && t.params.most.length > 0 && $.getScript("https://www.google.com/jsapi").done(function() {
            var e = setInterval(function() {
                "object" == typeof google && (clearInterval(e), google.load("visualization", "1", {
                    packages: ["corechart"],
                    callback: function() {
                        $(".cities_stat").remove();
                        for (var e = 0; e < t.params.most.length; e++)
                            t.draw_compare_stat(t.params.most[e], "cities_stat_" + e);
                        for (var e = 0; e < t.params.most_types.length; e++)
                            t.draw_compare_stat(t.params.most_types[e], "types_stat_" + e)
                    }
                }))
            })
        })
    }, t.draw_compare_stat = function(e, t) {
        var i = [];
        i[i.length] = ["City", "Count", {
            role: "style"
        }];
        for (var n = 0; n < e.length; n++)
            if (n <= 5) {
                var o = e[n];
                o.name.length > 9 && (o.name = o.name.substr(0, 7) + "..."), i[i.length] = [o.name + " (" + o.count + ")", parseInt(o.count), "color:#409cd1; opacity: " + (0 == n ? 1 : (10 - 1.5 * n) / 10)]
            }
        var a = google.visualization.arrayToDataTable(i),
            s = 5,
            r = {
                hAxis: {
                    gridlines: {
                        color: "#dcdcdc",
                        count: s
                    },
                    baselineColor: "#dcdcdc",
                    format: "##",
                    textStyle: {
                        color: "#9c9c9c",
                        fontSize: "10"
                    }
                },
                vAxis: {
                    textStyle: {
                        color: "#409cd1",
                        fontSize: "10"
                    }
                },
                legend: {
                    position: "none"
                },
                tooltip: {
                    trigger: "none"
                },
                isStacked: !0,
                chartArea: {
                    left: 120,
                    width: "70%",
                    height: "70%"
                }
            },
            l = new google.visualization.BarChart(document.getElementById(t));
        l.draw(a, r)
    }
}
function RespCar(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.init = function() {
        if ("#tourtheworld" == window.location.hash && $("body, html").animate({
            scrollTop: $('span:contains("Tour the World")').offset().top - 80
        }, "slow"), $(".span12.page-inner").length > 0) {
            $(".span12.page-inner").outerWidth()
        }
    }, t.who_we_are_init = function() {
        $("#content").height($("#content").height() - 163), $(".teammate .photo img").each(function() {
            $("<img />").attr("src", $(this).attr("data-travel"))
        }), $(".teammate").on("mouseenter", function() {
            return !$(this).hasClass("join") && void $(this).find(".photo img").attr("src", $(this).find(".photo img").attr("data-travel"))
        }), $(".teammate").on("mouseleave", function() {
            return !$(this).hasClass("join") && void $(this).find(".photo img").attr("src", $(this).find(".photo img").attr("data-office"))
        }), $(".teammate").on("click", function() {
            if ($(this).hasClass("join"))
                return !0;
            var e = this;
            $.fancybox({
                href: "#teammate-info",
                padding: 40,
                margin: 0,
                onStart: function() {
                    $("#teammate-info").html($(e).find(".info-list").html())
                },
                onComplete: function() {}
            })
        })
    }, t.operators_list_init = function() {
        var e = $(".row-o.white").position().top - $(".row-o.white").outerHeight(),
            t = 0;
        $(window).scroll(function() {
            $("#header-new #row-banner").length > 0 ? t = 0 : (t = 0, $("#header-new #row-banner-blank").length > 0 && $("#header-new #row-banner-blank").remove()), $(window).scrollTop() > e + t ? ($(".row-o.white").addClass("to-top"), $(".row-o.white").css("top", t)) : ($(".row-o.white").removeClass("to-top"), $(".row-o.white").css("top", 0))
        }), $(".char-strip a").bind("click", function() {
            $(".row-o.white").addClass("to-top"), $(".char-strip a").removeClass("active"), $(this).addClass("active"), $(".row-o .letter").removeClass("active"), $($(this).attr("href")).next(".letter").addClass("active"), $("html, body").animate({
                scrollTop: $($(this).attr("href")).offset().top - 100
            }, 1e3)
        }), $(".all[data-cont]").click(function() {
            $('.cont[data-cont="' + $(this).attr("data-cont") + '"] .tohid').toggleClass("hidden"), $(this).text("See all" == $(this).text() ? "Hide" : "See all")
        })
    }, t.init_guide_community = function() {
        $(window).bind("load resize", function() {
            $("#bar").width() - 6;
            (new ProfileBar).init_bar(t.params.balance)
        }), $(".soc-buttons .cube").click(function() {
            var e = location.origin + "/guide-community",
                t = $(this).attr("class").split(" ")[1],
                i = encodeURIComponent(e);
            switch (t) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                popUp = window.open("https://twitter.com/share?url=" + i + "&hashtags=TourRadar", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                popUp = window.open("https://plus.google.com/share?url=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                window.location = "whatsapp://send?text= " + i
            }
        }), $(".guide-community .personal-link").length > 0 && ($(".send-fb-message").click(function() {
            FB.ui({
                method: "send",
                link: $("#share_fb").attr("data-link")
            })
        }), t.pil = new ProfileInviteLanding, t.pil.init_clipboard(), t.pil.init_personalize(), t.pm = new ProfileMy, t.pm.init_share())
    }, t.init_affiliates = function() {
        $(".soc-buttons .cube").click(function() {
            var e = location.origin + "/affiliate-program",
                t = $(this).attr("class").split(" ")[1],
                i = encodeURIComponent(e);
            switch (t) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                popUp = window.open("https://twitter.com/share?url=" + i + "&hashtags=TourRadar", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                popUp = window.open("https://plus.google.com/share?url=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                window.location = "whatsapp://send?text= " + i
            }
        })
    }, t.contact_us_init = function() {
        $(".contact-us .blk-contact .open-olark").click(function() {
            t.olarkIntegration.startEnquiryDialog(), $("#fancybox-close").click()
        }), $.ajax({
            url: "/welcome/why_box_templates",
            dataType: "json",
            type: "POST",
            success: function(e) {
                "OK" == e.status ? $(".contact-us .blk-contact .agents").html(e.html.popup1) : t.common.error()
            }
        }), $("#q_action").change(function() {
            $(".blk-question .message").text("");
            var e = $(".contact-button"),
                t = e.children(".button-submit"),
                i = e.children(".button-join"),
                n = $(".contact-issue");
            e.removeClass("hidden"), "action_join" == $(this).val() ? (n.addClass("hidden"), $(".contact-fields").addClass("hidden"), t.addClass("hidden"), i.removeClass("hidden")) : ("action_issue" == $(this).val() ? n.removeClass("hidden") : n.addClass("hidden"), $(".contact-fields").removeClass("hidden"), i.addClass("hidden"), t.removeClass("hidden"))
        }), $(".contact-us .blk-question #q_send").click(function() {
            var e = $("#q_action").val(),
                i = $("#q_issue").val(),
                n = $("#q_name").val().trim(),
                o = $("#q_email").val().trim(),
                a = $("#q_description").val().trim(),
                s = null;
            if (null == e && (s = "Please select qustion type."), 0 == n.length ? s = "Please enter your name." : 0 != o.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(o) ? 0 == a.length && (s = "Please enter description.") : s = "Please enter valid email address.", s)
                $(".blk-question .message").removeClass("hidden"), $(".blk-question .message").addClass("red"), $(".blk-question .message").text(s);
            else {
                var r,
                    l;
                "action_booking" === e ? (r = "/enquiries/save_enquiry_simple/", l = {
                    type: "t",
                    id: t.params.general_question_id,
                    enquiry_source: "",
                    email: o,
                    first_name: n,
                    source: "tr",
                    source_id: 0,
                    pax: 1,
                    name: n,
                    details_type: 4,
                    comment: a,
                    note: ""
                }) : (r = "/contact", l = {
                    action: e,
                    issue: i,
                    name: n,
                    email: o,
                    description: a
                }), $.ajax({
                    url: r,
                    data: l,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        if ($(".contact-button").prop("disabled", !1), "OK" == e.status) {
                            $(".contact-button").addClass("hidden"), $(".contact-issue").addClass("hidden"), $(".contact-fields").addClass("hidden"), $("#q_action").val(""), $("#q_issue").val(""), $("#q_name").val(""), $("#q_email").val(""), $("#q_description").val(""), $(".blk-question .message").removeClass("red hidden");
                            var i = "";
                            e.href && (i = ' <a href="' + e.href + '">View</a>'), $(".blk-question .message").html("Your question was sent successfully." + i)
                        } else
                            t.common.error()
                    },
                    error: function() {
                        $(".contact-button").prop("disabled", !1), t.common.error()
                    }
                })
            }
        })
    }, t.init_ambassador = function() {
        t.common.load_twitter(), t.social_buttons_init_ambassador(), $(".fancybox").fancybox({
            padding: 20
        })
    }, t.social_buttons_init_how_it_works = function() {
        $(".soc-buttons .cube").click(function() {
            var e = location.href,
                i = $(this).attr("class").split(" ")[1],
                n = encodeURIComponent(e);
            switch (i) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + n, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var o = "Not sure how how to book a tour? Follow these simple steps to make booking your tour easy.";
                popUp = window.open("https://twitter.com/share?url=" + n + "&text=" + o + "&hashtags=GoTouring", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                popUp = window.open("https://plus.google.com/share?url=" + n, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                window.location = "whatsapp://send?text=Hey, Check out this infographics on how easy it is to book a tour " + n;
                break;
            case "send":
                t.send_show_popup("/about/page/how-does-touring-work")
            }
        })
    }, t.social_buttons_init_ambassador = function() {
        $(".soc-buttons .cube").click(function() {
            var e = location.origin + "/ambassadors",
                t = $(this).attr("class").split(" ")[1],
                i = encodeURIComponent(e);
            switch (t) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var n = "I'm funding my dream tour and could win $1,000 for flights as a Student Ambassador with TourRadar!";
                popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + n + "&hashtags=TourRadar", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                popUp = window.open("https://plus.google.com/share?url=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                window.location = "whatsapp://send?text=I'm funding my dream tour and could win $1,000 for flights as a Student Ambassador with TourRadar! " + i
            }
        })
    }, t.social_buttons_init = function() {
        $(".text .soc-buttons .cube").click(function() {
            var e = location.origin + "/awards/2015-guide-of-the-year-award",
                i = $(this).attr("class").split(" ")[1],
                n = encodeURIComponent(e);
            switch (i) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + n, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var o = "Hey, check out the Guide of the Year award from TourRadar.com";
                popUp = window.open("https://twitter.com/share?url=" + n + "&text=" + o + "&hashtags=TourRadar", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                popUp = window.open("https://plus.google.com/share?url=" + n, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                window.location = "whatsapp://send?text=Hey, check out the Guide of the Year award from TourRadar.com " + n;
                break;
            case "send":
                t.send_show_popup()
            }
        });
        var e = location.origin + location.pathname,
            i = encodeURIComponent(e);
        $(".award .soc .tw").click(function() {
            var e = "The best Tour %26 Guide of the Year awards hosted by @TourRadar";
            popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + e + "&hashtags=gotouring", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
        }), $(".award .soc .fb").click(function() {
            popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
        })
    }, t.send_show_popup = function(e) {
        e = "undefined" != typeof e ? e : "/welcome/guide_of_the_year", $("#send_popup .bttn a").unbind("click").click(function() {
            var e = $(this).attr("id");
            $("#send_popup ." + e + ":visible").length > 0 ? ($("#send_popup ." + e).hide(), $("#" + e + " .title .triangle").removeClass("up").addClass("down")) : ($("#send_popup .bttn a .title .triangle").removeClass("up").addClass("down"), $("#" + e + " .title .triangle").removeClass("down").addClass("up"), "yourself" == e ? $("#send_popup .friend").hide() : $("#send_popup .yourself").hide(), $("#send_popup ." + e).show())
        }), $("#send_popup_link").fancybox({
            padding: 0,
            margin: 0,
            onComplete: function() {
                function t(e) {
                    var t = $("#send_friend_email").val();
                    if (!(t.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)))
                        return e && alert("Please enter valid friend email"), !1;
                    email_send_fri = t;
                    var i = $("#send_youremail").val();
                    if (!(i.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i)))
                        return e && alert("Please enter valid your email"), !1;
                    if (email_send_you = i, $("#send_name").val().length < 0)
                        return e && alert("Please enter your name"), !1;
                    if ($("#send_text").val().length < 0)
                        return e && alert("Please enter your message"), !1;
                    var n = new Object;
                    return n.email_send_fri = email_send_fri, n.email_send_you = email_send_you, n.send_name = $.trim($("#send_name").val()), n.send_text = $.trim($("#send_text").val()), n
                }
                $("#send_popup #send_popup_yourself").unbind("click").click(function() {
                    var t = $("#send_yourself_email").val();
                    if (t.length < 1 || !/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t))
                        return alert("Please enter valid email"), !1;
                    $("#send_popup #send_popup_yourself .title").text("Please wait...");
                    var i = new Date,
                        n = i.getDate(),
                        o = i.getMonth() + 1,
                        a = i.getFullYear(),
                        s = n + "/" + o + "/" + a,
                        r = new Date,
                        l = r.getHours(),
                        c = r.getMinutes();
                    c < 10 && (c = "0" + c);
                    var d = l + ":" + c;
                    $.ajax({
                        url: e,
                        data: {
                            tab: "send_yourself",
                            email: t,
                            user_date: s,
                            user_time: d
                        },
                        dataType: "json",
                        type: "POST",
                        success: function(e) {
                            "OK" == e.status && ($("#send_popup #send_popup_yourself .title").text("Done!"), setTimeout(function() {
                                $.fancybox.close(), $("#send_popup #send_popup_yourself .title").text("Send email")
                            }, 1e3))
                        }
                    })
                }), $("#send_popup #send_popup_friend").unbind("click").click(function() {
                    return !!t(!0) && (checked_data = t(!0), $("#send_popup #send_popup_friend .title").text("Please wait..."), void $.ajax({
                            url: e,
                            data: {
                                tab: "send",
                                email: checked_data.email_send_fri,
                                email_you: checked_data.email_send_you,
                                message: checked_data.send_text,
                                name: checked_data.send_name
                            },
                            dataType: "json",
                            type: "POST",
                            success: function(e) {
                                "OK" == e.status && ($("#send_popup #send_popup_friend .title").text("Done!"), setTimeout(function() {
                                    $.fancybox.close(), $("#send_popup #send_popup_friend .title").text("Send email")
                                }, 1e3))
                            }
                        }))
                })
            }
        }).click()
    }, t.init_ev = function() {
        $(window).bind("load resize", function() {
            var e = Math.min($(window).width() - 40, 866);
            $(".video_big iframe").width(e).height(e / 1.777778)
        }), t.common.load_twitter(), function(e, t, i) {
            var n,
                o = e.getElementsByTagName(t)[0];
            e.getElementById(i) || (n = e.createElement(t), n.id = i, n.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=144053452313695&version=v2.3", o.parentNode.insertBefore(n, o))
        }(document, "script", "facebook-jssdk"), setTimeout(function() {
            $(".eurovision #content .bg-image").animate({
                opacity: .75
            }, 3e3)
        }, 3e3), $(".in.first").css("min-height", $(window).height() + "px"), $(".in .n1").css("padding-top", $(window).height() - $(".in .t1").outerHeight() - $(".in .t2").outerHeight() - $(".in .t3").outerHeight() - $(".in .t4").outerHeight() - 300 + "px").removeClass("hidden"), $(".eurovision #content .in .n1 svg").click(function() {
            $("body, html").animate({
                scrollTop: $(".eurovision #content .in .t5.itin").offset().top + 20
            }, "slow")
        }), $(".eurovision #content .in .day .ttx .x3 .rm a").click(function() {
            $(this).parent().hide();
            var e = $(this).parent().parent().parent().parent(),
                t = $(this).parent().parent().parent();
            $(e).children(".im").hide(), $(window).width() > 1e3 && $(t).addClass("auto"), $(t).find(".second-ttx").removeClass("hidden")
        }), $(".eurovision #content .in .day .im .tri").click(function() {
            var e = $(this).parent().attr("id"),
                t = $(this).parent().find("img");
            $(t).addClass("hidden");
            var i = active = 0;
            $(t).each(function() {
                i++, $(this).hasClass("active") && (active = i)
            });
            var n = 1;
            n = $(this).hasClass("right") ? active + 1 <= t.length ? active + 1 : 1 : active - 1 > 0 ? active - 1 : t.length, $(t).removeClass("active"), $("." + e + "-" + n).addClass("active").removeClass("hidden")
        }), $(".eurovision #content .in .day .ttx .x3 .second-ttx .he").click(function() {
            var e = $(this).parent().parent().parent().parent(),
                t = $(this).parent().parent().parent();
            $(t).removeClass("auto"), $(this).parent().addClass("hidden"), $(e).children(".im").show(), $(e).find(".rm").show()
        })
    }, t.init_toty = function() {
        t.common.load_twitter();
        for (var e = 2; e <= 4; e++)
            $("<img />").attr("src", "/images/responsive/contests/tour_of_the_year/bg-toty-2015-0" + e + ".jpg");
        $(".toty .scroll").click(function(e) {
            e.preventDefault(), $("body, html").animate({
                scrollTop: $("#" + $(this).attr("data-target")).offset().top
            }, "slow")
        }), $(".leaderboard-category").on("click", function() {
            var e = $(this).text().toLowerCase().replace(/[_\s]/g, "-"),
                t = {
                    type: $(this).data("type"),
                    theme: $(this).data("theme"),
                    continent: $(this).data("continent")
                };
            $(this).siblings().removeClass("active"), $(this).addClass("active"), $.ajax({
                url: "/welcome/tour_of_the_year",
                data: t,
                dataType: "json",
                type: "POST",
                success: function(t) {
                    "OK" == t.status && ($("#leaderboard-tours").remove(), $("#leaderboard-categories").after(t.html), window.location.hash = e)
                }
            })
        }), location.hash && $(".leaderboard-category").each(function() {
            var e = location.hash.substr(1).replace(/[_\s]/g, "-"),
                t = $(this).text().toLowerCase().replace(/[_\s]/g, "-");
            t == e && ($(this).click(), $("body, html").animate({
                scrollTop: $("#why-no-fees").offset().top + 20
            }, "slow"))
        });
        var i = location.origin + location.pathname,
            n = encodeURIComponent(i);
        $(".toty .text .soc .tw").click(function() {
            var e = "Find out about the Tour of the Year Awards by @TourRadar";
            popUp = window.open("https://twitter.com/share?url=" + n + "&text=" + e + "&hashtags=gotouring", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
        }), $(".toty .text .soc .fb").click(function() {
            popUp = window.open("https://www.facebook.com/sharer.php?u=" + n, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
        })
    }, t.init_goty = function() {
        t.common.load_twitter(), $("#footer").css("margin-top", "-1px");
        for (var e = 2; e <= 4; e++)
            $("<img />").attr("src", "/images/responsive/contests/guide_of_the_year/bg-goty-2015-0" + e + ".jpg");
        var i = 1;
        setInterval(function() {
            i = 4 == i ? 1 : i + 1, $(".banner .image").animate({
                opacity: .01
            }, 1e3, function() {
                $(".banner .image img").attr("src", "/images/responsive/contests/guide_of_the_year/bg-goty-2015-0" + i + ".jpg"), $(".banner .image").animate({
                    opacity: 1
                }, 1e3)
            })
        }, 7e3);
        t.init_guide_signup()
    }, t.init_guide_popup = function(e) {
        var t = setInterval(function() {
            if ($("#signup_guide_popup:visible").length > 0) {
                var i = $("#traveller_login #traveller_success_id").html();
                i && 0 == $("#traveller_login .info1").length && (i = i.split("::"), 3 == i.length && "NaN" != parseInt(i[0]) && (clearInterval(t), $.fancybox.close(), e()))
            } else
                clearInterval(t)
        }, 100)
    }, t.init_promotions = function() {
        if (t.compare_button(), t.subscribe_init(), t.params.campaign && t.params.campaign.expires && t.params.campaign.expires > 0)
            var e = parseInt(t.params.campaign.expires),
                i = setInterval(function() {
                    if (e > 0) {
                        if (e > 259200) {
                            var t = Math.floor(e / 86400),
                                n = Math.floor((e - 86400 * t) / 3660),
                                o = Math.floor((e - 86400 * t - 3600 * n) / 60),
                                a = e - 86400 * t - 3600 * n - 60 * o;
                            $(".expires span").removeClass("hidden").html(t + "d " + n + "h " + o + "m " + a + "s")
                        } else {
                            var n = Math.floor(e / 3660),
                                o = Math.floor((e - 3600 * n) / 60),
                                a = e - 3600 * n - 60 * o;
                            $(".expires span").removeClass("hidden").html(n + "h " + o + "m " + a + "s")
                        }
                        e--
                    } else
                        clearInterval(i), $(".expires").html("<span>Expired!</span>")
                }, 1e3);
        $(".region").each(function() {
            var e = 0,
                t = $(this).children(".text").html();
            if (0 != $(this).attr("id")) {
                var i = $(this).attr("id").substr(7);
                $(".campaign").each(function() {
                    (i > 0 && $(this).attr("continents").indexOf(":" + i + ":") >= 0 || 0 == i) && e++
                })
            } else
                e = $(".campaign").length;
            $(this).children(".text").html(t + " (" + e + ")"), 0 == e && $(this).addClass("disabled")
        }), $(".readmore").mouseover(function() {
            $(this).popover("show")
        }), $(".region").not(".disabled").click(function() {
            if (!$(this).hasClass("active")) {
                var e = $(this).attr("id").substr(7);
                $(".region.active").removeClass("active"), $(this).addClass("active"), $(".campaign").hide(), $(".campaign").each(function() {
                    (e > 0 && $(this).attr("continents").indexOf(":" + e + ":") >= 0 || 0 == e) && $(this).show()
                }), $(".promotion .continents:visible").not(".continents-scroll").length > 0 && $("body, html").animate({
                    scrollTop: $(".promotion .continents").not(".continents-scroll").offset().top
                }, "slow")
            }
        }), location.hash && $("#" + location.hash.substr(1)).length > 0 && $(".region#" + location.hash.substr(1) + ":visible").length && setTimeout(function() {
            $("body, html").animate({
                scrollTop: $(".region#" + location.hash.substr(1) + ":visible").offset().top - 20
            }, "slow"), $(".region#" + location.hash.substr(1) + ":visible").click()
        }, 100), $(".campaign").click(function() {
            var e = $(this).attr("id").substr(9),
                t = $(this).find(".title").html().toLowerCase().replace(/[^0-9A-Za-z]+/g, "-").replace(/\-{2,}/g, "-");
            location.href = "/deals/" + e + "-" + t
        }), $(window).scroll(function(e, t, i) {
            $(window).scrollTop() >= 720 ? $(".continents-scroll").removeClass("hidden") : $(".continents-scroll").addClass("hidden")
        }), $("#terms").fancybox(), $("#results").imagesLoaded(function() {
            $("#results").masonry({
                itemSelector: ".block",
                isFitWidth: !0,
                isAnimated: !0
            })
        }), t.init_pagination()
    }, t.subscribe_init = function() {
        $(".promotion .line_bottom .lmd_page div input").keypress(function(e) {
            13 == e.which && $(".promotion .line_bottom .lmd_page div a").click()
        }), $(".promotion .line_bottom .lmd_page div a").click(function() {
            var e = $.trim($(".promotion .line_bottom .lmd_page div input").val());
            return e && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e) ? void $.ajax({
                url: "/serp/quick_serp_ajax/subscribe/deals",
                dataType: "json",
                type: "POST",
                data: {
                    email: e
                },
                success: function(e) {
                    "OK" == e.status && $(".promotion .line_bottom div").html("You're now on the list!")
                }
            }) : (alert("Please enter valid email address"), !1)
        })
    }, t.save_process = function(e, i, n) {
        t.params.traveller ? ("save" == e ? ($("#compare-" + i + " .active").removeClass("active"), $("#compare-" + i + " .saved").addClass("active").removeClass("hidden"), $("#compare-" + i + " .save").addClass("hidden"), $("#compare-" + i + " .gray").addClass("hidden")) : "remove" == e && ($("#compare-" + i + " .active").removeClass("active"), $("#compare-" + i + " .gray").addClass("active").removeClass("hidden"), $("#compare-" + i + " .remove").addClass("hidden"), $("#compare-" + i + " .saved").addClass("hidden")), $.ajax({
            url: "/serp/responsive_details_tab",
            data: {
                tab: e,
                id: i,
                traveller: t.params.traveller.id
            },
            dataType: "json",
            type: "POST",
            success: function(t) {
                if ("OK" == t.status)
                    if (n)
                        location.reload();
                    else if ($("#header-new #row-2 #block-7.logged").length > 0) {
                        var i = parseInt($("#header-new #row-2 #block-7.logged").find(".indicator").html());
                        $("#header-new #row-2 #block-7.logged").find(".indicator").html(i + ("save" == e ? 1 : -1)), $("#header-new #row-2 #block-7.logged").addClass("active"), setTimeout(function() {
                            $("#header-new #row-2 #block-7.logged").removeClass("active")
                        }, 500)
                    }
            }
        })) : t.common.init_login_popup(t, function() {
            t.save_process(e, i, !0)
        })
    }, t.compare_button = function() {
        $(".serp #results .block .bottom .bottom-row .compare").unbind("hover").hover(function() {
            var e = $(this).attr("id").substr(8),
                i = $(this).children(".active");
            $(i).addClass("hidden"), $(i).hasClass("gray") ? $(this).children(".save").click(function() {
                t.save_process("save", e)
            }).removeClass("hidden") : $(i).hasClass("saved") && $(this).children(".remove").click(function() {
                t.save_process("remove", e)
            }).removeClass("hidden")
        }, function() {
            var e = $(this).children(".active");
            $(e).hasClass("gray") ? ($(this).children(".gray").removeClass("hidden"), $(this).children(".save").addClass("hidden")) : $(e).hasClass("saved") && ($(this).children(".saved").removeClass("hidden"), $(this).children(".remove").addClass("hidden"))
        })
    }, t.init_pagination = function() {
        if ($("#more-tours-load").length > 0) {
            var e = $("#more-tours-load").attr("page"),
                i = $("#more-tours-load").attr("count");
            $("#more-tours-load").click(function() {
                e++, $("#more-tours-load").addClass("hidden"), $(".loader-1").removeClass("hidden"), $.ajax({
                    url: "/serp/promotion/" + t.params.campaign.id,
                    data: {
                        page: e
                    },
                    dataType: "json",
                    type: "POST",
                    success: function(n) {
                        "OK" == n.status && ($("#results").css("min-height", $("#results").height() + "px"), $("#results").append(n.html).imagesLoaded(function() {
                            $("#results").masonry("destroy"), $("#results").masonry()
                        }), $("#more-tours-load").attr("page", e), 20 * e > i && $("#more-tours-load").remove(), $("#more-tours-load").removeClass("hidden"), $(".loader-1").addClass("hidden"), t.compare_button())
                    }
                })
            })
        }
    }, t.init_guide_signup = function() {
        gapi.signin.render("signin_google_g", {
            callback: function(e) {
                t.common.user_google(e)
            },
            clientid: "399583607835.apps.googleusercontent.com",
            cookiepolicy: "single_host_origin",
            scope: "https://www.googleapis.com/auth/plus.login",
            width: "wide",
            scope: "https://www.googleapis.com/auth/userinfo.email"
        }), $("#guide-signup a").click(function() {
            return location.href = "/registration", !1
        })
    }, t.how_does_touring_work = function() {
        t.social_buttons_init_how_it_works()
    }, t.awards = function() {
        "#block-leaderboard" == window.location.hash && setTimeout(function() {
            $("body, html").animate({
                scrollTop: $("#why-leaderboard").offset().top - 20
            }, "slow")
        }, 300), t.common.load_twitter(), t.init_guide_signup(), t.social_buttons_init(), $("#footer").css("margin-top", "-1px"), $(".award #badges a").click(function() {
            var e = $(this).attr("id").substr(5);
            $("body, html").animate({
                scrollTop: $("#" + e).offset().top - (10 + $(".continents-scroll-aw").height())
            }, "slow")
        }), $(".continents-scroll-aw .region").click(function() {
            var e = $(this).attr("id").substr(3);
            $(".award #badges a#show-" + e).click()
        }), $(".continents-scroll-aw").length > 0 && $(window).scroll(function() {
            $("#header-new #row-banner.fly").length ? $(".continents-scroll-aw").css("top", $("#header-new #row-banner.fly").outerHeight() + "px") : $(".continents-scroll-aw").css("top", ""), $(window).scrollTop() >= $(".award #badges div span").offset().top && $(window).width() >= 799 ? $(".continents-scroll-aw").hasClass("hidden") && $(".continents-scroll-aw").removeClass("hidden") : $(window).scrollTop() < $(".award #badges div span").offset().top && $(window).width() >= 799 && ($(".continents-scroll-aw").hasClass("hidden") || $(".continents-scroll-aw").addClass("hidden")), $(window).scrollTop() >= $(".award-top.mat-2014").offset().top + $(".award-top.mat-2014").height() && $(window).width() < 799 ? $(".continents-scroll-aw").hasClass("hidden") && $(".continents-scroll-aw").removeClass("hidden") : $(window).scrollTop() < $(".award-top.mat-2014").offset().top + $(".award-top.mat-2014").height() && $(window).width() < 799 && ($(".continents-scroll-aw").hasClass("hidden") || $(".continents-scroll-aw").addClass("hidden"))
        }), $("#isobel-video").click(function() {
            return $.fancybox({
                padding: 0,
                autoScale: !1,
                transitionIn: "none",
                transitionOut: "none",
                title: this.title,
                width: 640,
                height: 385,
                href: this.href.replace(new RegExp("watch\\?v=", "i"), "v/"),
                type: "swf",
                swf: {
                    wmode: "transparent",
                    allowfullscreen: "true"
                }
            }), !1
        }), $("#g_oper").chosen({
            width: "235px",
            no_results_text: "No results matched"
        }), $("#g_send").click(function() {
            $("#signup_guide_popup input").css("border", ""), $("#signup_guide_popup select").css("border", ""), $("#signup_guide_popup .error").remove();
            var e = $.trim($("#g_name").val()),
                i = $("#g_oper").val(),
                n = $.trim($("#g_email").val()),
                o = $("#g_password_1").val().trim(),
                a = $("#g_password_2").val().trim(),
                s = null;
            if (0 == e.length ? (s = "Please enter your name.", $("#signup_guide_popup #g_name").css("border", "Red 1px solid")) : 0 == i.length ? (s = "Please choose your operator.", $("#signup_guide_popup #g_oper_chosen .chosen-single").css("border", "Red 1px solid")) : 0 != n.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n) ? o.length < 6 ? (s = "Enter min. 6 characters for the password.", $("#signup_guide_popup #g_password_1").css("border", "Red 1px solid")) : o != a && (s = "Passwords do not match.", $("#signup_guide_popup #g_password_2").css("border", "Red 1px solid")) : (s = "Please enter valid email address.", $("#signup_guide_popup #g_email").css("border", "Red 1px solid")), s)
                $("#signup_guide_popup").append('<div class="error">' + s + "</div>");
            else {
                $("#traveller_login").append('<div class="error message">Please wait...</div>');
                var r = {
                    type: "guide",
                    operator_id: i,
                    name: e,
                    email: n,
                    password: o
                };
                $.ajax({
                    url: "/travellers/signup",
                    data: r,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        $("#signup_guide_popup .error").remove(), "OK" == e.status ? location.href = "/members/profile" : "repeat" == e.status ? ($("#signup_guide_popup").append('<div class="error">' + e.message + "</div>"), $("#signup_guide_popup #g_email").css("border", "Red 1px solid"), $("#signup_guide_popup .error").height() >= 25 && $("#signup_guide_popup .error").css("bottom", "61px")) : t.error()
                    },
                    error: function() {
                        t.error()
                    }
                })
            }
        }), $(".a2015").length > 0 && $(".a2015 .share a").click(function() {
            var e = $(this).attr("data-url"),
                t = $(this).attr("class"),
                i = encodeURIComponent(e);
            switch (t) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var n = $(this).attr("data-text");
                popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + n + "&hashtags=TourRadar,gotouring", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                var n = $(this).attr("data-text");
                window.location = "whatsapp://send?text=" + n + " " + i
            }
        }), t.init_goty_2016()
    }, t.init_goty_2016 = function() {
        $(".goty .scroll").click(function(e) {
            e.preventDefault(), $("body, html").animate({
                scrollTop: $("#" + $(this).attr("data-target")).offset().top
            }, "slow")
        });
        var e = location.origin + location.pathname,
            i = encodeURIComponent(e);
        $(".goty .soc .tw").click(function() {
            var e = "Find out about the Guide of the Year Awards by @TourRadar";
            popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + e + "&hashtags=gotouring", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
        }), $(".goty .soc .fb").click(function() {
            popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
        }), $(".goty .soc .eml").click(function() {
            t.send_show_popup(e)
        }), $(".goty #why-leaderboard .buttons a").click(function(e) {
            if (e.preventDefault(), !$(this).hasClass("active")) {
                var t = $(this).attr("data-filter");
                "all" == t ? ($(".leaderboard-entry").removeClass("hidden"), $(".leaderboard-entry").slice(15).addClass("hidden")) : ($(".leaderboard-entry").addClass("hidden"), $('.leaderboard-entry[data-themes*="' + t + '"]').slice(0, 15).removeClass("hidden")), $(".goty #why-leaderboard .buttons a").removeClass("active"), $(this).addClass("active");
                var i = 1;
                $(".leaderboard-entry:visible .rank").each(function() {
                    $(this).text(i), i++
                })
            }
        })
    }, t.init_promo = function() {
        t.init(), t.common.load_twitter(), location.hash && $("#" + location.hash.substr(1)).length > 0 && setTimeout(function() {
            $("body, html").animate({
                scrollTop: $("#" + location.hash.substr(1)).offset().top - 55
            }, "slow"), $("#" + location.hash.substr(1) + " .content").click()
        }, 300)
    }, t.init_drive = function() {
        t.init(), $("#amb-1").click(function() {
            $("body, html").animate({
                scrollTop: $("#more-bookings-1").offset().top - 85
            }, "slow")
        }), $("#amb-2").click(function() {
            $("body, html").animate({
                scrollTop: $("#more-bookings-2").offset().top - 85
            }, "slow")
        }), $("#amb-3").click(function() {
            $("body, html").animate({
                scrollTop: $("#more-bookings-3").offset().top - 85
            }, "slow")
        }), $("#amb-4").click(function() {
            $("body, html").animate({
                scrollTop: $("#more-bookings-4").offset().top - 85
            }, "slow")
        }), $("#amb-5").click(function() {
            $("body, html").animate({
                scrollTop: $("#more-bookings-5").offset().top - 85
            }, "slow")
        }), $("#amb-6").click(function() {
            $("body, html").animate({
                scrollTop: $("#more-bookings-6").offset().top - 85
            }, "slow")
        }), $("#amb-7").click(function() {
            $("body, html").animate({
                scrollTop: $("#more-bookings-7").offset().top - 85
            }, "slow")
        }), $("#amb-8").click(function() {
            $("body, html").animate({
                scrollTop: $("#more-bookings-8").offset().top - 85
            }, "slow")
        })
    }, t.init_contest_black_friday = function() {
        if (t.params.black_friday_finish && $(".black_friday .slide .exp_text div span").length > 0)
            var e = setInterval(function() {
                var i = t.params.black_friday_finish - t.params.black_friday_now;
                if (t.params.black_friday_now++, i > 0) {
                    var n = Math.floor(i / 3600),
                        o = Math.floor((i - 3600 * n) / 60),
                        a = i - 3600 * n - 60 * o;
                    $(".black_friday .slide .exp_text div span").html(n + "H " + o + "M " + a + "S")
                } else
                    clearInterval(e), $(".black_friday .slide .exp_text div span").html("&nbsp;")
            }, 1e3);
        $(window).width() > 1500 ? $(".slide").height(Math.round($(".slide").width() / (1583 / 449))) : $(".slide").height(449), $(window).bind("load resize", function() {
            $(window).width() > 1500 ? $(".slide").height(Math.round($(".slide").width() / (1583 / 449))) : $(".slide").height(449)
        }), t.common.load_twitter(), $("#results").imagesLoaded(function() {
            $("#results").masonry({
                itemSelector: ".block",
                isFitWidth: !0,
                isAnimated: !0
            })
        }), t.included_black_friday(), t.init_pagination()
    }, t.included_black_friday = function() {
        var e = Array();
        $(".black_friday #results .block .bottom .bottom-row .included svg").mouseover(function() {
            var t = $(this).attr("id").substr(2);
            $(this).attr("id");
            $(this).attr("data-placement", "left"), "undefined" == typeof e[t] && ($(this).attr("data-content", e[t]), $.ajax({
                url: "/serp/load_context_ajax",
                data: {
                    id: t
                },
                dataType: "json",
                type: "POST",
                success: function(i) {
                    "OK" == i.status && (e[t] = "", $.each(i.data, function(i, n) {
                        "1" == n.status && "1" == n.included && ("accommodation" == n.field_name ? e[t] += "<b>Accommodation:</b> " + n.field_value + "<br>" : "flights" == n.field_name ? e[t] += "<b>Flights:</b> " + n.field_value + "<br>" : "guide" == n.field_name ? e[t] += "<b>Guide:</b> " + n.field_value + "<br>" : "meals" == n.field_name ? e[t] += "<b>Meals:</b> " + n.field_value + "<br>" : "transport" == n.field_name ? e[t] += "<b>Transport:</b> " + n.field_value + "<br>" : "otherincluded" == n.field_name && (e[t] += "<b>Other:</b> " + n.field_value + "<br>"))
                    }), $(".popover-content").empty().append(e[t]))
                }
            })), $(window).width() >= 490 && ($(this).attr("data-content", e[t]).popover("show").mouseleave(function() {
                $(this).popover("hide")
            }), $(".popover-content").empty().append(e[t]))
        })
    }, t.init_contest_early = function() {
        $(".email #e_email").keydown(function(e) {
            13 == e.keyCode && $("#send_ear").click()
        }), $("#send_ear").click(function() {
            return $(".email #e_email").val().trim().length < 3 ? (alert("Please enter correct email"), !1) : void $.ajax({
                url: "/welcome/early_bird_landing",
                data: {
                    email: $(".email #e_email").val()
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status ? $(".contest_early .block .email").html(e.message) : "blocked" == e.status && alert(e.message)
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.init_careers = function() {
        t.init(), $(".go").click(function() {
            $("body, html").animate({
                scrollTop: $('h1[seo="' + $(this).parent().attr("seo") + '"]').offset().top - 60
            }, "slow")
        }), location.hash && $('li[seo="' + location.hash.substr(1) + '"]').length > 0 && setTimeout(function() {
            $('li[seo="' + location.hash.substr(1) + '"] a').click()
        }, 300)
    }, t.init_affiliate_program = function() {
        t.init(), $(".operator-form form").submit(function() {
            return $.trim($("#email").val()) && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test($("#email").val()) ? 0 == $("#terms:checked").length ? (alert("Please accept TourRadar Affiliate agreement"), !1) : void $.ajax({
                url: "/about/page/affiliate-program",
                data: {
                    name: $("#name").val(),
                    email: $("#email").val(),
                    business_name: $("#business_name").val(),
                    website: $("#website").val(),
                    facebook_page: $("#facebook_page").val(),
                    visitors_number: $("#visitors_number").val()
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($("#content").append('<a id="popup_link" href="#popup"></a><div class="hidden"><div id="popup"><p align="center"><strong>Thanks!</strong></p><p align="center">The TourRadar Team will be in contact shortly!</p></div></div>'), $("#popup_link").fancybox({
                        onClosed: function() {
                            location.reload()
                        }
                    }).click())
                },
                error: function() {
                    t.common.error()
                }
            }) : (alert("Please enter valid email address"), !1)
        }), $("#enquiry-now").click(function() {
            $("body, html").animate({
                scrollTop: $("span.blue:first").offset().top - 60
            }, "slow")
        })
    }, t.init_cost = function(e) {
        t.init(), $("#stat").html('<img src="/images/responsive/ajax-loader-1.gif" />');
        var i = setInterval(function() {
            "object" == typeof google && (clearInterval(i), google.load("visualization", "1", {
                packages: ["corechart"],
                callback: function() {
                    $("#destination").val("c201").change()
                }
            }))
        });
        $("#destination").chosen().change(function() {
            $("#stat").html('<img src="/images/responsive/ajax-loader-1.gif" />'), $.ajax({
                url: "/about/get_by_ajax",
                data: {
                    action: "get_stat_cost",
                    id: $("#destination").val(),
                    currency: e
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && (e.count > 0 ? t.load_stat(e.data, e.currency) : $("#stat").html("No statistic for this destination."))
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.load_stat = function(e, t) {
        var i = [];
        i[i.length] = ["Month", "Price", {
            type: "string",
            role: "annotation"
        }, {
            type: "string",
            role: "tooltip",
            p: {
                html: !0
            }
        }];
        var n = -1e3,
            o = 1e3;
        for (var a in e) {
            var s = e[0].name,
                r = Math.round(parseFloat(e[a].average_day_price));
            i[i.length] = [e[a].month_text, r, r.toString(), "<b>" + e[a].month_text_full + "</b><br>" + r + " " + t], parseFloat(e[a].average_day_price) > n && (n = parseFloat(e[a].average_day_price)), parseFloat(e[a].average_day_price) < o && (o = parseFloat(e[a].average_day_price))
        }
        var e = google.visualization.arrayToDataTable(i),
            l = {
                title: s,
                legend: {
                    position: "none"
                },
                tooltip: {
                    isHtml: !0
                },
                chartArea: {
                    width: $("#stat").width() - 100
                },
                series: {
                    0: {
                        color: "#409cd1",
                        lineWidth: 0,
                        pointSize: 4
                    },
                    1: {
                        color: "#eaf4fa",
                        lineWidth: 2
                    },
                    2: {
                        color: "#9a9a9a",
                        lineWidth: 0,
                        areaOpacity: 0
                    }
                },
                hAxis: {
                    title: "Month",
                    titleTextStyle: {
                        color: "#333"
                    }
                },
                vAxis: {
                    title: t,
                    baselineColor: "#eaf4fa",
                    maxValue: n + 5,
                    minValue: o - 5
                }
            },
            c = new google.visualization.AreaChart(document.getElementById("stat"));
        c.draw(e, l)
    }, t.init_widget = function(e) {
        t.init();
        var i = Math.floor($(".span8").width()),
            n = Math.floor($(".span4").width() - 1);
        $(".span8").width(i), $(".span4").width(n), $(".go").click(function() {
            $("body, html").animate({
                scrollTop: $('h1[seo="' + $(this).parent().attr("seo") + '"]').offset().top - 110
            }, "slow")
        }), location.hash && $('li[seo="' + location.hash.substr(1) + '"]').length > 0 && setTimeout(function() {
            $('li[seo="' + location.hash.substr(1) + '"] a').click()
        }, 300);
        var o = (parseInt(158), 122),
            a = 104,
            s = 103,
            r = 80,
            l = r + s,
            c = $(".tour #operator-tr").outerHeight() + 40,
            d = c + s;
        if (/iPhone|iPad/i.test(navigator.userAgent)) {
            var u = parseInt($(".tour #head-tr").width()),
                h = parseInt($(".operator #head-tr").width());
            $(".tour #frame").on("load", function() {
                $(".tour #frame").width(u - 2), $(".tour #frame").contents().find(".home").width(u - 2)
            }), $(".operator #frame").on("load", function() {
                $(".operator #frame").width(h), $(".operator #frame").contents().find(".home").width(h - 2)
            }), $(".tour #write_review-tr").hide()
        }
        $(".tour #operator_tour").chosen(), $(".tour #tour_tour").chosen(), $(".tour #operator_tour").change(function() {
            $(".tour #embed_html").val("");
            var e = parseInt($(".tour #height").val()),
                i = parseInt($(".tour #operator_tour").val()),
                n = parseInt($(".tour #show_stars").val()),
                o = $(".tour #tour-color").val(),
                a = parseInt($(".tour #show_brand").val());
            if ($(".tour #show_c").val() > 0)
                var r = "/" + parseInt($(".tour #show_c").val());
            else
                var r = "/0";
            $(".tour #tour_tour_chzn").remove(), $(".tour #tour_tour").empty().chosen("destroy").show(), $(".tour #show_t").hide(), $(".tour #show_c").hide().empty(), $.ajax({
                url: "/about/get_by_ajax",
                data: {
                    action: "get_tours",
                    id: i
                },
                dataType: "json",
                type: "POST",
                success: function(t) {
                    if ("OK" == t.status) {
                        if (t.tours) {
                            for (var i in t.tours) {
                                var l = "";
                                if (0 == i) {
                                    l = "selected", $(".tour #change_a").attr("href", "//www.tourradar.com/review#" + t.operator_id + "-" + t.tours[i].id), $(".tour #name-tr a").remove(), $(".tour #name-tr").append('<a href="//www.tourradar.com/t/' + t.tours[i].id + '" target="_blank">' + t.tours[i].name + "</a>"), $(".tour #tour_id").attr("value", t.tours[i].id), $(".tour #tour_name").attr("value", t.tours[i].name), $(".tour #operator_id").attr("value", t.operator_id), $(".tour #tr .badge-bottom-links a").attr("href", "//www.tourradar.com/" + t.operator_seo.replace("_", "-").toLowerCase()), c = $(".tour #operator-tr").outerHeight() + 54, d = c + s;
                                    var u = e - c;
                                    $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d) + "/" + r + "/" + t.tours[i].id + "/0/0/" + n + "/" + u + "/" + o + "/" + a), $(".tour #frame").attr("height", u)
                                }
                                $(".tour #tour_tour").append('<option value="' + t.tours[i].id + '" ' + l + ">" + t.tours[i].name + " (" + t.tours[i].total_reviews + " reviews)</option>")
                            }
                            t.best && ($(".tour #show_c").append('<option value="0">Don`t show any</option>'), t.best_tour_top_continent > 0 && $(".tour #show_c").append('<option value="1" selected>' + t.best_tour_top_continent + " out of " + t.best_tour_count_continent + " tours in " + t.best_tour_name_continent + "</option>"), t.best_tour_top_country > 0 && $(".tour #show_c").append('<option value="2">' + t.best_tour_top_country + " out of " + t.best_tour_count_country + " tours in " + t.best_tour_name_country + "</option>"), $(".tour #show_t").show(), $(".tour #show_c").show())
                        } else
                            $(".tour #tour_tour").append('<option value="">No active tours</option>');
                        $(".tour #tour_tour").chosen()
                    }
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".tour #tour_tour").change(function() {
            $(".tour #embed_html").val("");
            var e = parseInt($(".tour #height").val()),
                i = parseInt($(".tour #tour_tour").val()),
                n = parseInt($(".tour #show_stars").val()),
                o = $(".tour #tour-color").val(),
                a = parseInt($(".tour #show_brand").val());
            if ($(".tour #show_c").val() > 0)
                var r = "/" + parseInt($(".tour #show_c").val());
            else
                var r = "/0";
            $(".tour #show_t").hide(), $(".tour #show_c").hide().empty(), $.ajax({
                url: "/about/get_by_ajax",
                data: {
                    action: "get_best",
                    id: i
                },
                dataType: "json",
                type: "POST",
                success: function(t) {
                    if ("OK" == t.status) {
                        t.best && ($(".tour #show_c").append('<option value="0">Don`t show any</option>'), t.best_tour_top_continent > 0 && $(".tour #show_c").append('<option value="1" selected>' + t.best_tour_top_continent + " out of " + t.best_tour_count_continent + " tours in " + t.best_tour_name_continent + "</option>"), t.best_tour_top_country > 0 && $(".tour #show_c").append('<option value="2">' + t.best_tour_top_country + " out of " + t.best_tour_count_country + " tours in " + t.best_tour_name_country + "</option>"), $(".tour #show_c").show(), $(".tour #show_t").show()), $(".tour #change_a").attr("href", "//www.tourradar.com/review#" + t.operator_id + "-" + t.tour_id), $(".tour #name-tr a").remove(), $(".tour #name-tr").append('<a href="//www.tourradar.com/t/' + t.tour_id + '" target="_blank">' + t.tour_name + "</a>"), $(".tour #tour_id").attr("value", t.tour_id), $(".tour #tour_name").attr("value", t.tour_name), $(".tour #operator_id").attr("value", t.operator_id), c = $(".tour #operator-tr").outerHeight() + 54, d = c + s;
                        var i = e - c;
                        $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d) + "/" + r + "/" + t.tour_id + "/0/0/" + n + "/" + i + "/" + o + "/" + a), $(".tour #frame").attr("height", i)
                    }
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".tour #width").change(function() {
            $(".tour #embed_html").val("");
            var e = parseInt($(this).val());
            e < 256 ? ($(".tour #minimum-w").attr("style", "color:red"), $(".tour #maximum-w").attr("style", ""), $(".tour #tr").css("width", 256), $(".tour #frame").css("width", 256), $(".tour #width").attr("value", 256)) : e > 800 ? ($(".tour #maximum-w").attr("style", "color:red"), $(".tour #minimum-w").attr("style", ""), $(".tour #tr").css("width", 800), $(".tour #frame").css("width", 800), $("#width").attr("value", 800)) : ($(".tour #maximum-w").attr("style", ""), $(".tour #minimum-w").attr("style", ""), $(".tour #frame").css("width", e), $(".tour #tr").css("width", e))
        }), $(".tour #responsive").change(function() {
            if ($(".tour #width").prop("disabled", this.checked), this.checked)
                $(".tour #frame").css("width", "100%"), $(".tour #tr").css("width", "100%");
            else {
                var e = $(".tour #width").val();
                $(".tour #frame").css("width", e), $(".tour #tr").css("width", e)
            }
        }), $(".tour #show_a").change(function() {
            0 == $(".tour #show_a").val() ? $(".tour #change_a").hide() : $(".tour #change_a").show()
        }), $(".tour #show_c").change(function() {
            $(".tour #embed_html").val("");
            var e = parseInt($(".tour #height").val()),
                t = parseInt($(".tour #tour_tour").val()),
                i = parseInt($(".tour #show_stars").val()),
                n = $(".tour #tour-color").val(),
                o = e - c,
                a = parseInt($(".tour #show_brand").val());
            if ($(".tour #show_c").val() > 0) {
                var s = parseInt($(".tour #show_c").val());
                $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d) + "/" + s + "/" + t + "/0/0/" + i + "/" + o + "/" + n + "/" + a), $(".tour #frame").height(o)
            } else
                $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d + 23) + "/0/" + t + "/0/0/" + i + "/" + o + "/" + n + "/" + a), $(".tour #frame").height(o)
        }), $(".tour #show_operator").change(function() {
            $(".tour #embed_html").val(""), 0 == $(".tour #show_operator").val() ? $(".tour #name-tr").hide() : $(".tour #name-tr").show(), c = $(".tour #operator-tr").outerHeight() + 40, d = c + s
        }), $(".tour #show_brand").change(function() {
            $(".tour #embed_html").val(""), 0 == $(".tour #show_brand").val() ? ($(".tour #head-tr").hide(), $(".tour #widget-color-picker").show(), $(".tour #tour-color").prop("disabled", !1), d -= 40) : ($(".tour #head-tr").show(), $(".tour #tour-color").val("409cd1"), $(".tour #widget-color-picker").hide(), $(".tour #tour-color").prop("disabled", !0), d += 40);
            var e = parseInt($(".tour #height").val()),
                t = parseInt($(".tour #tour_id").val()),
                i = parseInt($(".tour #show_stars").val()),
                n = $(".tour #tour-color").val(),
                o = e - c,
                a = parseInt($(".tour #show_brand").val());
            if ($(".tour #show_c").val() > 0) {
                var s = parseInt($(".tour #show_c").val());
                $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d) + "/" + s + "/" + t + "/0/0/" + i + "/" + o + "/" + n + "/" + a), $(".tour #frame").height(o)
            } else
                $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d + 23) + "/0/" + t + "/0/0/" + i + "/" + o + "/" + n + "/" + a), $(".tour #frame").height(o);
            $(".tour #tour-picker-box").css("background", "#" + n), $(".tour #name-tr a").css("color", "#" + n), $(".tour #operator-tr").css("border-color", "#" + n)
        }), $(document).on("change", ".tour #tour-color", function() {
            $(".tour #embed_html").val("");
            var e = parseInt($(".tour #height").val()),
                t = parseInt($(".tour #tour_id").val()),
                i = parseInt($(".tour #show_stars").val()),
                n = $(".tour #tour-color").val(),
                o = e - c,
                a = parseInt($(".tour #show_brand").val());
            if ($(".tour #show_c").val() > 0) {
                var s = parseInt($(".tour #show_c").val());
                $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d) + "/" + s + "/" + t + "/0/0/" + i + "/" + o + "/" + n + "/" + a), $(".tour #frame").height(o)
            } else
                $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d + 23) + "/0/" + t + "/0/0/" + i + "/" + o + "/" + n + "/" + a), $(".tour #frame").height(o);
            $(".tour #tour-picker-box").css("background", "#" + n), $(".tour #name-tr a").css("color", "#" + n), $(".tour #operator-tr").css("border-color", "#" + n)
        }), $(".tour #show_stars").change(function() {
            $(".tour #embed_html").val("");
            var e = parseInt($(".tour #height").val()),
                t = parseInt($(".tour #tour_id").val()),
                i = parseInt($(".tour #show_stars").val()),
                n = $(".tour #tour-color").val(),
                o = e - c,
                a = parseInt($(".tour #show_brand").val());
            if ($(".tour #show_c").val() > 0) {
                var s = parseInt($(".tour #show_c").val());
                $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d) + "/" + s + "/" + t + "/0/0/" + i + "/" + o + "/" + n + "/" + a), $(".tour #frame").height(o)
            } else
                $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (e - d + 23) + "/0/" + t + "/0/0/" + i + "/" + o + "/" + n + "/" + a), $(".tour #frame").height(o)
        }), $(".tour #height").change(function() {
            if ($(".tour #embed_html").val(""), $(".tour #show_c").val() > 0)
                var e = "/" + parseInt($(".tour #show_c").val());
            else
                var e = "/0";
            var t = parseInt($(".tour #tour_id").val()),
                i = parseInt($(this).val()),
                n = parseInt($(".tour #show_stars").val()),
                o = $(".tour #tour-color").val(),
                a = parseInt($(".tour #show_brand").val());
            if (i < 265) {
                var s = 265 - c + 10;
                $(".tour #minimum-h").attr("style", "color:red"), $(".tour #maximum-h").attr("style", ""), $(".tour #frame").css("height", 265 - c), $(".tour #height").attr("value", 265), $(".tour #tr").css("height", 265), $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (265 - d) + "/" + e + "/" + t + "/0/0/" + n + "/" + s + "/" + o + "/" + a), $(".tour #frame").height(s)
            } else if (i > 600) {
                var s = 600 - c + 10;
                $(".tour #maximum-h").attr("style", "color:red"), $(".tour #minimum-h").attr("style", ""), $(".tour #frame").css("height", 600 - c), $(".tour #tr").css("height", 600), $(".tour #height").attr("value", 600), $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (600 - d) + "/" + e + "/" + t + "/0/0/" + n + "/" + s + "/" + o + "/" + a), $(".tour #frame").height(s)
            } else {
                var s = i - c + 10;
                $(".tour #maximum-h").attr("style", ""), $(".tour #minimum-h").attr("style", ""), $(".tour #frame").css("height", i - c), $(".tour #tr").css("height", i), $(".tour #frame").attr("src", "/iframes/reviews_widget_to/" + (i - d) + "/" + e + "/" + t + "/0/0/" + n + "/" + s + "/" + o + "/" + a), $(".tour #frame").height(s)
            }
        }), $(".tour #tour-picker-box").click(function() {
            $(".tour #tour-color").is(":enabled") && showColorPicker($(this)[0], $(".tour #tour-color")[0])
        }), $(".tour #regenerate").click(function() {
            var e = parseInt($(".tour #width").val()),
                t = parseInt($(".tour #height").val()),
                i = parseInt($(".tour #tour_id").val()),
                n = $(".tour #tour_name").val(),
                o = $(".tour #operator_id").val(),
                a = parseInt($(".tour #show_stars").val()),
                s = $(".tour #tour-color").val(),
                r = ($(".tour #op_seo_name").val(), t - c),
                l = parseInt($(".tour #show_brand").val());
            if ($(".tour #show_c").val() > 0) {
                var u = parseInt($(".tour #show_c").val());
                content_height = t - d
            } else {
                content_height = t - d + 24;
                var u = "0"
            }
            $(".tour #show_a").val() > 0 ? link = '<a href="https://www.tourradar.com/review#' + o + "-" + i + '" target="_blank" id="change_a">\n<div id="write_review-tr"><span>Leave a review</span></div>\n</a>\n' : link = "", $(".tour #show_brand").val() > 0 ? head = '<div id="head-tr">\n<a href ="//www.tourradar.com/" target="_blank" title="TourRadar"><div id="logo-tr"></div></a>\n' + link + "</div>" : head = "", $(".tour #show_operator").val() > 0 ? name = '<div id="name-tr">\n<a href="//www.tourradar.com/t/' + i + '" target="_blank" style="color:#' + s + ';">' + n + " Reviews</a>\n</div>" : name = "", $(".tour #responsive:checked").length > 0 ? e = "100%" : e += "px", $(".tour #embed_html").val('<link href="//www.tourradar.com/include/css/reviews_widget_op.css" rel="stylesheet" type="text/css">\n<div id="tr" style="width:' + e + "; height:" + t + 'px">\n' + head + '\n<div id="operator-tr" style=" border-color:#' + s + ';">\n' + name + '\n</div>\n<iframe id="frame" src="//www.tourradar.com/iframes/reviews_widget_to/' + content_height + "/" + u + "/" + i + "/0/0/" + a + "/" + r + "/" + s + "/" + l + '?q" width="' + e + '" height="' + r + '" frameborder="0" scrolling="no"></iframe>\n<div class="badge-bottom-links">\nReviewed on <a href="//www.tourradar.com/t/' + i + '" target="_blank" title="TourRadar">tourradar.com</a>\n</div>\n</div>')
        }), $(".tour #embed_html").focus(function() {
            $(this).select()
        }), $(".testimonial #operator_tour").chosen(), $(".testimonial #tour_tour").chosen(), $(".testimonial #operator_tour").change(function() {
            $(".testimonial #embed_html").val(""), $(".testimonial #tour_tour_chzn").remove(), $(".testimonial #tour_tour").empty().chosen("destroy").show();
            var e = parseInt($(".testimonial #operator_tour").val());
            $.ajax({
                url: "/about/get_by_ajax",
                data: {
                    action: "get_tours",
                    id: e
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    if ("OK" == e.status) {
                        if ($("#review-next").hide(), e.review_count > 1 ? $("#review-previous").show() : $("#review-previous").hide(), e.tours)
                            for (var t in e.tours) {
                                var i = "";
                                0 == t && (i = "selected",
                                $(".testimonial #tour_id").attr("value", e.tours[t].id), $(".testimonial #review_offset").attr("value", 1), $(".testimonial #review_count").attr("value", e.tours[t].good_reviews), $(".testimonial .bottom-links .more-reviews").attr("href", "https://www.tourradar.com/t/" + e.tours[t].id + "#reviews"), $(".testimonial .bottom-links .more-reviews").text("See " + e.tours[t].name + " reviews"), $(".testimonial #frame").attr("src", "/iframes/testimonials_widget/" + e.tours[t].id)), $(".testimonial #tour_tour").append('<option value="' + e.tours[t].id + '" ' + i + ">" + e.tours[t].name + " (" + e.tours[t].total_reviews + " reviews)</option>")
                            }
                        else
                            $(".testimonial #tour_tour").append('<option value="">No active tours</option>');
                        $(".testimonial #tour_tour").chosen()
                    }
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".testimonial #tour_tour").change(function() {
            $(".testimonial #embed_html").val("");
            var e = parseInt($(".testimonial #tour_tour").val());
            $.ajax({
                url: "/about/get_by_ajax",
                data: {
                    action: "get_reviews",
                    id: e
                },
                dataType: "json",
                type: "POST",
                success: function(t) {
                    "OK" == t.status && ($("#review-next").hide(), t.review_count > 1 ? $("#review-previous").show() : $("#review-previous").hide(), $(".testimonial #tour_id").attr("value", e), $(".testimonial #review_offset").attr("value", 1), $(".testimonial #review_count").attr("value", t.review_count), $(".testimonial .bottom-links .more-reviews").attr("href", "https://www.tourradar.com/t/" + e + "#reviews"), $(".testimonial .bottom-links .more-reviews").text("See " + t.name + " reviews"), $(".testimonial #frame").attr("src", "/iframes/testimonials_widget/" + e))
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".testimonial #width").change(function() {
            $(".testimonial #embed_html").val("");
            var e = parseInt($(this).val());
            e < 350 ? ($(".testimonial #tr").css("width", 350), $(".testimonial #frame").css("width", 350), $(".testimonial #width").attr("value", 350)) : e > 800 ? ($(".testimonial #tr").css("width", 800), $(".testimonial #frame").css("width", 800), $(".testimonial #width").attr("value", 800)) : ($(".testimonial #frame").css("width", e), $(".testimonial #tr").css("width", e))
        }), $(".testimonial #responsive").change(function() {
            if ($(".testimonial #width").prop("disabled", this.checked), this.checked)
                $(".testimonial #frame").css("width", "100%"), $(".testimonial #tr").css("width", "100%");
            else {
                var e = $(".testimonial #width").val();
                $(".testimonial #frame").css("width", e), $(".testimonial #tr").css("width", e)
            }
        }), $(".testimonial #review-next").click(function() {
            $(".testimonial #embed_html").val("");
            var e = $(".testimonial #tour_id").val(),
                t = $(".testimonial #review_offset").val();
            $(".testimonial #review_count").val();
            t--, $(".testimonial #review_offset").attr("value", t), $("#review-previous").show(), 1 == t && $("#review-next").hide(), $(".testimonial #frame").attr("src", "/iframes/testimonials_widget/" + e + "/" + t)
        }), $(".testimonial #review-previous").click(function() {
            $(".testimonial #embed_html").val("");
            var e = $(".testimonial #tour_id").val(),
                t = $(".testimonial #review_offset").val(),
                i = $(".testimonial #review_count").val();
            t++, $(".testimonial #review_offset").attr("value", t), $("#review-next").show(), t >= i && $("#review-previous").hide(), $(".testimonial #frame").attr("src", "/iframes/testimonials_widget/" + e + "/" + t)
        }), $(".testimonial #regenerate").click(function() {
            var e = parseInt($(".testimonial #width").val());
            e += "px";
            var t = $(".testimonial #review_offset").val(),
                i = parseInt($(".testimonial #tour_id").val()),
                n = $(".testimonial #tour_tour option:selected").html();
            if ($(".testimonial #responsive:checked").length > 0)
                var e = "100%";
            $(".testimonial #embed_html").val('<link href="//www.tourradar.com/include/css/reviews_widget_op.css" rel="stylesheet" type="text/css">\n<div id="tr" style="width:' + e + '; height:155px">\n<iframe id="frame" src="//www.tourradar.com/iframes/testimonials_widget/' + i + "/" + t + '?q" width="' + e + '" height="120" frameborder="0" scrolling="no"></iframe>\n<div class="bottom-links">\n<a href="https://www.tourradar.com/t/' + i + '#reviews" class="more-reviews" target="_blank">See ' + n + ' reviews</a>\n<span class="main-website">Reviewed on <a href="https://www.tourradar.com/" target="_blank" title="TourRadar">tourradar.com</a></span>\n</div>\n</div>'), $(".tour #embed_html").focus()
        }), $(".testimonial #embed_html").focus(function() {
            $(this).select()
        }), $(".tour-badge #operator_tour").chosen(), $(".tour-badge #tour_tour").chosen(), $(".tour-badge #operator_tour").change(function() {
            $(".tour-badge #embed_html").val(""), $(".tour-badge #tour_tour_chzn").remove(), $(".tour-badge #tour_tour").empty().chosen("destroy").show();
            var e = parseInt($(".tour-badge #operator_tour").val());
            $.ajax({
                url: "/about/get_by_ajax",
                data: {
                    action: "get_tours",
                    id: e
                },
                dataType: "json",
                type: "POST",
                success: function(t) {
                    if ("OK" == t.status) {
                        if (t.tours)
                            for (var i in t.tours) {
                                var n = "";
                                if (0 == i) {
                                    n = "selected", $(".tour-badge #operator_tour").attr("value", e), $(".tour-badge #operator_name").attr("value", t.operator_name), $(".tour-badge #operator_seo").attr("value", t.operator_seo.replace("_", "-").toLowerCase()), $(".tour-badge #tour_id").attr("value", t.tours[i].id), $(".tour-badge #tour_name").attr("value", t.tours[i].name), $(".tour-badge #frame").attr("src", "/iframes/tour_widget_bg/" + t.tours[i].id), $(".tour-badge .badge-tr .header-tr a.operator-link").text(t.operator_name), $(".tour-badge .badge-tr .header-tr a.operator-link").attr("href", "https://www.tourradar.com/" + t.operator_seo.replace("_", "-").toLowerCase());
                                    var o = $(".tour-badge #frame").contents().find(".svg-icon-star3").length;
                                    switch (o) {
                                    case 5:
                                        var a = "Excellent";
                                        break;
                                    case 4:
                                        var a = "Good";
                                        break;
                                    default:
                                        var a = ""
                                    }
                                    1 == $(".tour-badge input[type=radio][name=names]:checked").val() ? ($(".tour-badge #tr .header-tr span.operator-wording").remove(), $(".tour-badge .badge-tr .info-tr .name-tr").text(t.tours[i].name).show()) : ($(".tour-badge .badge-tr .info-tr .name-tr").hide(), $(".tour-badge #tr .header-tr span.operator-wording").remove(), $(".tour-badge #tr .header-tr").prepend('<span class="operator-wording">' + a + "</span>"), $(".tour-badge .header-tr img").wrap('<a href="/t/' + t.tours[i].id + '"></a>'))
                                }
                                $(".tour-badge #tour_tour").append('<option value="' + t.tours[i].id + '" ' + n + ">" + t.tours[i].name + " (" + t.tours[i].total_reviews + " reviews)</option>")
                            }
                        else
                            $(".tour-badge #tour_tour").append('<option value="">No active tours</option>');
                        $(".tour-badge #tour_tour").chosen()
                    }
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".tour-badge #tour_tour").change(function() {
            $(".tour-badge #embed_html").val("");
            var e = parseInt($(".tour-badge #tour_tour").val());
            $.ajax({
                url: "/about/get_by_ajax",
                data: {
                    action: "get_reviews",
                    id: e
                },
                dataType: "json",
                type: "POST",
                success: function(t) {
                    if ("OK" == t.status) {
                        $(".tour-badge #tour_id").attr("value", e), $(".tour-badge #frame").attr("src", "/iframes/tour_widget_bg/" + e), $(".tour-badge #tour_name").attr("value", t.name);
                        var i = $(".tour-badge #frame").contents().find(".svg-icon-star3").length;
                        switch (i) {
                        case 5:
                            var n = "Excellent";
                            break;
                        case 4:
                            var n = "Good";
                            break;
                        default:
                            var n = ""
                        }
                        1 == $(".tour-badge input[type=radio][name=names]:checked").val() ? ($(".tour-badge #tr .header-tr span.operator-wording").remove(), $(".tour-badge .badge-tr .info-tr .name-tr").text(t.name).show()) : ($(".tour-badge .badge-tr .info-tr .name-tr").hide(), $(".tour-badge .header-tr img").wrap('<a href="/t/' + e + '"></a>'), $(".tour-badge #tr .header-tr span.operator-wording").remove(), $(".tour-badge #tr .header-tr").prepend('<span class="operator-wording">' + n + "</span>"))
                    }
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".tour-badge input[type=radio][name=names]").change(function() {
            var e = $(".tour-badge #tr .header-tr img"),
                t = $(".tour-badge #tour_name").val(),
                i = parseInt($(".tour-badge #tour_id").val()),
                n = $(".tour-badge #frame").contents().find(".svg-icon-star3").length;
            switch (n) {
            case 5:
                var o = "Excellent";
                break;
            case 4:
                var o = "Good";
                break;
            default:
                var o = ""
            }
            1 == $(this).val() ? ($(".tour-badge #tr .name-tr").html('<a href="//www.tourradar.com/t/' + i + '">' + t + "</a>").show(), $(".tour-badge #tr .header-tr a.operator-link").show().width(113), $(".tour-badge #tr .header-tr span.operator-wording").remove(), $(".tour-badge #tr .badge-tr").width(148), $(".tour-badge #tr").width(150), $(".tour-badge #tr .header-tr img").parent().replaceWith(e), $(".tour-badge #logo").val(0), $(".tour-badge #tr_width").val(150), $(".tour-badge #badge_width").val(148), $(".tour-badge #link_width").val(113)) : ($(".tour-badge #tr .name-tr").hide(), $(".tour-badge #tr .header-tr a.operator-link").hide().width(64), $(".tour-badge #tr .header-tr span.operator-wording").remove(), $(".tour-badge #tr .header-tr").prepend('<span class="operator-wording">' + o + "</span>"), $(".tour-badge #tr .badge-tr").width(100), $(".tour-badge #tr").width(102), $(".tour-badge #tr .header-tr img").wrap('<a href="/t/' + i + '"></a>'), $(".tour-badge #logo").val(1), $(".tour-badge #tr_width").val(102), $(".tour-badge #badge_width").val(100), $(".tour-badge #link_width").val(64))
        }), $(".tour-badge #regenerate").click(function() {
            var e = parseInt($(".tour-badge #tour_id").val()),
                t = ($(".tour-badge #tour_name").val(), $(".tour-badge #operator_name").val()),
                i = $(".tour-badge #operator_seo").val(),
                n = $(".tour-badge #tr_width").val(),
                o = $(".tour-badge #badge_width").val(),
                a = $(".tour-badge #link_width").val();
            if (1 == $(".tour-badge input[type=radio][name=names]:checked").val())
                var s = '<img src="/images/responsive/tr-logo.png" alt="' + t + '">',
                    r = '<a href="//www.tourradar.com/' + i + '" class="operator-link" style="width:' + a + 'px;">' + t + "</a>\n",
                    l = $(".tour-badge #tr .name-tr").html();
            else
                var c = $(".tour-badge #tr .header-tr span.operator-wording").html(),
                    s = '<a href="/t/' + e + '"><img src="/images/responsive/tr-logo.png" alt="' + t + '"></a>',
                    r = '<span class="operator-wording">' + c + "</span>\n",
                    l = "";
            $(".tour-badge #embed_html").val('<link href="//www.tourradar.com/include/css/reviews_widget_op.css" rel="stylesheet" type="text/css">\n<div id="tr" style="width:' + n + 'px;"><div class="badge-tr" style="width:' + o + 'px;">\n<div class="header-tr">\n' + r + '<span class="logo-wrapper">' + s + '</span>\n</div><div class="info-tr">\n<div class="name-tr">\n' + l + '\n</div>\n<iframe id="frame" src="//www.tourradar.com/iframes/tour_widget_bg/' + e + '?q" width="128" height="30" frameborder="0" scrolling="no"></iframe>\n</div>\n</div>\n<div class="badge-bottom-links">reviews by <a href="//www.tourradar.com/" target="_blank" title="TourRadar">tourradar.com</a></div>\n</div>'), $(".tour #embed_html").focus()
        }), $(".tour-badge #embed_html").focus(function() {
            $(this).select()
        }), $(".operator #operator").chosen(), $(".operator #operator").change(function() {
            $(".operator #embed_html").val("");
            var e = parseInt($(".operator #height").val()),
                i = (parseInt($(".operator #height").val()), parseInt($(".operator #operator").val())),
                n = parseInt($(".operator #show_stars").val()),
                o = $(".operator #operator-color").val(),
                a = e - r,
                s = parseInt($(".operator #show_brand").val());
            $(".operator #pre").append('<div style="height:' + e + 'px"><img src="/images/responsive/ajax-loader-1.gif" /></div>'), $(".operator #tr").hide(), $.ajax({
                data: {
                    user: i
                },
                url: "/iframes/reviews_widget_op_head",
                dataType: "json",
                type: "POST",
                success: function(r) {
                    if ("OK" == r.status) {
                        $(".operator #change_a").attr("href", "//www.tourradar.com/review#" + r.operator_id), $(".operator #op_id").attr("value", r.operator_id), $(".operator #op_name").attr("value", r.operator_name), $(".operator #op_seo_name").attr("value", r.operator_seo_name), $(".operator #name-tr a").remove(), $(".operator #name-tr").append('<a href="//www.tourradar.com/' + r.operator_seo_name + '" target="_blank">' + r.operator_name + "</a>"), $(".operator #tr .badge-bottom-links a").attr("href", "//www.tourradar.com/" + r.operator_seo_name), $(".operator #show_c").hide(), $(".operator #show_t").hide(), $(".operator #show_c").empty(), $(".operator #show_fil option:first").attr("selected", "selected");
                        var c = 0;
                        r.best_continent_top > 0 && ($(".operator #show_c").append('<option value="1" selected>#' + r.best_continent_top + " out of " + r.best_continent_count + " tour companies in " + r.best_continent_name + "</option>"), $(".operator #show_c").show(), $(".operator #show_t").show(), c = 1), $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l) + "/" + c + "/" + i + "/0/0/" + n + "/" + a + "/" + o + "/" + s), r.best_country_top > 0 && ($(".operator #show_c").append('<option value="2">#' + r.best_country_top + " out of " + r.best_country_count + " tour companies in " + r.best_country_name + "</option>"), $(".operator #show_c").show(), $(".operator #show_t").show()), $(".operator #show_c").prepend('<option value="0">Don\'t show any</option>')
                    } else
                        t.common.error()
                },
                error: function() {
                    t.common.error()
                }
            }), $(".operator #pre div").remove(), $(".operator #tr").show()
        }), $(".operator #show_fil").change(function() {
            var e = parseInt($(".operator #height").val()),
                t = parseInt($(".operator #operator").val()),
                i = parseInt($(".operator #show_fil").val()),
                n = parseInt($(".operator #show_stars").val()),
                o = $(".operator #operator-color").val(),
                a = e - r,
                s = parseInt($(".operator #show_brand").val());
            if ($(".operator #show_c").val() > 0) {
                var c = parseInt($(".operator #show_c").val());
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l) + "/" + c + "/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s)
            } else
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l + 23) + "/0/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s)
        }), $(".operator #width").change(function() {
            $(".operator #embed_html").val("");
            var e = parseInt($(this).val());
            e < 256 ? ($(".operator #minimum-w").attr("style", "color:red"), $(".operator #maximum-w").attr("style", ""), $(".operator #tr").css("width", 256), $(".operator #frame").css("width", 256), $(".operator #width").attr("value", 256)) : e > 800 ? ($(".operator #maximum-w").attr("style", "color:red"), $(".operator #minimum-w").attr("style", ""), $(".operator #tr").css("width", 800), $(".operator #frame").css("width", 800), $("#width").attr("value", 800)) : ($(".operator #maximum-w").attr("style", ""), $(".operator #minimum-w").attr("style", ""), $(".operator #frame").css("width", e), $(".operator #tr").css("width", e))
        }), $(".operator #responsive").change(function() {
            if ($(".operator #width").prop("disabled", this.checked), this.checked)
                $(".operator #frame").css("width", "100%"), $(".operator #tr").css("width", "100%");
            else {
                var e = $(".operator #width").val();
                $(".operator #frame").css("width", e), $(".operator #tr").css("width", e)
            }
        }), $(".operator #show_c").change(function() {
            $(".operator #embed_html").val("");
            var e = parseInt($(".operator #height").val()),
                t = parseInt($(".operator #operator").val()),
                i = parseInt($(".operator #show_fil").val()),
                n = parseInt($(".operator #show_stars").val()),
                o = $(".operator #operator-color").val(),
                a = e - r,
                s = parseInt($(".operator #show_brand").val());
            if ($(".operator #show_c").val() > 0) {
                var c = parseInt($(".operator #show_c").val());
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l) + "/" + c + "/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s)
            } else
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l + 23) + "/0/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s)
        }), $(".operator #show_operator").change(function() {
            $(".operator #embed_html").val(""), 0 == $(".operator #show_operator").val() ? ($(".operator #name-tr").hide(), l -= 26) : ($(".operator #name-tr").show(), l += 26)
        }), $(".operator #show_brand").change(function() {
            $(".operator #embed_html").val(""), 0 == $(".operator #show_brand").val() ? ($(".operator #head-tr").hide(), $(".operator #widget-color-picker").show(), $(".operator #operator-color").prop("disabled", !1), l -= 40) : ($(".operator #head-tr").show(), $(".operator #operator-color").val("409cd1"), $(".operator #widget-color-picker").hide(), $(".operator #operator-color").prop("disabled", !0), l += 40);
            var e = parseInt($(".operator #height").val()),
                t = parseInt($(".operator #operator").val()),
                i = parseInt($(".operator #show_fil").val()),
                n = parseInt($(".operator #show_stars").val()),
                o = $(".operator #operator-color").val(),
                a = e - r,
                s = parseInt($(".operator #show_brand").val());
            if ($(".operator #show_c").val() > 0) {
                var c = parseInt($(".operator #show_c").val());
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l) + "/" + c + "/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s)
            } else
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l + 23) + "/0/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s);
            $(".operator #operator-picker-box").css("background", "#" + o), $(".operator #name-tr a").css("color", "#" + o), $(".operator #operator-tr").css("border-color", "#" + o)
        }), $(document).on("change", ".operator #operator-color", function() {
            $(".operator #embed_html").val("");
            var e = parseInt($(".operator #height").val()),
                t = parseInt($(".operator #operator").val()),
                i = parseInt($(".operator #show_fil").val()),
                n = parseInt($(".operator #show_stars").val()),
                o = $(".operator #operator-color").val(),
                a = e - r,
                s = parseInt($(".operator #show_brand").val());
            if ($(".operator #show_c").val() > 0) {
                var c = parseInt($(".operator #show_c").val());
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l) + "/" + c + "/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s)
            } else
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l + 23) + "/0/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s);
            $(".operator #operator-picker-box").css("background", "#" + o), $(".operator #name-tr a").css("color", "#" + o), $(".operator #operator-tr").css("border-color", "#" + o)
        }), $(".operator #show_stars").change(function() {
            $(".operator #embed_html").val("");
            var e = parseInt($(".operator #height").val()),
                t = parseInt($(".operator #operator").val()),
                i = parseInt($(".operator #show_fil").val()),
                n = parseInt($(".operator #show_stars").val()),
                o = $(".operator #operator-color").val(),
                a = e - r,
                s = parseInt($(".operator #show_brand").val());
            if ($(".operator #show_c").val() > 0) {
                var c = parseInt($(".operator #show_c").val());
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l) + "/" + c + "/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s)
            } else
                $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (e - l + 23) + "/0/" + t + "/0/" + i + "/" + n + "/" + a + "/" + o + "/" + s)
        }), $(".operator #height").change(function() {
            $(".operator #embed_html").val("");
            var e = parseInt($(".operator #operator").val());
            if ($(".operator #show_c").val() > 0)
                var t = "/" + parseInt($(".operator #show_c").val());
            else
                var t = "/0";
            var i = parseInt($(".operator #show_fil").val()),
                n = parseInt($(this).val()),
                o = parseInt($(".operator #show_stars").val()),
                a = $(".operator #operator-color").val(),
                s = parseInt($(".operator #show_brand").val());
            if (n < 265) {
                var c = 265 - r + 10;
                $(".operator #minimum-h").attr("style", "color:red"), $(".operator #maximum-h").attr("style", ""), $(".operator #frame").css("height", 265 - r), $(".operator #height").attr("value", 265), $(".operator #tr").css("height", 265), $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (265 - l) + t + "/" + e + "/0/" + i + "/" + o + "/" + c + "/" + a + "/" + s)
            } else if (n > 600) {
                var c = 600 - r + 10;
                $(".operator #maximum-h").attr("style", "color:red"), $(".operator #minimum-h").attr("style", ""), $(".operator #frame").css("height", 600 - r), $(".operator #tr").css("height", 600), $(".operator #height").attr("value", 600), $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (600 - l) + t + "/" + e + "/0/" + i + "/" + o + "/" + c + "/" + a + "/" + s)
            } else {
                var c = n - r + 10;
                $(".operator #maximum-h").attr("style", ""), $(".operator #minimum-h").attr("style", ""), $(".operator #frame").css("height", n - r), $(".operator #tr").css("height", n), $(".operator #frame").attr("src", "/iframes/reviews_widget_op/" + (n - l) + t + "/" + e + "/0/" + i + "/" + o + "/" + c + "/" + a + "/" + s)
            }
        }), $(".operator #operator-picker-box").click(function() {
            $(".operator #operator-color").is(":enabled") && showColorPicker($(this)[0], $(".operator #operator-color")[0])
        }), $(".operator #regenerate").click(function() {
            var e = parseInt($(".operator #width").val()),
                t = parseInt($(".operator #height").val()),
                i = parseInt($(".operator #operator").val()),
                n = parseInt($(".operator #show_fil").val()),
                o = parseInt($(".operator #show_stars").val()),
                a = $(".operator #operator-color").val(),
                s = (parseInt($(".operator #op_id").val()), $(".operator #op_name").val()),
                c = $(".operator #op_seo_name").val(),
                d = t - r,
                u = parseInt($(".operator #show_brand").val());
            if ($(".operator #show_c").val() > 0) {
                var h = parseInt($(".operator #show_c").val());
                content_height = t - l + 10
            } else {
                content_height = t - l + 33;
                var h = "0"
            }
            $(".operator #show_brand").val() > 0 ? head = '<div id="head-tr">\n<a href ="//www.tourradar.com/" target="_blank" title="TourRadar"><div id="logo-tr"></div></a>\n</div>' : head = "", $(".operator #show_operator").val() > 0 ? name = '<div id="name-tr">\n<a href="//www.tourradar.com/' + c + '" target="_blank" style="color:#' + a + ';">' + s + "</a>\n</div>" : name = "", $(".operator #responsive:checked").length > 0 ? e = "100%" : e += "px", $(".operator #embed_html").val('<link href="//www.tourradar.com/include/css/reviews_widget_op.css" rel="stylesheet" type="text/css">\n<div id="tr" style="width:' + e + "; height:" + t + 'px">\n' + head + '\n<div id="operator-tr" style=" border-color:#' + a + ';">\n' + name + '\n</div>\n<iframe id="frame" src="//www.tourradar.com/iframes/reviews_widget_op/' + content_height + "/" + h + "/" + i + "/0/" + n + "/" + o + "/" + d + "/" + a + "/" + u + '?q" width="' + e + '" height="' + d + '" frameborder="0" scrolling="no"></iframe>\n<div class="badge-bottom-links">Reviewed on <a href="//www.tourradar.com/' + c + '" target="_blank" title="TourRadar">tourradar.com</a></div>\n</div>')
        }), $(".operator #embed_html").focus(function() {
            $(this).select()
        }), $(".tour-meet #meet_operator_tour").chosen(), $(".tour-meet #meet_tour_tour").chosen(), $(".tour-meet #meet_operator_tour").change(function() {
            $(".tour-meet #embed_html").val("");
            var e = parseInt($(".tour-meet #height").val());
            $(".tour-meet #meet_tour_tour_chzn").remove(), $(".tour-meet #meet_tour_tour").empty().chosen("destroy").show();
            var i = parseInt($(".tour-meet #meet_operator_tour").val());
            $.ajax({
                url: "/iframes/tour_meets_info",
                data: {
                    action: "get_meets",
                    operator: i
                },
                dataType: "json",
                type: "POST",
                success: function(t) {
                    if ("OK" == t.status) {
                        if (t.tours)
                            for (var i in t.tours) {
                                var n = "";
                                0 == i && (n = "selected", $(".tour-meet #change_a").attr("href", "//www.tourradar.com/t/" + t.tours[i].id + "#meets"), $(".tour-meet #name-tr-meet a").remove(), $(".tour-meet #name-tr-meet").append('<a href="//www.tourradar.com/t/' + t.tours[i].id + '" target="_blank">' + t.tours[i].name + "</a>"), $(".tour-meet #name-tr-meet-small a").remove(), $(".tour-meet #name-tr-meet-small").append('<a href="//www.tourradar.com/' + t.operator_seo_name + '" target="_blank">' + t.operator_name + "</a>"), $(".tour-meet #tour_id").attr("value", t.tours[i].id), $(".tour-meet #tour_name").attr("value", t.tours[i].name), $(".tour-meet #operator_id").attr("value", t.operator_id), $(".tour-meet #name-tr a").height() > 30 && (o += 25), $(".tour-meet #name-tr a").height() > 70 && (o += 25), $(".tour-meet #frame").attr("src", "/iframes/meet_to/" + (e - o) + "/0/" + t.tours[i].id), $(".tour-meet #frame").attr("height", e)), $(".tour-meet #meet_tour_tour").append('<option value="' + t.tours[i].id + '" ' + n + ">" + t.tours[i].name + "</option>")
                            }
                        else
                            $(".tour-meet #meet_tour_tour").append('<option value="">No active tours</option>');
                        $(".tour-meet #meet_tour_tour").chosen()
                    }
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".tour-meet #meet_tour_tour").change(function() {
            $(".tour-meet #embed_html").val("");
            var e = parseInt($(".tour-meet #meet_operator_tour").val()),
                i = parseInt($(".tour-meet #height").val()),
                n = parseInt($(".tour-meet #meet_tour_tour").val());
            $.ajax({
                url: "/iframes/meet_to/" + (i - o) + "/0/" + n,
                data: {
                    action: "get_meets",
                    tour: n,
                    operator: e
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($(".tour-meet #change_a").attr("href", "//www.tourradar.com/t/" + n + "#meets"), $(".tour-meet #name-tr-meet a").remove(), $(".tour-meet #name-tr-meet").append('<a href="//www.tourradar.com/t/' + n + '" target="_blank">' + e.tour_name + "</a>"), $(".tour-meet #name-tr-meet-small a").remove(), $(".tour-meet #name-tr-meet-small").append('<a href="//www.tourradar.com/' + e.operator_seo_name + '" target="_blank">' + e.operator_name + "</a>"), $(".tour-meet #tour_id").attr("value", n), $(".tour-meet #tour_name").attr("value", e.tour_name), $(".tour-meet #operator_id").attr("value", e.operator_id), $(".tour-meet #name-tr a").height() > 30 && (o += 25), $(".tour-meet #name-tr a").height() > 70 && (o += 25), $(".tour-meet #frame").attr("src", "/iframes/meet_to/" + (i - o) + "/0/" + n), $(".tour-meet #frame").attr("height", i))
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".tour-meet #width").change(function() {
            $(".tour-meet #embed_html").val("");
            var e = parseInt($(this).val());
            e < 350 ? ($(".tour-meet #minimum-w").attr("style", "color:red"), $(".tour-meet #maximum-w").attr("style", ""), $(".tour-meet #tr").css("width", 350), $(".tour-meet #frame").css("width", 350), $(".tour-meet #width").attr("value", 350)) : e > 800 ? ($(".tour-meet #maximum-w").attr("style", "color:red"), $(".tour-meet #minimum-w").attr("style", ""), $(".tour-meet #tr").css("width", 800), $(".tour-meet #frame").css("width", 800), $("#width").attr("value", 800)) : ($(".tour-meet #maximum-w").attr("style", ""), $(".tour-meet #minimum-w").attr("style", ""), $(".tour-meet #frame").css("width", e), $(".tour-meet #tr").css("width", e))
        }), $(".tour-meet #responsive").change(function() {
            if ($(".tour-meet #width").prop("disabled", this.checked), this.checked)
                $(".tour-meet #frame").css("width", "100%"), $(".tour-meet #tr").css("width", "100%");
            else {
                var e = $(".tour-meet #width").val();
                $(".tour-meet #frame").css("width", e), $(".tour-meet #tr").css("width", e)
            }
        }), $(".tour-meet #height").change(function() {
            $(".tour-meet #embed_html").val("");
            var e = parseInt($(".tour-meet #meet_tour_tour").val());
            $(".tour-meet #name-tr a").height() > 30 && (o += 25), $(".tour-meet #name-tr a").height() > 70 && (o += 25);
            var t = parseInt($(this).val());
            t < 360 ? ($(".tour-meet #minimum-h").attr("style", "color:red"), $(".tour-meet #maximum-h").attr("style", ""), $(".tour-meet #frame").attr("height", 360), $(".tour-meet #height").attr("value", 360), $(".tour-meet #tr").css("height", 360), $(".tour-meet #frame").attr("src", "/iframes/meet_to/" + (360 - o) + "/0/" + e)) : t > 600 ? ($(".tour-meet #maximum-h").attr("style", "color:red"), $(".tour-meet #minimum-h").attr("style", ""), $(".tour-meet #frame").attr("height", 600), $(".tour-meet #tr").css("height", 600), $(".tour-meet #height").attr("value", 600), $(".tour-meet #frame").attr("src", "/iframes/meet_to/" + (600 - o) + "/0/" + e)) : ($(".tour-meet #maximum-h").attr("style", ""), $(".tour-meet #minimum-h").attr("style", ""), $(".tour-meet #frame").attr("height", t - o), $(".tour-meet #tr").css("height", t), $(".tour-meet #frame").attr("src", "/iframes/meet_to/" + (t - o) + "/0/" + e))
        }), $(".tour-meet #regenerate").click(function() {
            var e = parseInt($(".tour-meet #width").val()),
                i = parseInt($(".tour-meet #height").val()),
                n = parseInt($(".tour-meet #tour_id").val()),
                a = $(".tour-meet #tour_name").val(),
                s = ($(".tour-meet #operator_id").val(), $(".tour-meet").find("#name-tr-meet-small").children("a").attr("href")),
                r = s.substring(s.lastIndexOf("/") + 1, s.length),
                l = $(".tour-meet").find("#name-tr-meet-small").children("a").html(),
                c = 0,
                d = o + 13;
            if ($(".tour-meet #name-tr a").height() > 30 && (i -= 25, c = 25), $(".tour-meet #name-tr a").height() > 70 && (i -= 25, c += 25), $(".tour-meet #responsive:checked").length > 0)
                var u = "responsive=1&";
            else
                var u = "";
            $.ajax({
                data: {
                    text: "/0",
                    height: i - d,
                    width: e
                },
                url: "/about/show_on_your_site_ajax/" + n,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status ? ($(".tour-meet #embed_html").val('<script language="JavaScript" src="//www.tourradar.com/include/js/reviews_widget.js?' + u + "id=" + n + "&width=" + parseInt($(".tour-meet #width").val()) + "&height=" + (parseInt($(".tour-meet #height").val()) - c) + "&code=" + e.code + '&widget=meet_to"></script> <link href="//www.tourradar.com/include/css/reviews_widget_op.css" rel="stylesheet" type="text/css">\n <div id="tr-tourradar" style="width:' + parseInt($(".tour-meet #width").val()) + "px; height:" + parseInt($(".tour-meet #height").val()) + 'px"><div id="head-tr">\n <a href ="https://www.tourradar.com/" target="_blank" title="TourRadar"><div id="logo-tr"></div></a>\n <span class="https://www.tourradar.com/t/{$meet_tourone.id}#meets" id="change_a">\n <div id="write_review-tr" class="add-tour-meet"><span>Add a meet</span></div>\n </span></div>\n <div id="operator-tr"><span>Meet other travellers before you go!</span><div id="name-tr-meet"><a href="https://www.tourradar.com/t/' + n + '" target="_blank">' + a + '</a></div><div id="name-tr-meet-small"><a href="https://www.tourradar.com/' + r + '" target="_blank">' + l + "</a></div></div></div></div>"), $(".tour-meet #embed_html").focus()) : t.common.error()
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".tour-meet #embed_html").focus(function() {
            $(this).select()
        }), $(".operator-meet #meet_operator").chosen(), $(".operator-meet #meet_operator").change(function() {
            $(".operator-meet #embed_html").val("");
            var e = parseInt($(".operator-meet #height").val()),
                i = (parseInt($(".operator-meet #height").val()), parseInt($(".operator-meet #meet_operator").val()));
            $(".operator-meet #pre").append('<div style="height:' + e + 'px"><img src="/images/responsive/ajax-loader-1.gif" /></div>'), $(".operator-meet #tr").hide(), $.ajax({
                data: {
                    action: "get_meets",
                    operator: i
                },
                url: "/iframes/meet_op/" + (e - a) + "/0/" + i,
                dataType: "json",
                type: "POST",
                success: function(n) {
                    "OK" == n.status ? ($(".operator-meet #change_a").attr("href", "//www.tourradar.com/review#" + n.operator_id), $(".operator-meet #op_id").attr("value", n.operator_id), $(".operator-meet #op_name").attr("value", n.operator_name), $(".operator-meet #op_seo_name").attr("value", n.operator_seo_name), $(".operator-meet #name-tr-meet a").remove(), $(".operator-meet #name-tr-meet").append('<a href="//www.tourradar.com/' + n.operator_seo_name + '" target="_blank">' + n.operator_name + "</a>"), $(".operator-meet #show_fil option:first").attr("selected", "selected"), 1 == $(".operator-meet #show_fil").val() && (a += 25), $(".operator-meet #frame").attr("src", "/iframes/meet_op/" + (e - a - 25) + "/0/" + i)) : t.common.error()
                },
                error: function() {
                    t.common.error()
                }
            }), $(".operator-meet #pre div").remove(), $(".operator-meet #tr").show()
        }), $(".operator-meet #show_fil").change(function() {
            var e = parseInt($(".operator-meet #height").val()),
                t = parseInt($(".operator-meet #meet_operator").val()),
                i = parseInt($(".operator-meet #show_fil").val());
            0 == $(".operator-meet #show_fil").val() && (a -= 25), $(".operator-meet #frame").attr("src", "/iframes/meet_op/" + (e - a - 25) + "/0/" + t + "/0/" + i)
        }), $(".operator-meet #width").change(function() {
            $(".operator-meet #embed_html").val("");
            var e = parseInt($(this).val());
            e < 350 ? ($(".operator-meet #minimum-w").attr("style", "color:red"), $(".operator-meet #maximum-w").attr("style", ""), $(".operator-meet #tr").css("width", 350), $(".operator-meet #frame").css("width", 350), $(".operator-meet #width").attr("value", 350)) : e > 800 ? ($(".operator-meet #maximum-w").attr("style", "color:red"), $(".operator-meet #minimum-w").attr("style", ""), $(".operator-meet #tr").css("width", 800), $(".operator-meet #frame").css("width", 800), $("#width").attr("value", 800)) : ($(".operator-meet #maximum-w").attr("style", ""), $(".operator-meet #minimum-w").attr("style", ""), $(".operator-meet #frame").css("width", e), $(".operator-meet #tr").css("width", e))
        }), $(".operator-meet #responsive").change(function() {
            if ($(".operator-meet #width").prop("disabled", this.checked), this.checked)
                $(".operator-meet #frame").css("width", "100%"), $(".operator-meet #tr").css("width", "100%");
            else {
                var e = $(".operator-meet #width").val();
                $(".operator-meet #frame").css("width", e), $(".operator-meet #tr").css("width", e)
            }
        }), $(".operator-meet #height").change(function() {
            $(".operator-meet #embed_html").val("");
            var e = parseInt($(".operator-meet #meet_operator").val()),
                t = parseInt($(".operator-meet #show_fil").val()),
                i = parseInt($(this).val());
            1 == $(".operator-meet #show_fil").val() && (a += 25), i < 360 ? ($(".operator-meet #minimum-h").attr("style", "color:red"), $(".operator-meet #maximum-h").attr("style", ""), $(".operator-meet #frame").css("height", 360), $(".operator-meet #height").attr("value", 360), $(".operator-meet #tr").css("height", 360), $(".operator-meet #frame").attr("src", "/iframes/meet_op/" + (360 - a) + "/0/" + e + "/0/" + t)) : i > 600 ? ($(".operator-meet #maximum-h").attr("style", "color:red"), $(".operator-meet #minimum-h").attr("style", ""), $(".operator-meet #frame").css("height", 600), $(".operator-meet #tr").css("height", 600), $(".operator-meet #height").attr("value", 600), $(".operator-meet #frame").attr("src", "/iframes/meet_op/" + (600 - a) + "/0/" + e + "/0/" + t)) : ($(".operator-meet #maximum-h").attr("style", ""), $(".operator-meet #minimum-h").attr("style", ""), $(".operator-meet #frame").css("height", i - a), $(".operator-meet #tr").css("height", i), $(".operator-meet #frame").attr("src", "/iframes/meet_op/" + (i - a) + "/0/" + e + "/0/" + t))
        }), $(".operator-meet #regenerate").click(function() {
            var e = parseInt($(".operator-meet #width").val()),
                i = parseInt($(".operator-meet #height").val()),
                n = parseInt($(".operator-meet #meet_operator").val()),
                o = parseInt($(".operator-meet #show_fil").val()),
                s = (parseInt($(".operator-meet #op_id").val()),
                $(".operator-meet #op_name").val()),
                r = $(".operator-meet #op_seo_name").val();
            if (1 == $(".operator-meet #show_fil").val() && (a += 25), $(".operator-meet #responsive:checked").length > 0)
                var l = "responsive=1&";
            else
                var l = "";
            $.ajax({
                data: {
                    text: "/0",
                    filter: o,
                    height: i - a,
                    width: e
                },
                url: "/about/show_on_your_site_ajax/" + n,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status ? ($(".operator-meet #embed_html").val('<script language="JavaScript" src="//www.tourradar.com/include/js/reviews_widget.js?' + l + "id=" + n + "&width=" + parseInt($(".operator-meet #width").val()) + "&height=" + parseInt($(".operator-meet #height").val()) + "&code=" + e.code + '&widget=meet_op"></script> <link href="//www.tourradar.com/include/css/reviews_widget_op.css" rel="stylesheet" type="text/css">\n <div id="tr-tourradar" style="width:' + parseInt($(".operator-meet #width").val()) + "px; height:" + parseInt($(".operator-meet #height").val()) + 'px"><div id="head-tr">\n <a href ="https://www.tourradar.com/" target="_blank" title="TourRadar"><div id="logo-tr"></div></a>\n <a href="#" target="_blank">\n <div id="with_review-tr" class="add-operator-meet"><span>Add a meet</span></div>\n </a></div>\n <div id="operator-tr"><div id="name-tr"><a href="https://www.tourradar.com/' + r + '" target="_blank">' + s + "</a></div></div></div>"), $(".operator-meet #embed_html").focus()) : t.common.error()
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".operator-meet #embed_html").focus(function() {
            $(this).select()
        }), t.params.base_url_http = t.params.base_url.replace("https", "http"), $("#operator-bg").chosen().change(function() {
            var e = $(this).val(),
                t = $(this).find("option:selected").attr("seo"),
                i = $(this).find("option:selected").html();
            $(".badge-column .operlink").attr("href", "/" + t), $(".badge-column .name-tr").html(i), $(".badge-column .badge2-tr iframe").attr("src", "/iframes/reviews_widget_bg/" + e + "/2"), $(".badge-column .badge3-tr iframe").attr("src", "/iframes/reviews_widget_bg/" + e + "/3")
        }), $("#regenerate-bg").click(function() {
            var e = $("#operator-bg").val(),
                i = $("#operator-bg").find("option:selected").attr("seo"),
                n = parseInt($('.badge-column input[name="badge"]:checked').val()),
                o = $("#operator-bg").find("option:selected").html();
            switch (n) {
            case 1:
                var a = '<a href="' + t.params.base_url_http + i + '" target="_blank" class="badge-link-tr"><div class="badge1-tr"><div><img class="checkmark-tr" src="' + t.params.base_url + 'images/responsive/widgets/checkmark.png" />Trusted Partner</div><img class="logo-tr" src="' + t.params.base_url + 'images/responsive/widgets/logo-100.png" /></div></a>';
                break;
            case 2:
                var a = '<div class="badge2-tr"><a href="' + t.params.base_url_http + '" target="_blank" class="badge-link-tr"><div class="header-tr"><img class="checkmark-tr" src="' + t.params.base_url + 'images/responsive/widgets/checkmark.png" />Trusted Partner<img class="logo-tr" src="' + t.params.base_url + 'images/responsive/widgets/logo-tiny.png" /></div></a><div class="info-tr"><a href="' + t.params.base_url_http + i + '" target="_blank" class="badge-link-tr"><div class="name-tr">' + o + '</div></a><iframe id="frame" src="' + t.params.base_url + "iframes/reviews_widget_bg/" + e + '/2" width="128" height="12" frameborder="0" scrolling="no"></iframe></div></div>';
                break;
            case 3:
                var a = '<div class="badge3-tr"><div class="info-tr"><a href="' + t.params.base_url_http + i + '" target="_blank" class="badge-link-tr"><div class="name-tr">' + o + '</div></a><iframe id="frame" src="' + t.params.base_url + "iframes/reviews_widget_bg/" + e + '/3" width="128" height="12" frameborder="0" scrolling="no"></iframe></div><a href="' + t.params.base_url_http + '" target="_blank" class="badge-link-tr"><div class="footer-tr"><img class="checkmark-tr" src="' + t.params.base_url + 'images/responsive/widgets/checkmark.png" />Trusted Partner<img class="logo-tr" src="' + t.params.base_url + 'images/responsive/widgets/logo.png" /></div></a></div>';
                break;
            case 4:
                var a = '<div class="badge4-tr-2"><img class="cc-tr-2" src="' + t.params.base_url + 'images/responsive/widgets/cc-tourradar-2.png">Secure payment by <a href="' + t.params.base_url + '" target="_blank"><img class="gray-logo-tr" src="' + t.params.base_url + 'images/responsive/widgets/tr-logo.png"></a></div>'
            }
            $("#embed_html_bg").val('<script language="JavaScript" src="' + t.params.base_url + "include/js/reviews_widget.js?family=bg&type=" + n + '"></script><link href="' + t.params.base_url + 'include/css/reviews_widget_op.css" rel="stylesheet" type="text/css">' + a).unbind("focus").focus(function() {
                $(this).select()
            })
        })
    }, t.init_contest_early = function() {
        $(".email #e_email").keydown(function(e) {
            13 == e.keyCode && $("#send_ear").click()
        }), $("#send_ear").click(function() {
            return $(".email #e_email").val().trim().length < 3 ? (alert("Please enter correct email"), !1) : void $.ajax({
                url: "/welcome/early_bird_landing",
                data: {
                    email: $(".email #e_email").val()
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status ? $(".contest_early .block .email").html(e.message) : "blocked" == e.status && alert(e.message)
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.init_careers = function() {
        t.init(), $(".go").click(function() {
            $("body, html").animate({
                scrollTop: $('h1[seo="' + $(this).parent().attr("seo") + '"]').offset().top - 60
            }, "slow")
        }), location.hash && $('li[seo="' + location.hash.substr(1) + '"]').length > 0 && setTimeout(function() {
            $('li[seo="' + location.hash.substr(1) + '"] a').click()
        }, 300)
    }, t.init_affiliate_program = function() {
        t.init(), $(".operator-form form").submit(function() {
            return $.trim($("#email").val()) && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test($("#email").val()) ? 0 == $("#terms:checked").length ? (alert("Please accept TourRadar Affiliate agreement"), !1) : void $.ajax({
                url: "/about/page/affiliate-program",
                data: {
                    name: $("#name").val(),
                    email: $("#email").val(),
                    business_name: $("#business_name").val(),
                    website: $("#website").val(),
                    facebook_page: $("#facebook_page").val(),
                    visitors_number: $("#visitors_number").val()
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($("#content").append('<a id="popup_link" href="#popup"></a><div class="hidden"><div id="popup"><p align="center"><strong>Thanks!</strong></p><p align="center">The TourRadar Team will be in contact shortly!</p></div></div>'), $("#popup_link").fancybox({
                        onClosed: function() {
                            location.reload()
                        }
                    }).click())
                },
                error: function() {
                    t.common.error()
                }
            }) : (alert("Please enter valid email address"), !1)
        }), $("#enquiry-now").click(function() {
            $("body, html").animate({
                scrollTop: $("span.blue:first").offset().top - 60
            }, "slow")
        })
    }, t.init_cost = function(e) {
        t.init(), $("#stat").html('<img src="/images/responsive/ajax-loader-1.gif" />');
        var i = setInterval(function() {
            "object" == typeof google && (clearInterval(i), google.load("visualization", "1", {
                packages: ["corechart"],
                callback: function() {
                    $("#destination").val("c201").change()
                }
            }))
        });
        $("#destination").chosen().change(function() {
            $("#stat").html('<img src="/images/responsive/ajax-loader-1.gif" />'), $.ajax({
                url: "/about/get_by_ajax",
                data: {
                    action: "get_stat_cost",
                    id: $("#destination").val(),
                    currency: e
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && (e.count > 0 ? t.load_stat(e.data, e.currency) : $("#stat").html("No statistic for this destination."))
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.load_stat = function(e, t) {
        var i = [];
        i[i.length] = ["Month", "Price", {
            type: "string",
            role: "annotation"
        }, {
            type: "string",
            role: "tooltip",
            p: {
                html: !0
            }
        }];
        var n = -1e3,
            o = 1e3;
        for (var a in e) {
            var s = e[0].name,
                r = Math.round(parseFloat(e[a].average_day_price));
            i[i.length] = [e[a].month_text, r, r.toString(), "<b>" + e[a].month_text_full + "</b><br>" + r + " " + t], parseFloat(e[a].average_day_price) > n && (n = parseFloat(e[a].average_day_price)), parseFloat(e[a].average_day_price) < o && (o = parseFloat(e[a].average_day_price))
        }
        var e = google.visualization.arrayToDataTable(i),
            l = {
                title: s,
                legend: {
                    position: "none"
                },
                tooltip: {
                    isHtml: !0
                },
                chartArea: {
                    width: $("#stat").width() - 100
                },
                series: {
                    0: {
                        color: "#409cd1",
                        lineWidth: 0,
                        pointSize: 4
                    },
                    1: {
                        color: "#eaf4fa",
                        lineWidth: 2
                    },
                    2: {
                        color: "#9a9a9a",
                        lineWidth: 0,
                        areaOpacity: 0
                    }
                },
                hAxis: {
                    title: "Month",
                    titleTextStyle: {
                        color: "#333"
                    }
                },
                vAxis: {
                    title: t,
                    baselineColor: "#eaf4fa",
                    maxValue: n + 5,
                    minValue: o - 5
                }
            },
            c = new google.visualization.AreaChart(document.getElementById("stat"));
        c.draw(e, l)
    }, t.init_operators = function() {
        t.init(), $(".operator-form form").submit(function() {
            return $.trim($("#name").val()) ? $.trim($("#company").val()) ? $.trim($("#email").val()) && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test($("#email").val()) ? $.trim($("#website").val()) ? void $.ajax({
                url: "/about/page/operators",
                data: {
                    name: $("#name").val(),
                    company: $("#company").val(),
                    email: $("#email").val(),
                    phone: $("#phone").val(),
                    website: $("#website").val(),
                    facebook: $("#facebook").val(),
                    promo: $("#promo").val()
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($("#content").append('<a id="popup_link" href="#popup"></a><div class="hidden"><div id="popup"><p align="center"><strong>Thanks!</strong></p><p align="center">The TourRadar Team will be in contact shortly!</p></div></div>'), $("#popup_link").fancybox({
                        onClosed: function() {
                            location.reload()
                        }
                    }).click())
                },
                error: function() {
                    t.common.error()
                }
            }) : (alert("Please enter your website"), !1) : (alert("Please enter valid email address"), !1) : (alert("Please enter your company name"), !1) : (alert("Please enter your name"), !1)
        }), $("#get_down").click(function() {
            $("html, body").animate({
                scrollTop: $("span.blue:first").offset().top - 60
            }, "slow")
        });
        var e = setInterval(function() {
            "function" == typeof olark && (clearInterval(e), olark("api.chat.onReady", function() {
                if (location.hash.length > 1) {
                    var e = location.hash.substr(1);
                    "open_chat" == e && (olark("api.box.expand"), olark("api.chat.updateVisitorStatus", {
                        snippet: ["Enquiry Type: B2B"]
                    }))
                }
            }))
        }, 10)
    }, t.init_checklist = function() {
        t.init(), $(".downloadall input").click(function() {
            window.print()
        })
    }, t.init_addreview = function() {
        $("#add_review #date").datepicker({
            dateFormat: "dd/mm/yy",
            changeMonth: !0,
            changeYear: !0,
            yearRange: parseInt((new Date).getFullYear()) - 10 + ":" + parseInt((new Date).getFullYear()),
            maxDate: 0
        }), $("#add_review #enter img").hover(function() {
            for (var e = $(this).attr("id").split("-"), t = 1; t <= parseInt(e[2]); t++)
                $("#rating-" + e[1] + "-" + t).attr("src", "/images/responsive/conv-star-full.png?v=1")
        }, function() {
            $("#add_review #enter img").each(function() {
                $(this).hasClass("active") || $(this).attr("src", "/images/responsive/conv-star-empty.png?v=1")
            })
        }).click(function() {
            var e = $(this).attr("id").split("-");
            $('img[id*="rating-' + e[1] + '-"]').removeClass("active").attr("src", "/images/responsive/conv-star-empty.png?v=1");
            for (var t = 1; t <= parseInt(e[2]); t++)
                $("#rating-" + e[1] + "-" + t).addClass("active").attr("src", "/images/responsive/conv-star-full.png?v=1")
        }), $("#add_review .recommend a").click(function() {
            $("#add_review .recommend a").removeClass("active"), $(this).addClass("active")
        }), $(".write textarea").focus(function() {
            "1" == $(this).attr("default") && $(this).attr("default", "0").css("color", "#666").val("")
        }).blur(function() {
            $.trim($(this).val()) || $(this).attr("default", "1").css("color", "#c4c4c4").val($(this).attr("defaulttext"))
        }), $("#add_review #submit").unbind("click").click(function() {
            t.save_review()
        }), $(window).scroll(function() {
            clearTimeout($.data(this, "scrollTimer")), $.data(this, "scrollTimer", setTimeout(function() {
                $(".page-right").animate({
                    marginTop: $(window).scrollTop() + 0
                }, "fast")
            }, 100))
        })
    }
}
function RespContests(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.oe_operator_init = function() {
        t.common.load_twitter(), $("#oe-slideshow").fotorama({
            width: $(".oe-bottom").width(),
            ratio: 16 / 9
        }), $(".lmd_page_full .parameters .side .cities select").live("change", function() {
            t.params.data = t.params.data || {};
            var e = $(this).val();
            e > 0 ? t.params.data.country_id = e : delete t.params.data.country_id, t.params.data.page = 1, t.oe_load_tours(!1)
        }), $(".lmd_page_full a.multi-line-button").live("click", function() {
            t.params.data = t.params.data || {}, t.params.data.page = t.params.data.page || 1, t.params.data.page++, t.oe_load_tours(!0)
        }), $(".lmd_page_full table .first td div").live("click", function() {
            t.params.data = t.params.data || {}, $("table.main_table .first td div").removeClass("active"), $(this).addClass("active");
            var e = $(this).attr("data-sort");
            $(this).hasClass("asc") ? (t.params.data.sort_type = "desc", $(this).removeClass("asc").addClass("desc")) : (t.params.data.sort_type = "asc", $(this).removeClass("desc").addClass("asc")), t.params.data.sort = e, t.params.data.page = 1, t.oe_load_tours(!1)
        }), t.params.data = t.params.data || {};
        var e = setInterval(function() {
            "object" == typeof OpenLayers && (clearInterval(e), t.show_map_init())
        })
    }, t.show_map_init = function() {
        $(".td2.length a").live("click", function() {
            var e = $(this).attr("data-tour-name"),
                i = $(this).attr("data-tour-id"),
                n = $(this).attr("data-tour-date");
            $.ajax({
                url: "/serp/quick_serp_ajax/load_map",
                data: {
                    tour_id: i
                },
                dataType: "json",
                type: "POST",
                success: function(o) {
                    "OK" == o.status && (t.params.locations = o.locations, $(window).width() < 600 && $("#lmd-map").css("width", $(window).width() - 80), $(window).height() < 600 && $("#lmd-map").css("height", Math.max($(window).height() - 80, $(window).width() - 80)), $("#lmd-map .name").text(e), $("#lmd-map .lmd-book").attr("href", "/book-now/" + i + "?date=" + n), $.fancybox({
                        href: "#lmd-map",
                        padding: 20,
                        margin: 20,
                        onComplete: function() {
                            $("#lmd-show-map").height($("#lmd-map").height() - $("#lmd-map .name").outerHeight() - $("#lmd-map .map-buttons").height() - 2), t.load_map("lmd-show-map")
                        },
                        onClosed: function() {
                            t.map.destroy(), clearInterval(t.runner_interval)
                        }
                    }))
                }
            })
        }), $("#lmd-map .lmd-close").live("click", function() {
            $.fancybox.close()
        })
    }, t.load_map = function(e) {
        for (var i = 1e3, n = 1e3, o = -1e3, a = -1e3, s = 0; s < t.params.locations.length; s++)
            t.params.locations[s].city_zoom > 0 && (n = Math.min(n, t.params.locations[s].city_x), a = Math.max(a, t.params.locations[s].city_x), i = Math.min(i, t.params.locations[s].city_y), o = Math.max(o, t.params.locations[s].city_y));
        t.map = new OpenLayers.Map(e), t.map.addLayer(new OpenLayers.Layer.OSM("MapQuest-OSM Tiles", ["http://otile1.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg", "http://otile2.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg", "http://otile3.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg", "http://otile4.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg"])), t.map.zoomToExtent(new OpenLayers.Bounds(i, n, o, a).transform(new OpenLayers.Projection("EPSG:4326"), new OpenLayers.Projection("EPSG:900913"))), t.map.getZoom() > 13 && t.map.zoomTo(13);
        var r = new OpenLayers.Layer.Markers("Markers");
        t.map.addLayer(r);
        for (var l = t.map.getControlsByClass("OpenLayers.Control.Navigation"), c = 0; c < l.length; c++)
            l[c].disableZoomWheel(), $(window).width() <= 1024 && "olControlNavigation" == l[c].displayClass && l[c].deactivate();
        for (var d = new Array, s = (new Array, 0); s < t.params.locations.length; s++)
            if (t.params.locations[s].city_zoom > 0) {
                d[d.length] = new OpenLayers.Geometry.Point(t.params.locations[s].city_y, t.params.locations[s].city_x).transform(new OpenLayers.Projection("EPSG:4326"), t.map.getProjectionObject());
                var u = new OpenLayers.Marker(new OpenLayers.LonLat(t.params.locations[s].city_y, t.params.locations[s].city_x).transform(new OpenLayers.Projection("EPSG:4326"), t.map.getProjectionObject()), new OpenLayers.Icon("/images/responsive/tour/marker.png?v=1", new OpenLayers.Size(21, 21), new OpenLayers.Pixel((-12), (-12))));
                u.icon.imageDiv.title = t.params.locations[s].city_name + ", " + t.params.locations[s].country_name, r.addMarker(u)
            }
        var h = new OpenLayers.Layer.Vector("Line Layer");
        t.map.addLayer(h), h.addFeatures([new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(d), null, {
            strokeColor: "#409cd1",
            strokeOpacity: 1,
            strokeWidth: 2
        })]), $(t.map.layers[object_size(t.map.layers) - 1].div).css("z-index", 329).parent().css({
            height: "106%"
        }), t.load_runner(d, t.map, r)
    }, t.load_runner = function(e, i, n) {
        for (var o = new Array, a = new Array, s = new Array, r = 0, l = 0; l < e.length - 1; l++)
            a[a.length] = Math.sqrt(Math.pow(e[l + 1].x - e[l].x, 2) + Math.pow(e[l + 1].y - e[l].y, 2)), r += a[a.length - 1];
        for (var l = 0; l < a.length; l++)
            s[l] = Math.round(a[l] / r * 50);
        for (var l = 0; l < e.length - 1; l++)
            for (var c = 1; c <= s[l]; c++)
                o[o.length] = new OpenLayers.LonLat(e[l].x + c / s[l] * (e[l + 1].x - e[l].x), e[l].y + c / s[l] * (e[l + 1].y - e[l].y));
        var l = 0;
        t.runner_interval = setInterval(function() {
            l < o.length ? ("undefined" != typeof runner && (n.removeMarker(runner), runner.destroy()), runner = new OpenLayers.Marker(o[l], new OpenLayers.Icon("/images/responsive/tour/runner.png?v=1", new OpenLayers.Size(10, 10), new OpenLayers.Pixel((-7), (-12)))), n.addMarker(runner), l++) : l = 0
        }, 100)
    }, t.oe_load_tours = function(e) {
        e ? $(".lmd_page_full .load_more .title").html('<img src="/images/ajax_loader/small.gif">') : $(".lmd_page_full table.main_table").append('<div class="loading">LOADING<br><img src="/images/ajax_loader/horiz.gif"></div>'), $.ajax({
            data: {
                action: "sort",
                params: t.params.data
            },
            dataType: "json",
            type: "POST",
            success: function(t) {
                $(".lmd_page_full .no_results").remove(), "OK" == t.status ? (e ? ($(".lmd_page_full table.main_table .second:last").after(t.html), $(".lmd_page_full .load_more .title").html("Load more deals ")) : ($(".lmd_page_full table.main_table .second").remove(), $(".lmd_page_full table.main_table .first").after(t.html)), $(".lmd_page_full table.main_table .loading").remove(), t.count <= t.to_tour ? $(".lmd_page_full .load_more").addClass("hidden") : $(".lmd_page_full .load_more").removeClass("hidden")) : "error" == t.status && ($(".lmd_page_full table.main_table .loading").remove(), $(".lmd_page_full table.main_table").after('<div class="no_results">No results found</div>'), $(".lmd_page_full table.main_table .second").remove())
            }
        })
    }, t.oe_main_init = function() {
        t.common.load_twitter(), t.video_width = "auto", t.video_height = "auto", t.init_video_file(), $(".oe-header-2 .right img").click(function() {
            return $.fancybox({
                padding: 0,
                autoScale: !1,
                transitionIn: "none",
                transitionOut: "none",
                width: t.video_width,
                height: t.video_height,
                href: "//www.youtube.com/embed/LQp4DwsHhDw?autoplay=1&rel=0",
                type: "iframe"
            }), !1
        }), $(window).resize(function() {
            t.init_video_file()
        }), $(".first_visit").length > 0 && $(".oe-header-2 .right img").click()
    }, t.init_video_file = function() {
        $(window).width() >= 1300 && $(window).height() >= 740 ? (t.video_width = 1280, t.video_height = 720) : $(window).width() >= 873 && $(window).height() >= 460 ? (t.video_width = 853, t.video_height = 480) : $(window).width() >= 660 && $(window).height() >= 380 ? (t.video_width = 640, t.video_height = 360) : $(window).width() >= 580 && $(window).height() >= 335 ? (t.video_width = 560, t.video_height = 315) : $(window).width() >= 340 && $(window).height() >= 200 ? (t.video_width = 320, t.video_height = 180) : (t.video_width = 267, t.video_height = 150)
    }, t.oe_init = function() {
        t.common.load_twitter(), t.common.load_fb_button(), $(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box a").click(function() {
            var e = $.trim($("#email").val().toLowerCase());
            if (e && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))
                if ("" != $(".email").val()) {
                    var i = jstz.determine(),
                        n = {
                            email: e,
                            name: $("#name").val(),
                            date: $(".standard-contest.online-expo select.date").val(),
                            time: $(".standard-contest.online-expo select.hour").val() + ":" + $(".standard-contest.online-expo select.minutes").val(),
                            tz: i.name
                        };
                    $.ajax({
                        data: n,
                        dataType: "json",
                        type: "POST",
                        success: function(e) {
                            "OK" == e.status ? ($(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box .y2").html("<b>Thank you for booking your appointment.</b><br> Please check your inbox for confirmation."), $(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box input, .standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box a").remove(), $(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box .y3").removeClass("hidden"), $(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box table").remove(), t.common.send_google_event("Enter Email", "Expo Signup", $("#name").val())) : alert("An error occured. Please, try again later.")
                        },
                        error: function() {
                            alert("An error occured. Please, try again later.")
                        }
                    })
                } else
                    alert("Please, enter your email.");
            else
                alert("Please enter valid email address")
        })
    }, t.oes_init = function() {
        t.common.load_twitter(), t.common.load_fb_button(), $("#terms-conditions").fancybox(), $(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box a.app").click(function() {
            var e = $(".standard-contest.online-expo.september .top-hd-2 .t4 .block2 .yellow-box"),
                i = {
                    name: e.find("input[id=name]").val(),
                    email: e.find("input[id=email]").val(),
                    phone: e.find("input[id=phone]").val(),
                    date: e.find("select.day").val(),
                    time: e.find("select.time.hour").val() + ":" + e.find("select.time.minutes").val()
                };
            if (!i.name)
                return void alert("Enter your name!");
            if (!i.phone)
                return void alert("Enter your phone!");
            var n = i.phone.match(/[A-Za-z]/g);
            return n && n.length ? void alert("Enter valid phone!") : i.date ? i.time ? i.email ? void $.ajax({
                data: i,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status ? ($(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box").toggleClass("hidden"), t.common.send_google_event("Enter Email", "Expo Signup", $("#name").val()), window.location.hash = "success", _fbq.push(["track", "PageView"])) : alert(e.message)
                },
                error: function() {
                    alert("An error occured. Please, try again later.")
                }
            }) : void alert("Enter email!") : void alert("Enter preferred time of call!") : void alert("Enter preferred date of call!")
        }), $(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box a.flat:not(.app)").click(function() {
            var e = $.trim($("#email").val().toLowerCase());
            if (e && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))
                if ($("#name").val().length < 3)
                    alert("Please, enter your name.");
                else if ("" != $(".email").val()) {
                    var i = {
                        email: e,
                        name: $("#name").val()
                    };
                    $.ajax({
                        data: i,
                        dataType: "json",
                        type: "POST",
                        success: function(e) {
                            "OK" == e.status ? ($(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box").toggleClass("hidden"), t.common.send_google_event("Enter Email", "Expo Signup", $("#name").val()), window.location.hash = "success", _fbq.push(["track", "PageView"])) : "already" == e.status ? ($(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box").toggleClass("hidden"), $(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box.sec .y1").html($(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box.sec .y1").html().replace("You're in", "Youve already entered"))) : alert("An error occured. Please, try again later.")
                        },
                        error: function() {
                            alert("An error occured. Please, try again later.")
                        }
                    })
                } else
                    alert("Please, enter your email.");
            else
                alert("Please enter valid email address")
        }), $(".standard-contest.online-expo.september .top-hd-2 .t4 .block2 .yellow-box.sec img.soc").click(function() {
            var e = location.origin + location.pathname,
                t = $(this).attr("class").split(" ")[1];
            switch (t) {
            case "fb":
                var i = encodeURIComponent(e + "?utm_source=Facebook&utm_medium=Social&utm_campaign=Online%20Expo%20Sep%202016%20awareness%20campaign");
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var i = encodeURIComponent(e + "?utm_source=Twitter&utm_medium=Social&utm_campaign=Online%20Expo%20Sep%202016%20awareness%20campaign"),
                    n = "Get ready for the TourRadar Online Expo and enter to win a trip for 2 to Cambodia";
                popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + n + "&hashtags=gotouring", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gp":
                var i = encodeURIComponent(e + "?utm_source=GooglePlus&utm_medium=Social&utm_campaign=Online%20Expo%20Sep%202016%20awareness%20campaign");
                popUp = window.open("https://plus.google.com/share?url=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
            }
        }), $(window).bind("resize", function() {
            var e = $(".standard-contest.online-expo.september .top-hd-2 .t4 .block2").width();
            $(".standard-contest.online-expo.september .video iframe").width(e).height(e / 16 * 9)
        }), $(".standard-contest.online-expo.september .video img").click(function() {
            $(".standard-contest.online-expo.september .video img").remove(), $(".standard-contest.online-expo.september .video").append('<iframe frameborder="0" width="100%" height="253px" allowfullscreen="" src="https://www.youtube.com/embed/' + $(".standard-contest.online-expo.september .video").data("id") + '?showinfo=0&amp;hd=1&amp;autoplay=1&amp;controls=1"></iframe>');
            var e = $(".standard-contest.online-expo.september .top-hd-2 .t4 .block2").width();
            $(".standard-contest.online-expo.september .video iframe").width(e).height(e / 16 * 9)
        }), $(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box input").keydown(function(e) {
            13 == e.keyCode && $(".standard-contest.online-expo .top-hd-2 .t4 .block2 .yellow-box a.flat").click()
        })
    }, t.lfte = function() {
        if (t.init(), $(".checkbox-pw").length > 0 && $(".checkbox-pw").change(function() {
            var e = {
                contest: t.params.contest,
                partnernewsletter: document.getElementById("partnernewsletter").checked ? 1 : 0,
                hash: t.params.hash
            };
            $.ajax({
                url: "/welcome/contest_v2_ajax/" + t.params.contest + "/partnernewsletter",
                data: e,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status
                },
                error: function() {
                    alert("An error occured. Please, try again later.")
                }
            })
        }), ($(".row_tours .map").length > 0 || $(".tours_v1 .map").length > 0) && $(".standard-contest.winner .row_tours .map").length > 0) {
            t.formap = new RespLMD([]);
            var e = $(".standard-contest.winner .row_tours .map").attr("id").substr(4);
            $.ajax({
                url: "/pw_tour/load",
                data: {
                    action: "locations",
                    id: e
                },
                dataType: "json",
                type: "POST",
                success: function(i) {
                    "OK" == i.status && (t.params.locations = i.locations, $.getScript("https://www.google.com/jsapi").done(function() {
                        var n = setInterval(function() {
                            "object" == typeof google && (clearInterval(n), google.load("maps", "3", {
                                other_params: "key=" + i.component.google_map_key,
                                callback: function() {
                                    t.formap.locations = i.component.locations, t.formap.google_map_style = i.component.google_map_style, t.formap.show_g_map("map-" + e)
                                }
                            }))
                        })
                    }))
                }
            })
        }
        $(".thank-you").length > 0 && $(window).bind("load resize", function() {
            if ($(window).width() < 980) {
                var e = $(window).width();
                $(".video iframe").width(e).height(e / 1.777778)
            } else
                $(".video iframe").width(583).height(357)
        }), $(".winner").length > 0 && $(window).bind("load resize", function() {
            if ($(window).width() < 500) {
                var e = $(window).width();
                $(".video iframe").width(e).height(e / 1.777778)
            } else
                $(".video iframe").width(500).height(280)
        }), $(".landing").length > 0 && $(window).bind("load resize", function() {
            $(window).width() > $(".standard-contest.authentic-travel").width() + 160 && $(window).height() > $(".standard-contest.authentic-travel").height() + 185 && $(".standard-contest.dream-expedition").length <= 0 && $(".standard-contest.adventure-spirit").length <= 0 && $(".standard-contest.magic-of-travel").length <= 0 && $(".standard-contest.reach-new-heights").length <= 0 && $(".standard-contest.local-way-of-life").length <= 0 && $(".standard-contest.discover-new-worlds").length <= 0 && $(".standard-contest.challenge-your-senses").length <= 0 && $(".standard-contest.i-love-nepal").length <= 0 || $(".standard-contest.i-love-nepal").length > 0 && $(window).height() > $(".standard-contest.i-love-nepal").height() + 250 ? $(".bottom-logo-contest").css("position", "fixed").css("bottom", "15px").css("right", "15px") : $(".bottom-logo-contest").css("position", "").css("bottom", "").css("right", "")
        }), window.location.hash.length > 1 && $("#" + window.location.hash.substr(1)).length > 0 && $("html, body").animate({
            scrollTop: $("#" + window.location.hash.substr(1)).offset().top - 160
        }, "slow"), $(".almost-done").length > 0 && $.post("https://graph.facebook.com", {
            id: t.common.base_url + "contest/" + t.params.contest + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=" + t.params.share.utm + "%20Facebook",
            scrape: !0
        }, function(e) {
            console.log(e)
        })
    }, t.init = function() {
        t.register_init(), t.detect_like(), t.select_tour_init(), t.init_social_buttons(), t.re_select_tour(), $(".operator_page").length > 0 && t.init_send_cube_params(), $("#whatistr").click(function() {
            $("#header-new #row-1 #block-5 a").click()
        }), $(".fbox").click(function() {
            $.fancybox({
                href: $(this).attr("href"),
                padding: 20,
                margin: 0,
                onComplete: function() {}
            })
        }), $("#fancybox-content a.learn-more").live("click", function() {
            $.fancybox.close()
        }), $("#more_des").click(function() {
            0 == $(".topdescription .top .text .ftext:visible").length ? ($(".topdescription .top .text span").hide(), $(".topdescription .top .text .ftext").css("display", "inline"), $(".topdescription").height() < $(".topdescription .top .text").height() + 45 && $(".topdescription").height($(".topdescription .top .text").height() + 45), $(this).text("Hide")) : ($(".topdescription").height(""), $(".topdescription .top .text .ftext").hide("slow"), $(".topdescription .top .text span").show(), $(this).text("Read more")), $(".topdescription .top .text .triangle").toggleClass("up")
        });
        var e = "auto",
            i = "auto";
        if ($(window).width() >= 1300 && $(window).height() >= 740)
            var e = 1280,
                i = 720;
        else if ($(window).width() >= 873 && $(window).height() >= 460)
            var e = 853,
                i = 480;
        else if ($(window).width() >= 660 && $(window).height() >= 380)
            var e = 640,
                i = 360;
        else if ($(window).width() >= 580 && $(window).height() >= 335)
            var e = 560,
                i = 315;
        else if ($(window).width() >= 340 && $(window).height() >= 200)
            var e = 320,
                i = 180;
        else
            var e = 267,
                i = 150;
        $(".standard-contest .side.left .top-image.video").click(function() {
            return $.fancybox({
                padding: 0,
                autoScale: !1,
                transitionIn: "none",
                transitionOut: "none",
                width: e,
                height: i,
                href: $(this).attr("data-video"),
                type: "iframe"
            }), !1
        }), t.common.load_twitter(), t.common.load_fb_button(), function() {
            var e = document.createElement("script");
            e.type = "text/javascript", e.async = !0, e.src = "https://apis.google.com/js/platform.js";
            var t = document.getElementsByTagName("script")[0];
            t.parentNode.insertBefore(e, t)
        }(), $(".send-fb-message").click(function() {
            FB.ui({
                method: "send",
                link: $(".send_to_friend").attr("data-link")
            })
        }), $(".send_to_friend a.multi-line-button").click(function() {
            var e = new Array,
                i = !1;
            if ($(".email").each(function() {
                var t = $.trim($(this).val().toLowerCase());
                "" == t || /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t) || i ? "" != t && (e[e.length] = t) : (alert("Please enter valid email address"), i = !0)
            }), e.length > 0 && !i) {
                var n = {
                    hash: t.params.hash ? t.params.hash : 0,
                    emails: e
                };
                $.ajax({
                    url: "/welcome/contest_v2_ajax/" + t.params.contest + "/email_to_friends",
                    data: n,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        "OK" == e.status && (window.location.href = $(".gotoend a").attr("href"))
                    },
                    error: function() {
                        alert("An error occured. Please, try again later.")
                    }
                })
            }
        })
    }, t.detect_like = function() {
        window.fbAsyncInit = function() {
            FB.Event.subscribe("edge.create", function(e) {
                $("#liked").val(1)
            }), FB.Event.subscribe("edge.remove", function(e) {
                $("#liked").val(0)
            })
        }
    }, t.register_init = function() {
        var e = function() {
            var e = $.trim($(".email").val().toLowerCase());
            if ($(".age").length > 0 && "" == $(".age").val())
                alert("Please, select your age.");
            else if ($(".name").length > 0 && "" == $(".name").val())
                alert("Please, enter your name.");
            else if ($("#uploaded_photo").length > 0 && "" == $("#uploaded_photo").val())
                alert("Please, upload photo.");
            else if (e && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))
                if ("" != $(".email").val()) {
                    var i = {
                        liked: $("#liked").val(),
                        hash: t.params.randomCode,
                        phash: t.params.hash ? t.params.hash : 0,
                        email: $(".email").val().toLowerCase().trim(),
                        age: $(".age").length > 0 ? $(".age").val() : 0
                    };
                    if ($(".name").length > 0 && (i.name = $(".name").val()), $("input.tour-radio").length > 0) {
                        if (!($("input.tour-radio:checked").length > 0))
                            return alert("Please select a tour"), !1;
                        i.tour = $("input.tour-radio:checked").val()
                    }
                    $.ajax({
                        url: "/welcome/contest_v2_ajax/" + t.params.contest + "/add_email",
                        data: i,
                        dataType: "json",
                        type: "POST",
                        success: function(e) {
                            if ("OK" == e.status) {
                                var i = t.params.contest;
                                "dream-voyage" != t.params.contest && "authentic-travel" != t.params.contest && "dream-expedition" != t.params.contest && "adventure-spirit" != t.params.contest && "magic-of-travel" != t.params.contest && "reach-new-heights" != t.params.contest && "local-way-of-life" != t.params.contest && "discover-new-worlds" != t.params.contest && "i-love-nepal" != t.params.contest || (i = "win-a-tour"), window.location.href = "/" + i + "/select-tour?mail=" + $(".email").val().toLowerCase().trim() + "&hash=" + t.params.randomCode + (t.params.hash ? "&phash=" + t.params.hash : "")
                            } else
                                "blocked" == e.status ? alert(e.message) : alert("An error occured. Please, try again later.")
                        },
                        error: function() {
                            alert("An error occured. Please, try again later.")
                        }
                    })
                } else
                    alert("Please, enter your email.");
            else
                alert("Please enter valid email address")
        };
        $(".standard-contest .contest-form #enter").live("click", e), $(".standard-contest .contest-form #form").submit(e);
        var i = function() {
            $(".standard-contest .side.right .contest-form #form-hunt .err").remove();
            var e = $.trim($("#email").val().toLowerCase());
            if ($(".hunt-word").length > 0 && "" == $.trim($(".hunt-word").val()))
                alert("Please, enter your Treasure Hunt Word.");
            else {
                var i = {
                    email: e,
                    hunt: $.trim($(".hunt-word").val())
                };
                $.ajax({
                    url: "/welcome/contest_v2_ajax/" + t.params.contest + "/add_hunt",
                    data: i,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        if ("OK" == e.status && "OK" == e.message) {
                            var t = $(".standard-contest .side.right .contest-form #form-hunt").data("h");
                            $(".standard-contest .side.right .contest-form h2").text("Congratulations!"), $(".standard-contest .side.right .contest-form #form-hunt").remove(), $(".standard-contest .side.right .contest-form").append("<div>You have just increased your chance of winning by 10!</div>"), $(".standard-contest .side.right .contest-form #step").length > 0 && $(".standard-contest .side.right .contest-form").append('<a href="/win-a-tour/thank-you?hash=' + t + '" class="multi-line-button bigb next"><span class="title">Continue</span></a>')
                        } else
                            "OK" == e.status && "wrong" == e.message ? ($(".standard-contest .side.right .contest-form #form-hunt").append('<div class="err">Thanks for entering the treasure hunt word, unfortunately you have entered an incorrect word. Please try again!</div>'), $(".standard-contest .side.right .contest-form #form-hunt .hunt-word").focus()) : alert("An error occured. Please, try again later.")
                    },
                    error: function() {
                        alert("An error occured. Please, try again later.")
                    }
                })
            }
        };
        $(".standard-contest .contest-form #hunt").live("click", i), $(".standard-contest .contest-form #form-hunt").submit(i)
    }, t.select_tour_init = function() {
        $(".standard-contest .select").click(function() {
            var e = window.location.href.split("?")[1],
                i = e.split("&")[0].split("=")[1],
                n = $(this).children(".radiobut").val(),
                o = {
                    contest: t.params.contest,
                    question: n,
                    mail: i
                };
            if ($(".standard-contest.select-tour .information").length > 0) {
                $(".standard-contest.select-tour .information").removeClass("red");
                var a = $.trim($(".standard-contest.select-tour .information #name").val()),
                    s = $(".standard-contest.select-tour .information #age").val(),
                    r = $(".standard-contest.select-tour .information #gender").val();
                if (!a || a.length < 3 || 0 == s || 0 == r)
                    return $(".standard-contest.select-tour .information").addClass("red"), void $("html, body").animate({
                        scrollTop: 0
                    }, "slow");
                o.name = a, o.age = s, o.gender = r
            }
            $.ajax({
                url: "/welcome/contest_v2_ajax/" + t.params.contest + "/add_tour",
                data: o,
                dataType: "json",
                type: "POST",
                success: function(i) {
                    if ("OK" == i.status) {
                        var n = t.params.contest;
                        "dream-voyage" != t.params.contest && "authentic-travel" != t.params.contest && "dream-expedition" != t.params.contest && "adventure-spirit" != t.params.contest && "magic-of-travel" != t.params.contest && "reach-new-heights" != t.params.contest && "local-way-of-life" != t.params.contest && "discover-new-worlds" != t.params.contest && "i-love-nepal" != t.params.contest || (n = "win-a-tour"), window.location.href = "/" + n + "/almost-done?" + e
                    } else
                        "blocked" == i.status ? alert(i.message) : alert("An error occured. Please, try again later.")
                },
                error: function() {
                    alert("An error occured. Please, try again later.")
                }
            })
        })
    }, t.init_social_buttons = function() {
        $(".standard-contest .almost_done a img, .standard-contest .almost_done a svg").live("click", function() {
            var e = $(this).attr("id"),
                i = t.params.contest;
            if ("dream-voyage" != t.params.contest && "authentic-travel" != t.params.contest && "dream-expedition" != t.params.contest && "adventure-spirit" != t.params.contest && "magic-of-travel" != t.params.contest && "reach-new-heights" != t.params.contest && "local-way-of-life" != t.params.contest && "discover-new-worlds" != t.params.contest && "i-love-nepal" != t.params.contest || (i = "travel/" + t.params.contest), "share_fb" == e) {
                if ("live-free-travel-easy" == t.params.contest)
                    var n = encodeURIComponent("https://www.tourradar.com/" + t.params.contest + "?utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=" + t.params.share.utm + "%20Facebook");
                else
                    var n = encodeURIComponent(t.common.base_url + i + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=" + t.params.share.utm + "%20Facebook");
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + n, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus(), t.common.send_google_event("Contest Shares", "Facebook", t.params.contest)
            } else if ("share_fbm" == e) {
                var n = t.common.base_url + i + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=" + t.params.share.utm + "%20Facebook%20Message";
                FB.ui({
                    method: "send",
                    link: n
                }), t.common.send_google_event("Contest Shares", "Facebook Message", t.params.contest)
            } else if ("share_tw" == e) {
                if ("live-free-travel-easy" == t.params.contest) {
                    var n = encodeURIComponent("https://www.tourradar.com/" + t.params.contest + "?utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=" + t.params.share.utm + "%20Twitter");
                    popUp = window.open("https://twitter.com/share?url=" + n + "&text=" + t.params.share.tw + "&hashtags=TourRadar,LiveFree", "popupwindow", "scrollbars=yes,width=800,height=400")
                } else {
                    var n = encodeURIComponent(t.common.base_url + i + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=" + t.params.share.utm + "%20Twitter");
                    popUp = window.open("https://twitter.com/share?url=" + n + "&text=" + t.params.share.tw, "popupwindow", "scrollbars=yes,width=800,height=400")
                }
                popUp.focus(), t.common.send_google_event("Contest Shares", "Twitter", t.params.contest)
            } else if ("share_gg" == e) {
                if ("live-free-travel-easy" == t.params.contest)
                    var n = encodeURIComponent("https://www.tourradar.com/" + t.params.contest + "?utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=" + t.params.share.utm + "%20Gglplus");
                else
                    var n = encodeURIComponent(t.common.base_url + i + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=" + t.params.share.utm + "%20Gglplus");
                popUp = window.open("https://plus.google.com/share?url=" + n, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus(), t.common.send_google_event("Contest Shares", "Google Plus", t.params.contest)
            } else if ("share_wp" == e) {
                var n = encodeURIComponent(t.common.base_url + i + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=" + t.params.share.utm + "%20WhatsApp"),
                    o = "whatsapp://send?text=" + t.params.share.tw + " " + n;
                t.common.send_google_event("Contest Shares", "WhatsApp", t.params.contest), window.location = o
            }
        })
    }, t.init_send_cube_params = function() {
        $("#tourtype, #departure").chosen({
            no_results_text: "No results matched"
        }).unbind("change").change(function() {
            t.search_cube_send(), $(this).parent().addClass("active")
        }), $("#duration").chosen({
            width: $(".search_cube .ins").width() + "px",
            no_results_text: "No results matched"
        }).unbind("change").change(function() {
            t.search_cube_send(), $(this).parent().addClass("active")
        }), $("#destination").chosen({
            width: $(".search_cube .ins").width() + "px",
            no_results_text: "No results matched"
        }).unbind("change").change(function(e, i) {
            i.selected ? t.search_cube_send() : $("#search_cube_go .title").text("Search now "), $(this).parent().addClass("active")
        }), $(".chosen-container .chosen-results").on("touchend", function(e) {
            e.stopPropagation(), e.preventDefault()
        }), $("#search_cube_go").die("click").live("click", function() {
            if ($("#search_cube_go").hasClass("grey"))
                return alert("Unfortunately there are no tours avialable with your settings. Please change your options to find more tour results."), !1;
            var e = new Array;
            if (0 != $("#duration").val().length && (1 == $("#duration").val() ? e[e.length] = "duration=0-3" : 2 == $("#duration").val() ? e[e.length] = "duration=4-7" : 3 == $("#duration").val() ? e[e.length] = "duration=8-14" : 4 == $("#duration").val() ? e[e.length] = "duration=15-21" : 5 == $("#duration").val() && (e[e.length] = "duration=22-10000")), 0 != $("#tourtype").val().length && (e[e.length] = "type=" + $("#tourtype").val()), 0 != $("#departure").val().length && (e[e.length] = "month=" + $("#departure option:selected").text().toLowerCase().replace(" ", "-")), 0 != $("#destination").val().length) {
                e[e.length] = "operator=" + t.params.id;
                var i = "/d/" + $("#destination option:selected").attr("serp") + "?title=Best " + $("#destination option:selected").text() + " " + t.params.name + " Tours&notop=1"
            } else
                var i = "/o/" + $(".search_cube").attr("id");
            e.length > 0 ? window.location.href = i + "#" + e.join(",") : window.location.href = i
        })
    }, t.search_cube_send = function() {
        $("#search_cube_go .title").html('<img src="/images/responsive/ajax-loader-1-green.gif" />');
        var e = new Object;
        $("#destination").val() && (e.destination = $("#destination").val()), $("#duration").val() && (e.duration = $("#duration").val()), $("#tourtype").val() && (e.tourtype = $("#tourtype").val()), $("#departure").val() && (e.departure = $("#departure").val()), e.operator = t.params.id, e.duration || e.tourtype || e.departure || !e.destination ? $.ajax({
            url: "/welcome/search_cube_ajax/" + $("#operator_id").val(),
            data: e,
            dataType: "json",
            type: "POST",
            success: function(e) {
                "OK" == e.status && (e.count > 0 ? ($("#search_cube_go .title").text("Find " + e.count + " tours"), $("#search_cube_go").addClass("greenb").removeClass("grey")) : ($("#search_cube_go .title").text("Find 0 tours"), $("#search_cube_go").addClass("grey").removeClass("greenb")))
            }
        }) : ($("#search_cube_go .title").text("Find " + $("#destination option:selected").attr("data-count") + " tours"), $("#search_cube_go").addClass("greenb").removeClass("grey"))
    }, t.re_select_tour = function() {
        $(".se_button.sel a").click(function() {
            var e = $(this).attr("id").substr(4);
            $("table.fi_tours tr").removeClass("blue"), $("table.fi_tours tr#tr-" + e).addClass("blue"), $("table.fi_tours tr .se_button.sel").removeClass("hidden"), $("table.fi_tours tr#tr-" + e + " .se_button.sel").addClass("hidden"), $("table.fi_tours tr .se_selected").addClass("hidden"), $("table.fi_tours tr#tr-" + e + " .se_selected").removeClass("hidden");
            var i = {
                contest: t.params.contest,
                question: e,
                hash: t.params.hash
            };
            $.ajax({
                url: "/welcome/contest_v2_ajax/" + t.params.contest + "/change_tour",
                data: i,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status
                },
                error: function() {
                    alert("An error occured. Please, try again later.")
                }
            })
        })
    }
}
function RespReview(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.profile_my = new ProfileMy, t.resphf = new RespHF, t.imageIndex = 0, t.images = [];
    var n = !(location.href.indexOf("tourradar.com") < 0);
    t.send_google_event = function(e, i, o, a) {
        n && t.common.send_google_event(e, i, o, a)
    }, t.init = function() {
        switch (t.params.step) {
        case 1:
            t.select_operator();
            break;
        case 2:
            t.send_google_event("reviewFunnel", "Entry page load"), t.make_review()
        }
        e.thanks && t.send_google_event("reviewFunnel", "Step3", "Thank you review page loaded")
    }, t.mark_checked = function(e, t, i) {
        var n = 1,
            o = ".form" + e + " .arrow";
        for ($(o + t + " .pic1").addClass("hidden"), $(o + t + " .pic2").removeClass("hidden"), $(o + t + " .pic3").addClass("hidden"); n <= i;) {
            if ($(o + n + " .pic2").hasClass("hidden") && n != t)
                return $(o + n + " .pic3").addClass("hidden"), void $(o + n + " .pic1").removeClass("hidden");
            n++
        }
    }, t.unmark_checked = function(e, t, i) {
        var n = 1,
            o = ".form" + e + " .arrow",
            a = !0;
        for ($(o + t + " .pic1").addClass("hidden"), $(o + t + " .pic2").addClass("hidden"), $(o + t + " .pic3").addClass("hidden"); n <= i;)
            $(o + n + " .pic1").hasClass("hidden") || n == t || (a = !1), n++;
        a && $(o + t + " .pic1").removeClass("hidden")
    }, t.switch_to_wrong = function(e, t) {
        var i = ".form" + e + " .arrow" + t;
        $(i + " .pic1").addClass("hidden"), $(i + " .pic2").addClass("hidden"), $(i + " .pic3").removeClass("hidden")
    }, t.show_stars = function(e, t, n) {
        t = t || 0, n = n || 5;
        var e = 0 == t ? $(e) : $(e).eq(n - t),
            o = i = n - e.index();
        for (e.siblings().removeClass("show"), e.parent().removeClass("wrong"); i > 0;)
            e.addClass("show"), e = e.next(), i--;
        return o
    }, t.clear_error = function() {
        $("article.error-plc-hld").text("")
    }, t.select_operator = function() {
        var e = window.location.hash.substring(1).split("-"),
            i = "/review/",
            n = "";
        if (e[0].length > 0 && ($("#operator option").each(function(t, i) {
            if ($(i).attr("operator_id") == e[0])
                return n = $(i).attr("value")
        }), n.length > 0)) {
            var o = new Array,
                a = new String;
            i += n, void 0 != e[1] && e[1].length > 0 && "0" != e[1] && o.push("tour=" + e[1]), void 0 != e[2] && e[2].length > 0 ? o.push("guide=" + e[2]) : void 0 != e[3] && e[3].length > 0 && o.push("guide=" + e[3]), a = o.join("&"), a.length > 0 && (i = i + "?" + a), t.send_google_event("reviewFunnel", "SelectOperator"), window.location = i
        }
        t.common.check_mobile() ? setTimeout(function() {
            $(".operator-review.step1").append('<script src="/include/js/selectivity/selectivity-full.min.js" type="text/javascript"></script>'), $(".operator-review.step1 .tip").before('<div class="operator_m"></div>');
            var e = [];
            $("#operator option").each(function(t, i) {
                e.push({
                    id: $(i).attr("value"),
                    text: $(i).text()
                })
            }), $(".operator_m").selectivity({
                multiple: !1,
                placeholder: "Company name",
                items: e,
                positionDropdown: function(e) {
                    $(e).css("position", "relative"), $(e).css("top", "-40px"), $(e).css("left", "5px")
                }
            }).on("selectivity-selected", function(e) {
                window.location = "/review/" + $(this).selectivity("value") + "/?ss=t"
            })
        }, 1e3) : ($("#operator").chosen({
            no_results_text: "No results matched"
        }), $("#operator").val(""), $("#operator").trigger("chosen:updated"), $("#operator").on("change", function() {
            $(".chosen-container").addClass("hidden"), window.location = "/review/" + $("#operator").val() + "/?ss=t"
        }))
    }, t.make_review = function() {
        function e() {
            setTimeout(function() {
                $(".operator-review .form2 .arrow1").append('<script src="/include/js/selectivity/selectivity-full.min.js" type="text/javascript"></script>'), $(".operator-review .form2 .arrow1").append('<div class="tour_m"></div>');
                var e = [];
                $("#tours option").each(function(t, i) {
                    e.push({
                        id: $(i).attr("value"),
                        text: $(i).text()
                    })
                }), $(".tour_m").selectivity({
                    multiple: !1,
                    placeholder: "Select the tour",
                    items: e,
                    positionDropdown: function(e) {
                        $(e).css("position", "relative"), $(e).css("top", "-70px")
                    }
                }).on("selectivity-selected", function(e) {
                    $("#tours").val($(this).selectivity("value")), i()
                }), $(".tour_m").selectivity("value", $("#tours").val()), "" == $(".free-entered-tour").attr("on") && 1 != $("#tours option").length || $(".tour_m").toggleClass("hidden")
            }, 360)
        }
        function i() {
            t.common.check_mobile() ? $("#tours").removeClass("wrong") : $(".form2 .arrow1 .chosen-single").removeClass("wrong"), t.clear_error(), "" == $("#tours").val() ? t.unmark_checked(2, 1, p) : t.mark_checked(2, 1, p)
        }
        function n() {
            var e = $(".free-entered-tour");
            e.removeClass("wrong"), t.clear_error(), e.val().length > 5 ? t.mark_checked(2, 1, p) : t.unmark_checked(2, 1, p)
        }
        function o() {
            $(".form2 .free-entered-tour, .form2 .note.one, .form2 .note.two, .form2 .chosen-container, .form2 #tours, .form2 .tour_m").toggleClass("hidden"), $(".form2 #tours").hasClass("hidden") ? n() : i()
        }
        function a() {
            0 != $(".stars.g").attr("num") && 0 != $(".stars.t").attr("num") && 0 != $(".stars.v").attr("num") && t.mark_checked(2, 3, p)
        }
        function s(e) {
            $(e).parent().attr("num", t.show_stars(e))
        }
        function r(e) {
            var t = ["Bad", "Poor", "Average", "Good", "Excellent"];
            $(e).parent().siblings(".rating-hint").html(t[4 - $(e).index()])
        }
        function l(e) {
            r(e), $(e).parent().siblings(".rating-hint").addClass("on")
        }
        function c(e) {
            var e = $(e).parent().siblings(".rating-hint");
            e.hasClass("on") || e.html("")
        }
        function d() {
            $(".operator-review .cont").removeClass("pending"), $(".photo_upload").removeClass("hidden"), $(".area-d").addClass("hidden"), $(".switch-upload-area").removeClass("hidden")
        }
        function u(e) {
            var i = e.length;
            $(".operator-review .cont").addClass("pending");
            var n = ["image/jpeg", "image/png"];
            $(e).each(function(e, o) {
                if (n.indexOf(o.type) == -1)
                    return void (0 == --i && d());
                var a = 1;
                EXIF.getData(o, function() {
                    a = EXIF.getTag(this, "Orientation")
                });
                var s = new FileReader;
                s.onload = function(e) {
                    var n = $(".photo_upload #sample").clone();
                    n.find("img").attr("src", e.target.result).addClass("t" + a + "C"), n.attr("id", ""), n.attr("data-image-index", t.imageIndex), n.appendTo(".photo_upload .pics");
                    var s = {
                        el: n,
                        file: o,
                        angle: 0,
                        index: t.imageIndex
                    };
                    t.images[t.imageIndex] = s, $.when(t.updateImage(s)).then(function() {
                        0 == --i && d()
                    }), t.imageIndex++
                }, s.readAsDataURL(o)
            })
        }
        window.onbeforeunload = function() {
            if (0 == $(".operator-review.step0").length)
                return "All entered form data will be lost !!! Are you sure ?"
        }, $(".operator-review.step0 .but").click(function() {
            $(".operator-review.step0").remove(), $(".operator-review.step2").hide().removeClass("hidden").fadeIn(700), t.send_google_event("reviewFunnel", "Entry page button", $(this).attr("data-name"))
        }), t.common.check_mobile() ? e() : $("#tours").chosen({
            no_results_text: "No results matched",
            width: "100%"
        });
        var h = 1,
            p = 2,
            f = 15,
            m = !0,
            g = !0,
            v = !0;
        "" != $(".select.month").val() && "" != $(".select.year").val() && t.mark_checked(2, 1, p), $("#tours").on("change", function() {
            i(), g && (t.send_google_event("reviewFunnel", "SelectTour"), g = !1)
        }), "" != $(".free-entered-tour").attr("on") || 1 == $("#tours option").length ? (1 == $("#tours option").length && $(".note.one, .note.two").remove(), o()) : i(), $(".form2 .note.one, .form2 .note.two").on("click", function() {
            o()
        }), $(".free-entered-tour").on("keyup", function() {
            n(), g && (t.send_google_event("reviewFunnel", "SelectTour"), g = !1)
        }), $(".form1 .arrow1 textarea").on("keyup", function() {
            m && (t.send_google_event("reviewFunnel", "StartReview"), m = !1), $(this).removeClass("wrong"), t.clear_error(), $(this).val().length > f ? t.mark_checked(1, 1, h) : t.unmark_checked(1, 1, h), $(this).val().length > 100 && !$(".form1 .arrow1 .pic2").hasClass("hidden") ? $(".button-opt-arrow .opt").removeClass("hidden") : $(".button-opt-arrow .opt").addClass("hidden")
        }), $(".form1 .maincta").on("click", function() {
            var e = !0;
            $(".review_text").val().length < f && ($(".form1 .arrow1 textarea").addClass("wrong"), t.switch_to_wrong(1, 1), e = !1), e ? ($(".form1").addClass("hidden"), $(".form2").removeClass("hidden"), $("h1.orig, h1.repl").toggleClass("hidden"), $(".subtitle li").eq(1).toggleClass("act com"), $(".subtitle li").eq(2).toggleClass("act"), $("html, body").animate({
                scrollTop: 0
            }, 10), t.send_google_event("reviewFunnel", "Step2")) : ($("article.error-plc-hld").text("All fields are required. Please fill them."), t.common.check_mobile() && $("html, body").animate({
                scrollTop: $(".wrong").offset().top - 25
            }, 1e3), t.send_google_event("reviewFunnel", "ContinueButtonError"))
        }), $(".back-to-review").on("click", function() {
            $(".form2").addClass("hidden"), $(".form1").removeClass("hidden"), $("h1.orig, h1.repl").toggleClass("hidden"), $(".subtitle li").eq(1).toggleClass("act com"), $(".subtitle li").eq(2).toggleClass("act"), t.common.check_mobile() && e()
        });
        var _ = "";
        $(".form2 .month, .form2 .year").on("change", function() {
            t.clear_error();
            var e = $.trim($(".form2 .month").val()),
                i = $.trim($(".form2 .year").val());
            if ("" != _ && ($(".form2 .month").append(_), _ = ""), $(".form2 .year option:last").val() == i) {
                var n = (new Date).getMonth() + 1;
                $.each($(".form2 .month option"), function(e, t) {
                    $(t).attr("value") > n && (_ += t.outerHTML, $(t).remove())
                }), e > n && ($(".form2 .month option").removeAttr("selected"), $(".form2 .month option:not(.hidden):last").attr("selected", "on"), e = n)
            } else
                $(".form2 .month option").removeClass("hidden");
            e && $(".form2 .month").removeClass("wrong"), i && $(".form2 .year").removeClass("wrong"), e && i && new Date(i, e - 1, 1, 0, 0, 0) <= new Date ? t.mark_checked(2, 2, p) : t.unmark_checked(2, 2, p)
        }), $(".form2 .guide").on("change", function() {
            t.clear_error()
        }), $(".stars.g span, .stars.t span, .stars.v span").on("click", function() {
            t.clear_error(), s(this), a(), l(this)
        }), $(".stars.g span").on("click", function() {
            $(".guide-name-cnt").removeClass("hidden")
        });
        var b = 1,
            w = 10;
        $(".add_guide_field").live("click", function() {
            if (b < w) {
                b++;
                var e = $(".guide-name-cnt:last").clone();
                $(".guide-name-cnt:last .remove_guide_field").removeClass("hidden"), $(".guide-name-cnt:last .add_guide_field").addClass("hidden"), e.children(".txt").html(""), e.find("select option").removeAttr("selected"), b == w && (e.find(".remove_guide_field").addClass("hidden"), e.find(".add_guide_field").addClass("hidden")), $(".guide-name-cnt:last").after(e), t.check_guides()
            }
        }), $(".remove_guide_field").live("click", function() {
            if (b > 1) {
                b--;
                var e = $(".guide-name-cnt:first .txt").html();
                $(this).parent().parent().remove(), $(".guide-name-cnt:first .txt").html(e), $(".guide-name-cnt:last .add_guide_field").hasClass("hidden") && ($(".guide-name-cnt:last .remove_guide_field").addClass("hidden"), $(".guide-name-cnt:last .add_guide_field").removeClass("hidden")), t.check_guides()
            }
        }), t.guides = {}, $(".select.guide").live("change", function() {
            var e = $(this),
                i = $(this).parent().find(".guide_add"),
                n = e.parent().children(".svg-cont");
            "---" == e.val() && (e.addClass("hidden"), i.parent().removeClass("hidden"), n.addClass("hidden"), i.parent().find("a").click(function() {
                e.removeClass("hidden"), i.parent().addClass("hidden"), n.removeClass("hidden").val("")
            }), i.unbind("blur").on("blur", function(t) {
                t.preventDefault();
                var o = $.trim($(this).val());
                if (o) {
                    var a = $("<option>").val(o).text(o).attr("data-custom", "yes");
                    e.children("option[data-custom]").remove(), e.append(a), e.find(a).prop("selected", !0), e.removeClass("hidden"), i.parent().addClass("hidden"), n.removeClass("hidden")
                }
            })), t.check_guides()
        }), t.check_guides = function() {
            t.guides = {}, $(".guide-name-cnt select.guide").each(function() {
                parseInt($(this).val()) && (t.guides[$(this).val()] = !0)
            }), $(".guide-name-cnt select.guide option").attr("disabled", !1), $(".guide-name-cnt select.guide").each(function() {
                for (var e in t.guides)
                    $(this).find('option[value="' + e + '"]').not(":selected").attr("disabled", !0)
            })
        }, t.common.check_mobile() && ($(".stars").addClass("iphone"), $(".stars").removeClass("starhover")), /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && $(".stars.a, .stars.m").addClass("mob"), $(".stars.a span, .stars.m span").on("click", function(e) {
            var t = this;
            "" == $(t).parent().attr("num") ? (s(t), l(t)) : ($(t).parent().attr("num", ""), $(t).parent().children("span").removeClass("show"), $(t).parent().parent().children(".rating-hint").html(""))
        }), $(".stars span").on("mousemove", function() {
            $(this).hasClass("o") || $(this).parent().siblings(".rating-hint").hasClass("on") || (r(this), !/iPhone|iPad|iPod/i.test(navigator.userAgent) || $(this).parent().hasClass("a") || $(this).parent().hasClass("m") || $(this).click())
        }), $(".stars span").on("mouseleave", function() {
            c(this), !/iPhone|iPad|iPod/i.test(navigator.userAgent) || $(this).parent().hasClass("a") || $(this).parent().hasClass("m") || $(this).click()
        }), $(".select.month").on("change", function() {
            t.send_google_event("reviewFunnel", "SelectMonth")
        }), $(".select.year").on("change", function() {
            t.send_google_event("reviewFunnel", "SelectYear")
        }), $("#guide_chosen").on("click", function() {
            v && (t.send_google_event("reviewFunnel", "GuidesName"), v = !1)
        }), $("#guide_chosen, .select.guide").on("change", function(e, i) {
            t.send_google_event("reviewFunnel", "GuidesNameSuccess")
        }), $(".switch-upload-on").on("click", function() {
            t.send_google_event("reviewFunnel", "UploadPhotos")
        }), $(".stars.g span").on("click", function() {
            t.send_google_event("reviewFunnel", "GuideRating")
        }), $(".stars.t span").on("click", function() {
            t.send_google_event("reviewFunnel", "TransportRating")
        }), $(".stars.v span").on("click", function() {
            t.send_google_event("reviewFunnel", "ValueRating")
        }), $(".stars.a span").on("click", function() {
            t.send_google_event("reviewFunnel", "AccommRating")
        }), $(".stars.m span").on("click", function() {
            t.send_google_event("reviewFunnel", "MealRating")
        }), $(".operator-ruler li").on("click", function() {
            $(".operator-ruler li").removeClass("show"), $(this).addClass("show"), t.mark_checked(2, 4, p), t.send_google_event("reviewFunnel", "NPS button", $(this).text())
        }), $(".form2 .maincta").on("click", function() {
            var e = !0;
            "" != $("#tours").val() || $("#tours").hasClass("hidden") || (t.common.check_mobile() ? $("#tours").addClass("wrong") : $(".form2 .arrow1 .chosen-single").addClass("wrong"), t.switch_to_wrong(1, 1), e = !1), $(".free-entered-tour").val().length < 5 && !$(".free-entered-tour").hasClass("hidden") && ($(".free-entered-tour").addClass("wrong"), t.switch_to_wrong(2, 1), e = !1);
            var i = $.trim($(".form2 .month").val()),
                n = $.trim($(".form2 .year").val());
            i && n && new Date(n, i - 1, 1, 0, 0, 0) > new Date && ($(".form2 .month, .form2 .year").addClass("wrong"), t.switch_to_wrong(2, 2), e = !1), "" == $(".form2 .month").val() && ($(".form2 .month").addClass("wrong"), t.switch_to_wrong(2, 2), e = !1), "" == $(".form2 .year").val() && ($(".form2 .year").addClass("wrong"), t.switch_to_wrong(2, 2), e = !1), 0 == $(".stars.g").attr("num") && ($(".stars.g").addClass("wrong"), t.switch_to_wrong(2, 3), e = !1), 0 == $(".stars.t").attr("num") && ($(".stars.t").addClass("wrong"), t.switch_to_wrong(2, 3), e = !1), 0 == $(".stars.v").attr("num") && ($(".stars.v").addClass("wrong"), t.switch_to_wrong(2, 3), e = !1), 0 == $(".operator-ruler li.show").length && (t.switch_to_wrong(2, 4), e = !1);
            var o = !1,
                a = !1;
            if ($(".form2 .verify").length > 0) {
                var o = $.trim($("#verify-name").val()),
                    a = $.trim($("#verify-email").val());
                $("#verify-name, #verify-email").removeClass("wrong"), o || ($("#verify-name").addClass("wrong"), t.switch_to_wrong(2, 5), e = !1), a && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a) || ($("#verify-email").addClass("wrong"), t.switch_to_wrong(2, 5), e = !1)
            }
            if (e) {
                t.send_google_event("reviewFunnel", "Name & Email fields complete submit"), window.onbeforeunload = "";
                var s = "" != $(".select.guide:first").val() ? $(".select.guide:first option:selected").text() : "",
                    r = new Array;
                $(".select.guide").each(function(e, t) {
                    r.push($(t).val())
                }), t.common.check_mobile() && $(".tour_m").selectivity("destroy"), data = {
                    action: "add_review",
                    operator: $(".operator").attr("operator"),
                    id: $("#tours").hasClass("hidden") ? $(".free-entered-tour").val() : $("#tours").val(),
                    comments: $(".review_text").val(),
                    date: "01-" + $(".select.month").val() + "-" + $(".select.year").val(),
                    ratings: "g:" + $(".stars.g").attr("num") + " t:" + $(".stars.t").attr("num") + " a:" + $(".stars.a").attr("num") + " m:" + $(".stars.m").attr("num") + " v:" + $(".stars.v").attr("num"),
                    guides: r,
                    recommend: "1",
                    url: $("#sharelnk").text() + "?tour=" + $("#tours").val() + "&m=" + $(".month").val() + "&y=" + $(".year").val() + "&invite={INVITE}" + ("" == s ? "" : "&guide=" + s),
                    verify_name: o,
                    verify_email: a,
                    subscribe: location.href.indexOf("subscribe=no") > 0 ? 0 : 1,
                    not_log_in: t.params.not_log_in,
                    operator_rating: $(".operator-ruler li.show").text()
                }, $("#ac").length > 0 && (data.auto_confirm = !0);
                var l = new FormData;
                for (var c in data)
                    l.append(c, data[c]);
                var d = [];
                $(t.images).each(function(e, t) {
                    t && d.push(t.key)
                }), l.append("imageKeys", JSON.stringify(d)), $(".form2 .maincta").attr("disabled", !0).text("Please wait"), $.ajax({
                    url: document.location.href,
                    type: "POST",
                    data: l,
                    cache: !1,
                    dataType: "json",
                    processData: !1,
                    contentType: !1,
                    success: function(e) {
                        "OK" == e.status ? (TRFB_init(0x83040eda945f, function() {}), "undefined" != typeof fbq && fbq("track", "CompleteReview"), e.active ? (e.traveller_name = e.traveller_name ? e.traveller_name : "", t.show_stars(".stars.o span", e.rating), s.length > 0 && $(".form3 .first-guide span").text(s), $(".form3 .review").html($(".form1 .review_text").val()), $("#sharelnk").text($("#sharelnk").text() + "?tour=" + $("#tours").val() + "&m=" + $(".month").val() + "&y=" + $(".year").val() + "&invite=" + e.referral_code + ("" == s ? "" : "&guide=" + encodeURIComponent(s))), $("div.fb-send").attr("data-href", $("#sharelnk").text()), $("#send_popup_review .message-box .link").append($("#sharelnk").text()), $("#send_popup_review .message-box .user_name").append(e.traveller_name), $("#send_popup_review .message-box").attr("username", e.traveller_name), $("#send_popup_review .message-box .tour_name").append(e.tour_name), $(".form2").addClass("hidden"), $(".form3").removeClass("hidden"), e.guide_avatar ? $(".form3 .guide-avatar").css("background-image", "url(" + e.guide_avatar + ")") : e.operator_image && ($(".form3 .guide-avatar").css("background-image", "url()"), $(".form3 .guide-avatar").addClass("noborder"), $(".form3 .guide-avatar").append('<img src="' + e.operator_image + '"/>')), e.guide_name && $(".form3 .first-guide span").text(e.guide_name), t.send_google_event("reviewFunnel", "Step3"), $("html, body").animate({
                            scrollTop: 0
                        }, 10), $(".top.top20").append('<img src="/images/responsive/mat-2013/badges-combo-gen.png">')) : ($(".verify-email p span").text(e.traveller_email), $(".verify-email .close").click(function() {
                            $(".verify-email").addClass("hidden")
                        }), $(".verify-email p a").click(function(i) {
                            if (i.preventDefault(), e.new_user)
                                var n = "/members/confirmation_resend";
                            else
                                var n = "/review?resend=" + e.id + "&email=" + e.traveller_email;
                            $.ajax({
                                url: n,
                                dataType: "json",
                                success: function(e) {
                                    if ("OK" == e.status) {
                                        var i = $(".verify-email p a").parent("p");
                                        $(".verify-email p a").remove(), i.append("<span> Sent!</span>")
                                    } else
                                        t.common.error()
                                },
                                error: function() {
                                    t.common.error()
                                }
                            })
                        }), $(".verify-email").removeClass("hidden"), $(".form2 .maincta").off("click").attr("disabled", !1).text("Finish").on("click", function() {
                            $(".verify-email").removeClass("hidden")
                        }))) : ($(".form2 .maincta").attr("disabled", !1).text("Finish"), alert(e.message))
                    },
                    error: function() {
                        $(".form2 .maincta").attr("disabled", !1).text("Finish"), t.common.error()
                    }
                })
            } else
                $("article.error-plc-hld").text("Please fill required fields."), t.common.check_mobile() && $("html, body").animate({
                    scrollTop: $(".wrong").offset().top - 50
                }, 1e3), t.send_google_event("reviewFunnel", "FinishReviewError")
        }), $(".container-custom-file-button .file").on("click", function() {
            $(".container-custom-file-button .custombutton").click()
        }), $(".container-custom-file-button input[type=file]").change(function(e) {
            e.stopPropagation(), e.preventDefault(), u(this.files)
        }), $(".user-image .trash").live("click", function() {
            var e = $(this).parents(".user-image").first(),
                i = t.images[e.data("image-index")];
            t.deleteImage(i)
        }), $(".user-image .rotate").live("click", function() {
            var e = $(this).parents(".user-image").first(),
                i = t.images[e.data("image-index")];
            i.angle = (360 + (i.angle - 90)) % 360, i.el.find("img").css("transform", "rotate(-" + i.angle + "deg)"), $(".operator-review .cont").addClass("pending"), $.when(t.updateImage(i)).then(function() {
                $(".operator-review .cont").removeClass("pending")
            })
        }), $(".switch-upload-on").on("click", function() {
            $(".photo_upload").removeClass("hidden"), $(".area-d").removeClass("hidden"), $(this).addClass("hidden")
        }), $(".switch-upload-area").on("click", function() {
            $(".area-d").removeClass("hidden"), $(this).addClass("hidden")
        }), $(".area-d").on("dragover dragleave", function(e) {
            e.preventDefault(), e.stopPropagation()
        }), $(".area-d").on("dragover", function(e) {
            $(this).addClass("hl")
        }), $(".area-d").on("dragleave", function(e) {
            $(this).removeClass("hl")
        }), $(".area-d").bind("drop", function(e) {
            e.preventDefault(), e.stopPropagation();
            var t = e.originalEvent.dataTransfer.files;
            new Array;
            return t.length > 0 && u(t), !1
        }), $.getScript("/include/js/exif.js"), $("#sharelnk").on("click", function() {
            return t.resphf.select_text("sharelnk"), t.send_google_event("reviewFunnel", "ShareLink"), !0
        }), $(".form3 .messenger").click(function() {
            FB.ui({
                method: "send",
                link: $("#sharelnk").text()
            }), t.send_google_event("reviewFunnel", "ShareFB")
        }), $(".messenger-email").on("click", function() {
            t.profile_my.send_by_email_popup("#send_popup_review", 10, 1), t.send_google_event("reviewFunnel", "ShareEmail")
        })
    }, t.deleteImage = function(e) {
        e && (e.el.remove(), delete t.images[e.index])
    }, t.updateImage = function(e) {
        var i = new FormData;
        return i.append("action", "update_pic"), i.append(e.index, e.file), i.append("angle" + e.index, e.angle), $.ajax({
            url: document.location.href,
            type: "POST",
            data: i,
            cache: !1,
            dataType: "json",
            processData: !1,
            contentType: !1,
            success: function(i) {
                "OK" == i.status ? ($.each(i.keys, function(e, i) {
                    t.images[e].key = i
                }), t.send_google_event("reviewFunnel", "UploadPhotosSuccess")) : (t.deleteImage(e), alert(i.message))
            },
            error: function() {
                t.common.error()
            }
        })
    }
}
function RespMatReview(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.init = function() {
        if ($("#fnez-centered #gotoend.operator_page").length > 0 && t.init_send_cube_params(), $(".thailand-experience.end").length > 0 && (/iPhone|iPad/i.test(navigator.userAgent) || $.getScript("/include/js/jquery.tubular.1.0.js").done(function() {
            $("#fnez-video").tubular({
                videoId: "Qbs8rMa9aA0",
                start: 10,
                wrapperZIndex: 0
            })
        })), $(".europe-summer-moment").length > 0) {
            if ($("#photo_upload_button, #fnez-centered.first .int-img img").click(function() {
                $("#photo_upload").click()
            }), $("#photo_upload").on("change", function(e) {
                $("#photo_upload_button").html('Please wait ... <img src="/images/ajax_loader/fbstyle.gif" />');
                var i = e.target.files;
                e.stopPropagation(), e.preventDefault();
                var n = new FormData;
                $.each(i, function(e, t) {
                    n.append(e, t)
                }), n.append("randomCode", t.params.hash), $.ajax({
                    url: "/welcome/standart_contest/" + t.params.contest + "/files?files",
                    type: "POST",
                    data: n,
                    cache: !1,
                    dataType: "json",
                    processData: !1,
                    contentType: !1,
                    success: function(i, n, o) {
                        function a(e, i) {
                            $form = $(e.target);
                            var n = $form.serialize();
                            $.each(i.files, function(e, t) {
                                n = n + "&filenames[]=" + t
                            }), $.ajax({
                                url: "/welcome/standart_contest/" + t.params.contest + "/files",
                                type: "POST",
                                data: n,
                                cache: !1,
                                dataType: "json",
                                success: function(e, t, i) {
                                    "undefined" == typeof e.error ? ($("#uploaded_photo").val(e.formData.filenames[0]),
                                    $("#fnez-centered.second .int-img img.lo-im").attr("src", "/data/images_source/contests/summer-moment/" + e.formData.filenames[0] + "?v=" + +new Date), $("#fnez-centered.first").addClass("hidden"), $("#fnez-centered.second").removeClass("hidden"), $("#photo_upload_button").html("Choose a file from your device")) : ($("#photo_upload_button").html("Choose a file from your device"), alert("ERROR: " + e.error))
                                },
                                error: function(e, t, i) {
                                    $("#photo_upload_button").html("Choose a file from your device"), console.log("ERRORS: " + t)
                                },
                                complete: function() {
                                    $("#photo_upload_button").html("Choose a file from your device")
                                }
                            })
                        }
                        "undefined" == typeof i.error ? a(e, i) : ($("#photo_upload_button").html("Choose a file from your device"), alert("ERROR: " + i.error))
                    },
                    error: function(e, t, i) {
                        $("#photo_upload_button").html("Choose a file from your device"), console.log("ERRORS: " + t)
                    }
                })
            }), $(".europe-summer-moment #fnez-centered .int-img img.close-im").click(function() {
                $("#fnez-centered.second").addClass("hidden"), $("#fnez-centered.first").removeClass("hidden")
            }), $(".europe-summer-moment #fnez-centered .int-img textarea").click(function() {
                t.params.ahref = $("#gotoend a").attr("href"), $("#gotoend a").addClass("edited").text("I'm done ").attr("hash", "#").attr("onclick", "return false")
            }), $(".europe-summer-moment a.edited").live("click", function() {
                $(".europe-summer-moment #fnez-centered .int-img textarea").val().length ? $.ajax({
                    url: "/welcome/standart_contest/" + t.params.contest,
                    data: {
                        hash: t.params.hash,
                        text: $(".europe-summer-moment #fnez-centered .int-img textarea").val()
                    },
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        "OK" == e.status && (location.href = t.params.ahref)
                    },
                    error: function() {
                        t.common.error()
                    }
                }) : location.href = t.params.ahref
            }), $(".europe-summer-moment.questionnaire").length)
                var e = setInterval(function() {
                    "object" == typeof OpenLayers && (clearInterval(e), t.serp = new RespSerp, t.serp.load_map_tours(t.params.locs, !1, "map-"))
                });
            $(".europe-summer-moment .fbox").click(function() {
                $.fancybox({
                    href: $(this).attr("href"),
                    padding: 20,
                    margin: 0,
                    onComplete: function() {}
                })
            }), $("#fancybox-content a.learn-more").live("click", function() {
                $.fancybox.close()
            })
        }
        $(".wonderlands").length > 0 && $(".wonderlands .soc-buttons .cube").click(function() {
            var e = location.origin + "/wonderlands",
                t = $(this).attr("class").split(" ")[1];
            switch (t) {
            case "fb":
                var i = encodeURIComponent(e + "?utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Wonderland%20Facebook");
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var i = encodeURIComponent(e + "?utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Wonderland%20Twitter"),
                    n = "Check out the winners of three trips for 2 in Australia, Cambodia, Brazil are up for grabs";
                popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + n + "&hashtags=TourRadar,wonderlands", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                var i = encodeURIComponent(e + "?utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Wonderland%20Gglplus");
                popUp = window.open("https://plus.google.com/share?url=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
            }
        }), $(".europe-summer-moment").length > 0 && $(".europe-summer-moment .soc-buttons .cube").click(function() {
            var e = location.origin + "/europe-summer-moment",
                t = $(this).attr("class").split(" ")[1];
            switch (t) {
            case "fb":
                var i = encodeURIComponent(e + "?utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Europe%20Ssummer%20Moment%20Facebook");
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var i = encodeURIComponent(e + "?utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Europe%20Ssummer%20Moment%20Twitter"),
                    n = "Check out the winner of an Europe Summer Trip for 2 with TourRadar & Topdeck Travel";
                popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + n + "&hashtags=TourRadar,SummerMoment", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "gg":
                var i = encodeURIComponent(e + "?utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Europe%20Ssummer%20Moment%20Gglplus");
                popUp = window.open("https://plus.google.com/share?url=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
            }
        }), t.common.load_twitter(), t.common.load_fb_button(), function() {
            var e = document.createElement("script");
            e.type = "text/javascript", e.async = !0, e.src = "https://apis.google.com/js/platform.js";
            var t = document.getElementsByTagName("script")[0];
            t.parentNode.insertBefore(e, t)
        }(), $(window).scroll(function() {
            clearTimeout($.data(this, "scrollTimer"));
            var e = $("#content").height() - $(".page-right").height();
            $(document).width() >= 948 ? $(window).scrollTop() < e && $.data(this, "scrollTimer", setTimeout(function() {
                $(".page-right").animate({
                    marginTop: Math.max($(window).scrollTop() - 126, 0)
                }, "fast")
            }, 100)) : $(".page-right").css("margin-top", "42px")
        }), p = navigator.platform, $(".fancybox").fancybox({
            openEffect: "none",
            closeEffect: "none"
        }), $("#copyClipboad").click(function() {
            $.fancybox({
                href: "#code-code"
            })
        }), $("#code-code input").click(function() {
            $(this).select(), $("#code-code .v3").css("color", "#333")
        }).blur(function() {
            $("#code-code .v3").css("color", "#ddd")
        }), $("#end_2 #send-sub").click(function() {
            var e = $.trim($("#end_2 #sub").val());
            if (!e || !/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e))
                return alert("Please enter valid email address"), !1;
            var i = {
                email_sub: e
            };
            $.ajax({
                url: location.href,
                data: i,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($("#end_2 .sub").remove(), $("#end_2 .subscribe .in .text").text("Done."))
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".leaderboard-entry").find("p").each(function() {
            0 == $(this).html().replace(/\s|&nbsp;/g, "").length && $(this).remove(), $(this).next().is("p") && ($(this).html($(this).html() + " " + $(this).next().html()), $(this).next().remove());
            var e = $.trim($(this).html().replace(/<br\s?\/?>/, ""));
            $(this).html(e)
        });
        var i = window.location.hash.substr(1).replace("table", "b");
        if (i.indexOf("=") == -1 && i.indexOf("@") == -1 && i.indexOf("&") == -1 && $("#" + i).length > 0 && "leaderboard-guides" != i) {
            $("#" + i).siblings().removeClass("active"), $("#" + i).addClass("active");
            var n = i.replace("b", "c");
            $(".tour-block").hide(), $("#" + n).show()
        }
        $(document).on("click", "#badges div", function() {
            if (!$(this).hasClass("active")) {
                var e = $(this).attr("id"),
                    t = e.replace("b", "c");
                $(this).siblings().removeClass("active"), $(this).addClass("active"), $(".tour-block").hide(), $("#" + t).show();
                var i = e.replace("b", "table");
                window.location.hash = i
            }
        }), $(".fnez-tour-instance a").click(function() {
            $(this).parent().click()
        }), $("#more_des").click(function() {
            0 == $(".topdescription .top .text .ftext:visible").length ? ($(".topdescription .top .text span").hide(), $(".topdescription .top .text .ftext").css("display", "inline"), $(".topdescription").height() < $(".topdescription .top .text").height() + 45 && $(".topdescription").height($(".topdescription .top .text").height() + 45), $(this).text("Hide")) : ($(".topdescription").height(""), $(".topdescription .top .text .ftext").hide("slow"), $(".topdescription .top .text span").show(), $(this).text("Read more")), $(".topdescription .top .text .triangle").toggleClass("up")
        }), gapi.signin.render("signin_google_g", {
            callback: function(e) {
                t.common.user_google(e)
            },
            clientid: "399583607835.apps.googleusercontent.com",
            cookiepolicy: "single_host_origin",
            scope: "https://www.googleapis.com/auth/plus.login",
            width: "wide",
            scope: "https://www.googleapis.com/auth/userinfo.email"
        });
        var o = null;
        $("#guide-signup a").click(function() {
            $.fancybox({
                href: "#signup_guide_popup",
                padding: 0,
                margin: 0,
                onComplete: function() {
                    $("#signup_guide_popup .buttons .google iframe").attr("src").length > 0 && !o ? o = $("#signup_guide_popup .buttons .google iframe").attr("src") : $("#signup_guide_popup .buttons .google iframe").attr("src", o), t.init_guide_popup(function() {
                        location.href = "/members/profile"
                    }), $("#signup_guide_popup .buttons .facebook, #signup_guide_popup  .buttons .facebook-in, #signup_guide_popup  .buttons .facebook-up").click(function() {
                        t.common.user_facebook()
                    })
                }
            })
        }), "registration" == i && $("#guide-signup a").click(), $("#g_oper").chosen({
            width: "235px",
            no_results_text: "No results matched"
        }), $("#g_send").click(function() {
            $("#signup_guide_popup input").css("border", ""), $("#signup_guide_popup select").css("border", ""), $("#signup_guide_popup .error").remove();
            var e = $.trim($("#g_name").val()),
                i = $("#g_oper").val(),
                n = $.trim($("#g_email").val()),
                o = $("#g_password_1").val().trim(),
                a = $("#g_password_2").val().trim(),
                s = null;
            if (0 == e.length ? (s = "Please enter your name.", $("#signup_guide_popup #g_name").css("border", "Red 1px solid")) : 0 == i.length ? (s = "Please choose your operator.", $("#signup_guide_popup #g_oper_chosen .chosen-single").css("border", "Red 1px solid")) : 0 != n.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n) ? o.length < 6 ? (s = "Enter min. 6 characters for the password.", $("#signup_guide_popup #g_password_1").css("border", "Red 1px solid")) : o != a && (s = "Passwords do not match.", $("#signup_guide_popup #g_password_2").css("border", "Red 1px solid")) : (s = "Please enter valid email address.", $("#signup_guide_popup #g_email").css("border", "Red 1px solid")), s)
                $("#signup_guide_popup").append('<div class="error">' + s + "</div>");
            else {
                $("#traveller_login").append('<div class="error message">Please wait...</div>');
                var r = {
                    type: "guide",
                    operator_id: i,
                    name: e,
                    email: n,
                    password: o
                };
                $.ajax({
                    url: "/travellers/signup",
                    data: r,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        $("#signup_guide_popup .error").remove(), "OK" == e.status ? location.href = "/members/profile" : "repeat" == e.status ? ($("#signup_guide_popup").append('<div class="error">' + e.message + "</div>"), $("#signup_guide_popup #g_email").css("border", "Red 1px solid"), $("#signup_guide_popup .error").height() >= 25 && $("#signup_guide_popup .error").css("bottom", "61px")) : t.error()
                    },
                    error: function() {
                        t.error()
                    }
                })
            }
        }), /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? $("#oper").change(function() {
            var e = $(this).val();
            e ? (t.load_tours(e), $("#tour, #date").attr("disabled", !1), location.hash = "#" + e) : ($("#tour option").not(":first").remove(), $("#tour, #date").attr("disabled", !0), location.hash = "")
        }) : $("#oper").chosen({
            no_results_text: "No results matched"
        }).change(function(e, i) {
            var n = $(this).val();
            n ? (t.load_tours(n), $("#tour, #date").attr("disabled", !1), location.hash = "#" + n) : ($("#tour option").not(":first").remove(), $("#tour").chosen("destroy"), $("#tour, #date").attr("disabled", !0), location.hash = "")
        }), $("#tour").change(function() {
            $('input[type="radio"]').each(function() {
                $(this).prop("checked", !1)
            }), $(".recommend:visible").eq(1).fadeOut(500)
        }), $(".guides_id").chosen(), $("#guide_chosen .chosen-choices").find("input").on("keyup blur", function(e) {
            if ((13 == e.which || !$(this).is(":focus")) && $("#guide_chosen .chosen-drop").find("li.no-results").length > 0) {
                var t = $("<option>").val(this.value).text(this.value);
                $(".guides_id").prepend(t), $(".guides_id").find(t).prop("selected", !0), $(".guides_id").trigger("chosen:updated")
            }
        }), 0 == $("#guide_chosen").length && ($("#guide").append('<option value="" id="guide-other-option">Another guide</option>'), $("#guide").after('<input type="text" placeholder="Enter guide\'s name" id="guide-other">'), $("#guide-other").after('<a class="multi-line-button greenb smallbb" id="guide-other-add" onclick="return false" href="#"><span class="title">Add guide</span></a>'), $("#guide-other, #guide-other-add").hide(), $(document).on("change", "#guide", function() {
            $("#guide-other-option").is(":selected") && ($("#guide-other, #guide-other-add").show(), $("#guide-other-option").prop("selected", !1))
        }), $(document).on("click", "#guide-other-add", function() {
            if ($("#guide-other").val()) {
                var e = $("#guide-other").val();
                $("#guide-other-option").before('<option selected value="' + e + '">' + e + "</option>"), $("#guide-other, #guide-other-add").hide(), $("#guide-other").val("")
            }
        })), $("#date").datepicker({
            dateFormat: "dd/mm/yy",
            changeMonth: !0,
            changeYear: !0,
            yearRange: parseInt((new Date).getFullYear()) - 10 + ":" + parseInt((new Date).getFullYear()),
            maxDate: 0,
            onSelect: function(e) {
                e = e.split("/"), location.hash = "#" + $("#oper").val() + "-" + $("#tour").val() + "-" + e[2] + e[1] + e[0]
            }
        }), $(".calendar-icon-wrapper").click(function() {
            $("#date").datepicker("show")
        });
        var a = ["Bad", "Rather poor", "Average", "Good", "Excellent"];
        if ($(".star").hover(function() {
            if (!$(this).hasClass("inactive") && navigator.platform.indexOf("iPhone") == -1 && navigator.platform.indexOf("iPod") == -1 && navigator.platform.indexOf("iPad") == -1) {
                var e = $(this).data("type");
                $(this).prevAll(".star-" + e).addClass("hover"), $(this).addClass("hover"), $(this).siblings(".rating-message").show(), $(this).siblings(".rating-message").not(".fixed").html(a[$(this).index(".star-" + e)])
            }
        }, function() {
            if (!$(this).hasClass("inactive") && navigator.platform.indexOf("iPhone") == -1 && navigator.platform.indexOf("iPod") == -1 && navigator.platform.indexOf("iPad") == -1) {
                var e = $(this).data("type");
                $(this).siblings(".star-" + e).not(".fixed").removeClass("hover"), $(this).not(".fixed").removeClass("hover"), $(this).siblings(".rating-message").not(".fixed").hide()
            }
        }).click(function() {
            if (!$(this).hasClass("inactive")) {
                var e = $(this).data("type");
                $(this).prevAll(".star-" + e).addClass("hover fixed"), $(this).addClass("hover fixed"), $(this).nextAll(".star-" + e).removeClass("hover fixed"), navigator.platform.indexOf("iPhone") === -1 && navigator.platform.indexOf("iPod") === -1 && navigator.platform.indexOf("iPad") === -1 || ($(this).siblings(".rating-message").addClass("hover"), $(this).siblings(".rating-message").show()), $(this).siblings(".rating-message").addClass("fixed"), $(this).siblings(".rating-message").html(a[$(this).index(".star-" + e)])
            }
        }), window.location.search.slice(1).indexOf("-") >= 0 && (location.hash = "#" + window.location.search.slice(1)), parseInt(location.hash.substr(1))) {
            if (location.hash.indexOf("-") >= 0) {
                var s = location.hash.substr(1).split("-"),
                    r = $('#oper option[value="' + s[0] + '"]').data("img-src"),
                    l = '<img class="chose-image-small" src="' + r + '">';
                $("#oper").val(s[0]).trigger("chosen:updated"), $("#oper_chosen").after(l), t.load_tours(s[0], s[1]), s[2] && $("#date").datepicker("setDate", s[2].substr(6, 2) + "/" + s[2].substr(4, 2) + "/" + s[2].substr(0, 4)), s[3] && ($.isNumeric(s[3]) ? $("select#guide").val(s[3]).trigger("chosen:updated") : $("select#guide option").each(function() {
                    $(this).html().indexOf(s[3]) >= 0 && $("select#guide").val($(this).attr("value")).trigger("chosen:updated")
                }))
            } else {
                var r = $('#oper option[value="' + location.hash.substr(1) + '"]').data("img-src"),
                    l = '<img class="chose-image-small" src="' + r + '">';
                $("#oper").val(location.hash.substr(1)).trigger("chosen:updated"), $("#oper_chosen").after(l), t.load_tours(location.hash.substr(1))
            }
            $("#tour, #date").attr("disabled", !1)
        }
        if ($(document).on("change", '.ratings input[type="checkbox"], .rating .na input', function() {
            var e = $(this).attr("id").substr(0, 1);
            $(this).attr("checked") ? ($(".star-" + e).removeClass("hover").addClass("inactive"), $(this).parents(".na").siblings(".rating-message").hide()) : $(".star-" + e).removeClass("inactive")
        }), $(document).on("click", ".rating .na span", function() {
            $(this).siblings("input").prop("checked", !$(this).siblings("input").prop("checked")).change()
        }), $("#recommend-yes").click(function() {
            if ("" != $("#tour").val()) {
                var e = "https://tourradar.com/t/" + $("#tour").val();
                $(".fb-like").attr("data-href", e), $("#recommend-hidden #g-plusone").remove(), $("#recommend-hidden .twitter-share-button").remove();
                var t = '<div id="g-plusone"></div>',
                    i = $("#tour option:selected").text(),
                    n = $("#oper option:selected").text(),
                    o = '<a href="https://twitter.com/share" class="twitter-share-button" data-hashtags="Tourradar" data-text="' + i + " with " + n + '" data-count="none" data-url="https://www.tourradar.com/t/' + $("#tour").val() + '">Tweet</a>';
                $(this).parents(".recommend").siblings("#recommend-hidden").append(t), $(this).parents(".recommend").siblings("#recommend-hidden").append(o), FB.XFBML.parse(), gapi.plusone.render("g-plusone", {
                    size: "medium",
                    annotation: "none",
                    href: "https://tourradar.com/t/" + $("#tour").val()
                }), twttr.widgets.load(), $(this).parents(".recommend").siblings(".recommend:hidden").fadeIn(500)
            }
        }), $("#recommend-no").click(function() {
            $(this).parents(".recommend").siblings(".recommend:visible").fadeOut(500)
        }), $("#award-button").click(function() {
            $("body, html").animate({
                scrollTop: $("h2:first").offset().top - 75
            }, 300)
        }), $("#mat-pic #submit, #add_review #submit a").click(function() {
            t.save_review()
        }), t.load_contest_size(), $(window).bind("load resize", function() {
            t.load_contest_size()
        }), $("#fnez-overall #description").css("visibility", "visible"), $("#fnez-overall #contest").css("visibility", "visible"), /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? ($(".fnez-tour-instance a").click(function() {
            return !1
        }), $(".fnez-tour-instance a").click(function() {
            $(this).parents(".fnez-tour-instance").siblings().children(".tour-radio").attr("checked", !1), $(this).parents(".fnez-tour-instance").siblings().removeClass("highlighted"), $(this).siblings(".tour-radio").attr("checked", "checked"), $(this).parents(".fnez-tour-instance").addClass("highlighted")
        })) : $(".fnez-tour-instance a").click(function() {
            return window.open(this.href, "_blank"), !1
        }), $(document).on("click", "#terms-conditions", function() {
            $("body").append('<div style="width:' + $(document).width() + "px; height:" + $(document).height() + 'px;" id="darkscreen"></div>'), $("#terms-conditions-popup").css("top", Math.max($("html").scrollTop(), $("body").scrollTop()) + ($(window).height() - $("#traveller_login").height()) / 2 + "px").fadeIn(500)
        }), $("#terms-conditions-popup .close").click(function() {
            $("#terms-conditions-popup").fadeOut(500), $("#darkscreen").remove()
        }), $(document).on("click", ".fnez-tour-instance", function() {
            $(this).siblings().children(".tour-radio").attr("checked", !1), $(this).siblings().removeClass("highlighted"), $(this).children(".tour-radio").attr("checked", "checked"), $(this).addClass("highlighted")
        }), $(document).on("change", ".tour-radio", function() {
            $(this).parents(".fnez-tour-instance").siblings().removeClass("highlighted"), $(this).parents(".fnez-tour-instance").addClass("highlighted")
        }), $(document).on("click", ".fb-like", function() {
            var e = $(".fb-like"),
                t = e.val();
            e.val(1 === t ? 0 : 1)
        }), $(document).on("click", ".fnez-answer, .fnez-answer-overlay", function() {
            $(this).siblings("div").children("input").trigger("click")
        }), $(".fnez-question-1 a.image-link").click(function() {
            var e = $(this).attr("data-val");
            $(".fnez-question-1 #h-price-" + e + " .select").click()
        }), $(".travel-my-way.end.full").length > 0) {
            t.serp = new RespSerp;
            var c = new Object;
            c[3252] = t.params.locs, t.serp.load_map_tours(c, !1, "map-")
        }
        if ($(".live-like-local.end.full").length > 0 && 0 == $(".the-real-adventure").length) {
            t.serp = new RespSerp;
            var c = new Object;
            c[48418] = t.params.locs, t.serp.load_map_tours(c, !1, "map-")
        }
        if ($(".the-real-adventure.end.full").length > 0) {
            t.serp = new RespSerp;
            var c = new Object;
            c[5424] = t.params.locs, t.serp.load_map_tours(c, !1, "map-")
        }
        if ($(".the-real-adventure.adone").length > 0) {
            var d = window.location.href.split("?")[1],
                u = d.split("&")[1].split("=")[1];
            $.post("https://graph.facebook.com", {
                id: "https://www.tourradar.com/" + t.params.contest + "?hash=" + u + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Summer%20Moment%20Facebook",
                scrape: !0
            }, function(e) {
                console.log(e)
            })
        }
        $("#fnez-centered #fnez-questionnaire .fnez-answer div.highlights a").click(function() {
            $(this).parent().parent().children(".des").is(":visible") ? ($(this).parent().parent().children(".des").hide("slow"), $(this).children(".triangle").removeClass("up").addClass("down")) : ($(this).parent().parent().children(".des").show("slow"), $(this).children(".triangle").addClass("up").removeClass("down"))
        }), $(".wonderlands.end").length > 0 && $(".se_button.sel a").click(function() {
            var e = $(this).attr("id").substr(4);
            $("#fnez-centered table.fi_tours tr").removeClass("blue"), $("tr#tr-" + e).addClass("blue"), $("tr .se_button.sel").removeClass("hidden"), $("tr#tr-" + e + " .se_button.sel").addClass("hidden"), $("tr .se_selected").addClass("hidden"), $("tr#tr-" + e + " .se_selected").removeClass("hidden");
            var i = {
                action: "change-tour",
                contest: t.params.contest,
                tour: e,
                hash: t.params.hash
            };
            $.ajax({
                url: "/welcome/standart_contest/" + t.params.contest + "/code_sent",
                data: i,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && $.post("https://graph.facebook.com", {
                        id: "https://www.tourradar.com/" + t.params.contest + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Summer%20Moment%20Facebook",
                        scrape: !0
                    }, function(e) {})
                },
                error: function() {
                    alert("An error occured. Please, try again later.")
                }
            })
        }), $(document).on("click", ".fnez-question-1 .select, .fnez-question-1 .ch:not(.not-l)", function() {
            var e = window.location.href.split("?")[1],
                i = e.split("&")[0].split("=")[1],
                n = window.location.pathname.split("/")[1],
                o = $(this).children(".radiobut").val(),
                a = {
                    contest: n,
                    question: o,
                    mail: i
                };
            $.ajax({
                url: "/welcome/standart_contest/" + t.params.contest + "/almost_done?" + e,
                data: a,
                dataType: "json",
                type: "POST",
                success: function(i) {
                    "OK" == i.status ? "wonderlands" == t.params.contest || "the-real-adventure" == t.params.contest || "travel-my-way" == t.params.contest || "hidden-gem" == t.params.contest || "california-dreaming" == t.params.contest || "thailand-experience" == t.params.contest || "back2roots" == t.params.contest ? window.location.href = "/" + t.params.contest + "/almost-done?" + e + "&URL=" + o : "europe-summer-moment" == t.params.contest && (window.location.href = "/" + t.params.contest + "/thank-you?" + e) : "blocked" == i.status ? alert(i.message) : alert("An error occured. Please, try again later.")
                },
                error: function() {
                    alert("An error occured. Please, try again later.")
                }
            })
        }), $(document).on("change", ".fnez-answer:not(.sel) input", function() {
            if ($("input[name=question-1]:checked").val() && $("input[name=question-2]:checked").val() && $("input[name=question-3]:checked").val() && $("input[name=question-4]:checked").val() && $("input[name=question-5]:checked").val()) {
                var e = {
                    hash: t.params.randomCode,
                    contest: t.params.contest,
                    question1: $("input[name=question-1]:checked").val(),
                    question2: $("input[name=question-2]:checked").val(),
                    question3: $("input[name=question-3]:checked").val(),
                    question4: $("input[name=question-4]:checked").val(),
                    question5: $("input[name=question-5]:checked").val()
                };
                "undefined" != typeof t.params.httpref && (e.httpref = t.params.httpref), $.ajax({
                    url: "/welcome/standart_contest/" + t.params.contest + "/almost_done",
                    data: e,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        "OK" == e.status ? "california-dreaming" == t.params.contest || "thailand-experience" == t.params.contest ? window.location.href = "/" + t.params.contest + "/almost-done?" + urlParams : t.params.isQuiz && (t.params.v = e.result, $(".middle").css("visibility", "hidden"), $(".questions .question-number").each(function() {
                            var e = $(this).attr("src"),
                                t = e.split("/"),
                                i = t[t.length - 1].split("-")[0];
                            $("input[name=question-" + i + "]:checked").val() || $(this).attr("src", $(this).attr("src").replace("-selected", "-unselected"))
                        }), $(".questions .question-number.results").attr("src", $(".questions .question-number.results").attr("src").replace("unselected", "selected")), $(".fnez-question, .questions").remove(), $("#fnez-questionnaire").append(e.html), $(".we-want-email").length > 0 && ($(".we-want-email .skip").css("left", $("#fnez-questionnaire").width() / 2 - $(".we-want-email .skip").width() / 2 + "px").click(function() {
                            $(".we-want-email").remove()
                        }), $(".invis").each(function() {
                            $(this).removeClass("invis")
                        })), t.load_contest_size()) : "blocked" == e.status ? alert(e.message) : alert("An error occured. Please, try again later.")
                    },
                    error: function() {
                        alert("An error occured. Please, try again later.")
                    }
                })
            } else {
                var i = parseInt($(this).attr("name").split("-")[1]);
                $(".questions .question-number").each(function() {
                    var e = $(this).attr("src"),
                        t = e.split("/"),
                        i = t[t.length - 1].split("-")[0];
                    $("input[name=question-" + i + "]:checked").val() || $(this).attr("src", $(this).attr("src").replace("-selected", "-unselected"))
                }), $(this).parents(".fnez-answer").parent().hide(), i = 5 == i ? 0 : i, $(".questions .question-number:eq(" + i + ")").attr("src", $(".questions .question-number:eq(" + i + ")").attr("src").replace("unselected", "selected")), i += 1, $(".fnez-question-" + i).show()
            }
        }), window.fbAsyncInit = function() {
            FB.Event.subscribe("edge.create", function(e) {
                $("#liked").val(1)
            }), FB.Event.subscribe("edge.remove", function(e) {
                $("#liked").val(0)
            })
        }, $(".the-real-adventure:not(.europe-summer-moment) .bot-logo").length > 0 && $(window).bind("load resize", function() {
            $(window).width() < 980 ? $(".bot-logo").css("bottom", "20px").css("top", "initial") : $(window).height() >= 800 ? $(".bot-logo").css("top", $(window).height() - 200 + "px").css("bottom", "initial") : $(".bot-logo").css("bottom", "20px").css("top", "initial")
        }), $(".wonderlands .bot-logo").length > 0 && $(window).bind("load resize", function() {
            $(window).width() < 980 ? $(".bot-logo").css("position", "absolute") : $(".bot-logo").css("position", "fixed")
        }), ($(".the-real-adventure.questionnaire").length > 0 || $(".the-real-adventure.end").length > 0) && $(window).bind("load resize", function() {
            if ($(window).width() < 980) {
                var e = $(window).width() - 20;
                $(".vid iframe").width(e).height(e / 1.777778)
            } else
                $(".the-real-adventure.end").length > 0 ? $(".vid iframe").width(980).height(551) : $(".vid iframe").width(470).height(340)
        }), $("#fnez-social.almost_done a img, #fnez-centered .almost_done a img").live("click", function() {
            if (t.params.isQuiz) {
                t.params.hash = t.params.randomCode;
                var e = t.params.contest;
                "europe-my-way" == e && (e = "quiz/europe-my-way")
            }
            var i = $(this).attr("id");
            if ("share_fb" == i) {
                if (t.params.isQuiz)
                    popUp = window.open("https://www.facebook.com/sharer.php?u=" + t.common.base_url + e + "?v=" + t.params.v, "popupwindow", "scrollbars=yes,width=800,height=400");
                else {
                    var n = encodeURIComponent("https://www.tourradar.com/" + t.params.contest + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Summer%20Moment%20Facebook");
                    popUp = window.open("https://www.facebook.com/sharer.php?u=" + n, "popupwindow", "scrollbars=yes,width=800,height=400")
                }
                popUp.focus()
            } else if ("share_tw" == i) {
                if (t.params.isQuiz)
                    var o = {
                        create_url: t.common.base_url + e + "?v=" + t.params.v,
                        hash: t.params.randomCode
                    };
                else
                    var n = encodeURIComponent("https://www.tourradar.com/" + t.params.contest + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Summer%20Moment%20Twitter"),
                        o = {
                            create_url: n,
                            hash: t.params.randomCode
                        };
                $.ajax({
                    url: "/welcome/standart_contest/" + t.params.contest,
                    data: o,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        "OK" == e.status && (t.params.isQuiz ? (e.share_tw = e.share_tw, popUp = window.open("https://twitter.com/share?url=" + o.create_url + "&text=" + e.share_tw + "&hashtags=TourRadar", "popupwindow", "scrollbars=yes,width=800,height=400")) : (e.share_tw = t.params.share.tw, popUp = window.open("https://twitter.com/share?url=" + n + "&text=" + e.share_tw + "&hashtags=TourRadar,SummerMoment", "popupwindow", "scrollbars=yes,width=800,height=400")), popUp.focus())
                    }
                })
            } else if ("share_gg" == i) {
                if (t.params.isQuiz)
                    popUp = window.open("https://plus.google.com/share?url=" + t.common.base_url + e + "?v=" + t.params.v, "popupwindow", "scrollbars=yes,width=800,height=400");
                else {
                    var n = encodeURIComponent("https://www.tourradar.com/" + t.params.contest + "?hash=" + t.params.hash + "&utm_source=Contest%20Referrals&utm_medium=Social&utm_campaign=Summer%20Moment%20Gglplus");
                    popUp = window.open("https://plus.google.com/share?url=" + n, "popupwindow", "scrollbars=yes,width=800,height=400")
                }
                popUp.focus()
            } else if ("share_wp" == i) {
                var n = encodeURIComponent(t.common.base_url + e + "?hash=" + t.params.hash + "?v=" + t.params.v);
                window.location = "whatsapp://send?text=I just found out my European travel style! Find out what kind of traveller you are here: http://ow.ly/2MHM30dBexa"
            }
        }), $(".name, .email").keydown(function(e) {
            13 == e.keyCode && $("#contest #step-3 #enter").click()
        }), $("#whatistr").click(function() {
            $("#header-new #row-1 #block-5 a").click()
        }), $("#contest #step-3 #enter, #add_email").live("click", function() {
            if ($(".age").length > 0 && "" == $(".age").val())
                alert("Please, select your age.");
            else if ($("#uploaded_photo").length > 0 && "" == $("#uploaded_photo").val())
                alert("Please, upload photo.");
            else if ("" != $(".email").val()) {
                var e = {
                    liked: $("#liked").val(),
                    hash: t.params.randomCode,
                    phash: t.params.hash ? t.params.hash : 0,
                    email: $(".email").val().toLowerCase().trim(),
                    age: $(".age").length > 0 ? $(".age").val() : 0
                };
                if ($("input.tour-radio").length > 0) {
                    if (!($("input.tour-radio:checked").length > 0))
                        return alert("Please select a tour"), !1;
                    e.tour = $("input.tour-radio:checked").val()
                }
                $.ajax({
                    url: "/welcome/standart_contest/" + t.params.contest,
                    data: e,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        "OK" == e.status ? "thailand-experience" == t.params.contest ? window.location.href = "/" + t.params.contest + "/travel-style?mail=" + $(".email").val().toLowerCase().trim() + "&hash=" + t.params.randomCode + (t.params.hash ? "&phash=" + t.params.hash : "") : "back2roots" == t.params.contest ? window.location.href = "/" + t.params.contest + "/choose-destination?mail=" + $(".email").val().toLowerCase().trim() + "&hash=" + t.params.randomCode + (t.params.hash ? "&phash=" + t.params.hash : "") : t.params.isQuiz ? $(".we-want-email").remove() : "hidden-gem" == t.params.contest ? window.location.href = "/" + t.params.contest + "/chose-destination?mail=" + $(".email").val().toLowerCase().trim() + "&hash=" + t.params.randomCode + (t.params.hash ? "&phash=" + t.params.hash : "") : "travel-my-way" == t.params.contest ? window.location.href = "/" + t.params.contest + "/select-tour?mail=" + $(".email").val().toLowerCase().trim() + "&hash=" + t.params.randomCode + (t.params.hash ? "&phash=" + t.params.hash : "") : "europe-summer-moment" == t.params.contest ? window.location.href = "/" + t.params.contest + "/almost-done?mail=" + $(".email").val().toLowerCase().trim() + "&hash=" + t.params.randomCode + (t.params.hash ? "&phash=" + t.params.hash : "") : "wonderlands" == t.params.contest ? window.location.href = "/" + t.params.contest + "/select-tour?mail=" + $(".email").val().toLowerCase().trim() + "&hash=" + t.params.randomCode + (t.params.hash ? "&phash=" + t.params.hash : "") : window.location.href = "/" + t.params.contest + "/code-sent?mail=" + $(".email").val().toLowerCase().trim() + "&hash=" + t.params.randomCode + (t.params.hash ? "&phash=" + t.params.hash : "") : "blocked" == e.status ? alert(e.message) : alert("An error occured. Please, try again later.")
                    },
                    error: function() {
                        alert("An error occured. Please, try again later.")
                    }
                })
            } else
                alert("Please, enter your email.")
        }), $("#photos_popup_content h3, #photos_popup_content #photos_process a").hide(), t.init_files_adding();
        var h = location.pathname.substr(1);
        t.init_responsive_layout(h), "/review" == location.pathname && t.show_photos_popup(t.params.traveller, t.review_id, "", !0, !0, !0)
    }, t.init_send_cube_params = function() {
        $("#tourtype, #departure").chosen({
            no_results_text: "No results matched"
        }).unbind("change").change(function() {
            t.search_cube_send(), $(this).parent().addClass("active")
        }), $("#duration").chosen({
            width: $(".search_cube .ins").width() + "px",
            no_results_text: "No results matched"
        }).unbind("change").change(function() {
            t.search_cube_send(), $(this).parent().addClass("active")
        }), $("#destination").chosen({
            width: $(".search_cube .ins").width() + "px",
            no_results_text: "No results matched"
        }).unbind("change").change(function(e, i) {
            i.selected ? t.search_cube_send() : $("#search_cube_go .title").text("Search now "), $(this).parent().addClass("active")
        }), $(".chosen-container .chosen-results").on("touchend", function(e) {
            e.stopPropagation(), e.preventDefault()
        }), $("#search_cube_go").die("click").live("click", function() {
            if ($("#search_cube_go").hasClass("grey"))
                return alert("Unfortunately there are no tours avialable with your settings. Please change your options to find more tour results."), !1;
            var e = new Array;
            if (0 != $("#duration").val().length && (1 == $("#duration").val() ? e[e.length] = "duration=0-3" : 2 == $("#duration").val() ? e[e.length] = "duration=4-7" : 3 == $("#duration").val() ? e[e.length] = "duration=8-14" : 4 == $("#duration").val() ? e[e.length] = "duration=15-21" : 5 == $("#duration").val() && (e[e.length] = "duration=22-10000")), 0 != $("#tourtype").val().length && (e[e.length] = "type=" + $("#tourtype").val()), 0 != $("#departure").val().length && (e[e.length] = "month=" + $("#departure option:selected").text().toLowerCase().replace(" ", "-")), 0 != $("#destination").val().length) {
                e[e.length] = "operator=" + t.params.id;
                var i = "/d/" + $("#destination option:selected").attr("serp") + "?title=Best " + $("#destination option:selected").text() + " " + t.params.name + " Tours&notop=1";
            } else
                var i = "/o/" + $(".search_cube").attr("id");
            e.length > 0 ? window.location.href = i + "#" + e.join(",") : window.location.href = i
        })
    }, t.search_cube_send = function() {
        $("#search_cube_go .title").html('<img src="/images/responsive/ajax-loader-1-green.gif" />');
        var e = new Object;
        $("#destination").val() && (e.destination = $("#destination").val()), $("#duration").val() && (e.duration = $("#duration").val()), $("#tourtype").val() && (e.tourtype = $("#tourtype").val()), $("#departure").val() && (e.departure = $("#departure").val()), e.operator = t.params.id, e.duration || e.tourtype || e.departure || !e.destination ? $.ajax({
            url: "/welcome/search_cube_ajax/" + $("#operator_id").val(),
            data: e,
            dataType: "json",
            type: "POST",
            success: function(e) {
                "OK" == e.status && (e.count > 0 ? ($("#search_cube_go .title").text("Find " + e.count + " tours"), $("#search_cube_go").addClass("greenb").removeClass("grey")) : ($("#search_cube_go .title").text("Find 0 tours"), $("#search_cube_go").addClass("grey").removeClass("greenb")))
            }
        }) : ($("#search_cube_go .title").text("Find " + $("#destination option:selected").attr("data-count") + " tours"), $("#search_cube_go").addClass("greenb").removeClass("grey"))
    }, t.init_guide_popup = function(e) {
        var t = setInterval(function() {
            if ($("#signup_guide_popup:visible").length > 0) {
                var i = $("#traveller_login #traveller_success_id").html();
                i && 0 == $("#traveller_login .info1").length && (i = i.split("::"), 3 == i.length && "NaN" != parseInt(i[0]) && (clearInterval(t), $.fancybox.close(), e()))
            } else
                clearInterval(t)
        }, 100)
    }, t.load_contest_size = function() {
        if ($(window).width() > 970) {
            if ($(".back2roots").length > 0 || $(".hidden-gem").length > 0)
                $("#fnez-overall #description").height() + 329 > $("#fnez-wrapper").height() && $("#fnez-wrapper").height($("#fnez-overall #description").height() + 330);
            else if ($(".thailand-experience").length > 0)
                ;
            else if ($(".live-like-local").length > 0)
                ;
            else if ($(".the-real-adventure").length > 0)
                ;
            else if ($(".wonderlands").length > 0)
                ;
            else {
                $("#fnez-wrapper").height($(window).height() - 78);
                var e = $(window).height() / 2 - $("#fnez-overall #description").height() / 2 - 150,
                    t = $(window).height() / 2 - $("#fnez-overall #contest").height() / 2 - 40;
                t - 50 > 0 ? ($("#fnez-overall #description").css("margin-top", e), $("#fnez-overall #contest").css("margin-top", t)) : (e - 110 > 0 ? $("#fnez-overall #description").css("margin-top", e) : $("#fnez-overall #description").css("margin-top", "110px"), $("#fnez-overall #contest").css("margin-top", "135px")), $("#fnez-overall #description").css({
                    "margin-left": "",
                    "margin-right": ""
                }), $("#fnez-overall #contest").css({
                    "margin-left": "",
                    "margin-right": ""
                })
            }
            if ($("#fnez-overall #end_2").length > 0) {
                var i = $("#fnez-overall #fnez-centered").height() + 200;
                $("#fnez-wrapper").height(i)
            }
            if ($("#fnez-overall #fnez-questionnaire").length > 0) {
                var i = $("#fnez-overall #fnez-centered").height() + 350;
                $("#fnez-wrapper").height(i)
            }
            if ($(".california-dreaming.end").length > 0) {
                var i = $("#fnez-overall #fnez-centered").height() + 350;
                $("#fnez-wrapper").height(i)
            }
        } else if (0 == $(".thailand-experience").length) {
            if ($("#fnez-overall #description").length > 0)
                var i = $("#fnez-overall #description").height() + $("#fnez-overall #contest").height() + 104;
            else if ($("#fnez-overall #end_2").length > 0)
                var i = $("#fnez-overall #fnez-centered").height() + 200;
            else if ($(window).height() - 78 < $("#fnez-centered").height() + 104)
                var i = $("#fnez-centered").height() + 104;
            else
                var i = $(window).height() - 78;
            var n = ($(window).width() - $("#fnez-overall #contest").width()) / 2,
                o = ($(window).width() - $("#fnez-overall #contest").width()) / 2;
            if (n < 20 && (n = 20), $(window).width() > 616) {
                $("#fnez-overall #description").width(616);
                var n = ($(window).width() - $("#fnez-overall #description").width()) / 2
            } else {
                $("#fnez-overall #description").width($(window).width());
                var n = ($(window).width() - $("#fnez-overall #description").width()) / 2
            }
            $("#fnez-overall #description").css({
                "margin-top": "50px",
                "margin-left": n,
                "margin-right": n
            }), $("#fnez-overall #contest").css({
                "margin-top": "50px",
                "margin-left": o,
                "margin-right": o
            }), $("#fnez-wrapper, #fnez-wrapper").height(i), $("#fnez-wrapper, #fnez-second-wrapper").height(i)
        }
        $("#fnez-wrapper").height() < $(window).height() && ($("#fnez-wrapper").height($(window).height() - 78), $("#fnez-second-wrapper").height("100%")), $("#fnez-wrapper").height() < $("#content").height() && ($("#fnez-wrapper").height($("#content").height()), $("#fnez-second-wrapper").height("100%")), $(".hidden-gem").length > 0 && $("#fnez-questionnaire").length > 0 && ($("#fnez-wrapper").height($("#fnez-questionnaire").height() + $("#fnez-left").height() + 378), $("#fnez-second-wrapper").height("100%")), $(".live-like-local").length > 0 && $("#fnez-questionnaire").length > 0 && ($("#fnez-wrapper").height($("#fnez-questionnaire").outerHeight() + $("#fnez-left").outerHeight() + 450), $("#fnez-second-wrapper").height("100%")), $(".travel-my-way.end").length > 0 && $("#fnez-centered").height() + 150 > $(window).height() && ($("#fnez-wrapper").height($("#fnez-centered").height() + 150), $("#fnez-second-wrapper").height("100%")), $(".live-like-local").length > 0 && $("#fnez-centered").height() + 150 > $(window).height() && ($("#fnez-wrapper").height($("#fnez-centered").height() + 150), $("#fnez-second-wrapper").height("100%")), $(".the-real-adventure").length > 0 && $("#fnez-centered").height() + 150 > $(window).height() && ($("#fnez-wrapper").height($("#fnez-centered").height() + 150), $("#fnez-second-wrapper").height("100%")), $(".wonderlands").length > 0 && $("#fnez-centered").height() + 150 > $(window).height() && ($("#fnez-wrapper").height($("#fnez-centered").height() + 150), $("#fnez-second-wrapper").height("100%")), $(".wonderlands.questionnaire").length > 0 && $("#fnez-questionnaire").height() + 1e3 > $(window).height() && ($("#fnez-wrapper").height($("#fnez-questionnaire").height() + 1e3), $("#fnez-second-wrapper").height("100%")), $(".hidden-gem.end").length > 0 && $("#fnez-centered").height() + 150 > $(window).height() && ($("#fnez-wrapper").height($("#fnez-centered").height() + 150), $("#fnez-second-wrapper").height("100%")), $("#content.quickescapes").css("min-height", "")
    }, t.load_tours = function(e, i) {
        $("#tour option").not(":first").remove(), $("#tour option:first").html("Please wait"), $("#tour").attr("disabled", !0), $("#tour").chosen("destroy"), $.ajax({
            url: "/welcome/mat_2013",
            data: {
                action: "get_tours",
                id: e
            },
            dataType: "json",
            type: "POST",
            success: function(e) {
                if ("OK" == e.status) {
                    for (var t in e.tours)
                        $("#tour").append('<option value="' + e.tours[t].id + '">' + e.tours[t].name + "</option>");
                    $("#tour option:first").html("Select your tour"), $("#tour").attr("disabled", !1).chosen({
                        no_results_text: "No results matched"
                    }).change(function(e, t) {
                        t.selected ? location.hash = "#" + $("#oper").val() + "-" + t.selected : location.hash = $("#oper").val() ? "#" + $("#oper").val() : ""
                    }).trigger("chosen:updated"), i && $("#tour").val(i).trigger("chosen:updated")
                }
            },
            error: function() {
                t.common.error()
            }
        })
    }, t.init_files_adding = function() {
        t.review_id = Math.floor((new Date).getTime() / 1e3).toString() + Math.floor(1e3 * Math.random() + 1), $("#add-pictures, #loader #facebook").click(function() {
            t.show_photos_popup(t.params.traveller, t.review_id, "", !0, !0)
        })
    }, t.init_login_popup = function(e) {
        t.common.user_login("https://www.tourradar.com/most-amazing-tour/thank-you");
        var i = setInterval(function() {
            if ($("#traveller_login").is(":visible")) {
                var n = $("#traveller_login #traveller_success_id").html();
                n && 0 == $("#traveller_login .info1").length && (n = n.split("::"), 3 == n.length && "NaN" != parseInt(n[0]) && (clearInterval(i), t.params.traveller = {
                    id: parseInt(parseInt(n[0])),
                    facebook_id: parseInt(parseInt(n[1])),
                    google_id: parseInt(parseInt(n[2]))
                }, $("#traveller_login .close").click(), e()))
            } else
                clearInterval(i)
        }, 100)
    }, t.save_review = function() {
        if (!$("#oper").val())
            return alert("Please select the operator"), !1;
        if (!$("#tour").val())
            return alert("Please select your tour"), !1;
        if (10 != $("#date").val().length)
            return alert("Please select departure date"), !1;
        if (!$("input[name=recommend]:checked").val())
            return alert("Please tell us if you would recommend this tour to your friends/family"), !1;
        for (var e = new Array, i = ["g", "t", "a", "m", "v"], n = 0; n < i.length; n++) {
            if (0 == $(".star-" + i[n] + ".fixed").length && 0 == $("#" + i[n] + "-na:checked").length)
                return alert("Please select all ratings"), !1;
            $("#" + i[n] + "-na:checked").length > 0 ? e[e.length] = i[n] + ":0" : e[e.length] = i[n] + ":" + (parseInt($(".star-" + i[n] + ".fixed:last").index(".star-" + i[n])) + 1)
        }
        var o = new Object;
        $(".guides_id option:selected").each(function(e, t) {
            var i = $(this).val() == $(t).text() ? "number" + e : $(this).val().trim();
            o[i] = $(t).text().split("-")[0].trim()
        }), t.params.traveller ? (t.common.review_photos_done(!1), $("#submit").attr("disabled", !0), setTimeout(function() {
            $.ajax({
                url: "/welcome/mat_2013",
                data: {
                    date: $("#date").val(),
                    ratings: e.join(" "),
                    comments: $.trim($("#comment").val()),
                    guides: o,
                    recommend: "yes" == $("input[name=recommend]:checked").val() ? "1" : "0",
                    operator: 0,
                    id: $("#tour").val(),
                    traveller: t.params.traveller.id,
                    rand_id: t.review_id,
                    action: "add_review"
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && (t.common.send_google_pageview("/tracking-review-added-fb.php"), location.href = "/most-amazing-tour/thank-you")
                }
            })
        }, 1e3)) : t.common.init_login_popup(t, function() {
            t.save_review()
        })
    }, t.init_responsive_layout = function(e) {
        $(window).width() < 700 && ($(".operator_page .topdescription .top .text").height() > 45 ? $(".operator_page .topdescription .top").height($(".operator_page .topdescription .top .text").height()) : $(".operator_page .topdescription .top").height(45)), $(window).bind("load resize", function() {
            $(window).width() < 700 ? $(".operator_page .topdescription .top .text").height() > 45 ? $(".operator_page .topdescription .top").height($(".operator_page .topdescription .top .text").height()) : $(".operator_page .topdescription .top").height(45) : $(".operator_page .topdescription .top").height(""), $("#mat-pic").height(Math.min(485, 485 * $("#mat-pic").width() / 1476)), $("#mat-pic-image").height(Math.min(485, 485 * $("#mat-pic").width() / 1476)), "leaderboard" != e && $("#badges").height(109 * $("#mat-pic").width() / 885), $("#badges2").height(109 * $("#mat-pic2").width() / 885)
        })
    }, t.upload_files = function(e) {
        var i = !1;
        t.last_upload = 0;
        var n = setInterval(function() {
            if (!i && t.files_upload.length > 0) {
                i = !0;
                var o = t.files_upload[0];
                xhr = new XMLHttpRequest, xhr.open("POST", "/serp/review_images_upload_mobile/" + e, !0), xhr.setRequestHeader("X-FILENAME", o.name), xhr.upload.addEventListener("progress", function(e) {
                    var t = Math.round(e.loaded / e.total * 100);
                    $("#attach_files tr:first .prg").width(3.4 * t)
                }), xhr.onreadystatechange = function() {
                    4 == xhr.readyState && ($("#attach_files tr:first").remove(), t.files_upload.splice(0, 1), t.last_upload++, i = !1, t.reviews_images[t.reviews_images.length] = xhr.responseText, $("#photos").show(), $("#photos").append('<div class="r-photo-wrapper"><div class="r-photo" id="img-' + xhr.responseText.replace(".", "") + '"><div class="r-photo-image"><img src="/data/images_source/reviews/tmp/' + xhr.responseText.replace(".", "-x100.") + '" /><a href="#" class="upload_delete mobile" id="del-' + xhr.responseText + '" onclick="return false"></a></div></div><div class="r-photo-bottom mobile"><div class="rotate-image" data-angle="90"><svg class="svg-icon-undo" viewBox="0 0 32 32"><use xlink:href="https://www.tourradar.com/images/responsive/svg/sprites.svg?v=1#svg-icon-undo"></use></svg></div><div class="rotate-image" data-angle="270"><svg class="svg-icon-redo" viewBox="0 0 32 32"><use xlink:href="https://www.tourradar.com/images/responsive/svg/sprites.svg?v=1#svg-icon-redo"></use></svg></div></div></div>'), $(".upload_delete").unbind("click").click(function() {
                        t.facebook_image_delete($(this).attr("id").substr(4))
                    }))
                }, xhr.send(o)
            } else
                0 == t.files_upload.length && (clearInterval(n), t.finish_uploading())
        }, 50)
    }, t.show_photos_popup = function(e, i, n, o, a, s) {
        s = "undefined" != typeof s && s, t.review_id = i, t.reviews_images = new Array, "undefined" == typeof t.uploadify_initialized && (t.uploadify_initialized = !0, /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? (t.files_upload = new Array, $("#attach_popup_link").fancybox({
            onClosed: function() {
                t.files_upload = new Array, $("#attach_files").removeClass("active").find("table").remove(), $("#attach_files").show()
            }
        }), $("#photos_upload").click(function() {
            return $("#attach_popup_link").trigger("click"), $("#select_files_input").trigger("click"), $("#attach_popup #attach_files input").hide(), !1
        }), $("#attach_popup #attach_files input").click(function() {
            t.upload_files(i)
        }), $("#select_files").click(function() {
            $("#select_files_input").trigger("click")
        }), $("#select_files_input").change(function() {
            var e = $(this)[0].files;
            return e.length > 0 && t.process_files(e), !1
        })) : $("#photos_upload").uploadify({
            width: 77,
            height: 18,
            uploader: "/include/uploadify/uploadify.swf",
            method: "GET",
            script: "/index.php",
            scriptData: {
                c: "serp",
                m: "review_images_upload",
                review: i
            },
            cancelImg: "/images/responsive/conv-decline.png?v=1",
            folder: "/data/images_source/reviews/tmp/",
            auto: !0,
            fileExt: "*.jpg;*.jpeg;*.gif;*.png",
            multi: !0,
            onComplete: function(e, i, n, o, a) {
                t.reviews_images[t.reviews_images.length] = o, $("#photos").show(), $("#photos").append('<div class="r-photo-wrapper"><div class="r-photo" id="img-' + o.replace(".", "") + '"><div class="r-photo-image"><img src="/data/images_source/reviews/tmp/' + o.replace(".", "-x100.") + '" /><a href="#" class="upload_delete" id="del-' + o + '" onclick="return false"></a></div></div><div class="r-photo-bottom"><div class="rotate-image" data-angle="90"><svg class="svg-icon-undo" viewBox="0 0 32 32"><use xlink:href="https://www.tourradar.com/images/responsive/svg/sprites.svg?v=1#svg-icon-undo"></use></svg></div><div class="rotate-image" data-angle="270"><svg class="svg-icon-redo" viewBox="0 0 32 32"><use xlink:href="https://www.tourradar.com/images/responsive/svg/sprites.svg?v=1#svg-icon-redo"></use></svg></div></div></div>'), $(".upload_delete").unbind("click").click(function() {
                    t.facebook_image_delete($(this).attr("id").substr(4))
                })
            }
        })), $(document).on("click", ".rotate-image", function() {
            var e = $(this).parents(".r-photo-bottom").prev(".r-photo").find("img"),
                i = {
                    src: e.attr("src").split("?")[0],
                    angle: $(this).data("angle")
                };
            parseInt(navigator.userAgent.toLowerCase().split("msie")[1]);
            $.ajax({
                url: "/reviews/rotate_review_image",
                data: i,
                dataType: "json",
                type: "POST",
                success: function(t) {
                    e.fadeOut(50);
                    var i = (new Date).getTime();
                    100 == e.width() ? (e.height(63), e.width("auto")) : (e.width(100), e.height("auto")), e.attr("src", e.attr("src") + "?" + i), e.fadeIn(50)
                },
                error: function() {
                    t.common.error()
                }
            })
        }), s || $("#photos_popup_link").fancybox({
            onComplete: function() {
                t.reviews_images = new Array, $("#upload-done").unbind("click").click(function() {
                    setTimeout(function() {
                        $.fancybox.close(), $("#photos_process p.bold").remove(), $("#photos_process *").removeClass("hidden")
                    }, 500)
                }), e.facebook_id > 0 ? TRFB_init(0x83040eda945f, function() {
                    TRFB_check_logging_and_permissions(["email", "publish_actions", "user_photos"], function() {
                        t.load_facebook_albums(), $("#photos_popup_content h3, #photos_popup_content #photos_process a").show()
                    }, function() {
                        TRFB_login_and_check_permissions(["email", "publish_actions", "user_photos"], function() {
                            t.load_facebook_albums(), $("#photos_popup_content h3, #photos_popup_content #photos_process a").show()
                        })
                    })
                }) : a ? ($("#text-light").remove(), $("#photos_popup_content p:first").html("Connect with Facebook to use your Facebook images for this review"), $("#photos_popup_content #photos_upload").before('<p id="text-light">Or upload images from your computer</p>'), $("#photos_popup_content #albums").html('<img src="/images/new_layout/travellers/popup-buttons-facebook.png?v=1" id="login-light" style="cursor:pointer" />'), $("#login-light").click(function() {
                    TRFB_init(0x83040eda945f, function() {
                        TRFB_check_logging_and_permissions(["email", "user_photos"], function() {
                            t.load_facebook_albums(), $("#photos_popup_content h3, #photos_popup_content #photos_process a").show()
                        }, function() {
                            TRFB_login_and_check_permissions(["email", "user_photos"], function() {
                                t.load_facebook_albums(), $("#photos_popup_content h3, #photos_popup_content #photos_process a").show()
                            })
                        })
                    })
                })) : $("#photos_popup_content #albums").remove()
            },
            onClosed: function() {
                o ? ($(".shareimg").html('<img src="/images/ajax_loader/fbstyle.gif" />'), $.ajax({
                    url: "/reviews/get_review_images",
                    data: {
                        id: t.review_id
                    },
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        if ("OK" == e.status) {
                            $(".shareimg").html("");
                            for (var i = 0; i < e.images.length; i++) {
                                var n = e.images[i],
                                    o = n.src.split("/");
                                $(".shareimg").append('<div class="r-photo" id="img-' + t.review_id + "-" + n.src.replace(".", "") + '"><img src="' + n.src.replace(".", "-x100.") + '" /><a href="#" class="share_upload_delete" id="share-del-' + o[o.length - 1] + '" onclick="return false"></a></div>')
                            }
                            $(".share_upload_delete").unbind("click").click(function() {
                                var e = $(this),
                                    i = $(this).attr("id").substr(10);
                                $.ajax({
                                    url: "/reviews/delete_review_image",
                                    data: {
                                        id: t.review_id,
                                        image: i
                                    },
                                    dataType: "json",
                                    type: "POST",
                                    success: function(t) {
                                        "OK" == t.status && e.parent().remove()
                                    },
                                    error: function() {
                                        t.common.error()
                                    }
                                })
                            })
                        }
                    },
                    error: function() {
                        t.common.error()
                    }
                })) : location.href = n
            }
        }).trigger("click")
    }, t.process_files = function(e) {
        fufu = e;
        var i = ["image/png", "image/jpeg"];
        if (e.length > 0)
            for (var n = 0; n < e.length; n++)
                for (var o = 0; o < i.length; o++)
                    if (e[n].type == i[o]) {
                        e[n].format = i[o], t.files_upload[t.files_upload.length] = e[n], t.show_file(e[n], t.files_upload.length), t.upload_files(t.review_id), $("#attach_popup #attach_files input").val("Upload " + t.files_upload.length + " file" + (t.files_upload.length > 1 ? "s" : ""));
                        break
                    }
    }, t.show_file = function(e, t) {
        var i = Math.round(e.size / 1024);
        i < 1e3 ? size_label = "kb" : (i = Math.round(i / 10) / 100, size_label = "mb"), $("#attach_files").addClass("active").append('<table width="100%" cellpadding="0" cellspacing="0"><tr height="30"><td class="filename">' + e.name.substr(0, 25) + (e.name.length > 25 ? "..." : "") + ' <div class="prg"></div></td></tr></table>')
    }, t.finish_uploading = function() {
        $("#attach_files").hide(), $.fancybox.close()
    }, t.load_facebook_albums = function() {
        return $("#albums").html('<img src="/images/ajax_loader/fbstyle.gif" />'), $.ajax({
            url: "/facebook_user/get_albums",
            data: {
                fb_id: FB.getUserID(),
                token: FB.getAccessToken()
            },
            dataType: "json",
            type: "POST",
            success: function(e) {
                if ("OK" == e.status) {
                    for (var i = "", n = 0; n < e.albums.length; n++) {
                        var o = e.albums[n];
                        i += '<div class="r-album" id="alb-' + o.id + '"><div class="r-image"><img src="' + o.photo + '" /></div><div class="r-title">' + o.name + "</div></div>"
                    }
                    $("#albums").html(i), $(".r-album").click(function() {
                        t.load_facebook_album_photos($(this).attr("id").substr(4))
                    })
                }
            },
            error: function() {
                t.common.error()
            }
        }), !1
    }, t.load_facebook_album_photos = function(e) {
        return $("#albums").html('<img src="/images/ajax_loader/fbstyle.gif" />'), $.ajax({
            url: "/facebook_user/get_album_photos",
            data: {
                fb_id: FB.getUserID(),
                token: FB.getAccessToken(),
                id: e
            },
            dataType: "json",
            type: "POST",
            success: function(e) {
                if ("OK" == e.status) {
                    for (var i = '<div style="margin-bottom:5px"><a href="#" id="upload-back" onclick="return false">< back</a></div>', n = 0; n < e.photos.length; n++) {
                        var o = e.photos[n];
                        i += '<div class="r-photo" id="img-' + o.id + '"><div class="r-photo-image"><img src="' + o.photo + '" orig="' + o.source + '" /></div></div>'
                    }
                    $("#albums").html(i), $("#upload-back").unbind("click").click(function() {
                        t.load_facebook_albums()
                    }), $(".r-photo").click(function() {
                        t.facebook_photo_check($(this).attr("id").substr(4))
                    })
                }
            },
            error: function() {
                t.common.error()
            }
        }), !1
    }, t.facebook_photo_check = function(e) {
        var t = $("#img-" + e);
        t.hasClass("r-selected") ? t.removeClass("r-selected") : t.addClass("r-selected")
    }, t.facebook_image_delete = function(e) {
        for (var i = 0; i < t.reviews_images.length; i++)
            t.reviews_images[i] == e && delete t.reviews_images[i];
        return $("#img-" + e.replace(".", "")).parents(".r-photo-wrapper").remove(), !1
    }, t.review_photos_done = function(e) {
        if ("undefined" != typeof t.review_id && parseInt(t.review_id)) {
            var i = {
                fb: new Array,
                tr: new Array
            };
            $(".r-selected").each(function() {
                i.fb[i.fb.length] = $(this).find("img").attr("orig")
            });
            for (var n = 0; n < t.reviews_images.length; n++)
                t.reviews_images[n] && (i.tr[i.tr.length] = t.reviews_images[n]);
            i.fb.length > 0 || i.tr.length > 0 ? ($("#photos_process *").addClass("hidden"), $("#photos_process").append("<p class='bold'>Please wait, we're uploading your photos...</p>"), $.ajax({
                url: "/serp/review_images_save",
                data: {
                    id: t.review_id,
                    fb: i.fb.join(","),
                    tr: i.tr.join(",")
                },
                dataType: "json",
                type: "POST",
                success: function(t) {
                    "OK" == t.status && ($("#photos_process p.bold").html("Thank you!"), e && setTimeout(function() {
                        $.fancybox.close(), $("#photos_process p.bold").remove(), $("#photos_process *").removeClass("hidden")
                    }, 500))
                },
                error: function() {
                    t.common.error()
                }
            })) : $("#photos_process").html("<h2>Thank you!</h2>")
        }
    }
}
function RespMatResult(e) {
    var t = this;
    t.params = e, t.params.maps = new Object, t.common = new RespCommon, t.init = function() {
        var e = $(".tour-block.active .tour").attr("id").substr(5);
        if (t.init_links(e), $("#badges div").click(function() {
            if (!$(this).hasClass("active")) {
                var e = $(this).attr("id").substr(2);
                $("#badges div.active, .tour-block.active").removeClass("active"), $(this).addClass("active"), $("#c-" + e).addClass("active");
                $(".tour-block:visible .tour").attr("id").substr(5);
                location.hash = "#" + e
            }
        }), location.hash.length > 1) {
            var i = location.hash.substr(1);
            $("#b-" + i).length > 0 && $("#b-" + i).click()
        }
        $("#mat-pic.mat-results #award a").click(function() {
            $("body, html").animate({
                scrollTop: $("#badges").offset().top - 50
            }, "slow")
        }), t.init_responsive_layout()
    }, t.init_links = function(e) {
        $(".tour:visible").find("#link-going").click(function() {
            location.href = "/t/" + e + "#meets"
        }), $(".tour:visible").find("#link-save").click(function() {
            $(this).hasClass("active") ? t.save_process(e, "remove") : t.save_process(e, "save")
        }), $(".tour:visible").find("#link-send").click(function() {
            t.send_show_popup(e)
        })
    }, t.save_process = function(e, i) {
        t.params.traveller ? $.ajax({
            url: "/serp/responsive_details_tab",
            data: {
                tab: i,
                id: e,
                traveller: t.params.traveller.id
            },
            dataType: "json",
            type: "POST",
            success: function(e) {
                if ("OK" == e.status && ("save" == i ? $("#link-save").addClass("active").html("Remove") : "remove" == i && $("#link-save").removeClass("active").html("Save this tour"), $("#header-new #row-2 #block-7.logged").length > 0)) {
                    var t = parseInt($("#header-new #row-2 #block-7.logged").find(".indicator").html());
                    $("#header-new #row-2 #block-7.logged").find(".indicator").html(t + ("save" == i ? 1 : -1)), $("#header-new #row-2 #block-7.logged").addClass("active"), setTimeout(function() {
                        $("#header-new #row-2 #block-7.logged").removeClass("active")
                    }, 500)
                }
            }
        }) : t.init_login_popup(function() {
            t.save_process(e, i)
        })
    }, t.init_login_popup = function(e) {
        t.common.user_login();
        var i = setInterval(function() {
            if ($("#traveller_login").is(":visible")) {
                var n = $("#traveller_login #traveller_success_id").html();
                n && 0 == $("#traveller_login .info1").length && (n = n.split("::"), 3 == n.length && "NaN" != parseInt(n[0]) && (clearInterval(i), t.params.traveller = {
                    id: parseInt(parseInt(n[0])),
                    facebook_id: parseInt(parseInt(n[1])),
                    google_id: parseInt(parseInt(n[2]))
                }, $("#traveller_login .close").click(), e()))
            } else
                clearInterval(i)
        }, 100)
    }, t.send_show_popup = function(e) {
        $("#send_popup_" + e + " .text").focus(function() {
            "1" == $(this).attr("default") && $(this).attr("default", "0").css("color", "#666").val("")
        }).blur(function() {
            $.trim($(this).val()) || $(this).attr("default", "1").css("color", "#c4c4c4").val($(this).attr("deftext"))
        }), $("#send_popup_link_" + e).fancybox({
            onComplete: function() {
                $("#send_popup_" + e + " .button").unbind("click").click(function() {
                    for (var t = new Array, i = $.trim($("#send_emails").val()).split(","), n = 0; n < i.length; n++) {
                        var o = $.trim(i[n]);
                        o.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(o) && (t[t.length] = o)
                    }
                    return 0 == t.length ? (alert("Please enter at least one valid email"), !1) : $.trim($("#send_popup_" + e + " textarea").val()) ? ($("#send_popup_" + e + " .button").attr("disabled", !0).val("Please wait..."), void $.ajax({
                        url: "/serp/responsive_details_tab",
                        data: {
                            tab: "send",
                            id: e,
                            emails: t.join(","),
                            message: $.trim($("#send_popup_" + e + " textarea").val())
                        },
                        dataType: "json",
                        type: "POST",
                        success: function(t) {
                            "OK" == t.status && ($("#send_popup_" + e + " .button").attr("disabled", !1).val("Done!"), setTimeout(function() {
                                $.fancybox.close()
                            }, 1e3))
                        }
                    })) : (alert("Please enter your message"), !1)
                })
            }
        }).click()
    }, t.init_responsive_layout = function() {
        $(window).bind("load resize", function() {
            if (trs = new Array, $(".inforow:first table td").each(function(e) {
                $(document).width() <= 520 ? trs[trs.length] = (e % 2 == 0 ? "<tr>" : "") + $(this)[0].outerHTML + (e % 2 == 1 ? "</tr>" : "") : trs[trs.length] = (0 == e ? "<tr>" : "") + $(this)[0].outerHTML + (e == $(".inforow:first table td").length - 1 ? "</tr>" : "")
            }), $(".inforow:first table tr").remove(), $(".inforow:first table").append(trs.join("")), $(document).width() <= 520 && $(".inforow:first table td:first").attr("width", "65%"), $(window).width() < 980) {
                var e = $(window).width() - 80;
                $("#video-mat iframe").width(e).height(.54 * e).show()
            } else
                $("#video-mat iframe").width(940).height(528).show()
        })
    }
}
function ProfileBar() {
    var e = this;
    e.common = new RespCommon, e.init_bar = function(e) {
        var t = $("#bar #display").width(),
            i = 0;
        $("#bar #display div").remove(), $("#bar #display").append("<div></div>");
        for (var n = 1; n <= 4; n++) {
            var o = t / 5 * n;
            $("#bar #display").append('<div class="col" style="left:' + o + 'px"></div>'), $("#bar #labels div:eq(" + n + ")").removeClass("hidden");
            var a = $("#bar #labels div:eq(" + n + ")").width();
            $("#bar #labels div:eq(" + n + ")").css("left", o - a / 2 + "px"), 4 == n && (i = o - 1)
        }
        if (e > 200) {
            e = Math.min(e, 999);
            var s = (e - 200) / 800 * (t - i - 4) + i;
            $("#bar #display div:first").width(s), e > 600 ? ($("#bar #display .label").removeClass("hidden"), $("#bar #display .label").css("left", s - $("#bar #display .label").width() - 10 + "px")) : $("#bar #display .label").css("left", s + 2 + "px")
        } else if (e > 0) {
            var s = e / 200 * i;
            $("#bar #display div:first").width(s), $("#bar #display .label").css("left", s + 2 + "px")
        } else
            $("#bar #display .label").css("left", "8px");
        if ("undefined" != typeof $("#bar #display").attr("data-five-possible")) {
            if ("undefined" != typeof s)
                s += 1;
            else
                var s = 0;
            $("#bar #display").append('<div class="or_line" style="left:' + s + "px; width:" + (t - s) / 2 + 'px"></div>')
        }
        $("#bar #display .label").removeClass("hidden")
    }, e.resend_email = function() {
        $("#block-verify #send").html("Please wait..."), $.ajax({
            url: "/members/confirmation_resend",
            dataType: "json",
            success: function(t) {
                "OK" == t.status ? $("#block-verify #send").html("Email has been sent successfully!").css("color", "#9aa316") : e.common.error()
            },
            error: function() {
                e.common.error()
            }
        })
    }
}
function ProfileSettings(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.scroll_timer = null, t.init = function() {
        $("#date, #guiding_since").datepicker({
            dateFormat: "dd/mm/yy",
            defaultDate: "01/01/" + ((new Date).getFullYear() - 25),
            minDate: new Date((new Date).getFullYear() - 120, 0, 1),
            maxDate: new Date,
            changeYear: !0,
            yearRange: "-120:+0",
            changeMonth: !0
        }), $("#block-verify a:first").click(function() {
            (new ProfileBar).resend_email()
        }), $("#operators_previously").chosen({
            placeholder_text_multiple: "-- Select operators --"
        }), $(".send_form").click(function() {
            $(this).parent().parent().submit()
        }), $("#how-link").click(function() {
            $('a[href="#why-box-popup5"]').click()
        }), "#methods" == location.hash && $("body, html").animate({
            scrollTop: $("#block-payments").offset().top - 54
        }, "slow"), t.guide_layout(), t.init_change_email(), t.init_change_password(), t.init_social_connections(), t.init_notifications(), t.init_right_panel(), t.init_payment_methods(), t.init_responsive_layout(), t.init_subscribe()
    }, t.guide_layout = function() {
        $(".guide").length > 0 && (t.load_cities_list(), $("#guide_country").change(function() {
            t.load_cities_list()
        }), t.init_load_video_youtube(), $("#guide_countries").chosen({
            placeholder_text_multiple: "-- Select country --"
        }), $("#companies").chosen({
            placeholder_text_multiple: "-- Select operators --"
        }), $("#tours_lead").chosen({
            placeholder_text_multiple: "-- Select tours --"
        }), $("#operator_id").change(function() {
            t.load_tours_list()
        }), $(".file").bind("click", function() {
            $(this).siblings(".custombutton").click()
        }), $(".profile-picture input[type=file]").change(function() {
            event.stopPropagation(), event.preventDefault();
            var e = this.files,
                i = new FormData;
            $(e).each(function(e, t) {
                i.append(e, t)
            }), i.append("action", "store_avatar_pic"), $(".profile-picture #user-image").remove(), $(".profile-picture .preloader").toggleClass("hidden"), $.ajax({
                url: "/travellers/settings",
                data: i,
                dataType: "json",
                type: "POST",
                cache: !1,
                processData: !1,
                contentType: !1,
                success: function(e) {
                    "OK" == e.status ? ($(".profile-picture .preloader").toggleClass("hidden"), $(".profile-picture #sample").clone().appendTo(".profile-picture .avatar-pic"), $(".profile-picture .avatar-pic #sample img").attr("src", e.filename), $(".profile-picture .avatar-pic #sample").attr("id", "user-image"), $(".profile-picture .avatar-pic #user-image").removeClass("hidden")) : alert(e.message)
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".memory_upload input[type=file]").change(function() {
            event.stopPropagation(), event.preventDefault();
            var e = this.files,
                i = new FormData;
            $(e).each(function(e, t) {
                i.append(e, t)
            }), i.append("action", "store_memory_pic"), $(".memory_upload .preloader").toggleClass("hidden"), $.ajax({
                url: "/travellers/settings",
                data: i,
                dataType: "json",
                type: "POST",
                cache: !1,
                processData: !1,
                contentType: !1,
                success: function(e) {
                    "OK" == e.status ? ($(".memory_upload .preloader").toggleClass("hidden"), $(e.filenames).each(function(e, t) {
                        $(".memory_upload #sample").clone().appendTo(".memory_upload .pics"), $(".memory_upload .pics #sample img").attr("src", t), $(".memory_upload .pics #sample").attr("id", "user-image"), $(".memory_upload .pics #user-image:last").removeClass("hidden")
                    })) : alert(e.message)
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $("#user-image .delete-pic").live("click", function() {
            var e = this,
                i = "";
            $(e).hasClass("avatar") && (i = "t"), $.ajax({
                url: "/travellers/settings",
                data: {
                    action: "delete_pic",
                    is_avatar: i,
                    imgsrc: $(this).siblings("img").attr("src")
                },
                dataType: "json",
                type: "POST",
                success: function(i) {
                    "OK" == i.status ? $(e).parent().remove() : t.common.error()
                },
                error: function() {
                    t.common.error()
                }
            })
        }))
    }, t.init_load_video_youtube = function() {
        $("#youtube").ready(function() {
            setInterval(function() {
                if ($(window).width() < 670) {
                    var e = $(window).width() - 80;
                    $("#youtube iframe").width(e).height(.54 * e)
                } else
                    $("#youtube iframe").width(200).height(100)
            }, 1e3)
        }), $(".remove a").click(function() {
            var e = $(this).attr("id").substr(6),
                i = confirm("Are you sure you want to delete?");
            return !!i && void $.ajax({
                    url: "/travellers/remove_youtube_guide",
                    data: {
                        video_id: e
                    },
                    dataType: "json",
                    type: "POST",
                    success: function(t) {
                        "OK" == t.status && ($("#youtube iframe#this-" + e).remove(), $(".remove a#video-" + e).parent().remove())
                    },
                    error: function() {
                        t.common.error()
                    }
                })
        }), $("#send-video").click(function() {
            var e = $("#video-link").val().trim().indexOf("youtu");
            e >= 0 ? ($.ajax({
                url: "/travellers/add_youtube_guide",
                data: {
                    link: $("#video-link").val().trim()
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status ? location.reload() : "error" == e.status && alert(e.message)
                },
                error: function() {
                    t.common.error()
                }
            }), $("#video-link").val()) : alert("Please add right link to YouTube video")
        })
    }, t.load_cities_list = function() {
        $("#guide_country option:selected").val() && ($("#guide_city option").remove(), $("#guide_city").append('<option value="">-- Please wait --</option>'), $.ajax({
            url: "/travellers/settings",
            data: {
                action: "load_cities",
                country_id: $("#guide_country option:selected").val()
            },
            dataType: "json",
            type: "POST",
            success: function(e) {
                if ("OK" == e.status) {
                    $("#guide_city option").remove(), $("#guide_city").append('<option value="">-- City --</option>');
                    for (var i = 0; i < e.cities.length; i++)
                        $("#guide_city").append('<option value="' + e.cities[i].id + '"' + (t.params.city_id == e.cities[i].id ? "selected" : "") + ">" + e.cities[i].name + "</option>")
                }
            }
        }))
    }, t.load_tours_list = function() {
        $("#operator_id option:selected").val() && ($("#favourite_tour option").remove(), $("#tours_lead option").remove(), $("#favourite_tour").append('<option value="">-- Please wait --</option>'), $("#tours_lead").append('<option value="">-- Please wait --</option>'), $.ajax({
            url: "/travellers/settings",
            data: {
                action: "load_tours",
                operator_id: $("#operator_id").val()
            },
            dataType: "json",
            type: "POST",
            success: function(e) {
                if ("OK" == e.status) {
                    $("#favourite_tour option, #tours_lead option").remove(), $("#favourite_tour, #tours_lead").append('<option value="">-- Select Tour --</option>'), $("#tours_lead").trigger("chosen:updated");
                    for (var t = 0; t < e.tours.length; t++)
                        $("#favourite_tour").append('<option value="' + e.tours[t].id + '">' + e.tours[t].name + "</option>"), $("#tours_lead").append('<option value="' + e.tours[t].id + '">' + e.tours[t].name + "</option>"), $("#tours_lead").trigger("chosen:updated")
                }
            }
        }))
    },
    t.init_change_email = function() {
        $("#email_link").fancybox({
            onClosed: function() {
                $("#email_popup #success a").length > 0 ? location.reload() : ($("#email_popup div:gt(1)").remove(), $("#change_email input").attr("disabled", !1), $("#change_email input:first").val(""))
            }
        }), $("#change_email").unbind("submit").submit(function() {
            var e = $.trim($("#change_email input:first").val());
            e.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e) ? $.ajax({
                url: "/travellers/settings",
                data: {
                    action: "change_email",
                    email: e
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status ? ($("#change_email input").attr("disabled", !0), $("#email_popup").append("<div><strong>2.</strong>We've sent an email to your new address with a reset link</div>"), $("#change_email_verification").unbind("submit").submit(function() {
                        var e = $.trim($("#change_email_verification input:first").val());
                        e && 3 == e.split("/").length ? $.ajax({
                            url: "/travellers/settings",
                            data: {
                                action: "change_email_verification",
                                code: e
                            },
                            dataType: "json",
                            type: "POST",
                            success: function(e) {
                                "OK" == e.status ? ($("#change_email input").attr("disabled", !0), $("#email_popup").append('<div id="success"><strong>Congratulations!</strong> Your email has been changed successfully. <a href="#">Close popup</a></div>'), $("#email_popup #success a").click(function() {
                                    $.fancybox.close(), location.reload()
                                })) : alert("Your confirmation code is wrong. Please try again.")
                            }
                        }) : alert("Your confirmation code is wrong. Please try again.")
                    })) : "same" == e.status ? alert("You've entered your current email. Please try again") : "repeat" == e.status && alert("This email address is already in use. Please try again or login with another email.")
                }
            }) : alert("Please enter correct email")
        })
    }, t.init_change_password = function() {
        $("#password_link").fancybox({
            onClosed: function() {
                $("#password_popup #success").remove(), $('#password_popup input[type="text"]').attr("disabled", !1).val("")
            }
        }), $("#change_password").unbind("submit").submit(function() {
            var e = $("#change_password input:eq(0)").val(),
                t = $("#change_password input:eq(1)").val();
            e.length >= 4 && e == t ? $.ajax({
                url: "/travellers/settings",
                data: {
                    action: "change_password",
                    password: e
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($("#change_password input").attr("disabled", !0), $("#password_popup").append('<div id="success"><strong>Congratulations!</strong> Your password has been changed successfully. <a href="#">Close popup</a></div>'), $("#password_popup #success a").click(function() {
                        $.fancybox.close()
                    }))
                }
            }) : e.length < 4 ? alert("Your password is too short. Please try again.") : alert("Your passwords do not match. Please try again.")
        })
    }, t.init_social_connections = function() {
        TRFB_init(0x83040eda945f, function() {}), $(".buttons .facebook, .buttons .facebook-in, .buttons .facebook-up").click(function() {
            TRFB_check_logging_and_permissions(["email"], function() {
                t.user_facebook_process()
            }, function() {
                TRFB_login_and_check_permissions(["email"], function() {
                    t.user_facebook_process()
                })
            })
        }), gapi.signin.render("signin_google", {
            callback: function(e) {
                t.user_google(e)
            },
            clientid: "399583607835.apps.googleusercontent.com",
            cookiepolicy: "single_host_origin",
            scope: "https://www.googleapis.com/auth/plus.login",
            width: "wide",
            scope: "https://www.googleapis.com/auth/userinfo.email"
        })
    }, t.user_facebook_process = function() {
        $(".buttons").html('<p align="center" style="margin:0; padding-top:10px"><img src="/images/ajax_loader/fbstyle.gif" /></p>'), FB.api("/me", function(e) {
            var i = {
                action: "connect_facebook",
                facebook_id: e.id,
                name: e.name,
                first_name: e.first_name,
                email: e.email
            };
            e.location && e.location.name && (i.location = e.location.name), e.locale && (i.language = e.locale.substr(0, 2)), e.gender && (i.gender = e.gender), $.ajax({
                url: "/travellers/settings",
                data: i,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status ? location.reload() : t.common.error()
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.user_google = function(e) {
        e["g-oauth-window"] && e.code && t.user_google_process(e.code)
    }, t.user_google_process = function(e) {
        $(".buttons").html('<p align="center" style="margin:0; padding-top:10px"><img src="/images/ajax_loader/fbstyle.gif" /></p>');
        var i = {
            action: "connect_google",
            code: e
        };
        $.ajax({
            url: "/travellers/settings",
            data: i,
            dataType: "json",
            type: "POST",
            success: function(e) {
                "OK" == e.status ? location.reload() : t.common.error()
            },
            error: function() {
                t.common.error()
            }
        })
    }, t.init_notifications = function() {
        $('#block-notifications input[type="submit"], #block-notifications a.gray').click(function() {
            $("#block-notifications .error").addClass("hidden");
            var e = {
                action: "save_notifications"
            };
            $('#block-notifications input[type="checkbox"]').each(function() {
                e[$(this).attr("name")] = $(this).attr("checked") ? 1 : 0
            }), $.ajax({
                url: "/travellers/settings",
                data: e,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($("body, html").animate({
                        scrollTop: $("#block-notifications").offset().top - 74
                    }, "slow"), $("#block-notifications .error").removeClass("hidden"))
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.init_subscribe = function() {
        $('#block-subscribe input[type="checkbox"]').click(function() {
            var e = {
                action: "save_subscribe",
                subscribe: $(this).attr("checked") ? 1 : 0
            };
            $.ajax({
                url: "/travellers/settings",
                data: e,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && $("body, html").animate({
                        scrollTop: $("#block-subscribe").offset().top - 74
                    }, "slow")
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.init_right_panel = function() {
        $(window).scroll(function() {
            clearTimeout(t.scroll_timer), $(document).width() >= 932 ? t.scroll_timer = setTimeout(function() {
                var e = $(".profile-right").outerHeight(),
                    t = $(".settings-left").outerHeight(),
                    i = Math.min(t - e, Math.max($(window).scrollTop() - 67, 23));
                $(".profile-right").animate({
                    marginTop: i
                }, "fast")
            }, 100) : $(".profile-right").css("margin-top", "23px")
        })
    }, t.init_payment_methods = function() {
        getScript("/include/js/paymentProviders.js", function() {
            t.paymentProvider = new PaymentProviders(t.params.paymentProvider, t.params.paymentDetails, t.params.paymentMethods, {
                images: t.params.paymentImages,
                errorMessage: "Unfortunately we were unable to process your card. Please double check your credit card details, try using a different credit card or contact your credit card company to make sure there are no issues with your account and that you are able to make payments to a European based company. If you continue to have an issue, please contact our customer support team which is open 24/7.",
                errorHandler: function(e) {
                    $("#payment_form").parent().removeClass("loading"), $("#payment_form").parent().find("img.l").remove(), t.common.show_error_message(e)
                }
            })
        }), $("#block-payments #add").click(function() {
            $(this).toggle(), $("#block-payments .conv-payment").toggle()
        }), $("#block-payments .button#cancel").click(function() {
            $("#block-payments #add, #block-payments .conv-payment").toggle()
        }), $("#block-payments .button#save").click(function() {
            t.validate_form()
        }), $("#block-payments").on("click", ".method .close", function() {
            if (confirm("You are going to delete this payment method. Are you sure?")) {
                var e = $(this).parent().attr("data-id");
                t.deletePaymentMethod(e)
            }
        }), $("#block-payments").on("click", ".method .default", function() {
            if (!$(this).hasClass("active")) {
                var e = $(this).parent().attr("data-id");
                t.switchPaymentMethod(e)
            }
        }), t.loadPaymentMethods()
    }, t.validate_form = function() {
        if (!$('input[name="terms"]:checked').length)
            return t.common.show_error_message("Please accept the terms and conditions."), t.common.send_google_event("Settings", "Field Error", "Terms is not selected"), !1;
        $("#payment_form").parent().addClass("loading"), $("#payment_form").parent().append('<img class="l" src="/images/responsive/pw/tr-loader-small.gif">');
        var e = t.paymentProvider.validateForm();
        e.length > 0 && ($("#payment_form").parent().removeClass("loading"), $("#payment_form").parent().find("img.l").remove(), e.forEach(function(e) {
            t.common.send_google_event("Settings", "Credit Card Error", e)
        })), 0 == e.length && ($("#cardHolder").length > 0 && $("#payment_form").append('<input type="hidden" name="cardHolder" value="' + $("#cardHolder").val() + '" />'), t.paymentProvider.tokenizeData(function() {
            t.paymentProvider.dataBlob && $("#payment_form").append('<input type="hidden" name="blob" value="' + t.paymentProvider.dataBlob + '" />'), $("#payment_form").append('<input type="hidden" name="action" value="add_payment_method" />');
            var e = $("#payment_form").serialize();
            $.ajax({
                url: location.href,
                data: e,
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status ? location.reload() : ($("#payment_form").parent().removeClass("loading"), $("#payment_form").parent().find("img.l").remove(), t.paymentProvider.dataBlob = null, t.common.show_error_message(e.message))
                },
                error: function() {
                    $("#payment_form").parent().removeClass("loading"), $("#payment_form").parent().find("img.l").remove(), t.paymentProvider.dataBlob = null, $(".form-submit.active").removeClass("hidden"), t.common.error()
                }
            })
        }))
    }, t.loadPaymentMethods = function() {
        $.ajax({
            url: location.href,
            data: {
                action: "load_methods"
            },
            dataType: "json",
            type: "POST",
            success: function(e) {
                $("#savedMethods").html(e.html)
            },
            error: function() {
                $(".form-submit.active").removeClass("hidden"), t.common.error()
            }
        })
    }, t.deletePaymentMethod = function(e) {
        $.ajax({
            url: location.href,
            data: {
                action: "delete_payment_method",
                id: e
            },
            dataType: "json",
            type: "POST",
            success: function(t) {
                "OK" == t.status && $('.method[data-id="' + e + '"]').remove()
            },
            error: function() {
                $(".form-submit.active").removeClass("hidden"), t.common.error()
            }
        })
    }, t.switchPaymentMethod = function(e) {
        $(".method .default").removeClass("active").html(""), $('.method[data-id="' + e + '"] .default').addClass("active").html(""), $.ajax({
            url: location.href,
            data: {
                action: "switch_payment_method",
                id: e
            },
            dataType: "json",
            type: "POST",
            success: function(e) {
                "OK" != e.status && t.common.show_error_message(e.message)
            },
            error: function() {
                $(".form-submit.active").removeClass("hidden"), t.common.error()
            }
        })
    }, t.init_responsive_layout = function() {
        $(window).bind("load resize", function() {
            $("#bar").width() - 6;
            (new ProfileBar).init_bar(t.params.balance)
        })
    }
}
function ProfileMy(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.init = function() {
        $("#stats a").click(function() {
            var e = $(this).attr("href").substr(1);
            $("body, html").animate({
                scrollTop: $("#block-" + e).offset().top - 74
            }, "slow")
        }), $("#block-verify a:first").click(function() {
            (new ProfileBar).resend_email()
        }), t.init_right_panel(), t.init_responsive_layout(), t.init_share(), t.init_read_more(), t.init_tour(), $(".fancy_image").fancybox(), $("#how-link").click(function() {
            $('a[href="#why-box-popup5"]').click()
        }), $(".send-fb-message").click(function() {
            FB.ui({
                method: "send",
                link: $("#share_fb").attr("data-link")
            })
        }), "public" == t.params.page && (t.init_guide_public(), t.get_traveller_info()), $(".guide.active").length > 0 && (t.pil = new ProfileInviteLanding, t.pil.init_clipboard(), t.pil.init_personalize()), $(".affiliate").length > 0 && t.init_affiliate()
    }, t.get_traveller_info = function() {
        $(".profile .profile-left#reviews .review .left.clickable").click(function() {
            var e = $(this).attr("id");
            $(this).children("img").attr("src");
            if ($(".profile .profile-left#reviews .review .left.clickable").each(function() {
                var e = $(this).attr("id");
                $("#" + e).parent().find(".popover").length > 0 && $("#" + e).popover("destroy")
            }), "undefined" == typeof $(this).attr("data-html")) {
                var t = {
                    type: $(this).attr("data-type"),
                    traveller_id: $(this).attr("data-id")
                };
                $.ajax({
                    url: "/travellers/get_traveller_info/",
                    dataType: "json",
                    data: t,
                    type: "POST",
                    success: function(t) {
                        "OK" == t.status && ($("#" + e).attr("data-placement", $(window).width() >= 1100 ? "bottom" : "right").attr("data-html", "true").attr("data-content", t.html).popover("show"), $(".profile .profile-left#reviews .review .cls").unbind("click").click(function() {
                            $("#" + e).popover("destroy")
                        }))
                    }
                })
            } else
                $(this).popover("show"), $(".profile .profile-left#reviews .review .cls").unbind("click").click(function() {
                    $("#" + e).popover("destroy")
                })
        })
    }, t.init_read_more = function() {
        $("a.read-more").live("click", function() {
            var e = $(this).attr("id").substr(7);
            $("#r-" + e + " .short:visible").length > 0 ? (0 == $("#r-" + e + " .long").text().length ? $.ajax({
                url: "/reviews/get_review_text/" + e,
                dataType: "json",
                type: "POST",
                success: function(t) {
                    "OK" == t.status && ($("#r-" + e + " .long").text(t.comment), $("#r-" + e + " .short").hide(), $("#r-" + e + " .long").show())
                }
            }) : ($("#r-" + e + " .short").hide(), $("#r-" + e + " .long").show()), $(this).text("Hide")) : ($("#r-" + e + " .long").hide(), $("#r-" + e + " .short").show(), $(this).text("Read more"))
        })
    }, t.init_share = function() {
        $(".guide-community .personal-link .soc-buttons .cube-blk, .guide .but, .affiliate .but, .profile .profile-right.invite-guide .soc-buttons .cube").live("click", function() {
            var e = $(this).attr("id");
            if ("share_fb" == e) {
                var i = $(this).attr("data-link");
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
            } else if ("share_tw" == e) {
                var i = $(this).attr("data-link"),
                    n = $(this).attr("data-text"),
                    o = "TourRadar";
                "undefined" != typeof $(this).attr("data-tag") && $(this).attr("data-tag") !== !1 && (o = $(this).attr("data-tag")), popUp = window.open("https://twitter.com/share?url=" + i + "&text=" + n + "&hashtags=" + o, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
            } else if ("share_gg" == e) {
                var i = $(this).attr("data-link");
                popUp = window.open("https://plus.google.com/share?url=" + i, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus()
            } else if ("share_wp" == e) {
                var i = $(this).attr("data-link"),
                    a = $(this).attr("data-text");
                window.location = "whatsapp://send?text=" + a + " " + i
            } else
                "share_em" == e ? t.send_by_email_popup("#send_popup") : "share_em_guides" == e ? t.send_by_email_popup("#send_popup_g") : "share_em_affiliates" == e && t.send_by_email_popup("#send_popup_a")
        })
    }, t.send_by_email_popup = function(e, n, o) {
        var a = 1,
            n = n || 10,
            o = o || 1;
        $.fancybox({
            href: e,
            padding: 0,
            margin: 0,
            onStart: function() {
                for ($(e + " #add_eml_field").live("click", function(t) {
                    if (a <= n) {
                        var i = $(e + " .inside div.row:not(.hidden)"),
                            o = !0;
                        $.each(i, function(e, t) {
                            var i = $(t).children("div").children("input"),
                                n = i.val();
                            n.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n) ? i.removeClass("red") : (i.addClass("red"), o = !1)
                        }), o ? (a++, $(e + " .sample").before($(e + " .sample").html()), $(e + " .row.hidden").eq(0).removeClass("hidden"), a == n && $(e + " .row:first .svg-cont").addClass("hidden")) : alert("Please enter valid email address")
                    }
                }), $(e + " #rm_eml_field").live("click", function() {
                    a--, $(this).closest(".row").remove(), $(e + " .row:first .svg-cont").removeClass("hidden")
                }), $(e + " .inside #email_to").live("keydown", function() {
                    $(this).removeClass("red")
                }), i = 1; i < o; i++)
                    $(e + " #add_eml_field").click()
            },
            onComplete: function() {
                $(e + " #send_popup_guide").unbind("click").click(function() {
                    var i = "",
                        n = new Array,
                        o = !1;
                    if ($(e + " .inside #email_to:not(:last)").each(function(t, a) {
                        i = a.value, i.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i) ? n[t] = i : ($(e + " .inside #email_to").eq(t).addClass("red"), o = !0)
                    }), o)
                        return alert("Please enter valid emails"), !1;
                    if ($(e + " #send_popup_guide .title").text("Please wait..."), $("#send_popup_a").length > 0)
                        r = "/travellers/invite", l = {
                            action: "send_emails",
                            emails: n.join(","),
                            text1: $("#send_popup_a .message-box .text1").text(),
                            text2: $("#send_popup_a .message-box .text2").text(),
                            text_user: $("#send_popup_a .message-box textarea").val()
                        };
                    else if ($("#send_popup_review").length > 0)
                        r = "/review", l = {
                            action: "send_emails",
                            emails: n.join(","),
                            text: $("#send_popup_review .message-box").html(),
                            sender: $("#send_popup_review .message-box").attr("username"),
                            operator: $("#send_popup_review .message-box").attr("operatorname"),
                            review_url: $("#sharelnk").text()
                        };
                    else {
                        if ($(".guide-community").length > 0)
                            var a = "profile",
                                s = $(".invite input").val();
                        else if (t.params.page && "public" == t.params.page)
                            var a = "public",
                                s = $(e + " #guideurl").val();
                        else if (t.params.page && "profile" == t.params.page && "#send_popup" == e)
                            var a = "profile",
                                s = $(".invite input").val();
                        else {
                            if (!t.params.page || "profile" != t.params.page || "#send_popup_g" != e)
                                return !1;
                            var a = "profile_to_guide",
                                s = $(e + " #guideurl").val()
                        }
                        var r = "/travellers/send_email_guide",
                            l = {
                                email: n,
                                page: a,
                                guideurl: s,
                                guidename: $(e + " #guidename").val(),
                                operatorname: $(e + " #operatorname").val(),
                                guidepic: $(e + " #guidepic").val(),
                                reviewurl: $(e + " #reviewurl").val()
                            }
                    }
                    $.ajax({
                        url: r,
                        data: l,
                        dataType: "json",
                        type: "POST",
                        success: function(t) {
                            "OK" == t.status && ($(e + " #send_popup_guide .title").text("Done!"), setTimeout(function() {
                                $.fancybox.close()
                            }, 1e3), setTimeout(function() {
                                $(e + " #send_popup_guide .title").text("Send email")
                            }, 1e3))
                        }
                    })
                })
            },
            onClosed: function() {
                $(e + " .inside .row:not(.hidden):not(:first)").remove(), $(e + " .inside #email_to").removeClass("red"), $(e + " .inside #email_to").val(""), $(e + " #add_eml_field").unbind("click"), $(e + " #rm_eml_field").unbind("click")
            }
        })
    }, t.init_right_panel = function() {}, t.init_tour = function() {
        $(".profile-my-tour .step1 .smallb").click(function() {
            $(this).hasClass("grey") ? ($(".profile-my-tour").slideUp(400), t.tour_send_request()) : ($(".profile-my-tour .step1").addClass("hidden"), $(".profile-my-tour .step2").removeClass("hidden"), $(".profile-my-tour .step2 .smallb").click(function() {
                $(".profile-my-tour .step2").addClass("hidden"), $(".profile-my-tour .step3").removeClass("hidden"), $(".profile-my-tour .step3 .smallb").click(function() {
                    $(".profile-my-tour .step3").addClass("hidden"), $(".profile-my-tour .step4").removeClass("hidden"), $(".profile-my-tour .step4 .smallb").click(function() {
                        $(".profile-my-tour").slideUp(400), t.tour_send_request()
                    })
                })
            }))
        })
    }, t.tour_send_request = function() {
        $.ajax({
            url: "/travellers/remove_start_tour",
            dataType: "json",
            type: "POST"
        })
    }, t.init_responsive_layout = function() {
        $(window).bind("load resize", function() {
            var e = $("#bar").width() - 6;
            if ((new ProfileBar).init_bar(t.params.balance), $(window).width() < 670) {
                var e = $(window).width() - 80;
                $("#youtube iframe").width(e).height(.54 * e).show()
            } else
                $("#youtube iframe").width(600).height(324).show()
        })
    }, t.init_guide_public = function() {
        $(".pic").fancybox(), $(".guide-public-top .grey").bind("click", function() {
            var e = new Date;
            e.setMonth(e.getMonth() + 3), document.cookie = "top_block_clicked_guide_publick_step1=true; path=/; expires=" + e.toUTCString(), $(".guide-public-top .step2").hasClass("hidden") || (document.cookie = "top_block_clicked_guide_publick_step2=true; path=/; expires=" + e.toUTCString(), $(".guide-public-top").remove()), $(".guide-public-top .step1").toggleClass("hidden"), $(".guide-public-top .step2").toggleClass("hidden")
        })
    }, t.init_affiliate = function() {
        t.pil = new ProfileInviteLanding, t.pil.init_clipboard(), t.pil.init_personalize(), $(".code-cnt").on("click", function() {
            $(this).select()
        }), $(".banner-cnt").prepend($(".sample-select-banner").html()), $(".banner-changer").on("change", function() {
            var e = $(this).val(),
                t = $(this).parent().parent().children(".banner-blk"),
                i = t.children("img").attr("src"),
                n = "worldwide" == e ? "gif" : "png";
            t.children("img").attr("src", i.replace(/([^\/]{1,})(\/[0-9]{1,}x[0-9]{1,}\.)(.*)$/, e + "$2" + n));
            var o = t.children(".code-blk").children(".code-cnt"),
                a = o.text().replace(/\/(|(d\/([^\/]{1,})))\?invite=/, ("worldwide" == e ? "" : "/d/" + e) + "/?invite=");
            o.val(a.replace(/(<img src=\"[^\"]{1,}\/)[^\/]{1,}(\/[0-9]{1,}x[0-9]{1,}\.)([^\"]{1,})/, "$1" + e + "$2" + n))
        })
    }
}
function ProfileTours(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.init = function() {
        t.ajax_async = !0, t.init_tours_select(), t.every_tour_load(), t.init_visa_check(), t.load_last_tours(), t.city_images()
    }, t.load_last_tours = function() {
        t.params.ids.length > 0 && (t.params.maph = 0, t.params.maph_s = 0, $(".map-tour").each(function() {
            var e = $(this).attr("id").substr(4);
            t.params.maph += $("#map-" + e).width(), t.params.maph_s++
        }), $(".map-tour").each(function() {
            var e = $(this).attr("id").substr(4);
            t.params.locations = t.params.locs[e], $("#map-" + e).width(t.params.maph / t.params.maph_s).height(t.params.maph / t.params.maph_s), t.load_map("map-" + e), $("#text-" + e).height($("#text-" + e).parent().height() - 10)
        }), $(".video-tours").each(function() {
            var e = $(this).attr("id").substr(7);
            $("#videos-" + e).fotorama({
                maxwidth: $("#videos-" + e).width(),
                ratio: 1.5
            })
        }), t.init_visa(), $(".comparison-tours .select-tour option:selected").each(function() {
            var e = $(this).val();
            $(".comparison-tours .select-tour option[value=" + e + "]").attr("disabled", !0)
        }), $(".comparison-tours .select-tour").trigger("chosen:updated"))
    }, t.city_images = function() {
        $(".locs a.see-loc").live("click", function() {
            var e = $(this).attr("id").substr(10),
                t = $(this).parent().attr("id").substr(10),
                i = $(this).parent().parent().attr("id").substr(5);
            $("#locs-" + i + " .city-info").hide(), $(this).hasClass("open") || ($("#locs-" + i + " #city-info-" + t).length > 0 ? $("#locs-" + i + " #city-info-" + t).show() : ($("#locs-" + i + " #city-list-" + t).append('<div class="city-info" id="city-info-' + t + '"></div>'), $("#locs-" + i + " #city-list-" + t + " #city-info-" + t).append('<div id="fotoram-' + t + '" class="fotoram"></div>'), $.ajax({
                url: "/serp/responsive_details_tab",
                data: {
                    tab: "fotoram",
                    city_id: e,
                    id: i
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && ($.each(e.photos, function(e, n) {
                        $("#locs-" + i + " #fotoram-" + t).append('<img src="https:' + n.url_tr + '">')
                    }), $("#locs-" + i + " #fotoram-" + t).fotorama({
                        width: $("#locs-" + i).width() - 25,
                        maxwidth: "100%",
                        maxheight: 185,
                        ratio: 1.5,
                        nav: "thumbs",
                        thumbheight: 30,
                        fit: "cover"
                    }))
                }
            }))), $(this).toggleClass("open")
        })
    }, t.every_tour_load = function() {
        $(".outlet").live("mouseover", function() {
            $(this).popover("show").mouseleave(function() {
                $(this).popover("hide")
            })
        }), $(".short-description a").live("click", function() {
            var e = $(this).parent().attr("id").substr(4);
            $("#s-d-" + e).hide(), $("#f-d-" + e).show()
        }), $(".full-description a").live("click", function() {
            var e = $(this).parent().attr("id").substr(4);
            $("#f-d-" + e).hide(), $("#s-d-" + e).show()
        }), $(".seeall a").live("click", function() {
            var e = $(this).parent().parent().attr("class");
            $("." + e + " .locs.hidden").length > 0 ? ($("." + e + " .locs.hidden").show("slow").removeClass("hidden").addClass("not"), $("." + e + " .km.hidden").show("slow").removeClass("hidden").addClass("not"), $(this).html("hide")) : ($("." + e + " .locs.not").hide("slow").removeClass("not").addClass("hidden"), $("." + e + " .km.not").hide("slow").removeClass("not").addClass("hidden"), $(this).html("see all"))
        }), $(".yesall a, .notall a.header").live("click", function() {
            t.params.id = $(this).parent().attr("data-tour-id");
            var e = $(this).parent().parent().parent().attr("class"),
                i = $(this).parent().attr("id").substr(5);
            $("." + e + " #here-" + i).is(":visible") ? ($("." + e + " .line.yesall .inc_inside").show(), $("." + e + " .line.yesall .triangle").show(), $("." + e + " .line.notall .inc_inside").show(), $("." + e + " .line.notall .triangle").show(), $("." + e + " .here").hide()) : t.load_include(e)
        }), $("textarea.added-text").live("blur", function() {
            var e = $(this).attr("id").substr(5),
                i = $(this).val();
            $.ajax({
                url: "/travellers/my_tours",
                data: {
                    type: "annotation",
                    tour_id: e,
                    a_text: i
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status
                },
                error: function() {
                    t.common.error()
                }
            })
        }), $(".expand-all a").live("click", function() {
            var e = $(this).parent().parent().parent().attr("class");
            $(this).hasClass("open") ? ($(this).removeClass("open"), $(this).text("Expand all"), $("." + e + " .open-int").each(function() {
                var t = $(this).attr("id").substr(5);
                $("." + e + " #" + t).addClass("hidden")
            })) : ($(this).addClass("open"), $(this).text("Hide"), $("." + e + " .open-int").each(function() {
                var t = $(this).attr("id").substr(5);
                $("." + e + " #" + t).removeClass("hidden")
            }))
        }), $("a.open-int").live("click", function() {
            var e = $(this).attr("id").substr(5),
                t = $(this).parent().parent().parent().attr("class");
            $("." + t + " #" + e).toggleClass("hidden")
        }), $(".zero .info .remove").live("click", function() {
            if (confirm("Are you sure?")) {
                var e = $(this).attr("id").substr(7),
                    i = $(this).parent().parent().attr("class");
                $.ajax({
                    url: "/travellers/my_tours",
                    data: {
                        type: "remove",
                        tour_id: e
                    },
                    dataType: "json",
                    type: "POST",
                    success: function(t) {
                        "OK" == t.status && ($(".second ." + i).html(""), $(".zero ." + i + " .info").remove(), $(this).parent().remove(), $(".comparison-tours .select-tour option[value=" + e + "]").remove(), $(".comparison-tours .select-tour").trigger("chosen:updated"))
                    },
                    error: function() {
                        t.common.error()
                    }
                })
            }
        }), $(".comparison_page .inside .comparison-tours .zero").length > 0 && $(window).scroll(function() {
            $("#header-new #row-banner.fly").length ? $(".comparison_page .inside .comparison-tours .zero").css("top", $("#header-new #row-banner.fly").outerHeight() + "px") : $(".comparison_page .inside .comparison-tours .zero").css("top", ""), t.table_size(), $(window).scrollTop() >= $(".comparison_page .inside .comparison-tours .zero").offset().top + $(".comparison_page .inside .comparison-tours .zero").height() ? $(".comparison_page .inside .comparison-tours .zero").hasClass("fly") || ($(".comparison_page .inside .comparison-tours .zero").addClass("fly"), $(".comparison_page .inside .comparison-tours .first:first .one").css("padding-top", $(".comparison_page .inside .comparison-tours .zero").outerHeight())) : $(window).scrollTop() < $(".comparison_page .inside .comparison-tours").offset().top && $(".comparison_page .inside .comparison-tours .zero").hasClass("fly") && ($(".comparison_page .inside .comparison-tours .zero").css("width", ""), $(".comparison_page .inside .comparison-tours .zero").removeClass("fly"), $(".comparison_page .inside .comparison-tours .first:first .one").css("padding-top", ""))
        })
    }, t.load_include = function(e) {
        $.ajax({
            url: "/serp/responsive_details_tab",
            data: {
                tab: "included_new",
                id: t.params.id
            },
            dataType: "json",
            type: "POST",
            success: function(i) {
                if ("OK" == i.status)
                    for (var n = 0; n < i.included.length; n++)
                        $("." + e + " #here-" + i.included[n].field_name).length > 0 && 1 == i.included[n].status && ($("." + e + " #here-" + i.included[n].field_name).html(i.included[n].field_value).show("slow").removeClass("hidden"), $("." + e + " .line.notall .inc_inside").hide(), $("." + e + " .line.notall .triangle").hide(), $("." + e + " .line.yesall .inc_inside").hide(), $("." + e + " .line.yesall .triangle").hide()), $("." + e + " #here-notincluded-" + i.included[n].field_name).length > 0 && 1 == i.included[n].status && 0 == i.included[n].included && $("." + e + " #here-notincluded-" + i.included[n].field_name).html(i.included[n].field_value).show("slow").removeClass("hidden");
                else
                    t.common.error(!0)
            },
            error: function() {
                t.common.error(!0)
            }
        })
    }, t.table_size = function() {
        var e = $(".comparison_page .inside .comparison-tours .zero").outerWidth(),
            t = $(".comparison_page .inside .comparison-tours .zero .one").width() + 1,
            i = $(".comparison_page .inside .comparison-tours .zero .two").width() + 1,
            n = $(".comparison_page .inside .comparison-tours .zero .three").width() + 1,
            o = $(".comparison_page .inside .comparison-tours .zero .four").width() + 1;
        $(".comparison_page .inside .comparison-tours .zero").css("width", e), $(".comparison_page .inside .comparison-tours .one").css("width", t), $(".comparison_page .inside .comparison-tours .two").css("width", i), $(".comparison_page .inside .comparison-tours .three").css("width", n), $(".comparison_page .inside .comparison-tours .four").css("width", o)
    }, t.init_tours_select = function() {
        var e = new Object,
            i = new Object;
        new Object;
        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || $(".comparison-tours .select-tour").chosen({
            no_results_text: "No results matched"
        }), $(".comparison-tours .select-tour").attr("data-placeholder", "Select another tour").change(function() {
            if (t.table_size(), $(this).val() > 0) {
                var n = ($(this).attr("id"), $(this).val()),
                    o = t.params.tours[n],
                    a = $(this).parent().attr("class");
                $(".comparison-tours .select-tour option").attr("disabled", !1), $(".comparison-tours .select-tour option:selected").each(function() {
                    var e = $(this).val();
                    $(".comparison-tours .select-tour option[value=" + e + "]").attr("disabled", !0)
                }), $(".comparison-tours .select-tour").trigger("chosen:updated"), $(".zero ." + a + " .info").remove(), $(".zero ." + a).append('<div class="info"><img src="' + o.image + '"><div class="t-name">' + o.name + '</div><div class="remove" id="delete-' + n + '"></div><div class="infly"><a class="multi-line-button bigb view" href="/t/' + n + '"><span class="title">View&nbsp;details&nbsp;</span></a></div></div>'), $(".second ." + a).html('<div class="loader"><img src="/images/responsive/ajax-loader-1.gif"/></div>'), 0 == object_size(e[n]) ? (e[n] = new Object, $.ajax({
                    async: t.ajax_async,
                    url: "/travellers/my_tours",
                    data: {
                        type: "get_tour_info",
                        tour_id: n
                    },
                    dataType: "json",
                    type: "POST",
                    success: function(o) {
                        if ("OK" == o.status) {
                            for (var s = o.html, r = 0; r < $(s).length; r++)
                                e[n][$(s)[r].id] = $(s)[r];
                            i[n] = o.locations, $.each(e[n], function(e, t) {
                                $(".second#" + e + " ." + a).html(""), $(".second#" + e + " ." + a).html(t)
                            }), t.params.locations = i[n], $("#map-" + n).height($("#map-" + n).width()), $("#text-" + n).height($("#text-" + n).parent().parent().height() - 10), t.load_map("map-" + n), $("#videos-" + n).fotorama({
                                maxwidth: $("#videos-" + n).width(),
                                ratio: 1.5
                            }), t.td_class_change = a, t.init_visa()
                        }
                    },
                    error: function() {
                        t.common.error()
                    }
                })) : ($.each(e[n], function(e, t) {
                    $(".second#" + e + " ." + a).html(t)
                }), t.params.locations = i[n], $("#map-" + n).height($("#map-" + n).width()), $("#text-" + n).height($("#text-" + n).parent().parent().height() - 10), $("#videos-" + n).fotorama({
                    maxwidth: $("#videos-" + n).width(),
                    ratio: 1.5
                }), t.init_visa())
            }
        })
    }, t.init_visa = function() {
        t.visa_only_one = !1, $("#visa option[value=185]").attr("selected", "selected"), $("#visa").change(), $("#visa option[value=214]").attr("selected", "selected"), $("#visa").change(), $("#visa option[value=10]").attr("selected", "selected"), $("#visa").change(), $("#visa option[value=0]").attr("selected", "selected"), $("#visa").change(), t.visa_only_one = !1
    }, t.init_visa_check = function() {
        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || $("#visa").chosen({
            no_results_text: "No results matched"
        }), $("#visa").attr("data-placeholder", "Your nationality").change(function() {
            if ($(this).val() > 0) {
                var e = $("#visa option:selected").html(),
                    i = $("#visa").val(),
                    n = !1;
                if (185 == i ? (e = "US", n = e) : 214 == i ? (e = "UK", n = e) : 10 == i && (e = "Australian", n = e), t.visa_only_one)
                    var o = "." + t.td_class_change + " ";
                else
                    var o = "";
                $(o + ".threevisa").each(function() {
                    var a = $(this).attr("id").substr(5);
                    $(o + ".visa_result#visa2-" + a).html("<p><strong>" + e + " Citizens</strong>: Please wait...</p>"), $.ajax({
                        url: "/serp/check_visa",
                        dataType: "json",
                        type: "POST",
                        data: {
                            tour: a,
                            nationality: i
                        },
                        success: function(i) {
                            if ("OK" == i.status) {
                                if (i.visa.noinfo.length > 0)
                                    var s = "<p><strong>" + e + " Citizens</strong>: Sorry, we don't have details for this place.</p>";
                                else if (i.visa.noentry.length > 0) {
                                    for (var s = "<p><strong>" + e + " Citizens</strong>: Please check with your embassy for entry restrictions: ", r = 0; r < i.visa.noentry.length; r++)
                                        s += 0 == r ? i.visa.noentry[r] : r == i.visa.noentry.length - 1 ? " and " + i.visa.noentry[r] : ", " + i.visa.noentry[r];
                                    s += "</p><p>Please contact the operator for any assistance.</p>"
                                } else if (i.visa.visa.length > 0) {
                                    for (var s = "<p><strong>" + e + " Citizens</strong> may need a visa for ", r = 0; r < i.visa.visa.length; r++)
                                        s += 0 == r ? i.visa.visa[r] : r == i.visa.visa.length - 1 ? " and " + i.visa.visa[r] : ", " + i.visa.visa[r];
                                    s += "</p>"
                                } else
                                    var s = "<p><strong>" + e + " Citizens</strong> probably dont require a visa</p>";
                                n ? $(o + ".threevisa#visa-" + a + " .visa-" + n).html(s) : $(o + ".visa_result#visa2-" + a).html(s)
                            } else
                                t.common.error(!0)
                        },
                        error: function() {
                            t.common.error(!0)
                        }
                    })
                })
            } else
                $(".visa_result").html("")
        })
    }, t.load_map = function(e) {
        if ("locations" in t.params && "undefined" != typeof t.params.locations) {
            for (var i = 1e3, n = 1e3, o = -1e3, a = -1e3, s = 0; s < t.params.locations.length; s++)
                t.params.locations[s].city_zoom > 0 && (n = Math.min(n, t.params.locations[s].city_x), a = Math.max(a, t.params.locations[s].city_x), i = Math.min(i, t.params.locations[s].city_y), o = Math.max(o, t.params.locations[s].city_y));
            map = new OpenLayers.Map(e), map.addLayer(new OpenLayers.Layer.OSM("MapQuest-OSM Tiles", ["https://otile1-s.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg", "https://otile2-s.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg", "https://otile3-s.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg", "https://otile4-s.mqcdn.com/tiles/1.0.0/map/${z}/${x}/${y}.jpg"])), map.zoomToExtent(new OpenLayers.Bounds(i, n, o, a).transform(new OpenLayers.Projection("EPSG:4326"), new OpenLayers.Projection("EPSG:900913"))), map.getZoom() > 13 && map.zoomTo(13);
            var r = new OpenLayers.Layer.Markers("Markers");
            map.addLayer(r);
            for (var l = map.getControlsByClass("OpenLayers.Control.Navigation"), c = 0; c < l.length; c++)
                l[c].disableZoomWheel(), $(window).width() <= 1024 && "olControlNavigation" == l[c].displayClass && l[c].deactivate();
            for (var d = new Array, s = (new Array, 0); s < t.params.locations.length; s++)
                if (t.params.locations[s].city_zoom > 0) {
                    d[d.length] = new OpenLayers.Geometry.Point(t.params.locations[s].city_y, t.params.locations[s].city_x).transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());
                    var u = new OpenLayers.Marker(new OpenLayers.LonLat(t.params.locations[s].city_y, t.params.locations[s].city_x).transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject()), new OpenLayers.Icon("/images/responsive/tour/marker.png?v=1", new OpenLayers.Size(21, 21), new OpenLayers.Pixel((-12), (-12))));
                    u.icon.imageDiv.title = t.params.locations[s].city_name + ", " + t.params.locations[s].country_name, r.addMarker(u)
                }
            var h = new OpenLayers.Layer.Vector("Line Layer");
            map.addLayer(h), h.addFeatures([new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(d), null, {
                strokeColor: "#409cd1",
                strokeOpacity: 1,
                strokeWidth: 2
            })])
        }
    }
}
function ProfileInvite(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.init = function() {
        $("#earned a").click(function() {
            $("body, html").animate({
                scrollTop: $(".bottom h2").offset().top - 120
            }, "slow")
        }), $("#block-verify a:first").click(function() {
            (new ProfileBar).resend_email()
        }), t.init_clipboard(), t.init_buttons(), t.init_resend(), t.init_personalize(), t.init_responsive_layout()
    }, t.init_clipboard = function() {
        $("#link input").click(function() {
            $(this).select(), $(".link_table .hint").removeClass("hint")
        }).blur(function() {
            $(".link_table div:last").addClass("hint")
        })
    }, t.init_buttons = function() {
        $(".buttons .one_btn:eq(0)").unbind("click").click(function() {
            t.common.send_google_event("Referral Invite", "Facebook"), window.open("https://www.facebook.com/sharer/sharer.php?u=https://www.tourradar.com/invite/" + t.params.code, "Facebook", "width=640,height=400")
        }), $(".buttons .one_btn:eq(1)").unbind("click").click(function() {
            t.common.send_google_event("Referral Invite", "Twitter"), window.open("https://twitter.com/intent/tweet?text=%40TourRadar+rocks%21+Sign+up+now+and+instantly+get+" + t.params.gifted + "+for+your+next+tour+booking%21 https://www.tourradar.com/invite/" + t.params.code, "Twitter", "width=640,height=400")
        }), $(".buttons .one_btn:eq(2)").unbind("click").click(function() {
            $(".buttons-invite").hasClass("hidden") ? $(".buttons-invite").removeClass("hidden") : $(".buttons-invite").addClass("hidden")
        }), $('.buttons-invite input[type="button"]').unbind("click").click(function() {
            for (var e = $.trim($('.buttons-invite input[type="email"]').val()).split(","), i = new Array, n = 0; n < e.length; n++) {
                var o = $.trim(e[n]);
                o.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(o) && (i[i.length] = o)
            }
            i.length > 0 && $.ajax({
                url: "/travellers/invite",
                data: {
                    action: "send_emails",
                    emails: i.join(",")
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && (t.common.send_google_event("Referral Invite", "Email", i.length - e.not_sent.length), 0 == e.not_sent.length ? alert("Emails have been sent successfully!") : alert("You have successfully invited your friends via email. The following emails were already invited by another user and therefore will not appear on your list:\n" + e.not_sent.join("\n")), $('.buttons-invite input[type="text"]').val(""), location.reload())
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.init_resend = function() {
        $(".resend").click(function() {
            var e = $(this),
                i = $(this).attr("email");
            $.ajax({
                url: "/travellers/invite",
                data: {
                    action: "resend_email",
                    email: i
                },
                dataType: "json",
                type: "POST",
                success: function(t) {
                    "OK" == t.status && e.remove()
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.init_personalize = function() {
        $(".profile-invite .link_text a, .profile-invite .link_text_update #personalize_cancel").click(function() {
            $(".profile-invite .link_text_update").hasClass("hidden") ? ($(".profile-invite .link_text").addClass("hidden"), $(".profile-invite .link_text_update").removeClass("hidden"), $(".profile-invite .link_text_update #personalize").select().focus()) : ($(".profile-invite .link_text_update #personalize").val(t.params.code), $(".profile-invite .link_text").removeClass("hidden"), $(".profile-invite .link_text_update").addClass("hidden"))
        }), $(".profile-invite .link_text_update #personalize_submit").click(function() {
            var e = $.trim($(".profile-invite .link_text_update #personalize").val());
            return e.length < 6 || e.length > 12 || /[^a-zA-Z0-9]+/.test(e) ? (t.common.show_error_message("Please enter a name with 6 to 12 characters and only with letters and numbers."), !1) : void $.ajax({
                url: "/travellers/invite",
                data: {
                    action: "personalize",
                    code: e
                },
                dataType: "json",
                type: "POST",
                success: function(i) {
                    "OK" == i.status ? (t.params.code = e, $(".profile-invite .link_text .code").html(e), $(".profile-invite .link_text_update #personalize").val(e), $(".link_table #link input").val("https://www.tourradar.com/invite/" + e), $(".profile-invite .link_text_update #personalize_cancel").click(), t.init_buttons()) : "repeat" == i.status ? t.common.show_error_message("Sorry, this referral code was already taken, try another one.") : t.common.error()
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.init_responsive_layout = function() {
        $(window).bind("load resize", function() {
            $("#bar").width() - 6;
            (new ProfileBar).init_bar(t.params.balance)
        })
    }
}
function ProfileInviteLanding(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.init = function() {
        if (t.init_responsive_layout(), t.share_buttons_init(), t.send_buttons_init(), t.init_clipboard(), t.init_personalize(), $("#signup.nolink").click(function() {
            location.href = "/registration"
        }), $(".notlogged").length > 0) {
            $("#content_details").append($("#traveller_login")), t.common.init_login_popup(t, function() {
                location.href = "/members/profile"
            }), $("#darkscreen").remove(), $("#traveller_login .close").remove(), $("#header #dashboard").click(function() {
                $("#traveller_login").css("z-index", "20001"), $("#traveller_login").css("position", "relative")
            });
            setInterval(function() {
                "Sign up" == $("#traveller_login .title").text() && $("#traveller_login .title").text("Sign up now to claim your credit!")
            }, 100)
        }
    }, t.init_personalize = function() {
        if ($("#content.invite .personal-link .personalize").length > 0)
            var e = "#content.invite .personal-link .personalize",
                i = "#content.invite .personal-link input",
                n = "#content.invite .topimage .multi-line-button.update";
        if ($(".guide-community .personal-link").length > 0)
            var e = ".guide-community .personal-link .personalize",
                i = ".guide-community .personal-link input",
                n = ".guide-community .personal-link .multi-line-button.update";
        if ($(".profile .profile-left#collect-reviews .invite .personalize").length > 0)
            var e = ".profile .profile-left#collect-reviews .invite .personalize",
                i = ".profile .profile-left#collect-reviews .invite input",
                n = ".profile .profile-left#collect-reviews .invite .multi-line-button.update";
        $(e).click(function() {
            var t = $(e).children(),
                o = $(e).width();
            $(i).is("[readonly]") ? ($(i).attr("data-saved", $(i).val()), $(e).text("Cancel").append(t).width(o), $(i).attr("readonly", !1).select().focus().val($(i).attr("data-code")), $(n).css("display", "block")) : ($(i).attr("readonly", !0).val($(i).attr("data-saved")), $(e).text("Personalize your link").append(t).width(o), $(n).css("display", "none"))
        }), $(n).click(function() {
            var n = $.trim($(i).val());
            return n.length < 6 || n.length > 12 || /[^a-zA-Z0-9]+/.test(n) ? (t.common.show_error_message("Please enter a name with 6 to 12 characters and only with letters and numbers."), !1) : void $.ajax({
                url: "/travellers/invite",
                data: {
                    action: "personalize",
                    code: n
                },
                dataType: "json",
                type: "POST",
                success: function(o) {
                    "OK" == o.status ? ("undefined" != typeof t.params && (t.params.code = n), $(e).click(), $(i).val(location.origin + "/invite/" + n).attr("data-code", n), $(".profile .profile-left#collect-reviews .invite input").length > 0 && $("#collect-reviews .but").attr("data-link", location.origin + "/invite/" + n), $(".guide-community ").length > 0 && $(".guide-community .personal-link .soc-buttons .cube-blk").attr("data-link", location.origin + "/invite/" + n)) : "repeat" == o.status ? t.common.show_error_message("Sorry, this referral code was already taken, try another one.") : t.common.error()
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.init_responsive_layout = function() {
        $(window).bind("load resize", function() {
            $("#content_details.invite").height(Math.floor(865 * $("#content_details.invite").width() / 1300) - parseInt($("#content_details.invite").css("padding-top"))), t.params && (new ProfileBar).init_bar(t.params.balance)
        })
    }, t.init_resend = function() {
        $(".resend").click(function() {
            var e = $(this),
                i = $(this).attr("email");
            $.ajax({
                url: "/travellers/invite",
                data: {
                    action: "resend_email",
                    email: i
                },
                dataType: "json",
                type: "POST",
                success: function(t) {
                    "OK" == t.status && e.remove()
                },
                error: function() {
                    t.common.error()
                }
            })
        })
    }, t.init_clipboard = function() {
        $("#content.invite .personal-link input, .guide-community .personal-link input, .profile .profile-left#collect-reviews .invite input").click(function() {
            $(this).select().parent().addClass("active")
        }).blur(function() {
            $(this).parent().removeClass("active")
        })
    }, t.send_buttons_init = function() {
        $("#send_email_popup .add").on("click", function() {
            var e = !1;
            return $("#send_email_popup .emails").each(function() {
                var t = $(this).val();
                0 != t.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t) ? $(this).removeClass("error") : ($(this).addClass("error"), e = "Please enter valid email address.")
            }), e ? (alert(e), !1) : ($("#send_email_popup .t2").append($("#send_email_popup .emails:last").clone()), $("#send_email_popup .emails:last").val("").after($("#send_email_popup svg.svg-icon-minus2:last").clone()), $("#send_email_popup svg.svg-icon-minus2").click(function() {
                $(this).prev().remove(), $(this).remove()
            }), void 0)
        }), $("#send_email_popup .send").on("click", function() {
            var e = !1,
                i = new Array;
            return $("#send_email_popup .emails").each(function() {
                var t = $(this).val();
                0 != t.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t) ? ($(this).removeClass("error"), i[i.length] = t) : ($(this).addClass("error"), e = "Please enter valid email address.")
            }), e ? (alert(e), !1) : void (i.length > 0 && $.ajax({
                url: "/travellers/invite",
                data: {
                    action: "send_emails",
                    emails: i.join(","),
                    text1: $("#send_email_popup .e_text .text1").text(),
                    text2: $("#send_email_popup .e_text .text2").text(),
                    text_user: $("#send_email_popup .e_text textarea").val()
                },
                dataType: "json",
                type: "POST",
                success: function(e) {
                    "OK" == e.status && (t.common.send_google_event("Referral Invite", "Email", (i.length - e.not_sent.length).toString()), 0 == e.not_sent.length ? alert("Emails have been sent successfully!") : alert("You have successfully invited your friends via email. The following emails were already invited by another user and therefore will not appear on your list:\n" + e.not_sent.join("\n")), location.reload())
                },
                error: function() {
                    t.common.error()
                }
            }))
        }), $("#content.invite .contact").click(function() {
            $(this).hasClass("fb") ? FB.ui({
                method: "send",
                link: location.origin + "/invite/" + t.params.code
            }) : $(this).hasClass("email") && $.fancybox({
                padding: 20,
                href: "#send_email_popup"
            })
        })
    }, t.share_buttons_init = function() {
        $(".soc-buttons .cube, #content.invite .topimage .soc-buttons .cube-blk.fb, #content.invite .topimage .soc-buttons .cube-blk.tw").click(function() {
            var e = location.origin + "/invite/" + t.params.code,
                i = $(this).attr("class").split(" ")[1],
                n = encodeURIComponent(e);
            switch (i) {
            case "fb":
                popUp = window.open("https://www.facebook.com/sharer.php?u=" + n, "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "tw":
                var o = "Book with TourRadar and save " + t.params.referral_program.travel_credits_percent + "%25 off your tour!";
                popUp = window.open("https://twitter.com/share?url=" + n + "&text=" + o + "&hashtags=TourRadar,GoTouring", "popupwindow", "scrollbars=yes,width=800,height=400"), popUp.focus();
                break;
            case "wp":
                window.location = "whatsapp://send?text=Use this link to save " + t.params.referral_program.travel_credits_percent + "% on your next tour. " + n
            }
        })
    }
}
function RespVoucher(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.init = function() {
        t.init_responsive_layout(), $("#country-title").click(function() {
            $(this).addClass("hidden"), $("#country-title-select").val(t.params.currency).removeClass("hidden").change(function() {
                var e = $(this).val();
                t.params.currency = e, $("#country-flag img").attr("src", "/images/responsive/voucher/country-" + e + ".png"), $("#country-title").html(t.params.currencies[e] + " <span>&#9660;</span>"), $(this).addClass("hidden"), $("#country-title").removeClass("hidden"), t.reload_vouchers(e)
            })
        }), $(".voucher").click(function() {
            t.select_voucher(t.params.currency, $(this))
        }), $(".voucher-special:visible").length > 0 ? $(".voucher-special:visible:first").click() : $(".voucher:visible:first").click(), t.images = new Array, $(".preview").each(function() {
            var e = $(this).attr("id").substr(8);
            t.images[e] = $("<img />").attr("src", "/images/responsive/voucher/theme-" + e + ".png")
        }), $("#preview_link").fancybox(), $(".preview").click(function() {
            t.generate_preview($(this).attr("id").substr(8))
        }), $(".theme img").click(function() {
            $(this).parent().find("input").click()
        }), $('.payment-type input[type="radio"]').click(function() {
            $(".payment-type").removeClass("active"), $(this).parents(".payment-type").addClass("active")
        }), $('.payment-type input[type="text"]').click(function() {
            $(this).parents(".payment-type").find('input[type="radio"]').click()
        }), $('input[name="terms"]').click(function() {
            $(this).prop("checked") ? $(".form-submit").removeClass("grey depressed").addClass("greenb") : $(".form-submit").addClass("grey depressed").removeClass("greenb")
        }), $(".form-submit").click(function() {
            t.submit()
        }), $(".voucher-success a.print").click(function() {
            window.print()
        })
    }, t.init_responsive_layout = function() {
        $(window).bind("load resize", function() {
            if ($("#image-main-container").width($("#image-main-container").parent().width() + 46), $(".traveller-themes").width() >= 535)
                $(".traveller-themes .theme").css("margin-right", Math.floor(($(".traveller-themes").width() - 441 - 1) / 2) + "px"), $(".traveller-themes .theme:eq(2), .traveller-themes .theme:eq(5)").css("margin-right", "0");
            else if ($(".traveller-themes").width() >= 360) {
                var e = Math.floor(($(".traveller-themes").width() - 294 - 1) / 4) + "px";
                $(".traveller-themes .theme").css({
                    "margin-left": e,
                    "margin-right": e
                }), $(".traveller-themes .theme:eq(1), .traveller-themes .theme:eq(3), .traveller-themes .theme:eq(5)").css("margin-right", "0")
            } else {
                var e = Math.floor(($(".traveller-themes").width() - 148) / 2) + "px";
                $(".traveller-themes .theme").css({
                    "margin-left": e,
                    "margin-right": e
                })
            }
        })
    }, t.reload_vouchers = function(e) {
        $(".voucher").addClass("hidden"), $(".voucher-" + e).removeClass("hidden");
        for (var i = "", n = 0; n < t.params.vouchers_special.length; n++)
            t.params.vouchers_special[n].currency == e && (i = t.params.vouchers_special[n].text);
        $(".voucher:visible:first").click()
    }, t.select_voucher = function(e, i) {
        $(".voucher").removeClass("active"), $(i).addClass("active"), t.params.value = $(i).attr("value"), t.params.cost = $(i).attr("cost"), t.params.voucher_id = $(i).attr("id").substr(8), $(".amount-due").html(e + " " + t.params.currencies_symbols[e] + number_format(parseInt(t.params.cost) ? t.params.cost : t.params.value, 0, "", ",")), $(".voucher-text").addClass("hidden"), $("#voucher-text-" + ($("#voucher-text-" + t.params.voucher_id).length > 0 ? t.params.voucher_id : "normal")).removeClass("hidden")
    }, t.generate_preview = function(e) {
        var i = $.trim($("#details-to").val()),
            n = $.trim($("#details-from").val()),
            o = $.trim($("#details-message").val());
        if ($(".voucher-text-offer:visible").length > 0)
            var a = $(".voucher-text-offer:visible").html().replace(/<span>.*<\/span> /, "");
        else
            var a = "This gift card can be used for any booking on tourradar.com. See terms and conditions: https://www.tourradar.com/terms-conditions/";
        $("#preview_content").html('<table width="100%" height="100%"><tr height="100%"><td align="center"><img src="/images/ajax_loader/small.gif" /></td></tr></table>'), $("#preview_link").fancybox().click(), $.ajax({
            url: "/booking/voucher",
            data: {
                action: "preview",
                theme: e,
                currency: t.params.currency,
                value: t.params.value,
                to: i,
                from: n,
                message: o,
                terms: a
            },
            dataType: "json",
            type: "POST",
            success: function(e) {
                "OK" == e.status && $("#preview_content").html('<img src="' + e.file + '" />')
            },
            error: function() {
                t.error()
            }
        })
    }, t.submit = function() {
        if ($("input.error, select.error").removeClass("error"), !$('input[name="terms"]').prop("checked"))
            return alert("Please accept TourRadar's Terms & Conditions and Privacy Policy."), !1;
        var e = $.trim($("#details-to").val()),
            i = $.trim($("#details-from").val());
        $.trim($("#details-message").val());
        if (!e || !i)
            return e || $("#details-to").addClass("error"), i || $("#details-from").addClass("error"), alert("Please customize your gift voucher first."), $("body, html").animate({
                scrollTop: $("input.error:first").offset().top - 40
            }, 300), !1;
        var n = "";
        if ($("#type-friend").prop("checked") && (n = $.trim($("#friends_email").val()), !n || !/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n)))
            return $("#friends_email").addClass("error"), alert("Please enter your friends correct email address."), $("body, html").animate({
                scrollTop: $("input.error:first").offset().top - 40
            }, 300), !1;
        var o = $.trim($("#billing-address").val()),
            a = $.trim($("#billing-city").val()),
            s = $.trim($("#billing-zipcode").val()),
            r = $.trim($("#billing-state").val()),
            l = $.trim($("#billing-country").val()),
            c = $.trim($("#billing-email").val());
        if (!(o && a && s && r && l && c && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(c)))
            return o || $("#billing-address").addClass("error"), a || $("#billing-city").addClass("error"), s || $("#billing-zipcode").addClass("error"), r || $("#billing-state").addClass("error"), l || $("#billing-country").addClass("error"), c && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(c) || $("#billing-email").addClass("error"), alert("Please enter your billing details."), $("body, html").animate({
                scrollTop: $("input.error:first").offset().top - 40
            }, 300), !1;
        var d = $.trim($("#cc_number").val().replace(/ /g, "")),
            u = $.trim($("#cc_name").val()),
            h = $("#cc_exp_month").val(),
            p = $("#cc_exp_year").val(),
            f = $.trim($("#cc_cvv").val());
        if (!d || d.length < 13 || /[^0-9 ]+/.test(d) || !u || "0" == h || "0" == p || !f || f.length < 3 || /[^0-9]+/.test(f))
            return (!d || d.length < 13 || /[^0-9 ]+/.test(d)) && $("#cc_number").addClass("error"), u || $("#cc_name").addClass("error"), "0" == h && $("#cc_exp_month").addClass("error"), "0" == p && $("#cc_exp_year").addClass("error"), (!f || f.length < 3 || /[^0-9]+/.test(f)) && $("#cc_cvv").addClass("error"), alert("Please enter credit card details."), $("body, html").animate({
                scrollTop: $("input.error:first").offset().top - 40
            }, 300), !1;
        if ($("#continue-loader").removeClass("hidden"), t.params.braintree_sandbox)
            var m = Braintree.create("MIIBCgKCAQEA0Nq4VrlySnZfnbL/Lw0CG92WlrW+jq3jda92sXnn02Oxun9DPs9WrkT7mZAJ6zHZx2nWBdFb1tSpXizwqLYP6ZrK1ctRwEcVKrlFQRjNT41TwUcvOMalPXwzKtD5uKHHplfS/fbarqvoBL4iYfmAfEZK3zq79dXkD9B9m1nc0gdV9izCq2Agf2tHQdUiv13/87h38+fuSQ+0CeUhMEeiSZJyLYCIsaic+lM1lgcoBV4i41m4BCa+f6+fcwmNDP/LZPTQyaVc9CQu2izKIuEZgNc6wJ7e0IptSHvtxCK7INTGWNY9dB4BxZ35ZuDZqoY16Bouy4d5+XhEIuCP2iigMQIDAQAB");
        else
            var m = Braintree.create("MIIBCgKCAQEAv5TIEcjooijuyImr0rvqrk7JxyGNZfAMMEr5x8zVfo55mzqeT3wWmalVLKskUV+qnsgwb9c7Rjfd8q514kPS7IJg7O1fMkTA4VPWj+CM+1CO95491VPqeciq4wCvY3jfgjEUaD7KSSPGHfQQrOIh3+obOLzABiBt4RX9NFYuVQS9gF51/MnLwY0VQZNvoMJl42FDc8w6X4RrvftpQj07jalJCA4QVuA44gU2CWcZlkpF3P8wBcdfTSBju0elEjDpM/H7T0WuNfCK23BKtX6r8SVORDAvedpqaq3Gjc9kK1Q3s4vPO9JJREkGt4Zqtitdzh5PDcT+F7QeMUSfcgc1WwIDAQAB");
        $("#payment_form").append('<input type="hidden" name="action" value="submit" />'), $("#payment_form").append('<input type="hidden" name="currency" value="' + t.params.currency + '" />'), $("#payment_form").append('<input type="hidden" name="value" value="' + t.params.value + '" />'), $("#payment_form").append('<input type="hidden" name="cost" value="' + (parseInt(t.params.cost) ? t.params.cost : t.params.value) + '" />'), $("#payment_form").append('<input type="hidden" name="voucher_id" value="' + t.params.voucher_id + '" />'), m.encryptForm("payment_form"), $.ajax({
            url: "/booking/voucher",
            data: $("#payment_form").serialize(),
            dataType: "json",
            type: "POST",
            success: function(e) {
                "OK" == e.status && (location.href = "/gift-cards/success/" + e.promocode_id + "-" + e.secure)
            },
            error: function() {
                t.error()
            }
        })
    }
}
function RespRegistration(e) {
    var t = this;
    t.params = e, t.common = new RespCommon, t.init = function() {
        if ($(".svg-icon-tr-logo").click(function() {
            location.href = "/"
        }), !t.common.check_mobile()) {
            var e = 30,
                i = ($(window).height() - $(".inside").outerHeight() - $(".reg-page-header").outerHeight()) / 2;
            $(".inside").css({
                marginTop: Math.max(i, e)
            })
        }
        if (new RegExp("/community[^-]{1,}", "i").exec(document.referrer) && Set_Cookie("tr_forum_bk", document.referrer, "", "/"), /iPhone|iPad|iPod/i.test(navigator.userAgent) && /Mozilla/i.test(navigator.userAgent)) {
            var n = t.common.query_string();
            n.blocked ? alert("Account is blocked") : n.error && alert("Error: Can't login through Facebook")
        }
        switch (t.params.RegistrationType) {
        case "sign_up":
            t.sign_up();
            break;
        case "referral_sign_up":
            t.common.check_mobile() || $(".inside").css({
                top: -50,
                position: "relative"
            }), t.referral_sign_up();
            break;
        case "login":
            t.login();
            break;
        case "reset_password":
            t.reset_password();
            break;
        case "change_password":
            t.change_password();
            break;
        default:
            return !1
        }
        return $(".inside").transition({
            opacity: 100
        }, 2e3, "easeOutCirc"), "enquiry" == t.params.type && t.common.send_google_event("Booking Conversation", "Redirect - " + t.params.userTypeText, "Not Logged In - " + t.params.enquiryId, {
            nonInteraction: !0
        }), !0
    }, t.init_guide_signup = function() {
        gapi.signin.render("signin_google_g", {
            callback: function(e) {
                t.common.user_google(e, "RespRegistration")
            },
            clientid: "399583607835.apps.googleusercontent.com",
            cookiepolicy: "single_host_origin",
            scope: "https://www.googleapis.com/auth/plus.login",
            width: "wide",
            scope: "https://www.googleapis.com/auth/userinfo.email"
        }), $(".buttons .facebook-up").click(function() {
            t.common.user_facebook("RespRegistration")
        })
    }, t.sign_up = function() {
        t.init_guide_signup(), $("#g_oper").chosen({
            width: "100%",
            no_results_text: "No results matched"
        }), $("#g_country").chosen({
            width: "100%",
            no_results_text: "Country"
        }), $("#traveller").click(function() {
            $(".traveller").removeClass("hidden"), $(".guide,.affiliate").addClass("hidden")
        }), $("#guide").click(function() {
            $(".guide").removeClass("hidden"), $(".traveller,.affiliate").addClass("hidden")
        }), $("#affiliate").click(function() {
            $(".affiliate").removeClass("hidden"), $(".traveller,.guide").addClass("hidden")
        }), "0" == t.common.get_cookie("tr_subscribe") && $("#subscribe").removeAttr("checked");
        var e = function() {
            $("#message-sign-in").text("");
            var e = $("#g_name").val().trim(),
                i = $("#g_email").val().trim(),
                n = $("#g_password_1").val().trim(),
                o = $("#g_password_2").val().trim(),
                a = $("#g_oper").val(),
                s = $('select[name="category"]').val(),
                r = $("#g_company_name").val(),
                l = $("#g_url").val(),
                c = $("#g_country").val(),
                d = $("#subscribe:checked").length,
                u = null;
            if (0 == e.length ? u = "Please enter your name." : 0 != i.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i) ? n.length < 6 ? u = "Enter min. 6 characters for the password." : n != o ? u = "Passwords do not match." : 0 != a.length || $(".guide").hasClass("hidden") ? $(".affiliate").length && !$(".affiliate").hasClass("hidden") && (r = r.trim(), l = l.trim(), 0 == r.length ? u = "Please enter Company / Website name " : 0 == l.length ? u = "Please enter URL / Website " : 0 == c.length && (u = "Please choose your Country")) : u = "Select the operator you currently work for in the menu at the top" : u = "Please enter valid email address.", u)
                $("#message-sign-in").text(u);
            else {
                if ($("#message-sign-in").addClass("noerr"), $("#message-sign-in").text("Please wait..."), $(".traveller").hasClass("hidden"))
                    if ($(".guide").hasClass("hidden")) {
                        if (!$(".affiliate").hasClass("hidden"))
                            var h = {
                                type: "affiliate",
                                company: r,
                                url: l,
                                country: c,
                                name: e,
                                email: i,
                                password: n,
                                subscribe: d
                            }
                    } else
                        var h = {
                            type: "guide",
                            operator_id: a,
                            category: s,
                            name: e,
                            email: i,
                            password: n,
                            subscribe: d
                        };
                else
                    var h = {
                        name: e,
                        email: i,
                        password: n,
                        subscribe: d
                    };
                $.ajax({
                    url: "/travellers/signup",
                    data: h,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        $("#message-sign-in").text(""), $("#message-sign-in").removeClass("noerr"), "OK" == e.status ? window.location.href = "/members/profile" : "repeat" == e.status ? ($("#message-sign-in").text(e.message), $("#traveller_sign_in #g_email").addClass("red-border")) : t.common.error()
                    },
                    error: function() {
                        t.common.error()
                    }
                })
            }
        };
        $("#sign_up form").submit(e), $("#g_send").click(e)
    }, t.referral_sign_up = function() {
        t.init_guide_signup(), $("#referral-hiw-link").fancybox({
            padding: 0,
            margin: 0,
            width: 200,
            onComplete: function() {
                $("#referral-hiw-popup .multi-line-button").click(function() {
                    $.fancybox.close()
                })
            }
        });
        var e = function() {
            $("#message-sign-in").text("");
            var e = $("#g_name").val().trim(),
                i = $("#g_email").val().trim(),
                n = $("#g_password_1").val().trim(),
                o = $("#g_password_2").val().trim(),
                a = null;
            if (0 == e.length ? a = "Please enter your name." : 0 != i.length && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i) ? n.length < 6 ? a = "Enter min. 6 characters for the password." : n != o && (a = "Passwords do not match.") : a = "Please enter valid email address.", a)
                $("#message-sign-in").text(a);
            else {
                $("#message-sign-in").addClass("noerr"), $("#message-sign-in").text("Please wait...");
                var s = {
                    name: e,
                    email: i,
                    password: n
                };
                $.ajax({
                    url: "/travellers/signup",
                    data: s,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        $("#message-sign-in").text(""), $("#message-sign-in").removeClass("noerr"), "OK" == e.status ? location.href = "/members/profile" : "repeat" == e.status ? ($("#message-sign-in").text(e.message), $("#guide_sign_in #g_email").addClass("red-border")) : t.common.error()
                    },
                    error: function() {
                        t.common.error()
                    }
                })
            }
        };
        $("#referral_sign_in form").submit(e), $("#g_send").click(e)
    }, t.login = function() {
        t.init_guide_signup();
        var e = function() {
            $("#message-sign-in").text("");
            var e = $("#g_email").val().trim(),
                i = $("#g_password").val().trim(),
                n = null;
            if (0 == e.length ? n = "Please enter valid email address or username." : i.length < 6 && (n = "Enter min. 6 characters for the password."), n)
                $("#message-sign-in").text(n);
            else {
                $("#message-sign-in").addClass("noerr"), $("#message-sign-in").text("Please wait...");
                var o = {
                    email: e,
                    password: i,
                    type: t.params.type,
                    userType: t.params.userType,
                    enquiryId: t.params.enquiryId
                };
                $.ajax({
                    url: "/travellers/login/all",
                    data: o,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        if ($("#message-sign-in").text(""), $("#message-sign-in").removeClass("noerr"), "OK" == e.status) {
                            var i = {};
                            if (location.search.substr(1).split("&").forEach(function(e) {
                                var t = e.split("=");
                                i[t[0]] = t[1]
                            }), "undefined" != typeof i.red) {
                                var n = i.red;
                                window.location.href = decodeURIComponent(n)
                            } else
                                "operator" == e.type ? location.href = "/dashboard/" : document.referrer.includes("tourradar") && !document.referrer.includes("logoutpage") ? window.location.href = document.referrer : "traveller" == e.type ? window.location.href = "/members/profile" : "admin" == e.type ? window.location.href = "/admin/overview/" : $("#message-sign-in").text("Unknown user type.")
                        } else
                            "blocked" == e.status ? alert("Your account has been blocked.") : "wrong" == e.status ? $("#message-sign-in").text("Wrong login data.") : "wrong_user" == e.status ? $("#message-sign-in").text("You do not have permission to view this booking. Please login with the email: " + t.params.email + " to be able to view the enquiry.") : t.common.error()
                    },
                    error: function() {
                        t.common.error()
                    }
                })
            }
        };
        $("#tag-login form").submit(e), $("#g_send").click(e)
    }, t.reset_password = function() {
        var e = function() {
            $("#message-sign-in").text("");
            var e = $("#g_email").val().trim(),
                i = "",
                n = $(".input-types input[name=type]:checked").val().trim(),
                o = null,
                a = e.length > 0 && /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e);
            if ("user" == n ? e.length > 0 && !a ? (i = e, e = "") : a || (o = "Please enter valid username or email address.") : a || (o = "Please enter valid email address."), o)
                $("#message-sign-in").text(o);
            else {
                $("#message-sign-in").addClass("noerr"), $("#message-sign-in").text("Please wait...");
                var s = {
                    email: e,
                    username: i,
                    type: n
                };
                $.ajax({
                    url: "/travellers/remind_password",
                    data: s,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        $("#message-sign-in").removeClass("noerr"), $("#message-sign-in").text(""), "OK" == e.status ? ($("#reset-password form").html("<h2>We've sent you a reset password email" + (e.email ? " to " + e.email : "") + "</h2><p>Please, check your email and click the link to reset your password</p><p>If it takes more then 5 minutes please check your junk mail</p>"), $("#message-sign-in").text("")) : "error" == e.status ? $("#message-sign-in").text(e.message) : t.common.error()
                    },
                    error: function() {
                        t.common.error()
                    }
                })
            }
        };
        $("#reset-password").find(".input-types input[name=type]").change(function() {
            var e = "user" == $(this).val() ? "Enter your email or username" : "Enter your email";
            $("#g_email").prop("placeholder", e)
        }), $("#reset-password form").submit(e), $("#g_send").click(e)
    }, t.change_password = function() {
        var e = function() {
            $("#message-sign-in").text("");
            var e = $("#g_password").val().trim(),
                i = ($("#g_code").val(), null);
            if (e.length < 6 && (i = "Enter min. 6 characters for the password."), i)
                $("#message-sign-in").text(i);
            else {
                $("#message-sign-in").addClass("noerr"), $("#message-sign-in").text("Please wait...");
                var n = {
                    password: e
                };
                $.ajax({
                    url: location.href,
                    data: n,
                    dataType: "json",
                    type: "POST",
                    success: function(e) {
                        $("#message-sign-in").removeClass("noerr"), $("#message-sign-in").text(""), "OK" == e.status ? location.href = e.redirect || "/members/profile" : t.common.error()
                    },
                    error: function() {
                        t.common.error()
                    }
                })
            }
        };
        $("#reset-password form").submit(e), $("#g_send").click(e)
    }
}
!function(e, t) {
    "function" == typeof define && define.amd ? define([], function() {
        return e.svg4everybody = t()
    }) : "object" == typeof exports ? module.exports = t() : e.svg4everybody = t()
}(this, function() {
    function e(e, t) {
        if (t) {
            var i = !e.getAttribute("viewBox") && t.getAttribute("viewBox"),
                n = document.createDocumentFragment(),
                o = t.cloneNode(!0);
            for (i && e.setAttribute("viewBox", i); o.childNodes.length;)
                n.appendChild(o.firstChild);
            e.appendChild(n)
        }
    }
    function t(t) {
        t.onreadystatechange = function() {
            if (4 === t.readyState) {
                var i = document.createElement("x");
                i.innerHTML = t.responseText, t.s.splice(0).map(function(t) {
                    e(t[0], i.querySelector("#" + t[1].replace(/(\W)/g, "\\$1")))
                })
            }
        }, t.onreadystatechange()
    }
    function i(i) {
        function n() {
            for (var i = 0; i < o.length; ++i) {
                var c = o[i],
                    d = c.parentNode;
                if (d && /svg/i.test(d.nodeName)) {
                    var u = c.getAttribute("xlink:href");
                    if (a && (!s || s(u, d, c))) {
                        var h = u.split("#"),
                            p = h[0],
                            f = h[1];
                        if (d.removeChild(c), p.length) {
                            var m = l[p] = l[p] || new XMLHttpRequest;
                            m.s || (m.s = [], m.open("GET", p), m.send()), m.s.push([d, f]), t(m)
                        } else
                            e(d, document.getElementById(f))
                    }
                }
            }
            r(n, 17)
        }
        var i = i || {},
            o = document.getElementsByTagName("use"),
            a = "polyfill" in i ? i.polyfill : /\bEdge\/12\b|\bTrident\/[567]\b|\bVersion\/7.0 Safari\b/.test(navigator.userAgent) || (navigator.userAgent.match(/AppleWebKit\/(\d+)/) || [])[1] < 537,
            s = i.validate,
            r = window.requestAnimationFrame || setTimeout,
            l = {};
        a && n()
    }
    return i
}), svg4everybody(), function(e, t) {
    function i(e) {
        var t = fe[e] = {};
        return X.each(e.split(te), function(e, i) {
            t[i] = !0
        }), t
    }
    function n(e, i, n) {
        if (n === t && 1 === e.nodeType) {
            var o = "data-" + i.replace(ge, "-$1").toLowerCase();
            if (n = e.getAttribute(o), "string" == typeof n) {
                try {
                    n = "true" === n || "false" !== n && ("null" === n ? null : +n + "" === n ? +n : me.test(n) ? X.parseJSON(n) : n)
                } catch (a) {}
                X.data(e, i, n)
            } else
                n = t
        }
        return n
    }
    function o(e) {
        var t;
        for (t in e)
            if (("data" !== t || !X.isEmptyObject(e[t])) && "toJSON" !== t)
                return !1;
        return !0
    }
    function a() {
        return !1
    }
    function s() {
        return !0
    }
    function r(e) {
        return !e || !e.parentNode || 11 === e.parentNode.nodeType
    }
    function l(e, t) {
        do e = e[t];
        while (e && 1 !== e.nodeType);
        return e
    }
    function c(e, t, i) {
        if (t = t || 0, X.isFunction(t))
            return X.grep(e, function(e, n) {
                var o = !!t.call(e, n, e);
                return o === i
            });
        if (t.nodeType)
            return X.grep(e, function(e, n) {
                return e === t === i
            });
        if ("string" == typeof t) {
            var n = X.grep(e, function(e) {
                return 1 === e.nodeType
            });
            if (Me.test(t))
                return X.filter(t, n, !i);
            t = X.filter(t, n)
        }
        return X.grep(e, function(e, n) {
            return X.inArray(e, t) >= 0 === i
        })
    }
    function d(e) {
        var t = Le.split("|"),
            i = e.createDocumentFragment();
        if (i.createElement)
            for (; t.length;)
                i.createElement(t.pop());
        return i
    }
    function u(e, t) {
        return e.getElementsByTagName(t)[0] || e.appendChild(e.ownerDocument.createElement(t))
    }
    function h(e, t) {
        if (1 === t.nodeType && X.hasData(e)) {
            var i,
                n,
                o,
                a = X._data(e),
                s = X._data(t, a),
                r = a.events;
            if (r) {
                delete s.handle, s.events = {};
                for (i in r)
                    for (n = 0, o = r[i].length; n < o; n++)
                        X.event.add(t, i, r[i][n])
            }
            s.data && (s.data = X.extend({}, s.data))
        }
    }
    function p(e, t) {
        var i;
        1 === t.nodeType && (t.clearAttributes && t.clearAttributes(), t.mergeAttributes && t.mergeAttributes(e), i = t.nodeName.toLowerCase(), "object" === i ? (t.parentNode && (t.outerHTML = e.outerHTML), X.support.html5Clone && e.innerHTML && !X.trim(t.innerHTML) && (t.innerHTML = e.innerHTML)) : "input" === i && Qe.test(e.type) ? (t.defaultChecked = t.checked = e.checked, t.value !== e.value && (t.value = e.value)) : "option" === i ? t.selected = e.defaultSelected : "input" === i || "textarea" === i ? t.defaultValue = e.defaultValue : "script" === i && t.text !== e.text && (t.text = e.text), t.removeAttribute(X.expando))
    }
    function f(e) {
        return "undefined" != typeof e.getElementsByTagName ? e.getElementsByTagName("*") : "undefined" != typeof e.querySelectorAll ? e.querySelectorAll("*") : [];
    }
    function m(e) {
        Qe.test(e.type) && (e.defaultChecked = e.checked)
    }
    function g(e, t) {
        if (t in e)
            return t;
        for (var i = t.charAt(0).toUpperCase() + t.slice(1), n = t, o = vt.length; o--;)
            if (t = vt[o] + i, t in e)
                return t;
        return n
    }
    function v(e, t) {
        return e = t || e, "none" === X.css(e, "display") || !X.contains(e.ownerDocument, e)
    }
    function _(e, t) {
        for (var i, n, o = [], a = 0, s = e.length; a < s; a++)
            i = e[a], i.style && (o[a] = X._data(i, "olddisplay"), t ? (!o[a] && "none" === i.style.display && (i.style.display = ""), "" === i.style.display && v(i) && (o[a] = X._data(i, "olddisplay", $(i.nodeName)))) : (n = it(i, "display"), !o[a] && "none" !== n && X._data(i, "olddisplay", n)));
        for (a = 0; a < s; a++)
            i = e[a], i.style && (t && "none" !== i.style.display && "" !== i.style.display || (i.style.display = t ? o[a] || "" : "none"));
        return e
    }
    function b(e, t, i) {
        var n = dt.exec(t);
        return n ? Math.max(0, n[1] - (i || 0)) + (n[2] || "px") : t
    }
    function w(e, t, i, n) {
        for (var o = i === (n ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0; o < 4; o += 2)
            "margin" === i && (a += X.css(e, i + gt[o], !0)), n ? ("content" === i && (a -= parseFloat(it(e, "padding" + gt[o])) || 0), "margin" !== i && (a -= parseFloat(it(e, "border" + gt[o] + "Width")) || 0)) : (a += parseFloat(it(e, "padding" + gt[o])) || 0, "padding" !== i && (a += parseFloat(it(e, "border" + gt[o] + "Width")) || 0));
        return a
    }
    function y(e, t, i) {
        var n = "width" === t ? e.offsetWidth : e.offsetHeight,
            o = !0,
            a = X.support.boxSizing && "border-box" === X.css(e, "boxSizing");
        if (n <= 0 || null == n) {
            if (n = it(e, t), (n < 0 || null == n) && (n = e.style[t]), ut.test(n))
                return n;
            o = a && (X.support.boxSizingReliable || n === e.style[t]), n = parseFloat(n) || 0
        }
        return n + w(e, t, i || (a ? "border" : "content"), o) + "px"
    }
    function $(e) {
        if (pt[e])
            return pt[e];
        var t = X("<" + e + ">").appendTo(H.body),
            i = t.css("display");
        return t.remove(), "none" !== i && "" !== i || (nt = H.body.appendChild(nt || X.extend(H.createElement("iframe"), {
            frameBorder: 0,
            width: 0,
            height: 0
        })), ot && nt.createElement || (ot = (nt.contentWindow || nt.contentDocument).document, ot.write("<!doctype html><html><body>"), ot.close()), t = ot.body.appendChild(ot.createElement(e)), i = it(t, "display"), H.body.removeChild(nt)), pt[e] = i, i
    }
    function k(e, t, i, n) {
        var o;
        if (X.isArray(t))
            X.each(t, function(t, o) {
                i || wt.test(e) ? n(e, o) : k(e + "[" + ("object" == typeof o ? t : "") + "]", o, i, n)
            });
        else if (i || "object" !== X.type(t))
            n(e, t);
        else
            for (o in t)
                k(e + "[" + o + "]", t[o], i, n)
    }
    function x(e) {
        return function(t, i) {
            "string" != typeof t && (i = t, t = "*");
            var n,
                o,
                a,
                s = t.toLowerCase().split(te),
                r = 0,
                l = s.length;
            if (X.isFunction(i))
                for (; r < l; r++)
                    n = s[r], a = /^\+/.test(n), a && (n = n.substr(1) || "*"), o = e[n] = e[n] || [], o[a ? "unshift" : "push"](i)
        }
    }
    function C(e, i, n, o, a, s) {
        a = a || i.dataTypes[0], s = s || {}, s[a] = !0;
        for (var r, l = e[a], c = 0, d = l ? l.length : 0, u = e === Mt; c < d && (u || !r); c++)
            r = l[c](i, n, o), "string" == typeof r && (!u || s[r] ? r = t : (i.dataTypes.unshift(r), r = C(e, i, n, o, r, s)));
        return (u || !r) && !s["*"] && (r = C(e, i, n, o, "*", s)), r
    }
    function T(e, i) {
        var n,
            o,
            a = X.ajaxSettings.flatOptions || {};
        for (n in i)
            i[n] !== t && ((a[n] ? e : o || (o = {}))[n] = i[n]);
        o && X.extend(!0, e, o)
    }
    function I(e, i, n) {
        var o,
            a,
            s,
            r,
            l = e.contents,
            c = e.dataTypes,
            d = e.responseFields;
        for (a in d)
            a in n && (i[d[a]] = n[a]);
        for (; "*" === c[0];)
            c.shift(), o === t && (o = e.mimeType || i.getResponseHeader("content-type"));
        if (o)
            for (a in l)
                if (l[a] && l[a].test(o)) {
                    c.unshift(a);
                    break
                }
        if (c[0] in n)
            s = c[0];
        else {
            for (a in n) {
                if (!c[0] || e.converters[a + " " + c[0]]) {
                    s = a;
                    break
                }
                r || (r = a)
            }
            s = s || r
        }
        if (s)
            return s !== c[0] && c.unshift(s), n[s]
    }
    function S(e, t) {
        var i,
            n,
            o,
            a,
            s = e.dataTypes.slice(),
            r = s[0],
            l = {},
            c = 0;
        if (e.dataFilter && (t = e.dataFilter(t, e.dataType)), s[1])
            for (i in e.converters)
                l[i.toLowerCase()] = e.converters[i];
        for (; o = s[++c];)
            if ("*" !== o) {
                if ("*" !== r && r !== o) {
                    if (i = l[r + " " + o] || l["* " + o], !i)
                        for (n in l)
                            if (a = n.split(" "), a[1] === o && (i = l[r + " " + a[0]] || l["* " + a[0]])) {
                                i === !0 ? i = l[n] : l[n] !== !0 && (o = a[0], s.splice(c--, 0, o));
                                break
                            }
                    if (i !== !0)
                        if (i && e["throws"])
                            t = i(t);
                        else
                            try {
                                t = i(t)
                            } catch (d) {
                                return {
                                    state: "parsererror",
                                    error: i ? d : "No conversion from " + r + " to " + o
                                }
                            }
                }
                r = o
            }
        return {
            state: "success",
            data: t
        }
    }
    function P() {
        try {
            return new e.XMLHttpRequest
        } catch (t) {}
    }
    function D() {
        try {
            return new e.ActiveXObject("Microsoft.XMLHTTP")
        } catch (t) {}
    }
    function A() {
        return setTimeout(function() {
            Yt = t
        }, 0), Yt = X.now()
    }
    function O(e, t) {
        X.each(t, function(t, i) {
            for (var n = (Jt[t] || []).concat(Jt["*"]), o = 0, a = n.length; o < a; o++)
                if (n[o].call(e, t, i))
                    return
        })
    }
    function j(e, t, i) {
        var n,
            o = 0,
            a = Xt.length,
            s = X.Deferred().always(function() {
                delete r.elem
            }),
            r = function() {
                for (var t = Yt || A(), i = Math.max(0, l.startTime + l.duration - t), n = i / l.duration || 0, o = 1 - n, a = 0, r = l.tweens.length; a < r; a++)
                    l.tweens[a].run(o);
                return s.notifyWith(e, [l, o, i]), o < 1 && r ? i : (s.resolveWith(e, [l]), !1)
            },
            l = s.promise({
                elem: e,
                props: X.extend({}, t),
                opts: X.extend(!0, {
                    specialEasing: {}
                }, i),
                originalProperties: t,
                originalOptions: i,
                startTime: Yt || A(),
                duration: i.duration,
                tweens: [],
                createTween: function(t, i, n) {
                    var o = X.Tween(e, l.opts, t, i, l.opts.specialEasing[t] || l.opts.easing);
                    return l.tweens.push(o), o
                },
                stop: function(t) {
                    for (var i = 0, n = t ? l.tweens.length : 0; i < n; i++)
                        l.tweens[i].run(1);
                    return t ? s.resolveWith(e, [l, t]) : s.rejectWith(e, [l, t]), this
                }
            }),
            c = l.props;
        for (z(c, l.opts.specialEasing); o < a; o++)
            if (n = Xt[o].call(l, e, c, l.opts))
                return n;
        return O(l, c), X.isFunction(l.opts.start) && l.opts.start.call(e, l), X.fx.timer(X.extend(r, {
            anim: l,
            queue: l.opts.queue,
            elem: e
        })), l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always)
    }
    function z(e, t) {
        var i,
            n,
            o,
            a,
            s;
        for (i in e)
            if (n = X.camelCase(i), o = t[n], a = e[i], X.isArray(a) && (o = a[1], a = e[i] = a[0]), i !== n && (e[n] = a, delete e[i]), s = X.cssHooks[n], s && "expand" in s) {
                a = s.expand(a), delete e[n];
                for (i in a)
                    i in e || (e[i] = a[i], t[i] = o)
            } else
                t[n] = o
    }
    function E(e, t, i) {
        var n,
            o,
            a,
            s,
            r,
            l,
            c,
            d,
            u,
            h = this,
            p = e.style,
            f = {},
            m = [],
            g = e.nodeType && v(e);
        i.queue || (d = X._queueHooks(e, "fx"), null == d.unqueued && (d.unqueued = 0, u = d.empty.fire, d.empty.fire = function() {
            d.unqueued || u()
        }), d.unqueued++, h.always(function() {
            h.always(function() {
                d.unqueued--, X.queue(e, "fx").length || d.empty.fire()
            })
        })), 1 === e.nodeType && ("height" in t || "width" in t) && (i.overflow = [p.overflow, p.overflowX, p.overflowY], "inline" === X.css(e, "display") && "none" === X.css(e, "float") && (X.support.inlineBlockNeedsLayout && "inline" !== $(e.nodeName) ? p.zoom = 1 : p.display = "inline-block")), i.overflow && (p.overflow = "hidden", X.support.shrinkWrapBlocks || h.done(function() {
            p.overflow = i.overflow[0], p.overflowX = i.overflow[1], p.overflowY = i.overflow[2]
        }));
        for (n in t)
            if (a = t[n], Qt.exec(a)) {
                if (delete t[n], l = l || "toggle" === a, a === (g ? "hide" : "show"))
                    continue;
                m.push(n)
            }
        if (s = m.length) {
            r = X._data(e, "fxshow") || X._data(e, "fxshow", {}), "hidden" in r && (g = r.hidden), l && (r.hidden = !g), g ? X(e).show() : h.done(function() {
                X(e).hide()
            }), h.done(function() {
                var t;
                X.removeData(e, "fxshow", !0);
                for (t in f)
                    X.style(e, t, f[t])
            });
            for (n = 0; n < s; n++)
                o = m[n], c = h.createTween(o, g ? r[o] : 0), f[o] = r[o] || X.style(e, o), o in r || (r[o] = c.start, g && (c.end = c.start, c.start = "width" === o || "height" === o ? 1 : 0))
        }
    }
    function M(e, t, i, n, o) {
        return new M.prototype.init(e, t, i, n, o)
    }
    function N(e, t) {
        var i,
            n = {
                height: e
            },
            o = 0;
        for (t = t ? 1 : 0; o < 4; o += 2 - t)
            i = gt[o], n["margin" + i] = n["padding" + i] = e;
        return t && (n.opacity = n.width = e), n
    }
    function F(e) {
        return X.isWindow(e) ? e : 9 === e.nodeType && (e.defaultView || e.parentWindow)
    }
    var L,
        R,
        H = e.document,
        B = e.location,
        q = e.navigator,
        W = e.jQuery,
        U = e.$,
        K = Array.prototype.push,
        Y = Array.prototype.slice,
        Z = Array.prototype.indexOf,
        Q = Object.prototype.toString,
        V = Object.prototype.hasOwnProperty,
        G = String.prototype.trim,
        X = function(e, t) {
            return new X.fn.init(e, t, L)
        },
        J = /[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,
        ee = /\S/,
        te = /\s+/,
        ie = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        ne = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,
        oe = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        ae = /^[\],:{}\s]*$/,
        se = /(?:^|:|,)(?:\s*\[)+/g,
        re = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
        le = /"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,
        ce = /^-ms-/,
        de = /-([\da-z])/gi,
        ue = function(e, t) {
            return (t + "").toUpperCase()
        },
        he = function() {
            H.addEventListener ? (H.removeEventListener("DOMContentLoaded", he, !1), X.ready()) : "complete" === H.readyState && (H.detachEvent("onreadystatechange", he), X.ready())
        },
        pe = {};
    X.fn = X.prototype = {
        constructor: X,
        init: function(e, i, n) {
            var o,
                a,
                s;
            if (!e)
                return this;
            if (e.nodeType)
                return this.context = this[0] = e, this.length = 1, this;
            if ("string" == typeof e) {
                if (o = "<" === e.charAt(0) && ">" === e.charAt(e.length - 1) && e.length >= 3 ? [null, e, null] : ne.exec(e), o && (o[1] || !i)) {
                    if (o[1])
                        return i = i instanceof X ? i[0] : i, s = i && i.nodeType ? i.ownerDocument || i : H, e = X.parseHTML(o[1], s, !0), oe.test(o[1]) && X.isPlainObject(i) && this.attr.call(e, i, !0), X.merge(this, e);
                    if (a = H.getElementById(o[2]), a && a.parentNode) {
                        if (a.id !== o[2])
                            return n.find(e);
                        this.length = 1, this[0] = a
                    }
                    return this.context = H, this.selector = e, this
                }
                return !i || i.jquery ? (i || n).find(e) : this.constructor(i).find(e)
            }
            return X.isFunction(e) ? n.ready(e) : (e.selector !== t && (this.selector = e.selector, this.context = e.context), X.makeArray(e, this))
        },
        selector: "",
        jquery: "1.8.3",
        length: 0,
        size: function() {
            return this.length
        },
        toArray: function() {
            return Y.call(this)
        },
        get: function(e) {
            return null == e ? this.toArray() : e < 0 ? this[this.length + e] : this[e]
        },
        pushStack: function(e, t, i) {
            var n = X.merge(this.constructor(), e);
            return n.prevObject = this, n.context = this.context, "find" === t ? n.selector = this.selector + (this.selector ? " " : "") + i : t && (n.selector = this.selector + "." + t + "(" + i + ")"), n
        },
        each: function(e, t) {
            return X.each(this, e, t)
        },
        ready: function(e) {
            return X.ready.promise().done(e), this
        },
        eq: function(e) {
            return e = +e, e === -1 ? this.slice(e) : this.slice(e, e + 1)
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        slice: function() {
            return this.pushStack(Y.apply(this, arguments), "slice", Y.call(arguments).join(","))
        },
        map: function(e) {
            return this.pushStack(X.map(this, function(t, i) {
                return e.call(t, i, t)
            }))
        },
        end: function() {
            return this.prevObject || this.constructor(null)
        },
        push: K,
        sort: [].sort,
        splice: [].splice
    }, X.fn.init.prototype = X.fn, X.extend = X.fn.extend = function() {
        var e,
            i,
            n,
            o,
            a,
            s,
            r = arguments[0] || {},
            l = 1,
            c = arguments.length,
            d = !1;
        for ("boolean" == typeof r && (d = r, r = arguments[1] || {}, l = 2), "object" != typeof r && !X.isFunction(r) && (r = {}), c === l && (r = this, --l); l < c; l++)
            if (null != (e = arguments[l]))
                for (i in e)
                    n = r[i], o = e[i], r !== o && (d && o && (X.isPlainObject(o) || (a = X.isArray(o))) ? (a ? (a = !1, s = n && X.isArray(n) ? n : []) : s = n && X.isPlainObject(n) ? n : {}, r[i] = X.extend(d, s, o)) : o !== t && (r[i] = o));
        return r
    }, X.extend({
        noConflict: function(t) {
            return e.$ === X && (e.$ = U), t && e.jQuery === X && (e.jQuery = W), X
        },
        isReady: !1,
        readyWait: 1,
        holdReady: function(e) {
            e ? X.readyWait++ : X.ready(!0)
        },
        ready: function(e) {
            if (e === !0 ? !--X.readyWait : !X.isReady) {
                if (!H.body)
                    return setTimeout(X.ready, 1);
                X.isReady = !0, e !== !0 && --X.readyWait > 0 || (R.resolveWith(H, [X]), X.fn.trigger && X(H).trigger("ready").off("ready"))
            }
        },
        isFunction: function(e) {
            return "function" === X.type(e)
        },
        isArray: Array.isArray || function(e) {
            return "array" === X.type(e)
        },
        isWindow: function(e) {
            return null != e && e == e.window
        },
        isNumeric: function(e) {
            return !isNaN(parseFloat(e)) && isFinite(e)
        },
        type: function(e) {
            return null == e ? String(e) : pe[Q.call(e)] || "object"
        },
        isPlainObject: function(e) {
            if (!e || "object" !== X.type(e) || e.nodeType || X.isWindow(e))
                return !1;
            try {
                if (e.constructor && !V.call(e, "constructor") && !V.call(e.constructor.prototype, "isPrototypeOf"))
                    return !1
            } catch (i) {
                return !1
            }
            var n;
            for (n in e)
                ;
            return n === t || V.call(e, n)
        },
        isEmptyObject: function(e) {
            var t;
            for (t in e)
                return !1;
            return !0
        },
        error: function(e) {
            throw new Error(e)
        },
        parseHTML: function(e, t, i) {
            var n;
            return e && "string" == typeof e ? ("boolean" == typeof t && (i = t, t = 0), t = t || H, (n = oe.exec(e)) ? [t.createElement(n[1])] : (n = X.buildFragment([e], t, i ? null : []), X.merge([], (n.cacheable ? X.clone(n.fragment) : n.fragment).childNodes))) : null
        },
        parseJSON: function(t) {
            return t && "string" == typeof t ? (t = X.trim(t), e.JSON && e.JSON.parse ? e.JSON.parse(t) : ae.test(t.replace(re, "@").replace(le, "]").replace(se, "")) ? new Function("return " + t)() : void X.error("Invalid JSON: " + t)) : null
        },
        parseXML: function(i) {
            var n,
                o;
            if (!i || "string" != typeof i)
                return null;
            try {
                e.DOMParser ? (o = new DOMParser, n = o.parseFromString(i, "text/xml")) : (n = new ActiveXObject("Microsoft.XMLDOM"), n.async = "false", n.loadXML(i))
            } catch (a) {
                n = t
            }
            return (!n || !n.documentElement || n.getElementsByTagName("parsererror").length) && X.error("Invalid XML: " + i), n
        },
        noop: function() {},
        globalEval: function(t) {
            t && ee.test(t) && (e.execScript || function(t) {
                e.eval.call(e, t)
            })(t)
        },
        camelCase: function(e) {
            return e.replace(ce, "ms-").replace(de, ue)
        },
        nodeName: function(e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
        },
        each: function(e, i, n) {
            var o,
                a = 0,
                s = e.length,
                r = s === t || X.isFunction(e);
            if (n)
                if (r) {
                    for (o in e)
                        if (i.apply(e[o], n) === !1)
                            break
                } else
                    for (; a < s && i.apply(e[a++], n) !== !1;)
                        ;
            else if (r) {
                for (o in e)
                    if (i.call(e[o], o, e[o]) === !1)
                        break
            } else
                for (; a < s && i.call(e[a], a, e[a++]) !== !1;)
                    ;
            return e
        },
        trim: G && !G.call("\ufeff") ? function(e) {
            return null == e ? "" : G.call(e)
        } : function(e) {
            return null == e ? "" : (e + "").replace(ie, "")
        },
        makeArray: function(e, t) {
            var i,
                n = t || [];
            return null != e && (i = X.type(e), null == e.length || "string" === i || "function" === i || "regexp" === i || X.isWindow(e) ? K.call(n, e) : X.merge(n, e)), n
        },
        inArray: function(e, t, i) {
            var n;
            if (t) {
                if (Z)
                    return Z.call(t, e, i);
                for (n = t.length, i = i ? i < 0 ? Math.max(0, n + i) : i : 0; i < n; i++)
                    if (i in t && t[i] === e)
                        return i
            }
            return -1
        },
        merge: function(e, i) {
            var n = i.length,
                o = e.length,
                a = 0;
            if ("number" == typeof n)
                for (; a < n; a++)
                    e[o++] = i[a];
            else
                for (; i[a] !== t;)
                    e[o++] = i[a++];
            return e.length = o, e
        },
        grep: function(e, t, i) {
            var n,
                o = [],
                a = 0,
                s = e.length;
            for (i = !!i; a < s; a++)
                n = !!t(e[a], a), i !== n && o.push(e[a]);
            return o
        },
        map: function(e, i, n) {
            var o,
                a,
                s = [],
                r = 0,
                l = e.length,
                c = e instanceof X || l !== t && "number" == typeof l && (l > 0 && e[0] && e[l - 1] || 0 === l || X.isArray(e));
            if (c)
                for (; r < l; r++)
                    o = i(e[r], r, n), null != o && (s[s.length] = o);
            else
                for (a in e)
                    o = i(e[a], a, n), null != o && (s[s.length] = o);
            return s.concat.apply([], s)
        },
        guid: 1,
        proxy: function(e, i) {
            var n,
                o,
                a;
            return "string" == typeof i && (n = e[i], i = e, e = n), X.isFunction(e) ? (o = Y.call(arguments, 2), a = function() {
                return e.apply(i, o.concat(Y.call(arguments)))
            }, a.guid = e.guid = e.guid || X.guid++, a) : t
        },
        access: function(e, i, n, o, a, s, r) {
            var l,
                c = null == n,
                d = 0,
                u = e.length;
            if (n && "object" == typeof n) {
                for (d in n)
                    X.access(e, i, d, n[d], 1, s, o);
                a = 1
            } else if (o !== t) {
                if (l = r === t && X.isFunction(o), c && (l ? (l = i, i = function(e, t, i) {
                    return l.call(X(e), i)
                }) : (i.call(e, o), i = null)), i)
                    for (; d < u; d++)
                        i(e[d], n, l ? o.call(e[d], d, i(e[d], n)) : o, r);
                a = 1
            }
            return a ? e : c ? i.call(e) : u ? i(e[0], n) : s
        },
        now: function() {
            return (new Date).getTime()
        }
    }), X.ready.promise = function(t) {
        if (!R)
            if (R = X.Deferred(), "complete" === H.readyState)
                setTimeout(X.ready, 1);
            else if (H.addEventListener)
                H.addEventListener("DOMContentLoaded", he, !1), e.addEventListener("load", X.ready, !1);
            else {
                H.attachEvent("onreadystatechange", he), e.attachEvent("onload", X.ready);
                var i = !1;
                try {
                    i = null == e.frameElement && H.documentElement
                } catch (n) {}
                i && i.doScroll && function o() {
                    if (!X.isReady) {
                        try {
                            i.doScroll("left")
                        } catch (e) {
                            return setTimeout(o, 50)
                        }
                        X.ready()
                    }
                }()
            }
        return R.promise(t)
    }, X.each("Boolean Number String Function Array Date RegExp Object".split(" "), function(e, t) {
        pe["[object " + t + "]"] = t.toLowerCase()
    }), L = X(H);
    var fe = {};
    X.Callbacks = function(e) {
        e = "string" == typeof e ? fe[e] || i(e) : X.extend({}, e);
        var n,
            o,
            a,
            s,
            r,
            l,
            c = [],
            d = !e.once && [],
            u = function(t) {
                for (n = e.memory && t, o = !0, l = s || 0, s = 0, r = c.length, a = !0; c && l < r; l++)
                    if (c[l].apply(t[0], t[1]) === !1 && e.stopOnFalse) {
                        n = !1;
                        break
                    }
                a = !1, c && (d ? d.length && u(d.shift()) : n ? c = [] : h.disable())
            },
            h = {
                add: function() {
                    if (c) {
                        var t = c.length;
                        !function i(t) {
                            X.each(t, function(t, n) {
                                var o = X.type(n);
                                "function" === o ? (!e.unique || !h.has(n)) && c.push(n) : n && n.length && "string" !== o && i(n)
                            })
                        }(arguments), a ? r = c.length : n && (s = t, u(n))
                    }
                    return this
                },
                remove: function() {
                    return c && X.each(arguments, function(e, t) {
                        for (var i; (i = X.inArray(t, c, i)) > -1;)
                            c.splice(i, 1), a && (i <= r && r--, i <= l && l--)
                    }), this
                },
                has: function(e) {
                    return X.inArray(e, c) > -1
                },
                empty: function() {
                    return c = [], this
                },
                disable: function() {
                    return c = d = n = t, this
                },
                disabled: function() {
                    return !c
                },
                lock: function() {
                    return d = t, n || h.disable(), this
                },
                locked: function() {
                    return !d
                },
                fireWith: function(e, t) {
                    return t = t || [], t = [e, t.slice ? t.slice() : t], c && (!o || d) && (a ? d.push(t) : u(t)), this
                },
                fire: function() {
                    return h.fireWith(this, arguments), this
                },
                fired: function() {
                    return !!o
                }
            };
        return h
    }, X.extend({
        Deferred: function(e) {
            var t = [["resolve", "done", X.Callbacks("once memory"), "resolved"], ["reject", "fail", X.Callbacks("once memory"), "rejected"], ["notify", "progress", X.Callbacks("memory")]],
                i = "pending",
                n = {
                    state: function() {
                        return i
                    },
                    always: function() {
                        return o.done(arguments).fail(arguments), this
                    },
                    then: function() {
                        var e = arguments;
                        return X.Deferred(function(i) {
                            X.each(t, function(t, n) {
                                var a = n[0],
                                    s = e[t];
                                o[n[1]](X.isFunction(s) ? function() {
                                    var e = s.apply(this, arguments);
                                    e && X.isFunction(e.promise) ? e.promise().done(i.resolve).fail(i.reject).progress(i.notify) : i[a + "With"](this === o ? i : this, [e])
                                } : i[a])
                            }), e = null
                        }).promise()
                    },
                    promise: function(e) {
                        return null != e ? X.extend(e, n) : n
                    }
                },
                o = {};
            return n.pipe = n.then, X.each(t, function(e, a) {
                var s = a[2],
                    r = a[3];
                n[a[1]] = s.add, r && s.add(function() {
                    i = r
                }, t[1 ^ e][2].disable, t[2][2].lock), o[a[0]] = s.fire, o[a[0] + "With"] = s.fireWith
            }), n.promise(o), e && e.call(o, o), o
        },
        when: function(e) {
            var t,
                i,
                n,
                o = 0,
                a = Y.call(arguments),
                s = a.length,
                r = 1 !== s || e && X.isFunction(e.promise) ? s : 0,
                l = 1 === r ? e : X.Deferred(),
                c = function(e, i, n) {
                    return function(o) {
                        i[e] = this, n[e] = arguments.length > 1 ? Y.call(arguments) : o, n === t ? l.notifyWith(i, n) : --r || l.resolveWith(i, n)
                    }
                };
            if (s > 1)
                for (t = new Array(s), i = new Array(s), n = new Array(s); o < s; o++)
                    a[o] && X.isFunction(a[o].promise) ? a[o].promise().done(c(o, n, a)).fail(l.reject).progress(c(o, i, t)) : --r;
            return r || l.resolveWith(n, a), l.promise()
        }
    }), X.support = function() {
        var t,
            i,
            n,
            o,
            a,
            s,
            r,
            l,
            c,
            d,
            u,
            h = H.createElement("div");
        if (h.setAttribute("className", "t"), h.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", i = h.getElementsByTagName("*"), n = h.getElementsByTagName("a")[0], !i || !n || !i.length)
            return {};
        o = H.createElement("select"), a = o.appendChild(H.createElement("option")), s = h.getElementsByTagName("input")[0], n.style.cssText = "top:1px;float:left;opacity:.5", t = {
            leadingWhitespace: 3 === h.firstChild.nodeType,
            tbody: !h.getElementsByTagName("tbody").length,
            htmlSerialize: !!h.getElementsByTagName("link").length,
            style: /top/.test(n.getAttribute("style")),
            hrefNormalized: "/a" === n.getAttribute("href"),
            opacity: /^0.5/.test(n.style.opacity),
            cssFloat: !!n.style.cssFloat,
            checkOn: "on" === s.value,
            optSelected: a.selected,
            getSetAttribute: "t" !== h.className,
            enctype: !!H.createElement("form").enctype,
            html5Clone: "<:nav></:nav>" !== H.createElement("nav").cloneNode(!0).outerHTML,
            boxModel: "CSS1Compat" === H.compatMode,
            submitBubbles: !0,
            changeBubbles: !0,
            focusinBubbles: !1,
            deleteExpando: !0,
            noCloneEvent: !0,
            inlineBlockNeedsLayout: !1,
            shrinkWrapBlocks: !1,
            reliableMarginRight: !0,
            boxSizingReliable: !0,
            pixelPosition: !1
        }, s.checked = !0, t.noCloneChecked = s.cloneNode(!0).checked, o.disabled = !0, t.optDisabled = !a.disabled;
        try {
            delete h.test
        } catch (p) {
            t.deleteExpando = !1
        }
        if (!h.addEventListener && h.attachEvent && h.fireEvent && (h.attachEvent("onclick", u = function() {
            t.noCloneEvent = !1
        }), h.cloneNode(!0).fireEvent("onclick"), h.detachEvent("onclick", u)), s = H.createElement("input"), s.value = "t", s.setAttribute("type", "radio"), t.radioValue = "t" === s.value, s.setAttribute("checked", "checked"), s.setAttribute("name", "t"), h.appendChild(s), r = H.createDocumentFragment(), r.appendChild(h.lastChild), t.checkClone = r.cloneNode(!0).cloneNode(!0).lastChild.checked, t.appendChecked = s.checked, r.removeChild(s), r.appendChild(h), h.attachEvent)
            for (c in {
                submit: !0,
                change: !0,
                focusin: !0
            })
                l = "on" + c, d = l in h, d || (h.setAttribute(l, "return;"), d = "function" == typeof h[l]), t[c + "Bubbles"] = d;
        return X(function() {
            var i,
                n,
                o,
                a,
                s = "padding:0;margin:0;border:0;display:block;overflow:hidden;",
                r = H.getElementsByTagName("body")[0];
            r && (i = H.createElement("div"), i.style.cssText = "visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px", r.insertBefore(i, r.firstChild), n = H.createElement("div"), i.appendChild(n), n.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", o = n.getElementsByTagName("td"), o[0].style.cssText = "padding:0;margin:0;border:0;display:none", d = 0 === o[0].offsetHeight, o[0].style.display = "", o[1].style.display = "none", t.reliableHiddenOffsets = d && 0 === o[0].offsetHeight, n.innerHTML = "", n.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;", t.boxSizing = 4 === n.offsetWidth, t.doesNotIncludeMarginInBodyOffset = 1 !== r.offsetTop, e.getComputedStyle && (t.pixelPosition = "1%" !== (e.getComputedStyle(n, null) || {}).top, t.boxSizingReliable = "4px" === (e.getComputedStyle(n, null) || {
                width: "4px"
            }).width, a = H.createElement("div"), a.style.cssText = n.style.cssText = s, a.style.marginRight = a.style.width = "0", n.style.width = "1px", n.appendChild(a), t.reliableMarginRight = !parseFloat((e.getComputedStyle(a, null) || {}).marginRight)), "undefined" != typeof n.style.zoom && (n.innerHTML = "", n.style.cssText = s + "width:1px;padding:1px;display:inline;zoom:1", t.inlineBlockNeedsLayout = 3 === n.offsetWidth, n.style.display = "block", n.style.overflow = "visible", n.innerHTML = "<div></div>", n.firstChild.style.width = "5px", t.shrinkWrapBlocks = 3 !== n.offsetWidth, i.style.zoom = 1), r.removeChild(i), i = n = o = a = null)
        }), r.removeChild(h), i = n = o = a = s = r = h = null, t
    }();
    var me = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
        ge = /([A-Z])/g;
    X.extend({
        cache: {},
        deletedIds: [],
        uuid: 0,
        expando: "jQuery" + (X.fn.jquery + Math.random()).replace(/\D/g, ""),
        noData: {
            embed: !0,
            object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
            applet: !0
        },
        hasData: function(e) {
            return e = e.nodeType ? X.cache[e[X.expando]] : e[X.expando], !!e && !o(e)
        },
        data: function(e, i, n, o) {
            if (X.acceptData(e)) {
                var a,
                    s,
                    r = X.expando,
                    l = "string" == typeof i,
                    c = e.nodeType,
                    d = c ? X.cache : e,
                    u = c ? e[r] : e[r] && r;
                if (u && d[u] && (o || d[u].data) || !l || n !== t)
                    return u || (c ? e[r] = u = X.deletedIds.pop() || X.guid++ : u = r), d[u] || (d[u] = {}, c || (d[u].toJSON = X.noop)), "object" != typeof i && "function" != typeof i || (o ? d[u] = X.extend(d[u], i) : d[u].data = X.extend(d[u].data, i)), a = d[u], o || (a.data || (a.data = {}), a = a.data), n !== t && (a[X.camelCase(i)] = n), l ? (s = a[i], null == s && (s = a[X.camelCase(i)])) : s = a, s
            }
        },
        removeData: function(e, t, i) {
            if (X.acceptData(e)) {
                var n,
                    a,
                    s,
                    r = e.nodeType,
                    l = r ? X.cache : e,
                    c = r ? e[X.expando] : X.expando;
                if (l[c]) {
                    if (t && (n = i ? l[c] : l[c].data)) {
                        X.isArray(t) || (t in n ? t = [t] : (t = X.camelCase(t), t = t in n ? [t] : t.split(" ")));
                        for (a = 0, s = t.length; a < s; a++)
                            delete n[t[a]];
                        if (!(i ? o : X.isEmptyObject)(n))
                            return
                    }
                    (i || (delete l[c].data, o(l[c]))) && (r ? X.cleanData([e], !0) : X.support.deleteExpando || l != l.window ? delete l[c] : l[c] = null)
                }
            }
        },
        _data: function(e, t, i) {
            return X.data(e, t, i, !0)
        },
        acceptData: function(e) {
            var t = e.nodeName && X.noData[e.nodeName.toLowerCase()];
            return !t || t !== !0 && e.getAttribute("classid") === t
        }
    }), X.fn.extend({
        data: function(e, i) {
            var o,
                a,
                s,
                r,
                l,
                c = this[0],
                d = 0,
                u = null;
            if (e === t) {
                if (this.length && (u = X.data(c), 1 === c.nodeType && !X._data(c, "parsedAttrs"))) {
                    for (s = c.attributes, l = s.length; d < l; d++)
                        r = s[d].name, r.indexOf("data-") || (r = X.camelCase(r.substring(5)), n(c, r, u[r]));
                    X._data(c, "parsedAttrs", !0)
                }
                return u
            }
            return "object" == typeof e ? this.each(function() {
                X.data(this, e)
            }) : (o = e.split(".", 2), o[1] = o[1] ? "." + o[1] : "", a = o[1] + "!", X.access(this, function(i) {
                return i === t ? (u = this.triggerHandler("getData" + a, [o[0]]), u === t && c && (u = X.data(c, e), u = n(c, e, u)), u === t && o[1] ? this.data(o[0]) : u) : (o[1] = i, void this.each(function() {
                    var t = X(this);
                    t.triggerHandler("setData" + a, o), X.data(this, e, i), t.triggerHandler("changeData" + a, o)
                }))
            }, null, i, arguments.length > 1, null, !1))
        },
        removeData: function(e) {
            return this.each(function() {
                X.removeData(this, e)
            })
        }
    }), X.extend({
        queue: function(e, t, i) {
            var n;
            if (e)
                return t = (t || "fx") + "queue", n = X._data(e, t), i && (!n || X.isArray(i) ? n = X._data(e, t, X.makeArray(i)) : n.push(i)), n || []
        },
        dequeue: function(e, t) {
            t = t || "fx";
            var i = X.queue(e, t),
                n = i.length,
                o = i.shift(),
                a = X._queueHooks(e, t),
                s = function() {
                    X.dequeue(e, t)
                };
            "inprogress" === o && (o = i.shift(), n--), o && ("fx" === t && i.unshift("inprogress"), delete a.stop, o.call(e, s, a)), !n && a && a.empty.fire()
        },
        _queueHooks: function(e, t) {
            var i = t + "queueHooks";
            return X._data(e, i) || X._data(e, i, {
                    empty: X.Callbacks("once memory").add(function() {
                        X.removeData(e, t + "queue", !0), X.removeData(e, i, !0)
                    })
                })
        }
    }), X.fn.extend({
        queue: function(e, i) {
            var n = 2;
            return "string" != typeof e && (i = e, e = "fx", n--), arguments.length < n ? X.queue(this[0], e) : i === t ? this : this.each(function() {
                var t = X.queue(this, e, i);
                X._queueHooks(this, e), "fx" === e && "inprogress" !== t[0] && X.dequeue(this, e)
            })
        },
        dequeue: function(e) {
            return this.each(function() {
                X.dequeue(this, e)
            })
        },
        delay: function(e, t) {
            return e = X.fx ? X.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, i) {
                var n = setTimeout(t, e);
                i.stop = function() {
                    clearTimeout(n)
                }
            })
        },
        clearQueue: function(e) {
            return this.queue(e || "fx", [])
        },
        promise: function(e, i) {
            var n,
                o = 1,
                a = X.Deferred(),
                s = this,
                r = this.length,
                l = function() {
                    --o || a.resolveWith(s, [s])
                };
            for ("string" != typeof e && (i = e, e = t), e = e || "fx"; r--;)
                n = X._data(s[r], e + "queueHooks"), n && n.empty && (o++, n.empty.add(l));
            return l(), a.promise(i)
        }
    });
    var ve,
        _e,
        be,
        we = /[\t\r\n]/g,
        ye = /\r/g,
        $e = /^(?:button|input)$/i,
        ke = /^(?:button|input|object|select|textarea)$/i,
        xe = /^a(?:rea|)$/i,
        Ce = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
        Te = X.support.getSetAttribute;
    X.fn.extend({
        attr: function(e, t) {
            return X.access(this, X.attr, e, t, arguments.length > 1)
        },
        removeAttr: function(e) {
            return this.each(function() {
                X.removeAttr(this, e)
            })
        },
        prop: function(e, t) {
            return X.access(this, X.prop, e, t, arguments.length > 1)
        },
        removeProp: function(e) {
            return e = X.propFix[e] || e, this.each(function() {
                try {
                    this[e] = t, delete this[e]
                } catch (i) {}
            })
        },
        addClass: function(e) {
            var t,
                i,
                n,
                o,
                a,
                s,
                r;
            if (X.isFunction(e))
                return this.each(function(t) {
                    X(this).addClass(e.call(this, t, this.className))
                });
            if (e && "string" == typeof e)
                for (t = e.split(te), i = 0, n = this.length; i < n; i++)
                    if (o = this[i], 1 === o.nodeType)
                        if (o.className || 1 !== t.length) {
                            for (a = " " + o.className + " ", s = 0, r = t.length; s < r; s++)
                                a.indexOf(" " + t[s] + " ") < 0 && (a += t[s] + " ");
                            o.className = X.trim(a)
                        } else
                            o.className = e;
            return this
        },
        removeClass: function(e) {
            var i,
                n,
                o,
                a,
                s,
                r,
                l;
            if (X.isFunction(e))
                return this.each(function(t) {
                    X(this).removeClass(e.call(this, t, this.className))
                });
            if (e && "string" == typeof e || e === t)
                for (i = (e || "").split(te), r = 0, l = this.length; r < l; r++)
                    if (o = this[r], 1 === o.nodeType && o.className) {
                        for (n = (" " + o.className + " ").replace(we, " "), a = 0, s = i.length; a < s; a++)
                            for (; n.indexOf(" " + i[a] + " ") >= 0;)
                                n = n.replace(" " + i[a] + " ", " ");
                        o.className = e ? X.trim(n) : ""
                    }
            return this
        },
        toggleClass: function(e, t) {
            var i = typeof e,
                n = "boolean" == typeof t;
            return X.isFunction(e) ? this.each(function(i) {
                X(this).toggleClass(e.call(this, i, this.className, t), t)
            }) : this.each(function() {
                if ("string" === i)
                    for (var o, a = 0, s = X(this), r = t, l = e.split(te); o = l[a++];)
                        r = n ? r : !s.hasClass(o), s[r ? "addClass" : "removeClass"](o);
                else
                    "undefined" !== i && "boolean" !== i || (this.className && X._data(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : X._data(this, "__className__") || "")
            })
        },
        hasClass: function(e) {
            for (var t = " " + e + " ", i = 0, n = this.length; i < n; i++)
                if (1 === this[i].nodeType && (" " + this[i].className + " ").replace(we, " ").indexOf(t) >= 0)
                    return !0;
            return !1
        },
        val: function(e) {
            var i,
                n,
                o,
                a = this[0];
            {
                if (arguments.length)
                    return o = X.isFunction(e), this.each(function(n) {
                        var a,
                            s = X(this);
                        1 === this.nodeType && (a = o ? e.call(this, n, s.val()) : e, null == a ? a = "" : "number" == typeof a ? a += "" : X.isArray(a) && (a = X.map(a, function(e) {
                            return null == e ? "" : e + ""
                        })), i = X.valHooks[this.type] || X.valHooks[this.nodeName.toLowerCase()], i && "set" in i && i.set(this, a, "value") !== t || (this.value = a))
                    });
                if (a)
                    return i = X.valHooks[a.type] || X.valHooks[a.nodeName.toLowerCase()], i && "get" in i && (n = i.get(a, "value")) !== t ? n : (n = a.value, "string" == typeof n ? n.replace(ye, "") : null == n ? "" : n)
            }
        }
    }), X.extend({
        valHooks: {
            option: {
                get: function(e) {
                    var t = e.attributes.value;
                    return !t || t.specified ? e.value : e.text
                }
            },
            select: {
                get: function(e) {
                    for (var t, i, n = e.options, o = e.selectedIndex, a = "select-one" === e.type || o < 0, s = a ? null : [], r = a ? o + 1 : n.length, l = o < 0 ? r : a ? o : 0; l < r; l++)
                        if (i = n[l], (i.selected || l === o) && (X.support.optDisabled ? !i.disabled : null === i.getAttribute("disabled")) && (!i.parentNode.disabled || !X.nodeName(i.parentNode, "optgroup"))) {
                            if (t = X(i).val(), a)
                                return t;
                            s.push(t)
                        }
                    return s
                },
                set: function(e, t) {
                    var i = X.makeArray(t);
                    return X(e).find("option").each(function() {
                        this.selected = X.inArray(X(this).val(), i) >= 0
                    }), i.length || (e.selectedIndex = -1), i
                }
            }
        },
        attrFn: {},
        attr: function(e, i, n, o) {
            var a,
                s,
                r,
                l = e.nodeType;
            if (e && 3 !== l && 8 !== l && 2 !== l)
                return o && X.isFunction(X.fn[i]) ? X(e)[i](n) : "undefined" == typeof e.getAttribute ? X.prop(e, i, n) : (r = 1 !== l || !X.isXMLDoc(e), r && (i = i.toLowerCase(), s = X.attrHooks[i] || (Ce.test(i) ? _e : ve)), n !== t ? null === n ? void X.removeAttr(e, i) : s && "set" in s && r && (a = s.set(e, n, i)) !== t ? a : (e.setAttribute(i, n + ""), n) : s && "get" in s && r && null !== (a = s.get(e, i)) ? a : (a = e.getAttribute(i), null === a ? t : a))
        },
        removeAttr: function(e, t) {
            var i,
                n,
                o,
                a,
                s = 0;
            if (t && 1 === e.nodeType)
                for (n = t.split(te); s < n.length; s++)
                    o = n[s], o && (i = X.propFix[o] || o, a = Ce.test(o), a || X.attr(e, o, ""), e.removeAttribute(Te ? o : i), a && i in e && (e[i] = !1))
        },
        attrHooks: {
            type: {
                set: function(e, t) {
                    if ($e.test(e.nodeName) && e.parentNode)
                        X.error("type property can't be changed");
                    else if (!X.support.radioValue && "radio" === t && X.nodeName(e, "input")) {
                        var i = e.value;
                        return e.setAttribute("type", t), i && (e.value = i), t
                    }
                }
            },
            value: {
                get: function(e, t) {
                    return ve && X.nodeName(e, "button") ? ve.get(e, t) : t in e ? e.value : null
                },
                set: function(e, t, i) {
                    return ve && X.nodeName(e, "button") ? ve.set(e, t, i) : void (e.value = t)
                }
            }
        },
        propFix: {
            tabindex: "tabIndex",
            readonly: "readOnly",
            "for": "htmlFor",
            "class": "className",
            maxlength: "maxLength",
            cellspacing: "cellSpacing",
            cellpadding: "cellPadding",
            rowspan: "rowSpan",
            colspan: "colSpan",
            usemap: "useMap",
            frameborder: "frameBorder",
            contenteditable: "contentEditable"
        },
        prop: function(e, i, n) {
            var o,
                a,
                s,
                r = e.nodeType;
            if (e && 3 !== r && 8 !== r && 2 !== r)
                return s = 1 !== r || !X.isXMLDoc(e), s && (i = X.propFix[i] || i, a = X.propHooks[i]), n !== t ? a && "set" in a && (o = a.set(e, n, i)) !== t ? o : e[i] = n : a && "get" in a && null !== (o = a.get(e, i)) ? o : e[i]
        },
        propHooks: {
            tabIndex: {
                get: function(e) {
                    var i = e.getAttributeNode("tabindex");
                    return i && i.specified ? parseInt(i.value, 10) : ke.test(e.nodeName) || xe.test(e.nodeName) && e.href ? 0 : t
                }
            }
        }
    }), _e = {
        get: function(e, i) {
            var n,
                o = X.prop(e, i);
            return o === !0 || "boolean" != typeof o && (n = e.getAttributeNode(i)) && n.nodeValue !== !1 ? i.toLowerCase() : t
        },
        set: function(e, t, i) {
            var n;
            return t === !1 ? X.removeAttr(e, i) : (n = X.propFix[i] || i, n in e && (e[n] = !0), e.setAttribute(i, i.toLowerCase())), i
        }
    }, Te || (be = {
        name: !0,
        id: !0,
        coords: !0
    }, ve = X.valHooks.button = {
        get: function(e, i) {
            var n;
            return n = e.getAttributeNode(i), n && (be[i] ? "" !== n.value : n.specified) ? n.value : t
        },
        set: function(e, t, i) {
            var n = e.getAttributeNode(i);
            return n || (n = H.createAttribute(i), e.setAttributeNode(n)), n.value = t + ""
        }
    }, X.each(["width", "height"], function(e, t) {
        X.attrHooks[t] = X.extend(X.attrHooks[t], {
            set: function(e, i) {
                if ("" === i)
                    return e.setAttribute(t, "auto"), i
            }
        })
    }), X.attrHooks.contenteditable = {
        get: ve.get,
        set: function(e, t, i) {
            "" === t && (t = "false"), ve.set(e, t, i)
        }
    }), X.support.hrefNormalized || X.each(["href", "src", "width", "height"], function(e, i) {
        X.attrHooks[i] = X.extend(X.attrHooks[i], {
            get: function(e) {
                var n = e.getAttribute(i, 2);
                return null === n ? t : n
            }
        })
    }), X.support.style || (X.attrHooks.style = {
        get: function(e) {
            return e.style.cssText.toLowerCase() || t
        },
        set: function(e, t) {
            return e.style.cssText = t + ""
        }
    }), X.support.optSelected || (X.propHooks.selected = X.extend(X.propHooks.selected, {
        get: function(e) {
            var t = e.parentNode;
            return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null
        }
    })), X.support.enctype || (X.propFix.enctype = "encoding"), X.support.checkOn || X.each(["radio", "checkbox"], function() {
        X.valHooks[this] = {
            get: function(e) {
                return null === e.getAttribute("value") ? "on" : e.value
            }
        }
    }), X.each(["radio", "checkbox"], function() {
        X.valHooks[this] = X.extend(X.valHooks[this], {
            set: function(e, t) {
                if (X.isArray(t))
                    return e.checked = X.inArray(X(e).val(), t) >= 0
            }
        })
    });
    var Ie = /^(?:textarea|input|select)$/i,
        Se = /^([^\.]*|)(?:\.(.+)|)$/,
        Pe = /(?:^|\s)hover(\.\S+|)\b/,
        De = /^key/,
        Ae = /^(?:mouse|contextmenu)|click/,
        Oe = /^(?:focusinfocus|focusoutblur)$/,
        je = function(e) {
            return X.event.special.hover ? e : e.replace(Pe, "mouseenter$1 mouseleave$1")
        };
    X.event = {
        add: function(e, i, n, o, a) {
            var s,
                r,
                l,
                c,
                d,
                u,
                h,
                p,
                f,
                m,
                g;
            if (3 !== e.nodeType && 8 !== e.nodeType && i && n && (s = X._data(e))) {
                for (n.handler && (f = n, n = f.handler, a = f.selector), n.guid || (n.guid = X.guid++), l = s.events, l || (s.events = l = {}), r = s.handle, r || (s.handle = r = function(e) {
                    return "undefined" == typeof X || e && X.event.triggered === e.type ? t : X.event.dispatch.apply(r.elem, arguments)
                }, r.elem = e), i = X.trim(je(i)).split(" "), c = 0; c < i.length; c++)
                    d = Se.exec(i[c]) || [], u = d[1], h = (d[2] || "").split(".").sort(), g = X.event.special[u] || {}, u = (a ? g.delegateType : g.bindType) || u, g = X.event.special[u] || {}, p = X.extend({
                        type: u,
                        origType: d[1],
                        data: o,
                        handler: n,
                        guid: n.guid,
                        selector: a,
                        needsContext: a && X.expr.match.needsContext.test(a),
                        namespace: h.join(".")
                    }, f), m = l[u], m || (m = l[u] = [], m.delegateCount = 0, g.setup && g.setup.call(e, o, h, r) !== !1 || (e.addEventListener ? e.addEventListener(u, r, !1) : e.attachEvent && e.attachEvent("on" + u, r))),
                    g.add && (g.add.call(e, p), p.handler.guid || (p.handler.guid = n.guid)), a ? m.splice(m.delegateCount++, 0, p) : m.push(p), X.event.global[u] = !0;
                e = null
            }
        },
        global: {},
        remove: function(e, t, i, n, o) {
            var a,
                s,
                r,
                l,
                c,
                d,
                u,
                h,
                p,
                f,
                m,
                g = X.hasData(e) && X._data(e);
            if (g && (h = g.events)) {
                for (t = X.trim(je(t || "")).split(" "), a = 0; a < t.length; a++)
                    if (s = Se.exec(t[a]) || [], r = l = s[1], c = s[2], r) {
                        for (p = X.event.special[r] || {}, r = (n ? p.delegateType : p.bindType) || r, f = h[r] || [], d = f.length, c = c ? new RegExp("(^|\\.)" + c.split(".").sort().join("\\.(?:.*\\.|)") + "(\\.|$)") : null, u = 0; u < f.length; u++)
                            m = f[u], (o || l === m.origType) && (!i || i.guid === m.guid) && (!c || c.test(m.namespace)) && (!n || n === m.selector || "**" === n && m.selector) && (f.splice(u--, 1), m.selector && f.delegateCount--, p.remove && p.remove.call(e, m));
                        0 === f.length && d !== f.length && ((!p.teardown || p.teardown.call(e, c, g.handle) === !1) && X.removeEvent(e, r, g.handle), delete h[r])
                    } else
                        for (r in h)
                            X.event.remove(e, r + t[a], i, n, !0);
                X.isEmptyObject(h) && (delete g.handle, X.removeData(e, "events", !0))
            }
        },
        customEvent: {
            getData: !0,
            setData: !0,
            changeData: !0
        },
        trigger: function(i, n, o, a) {
            if (!o || 3 !== o.nodeType && 8 !== o.nodeType) {
                var s,
                    r,
                    l,
                    c,
                    d,
                    u,
                    h,
                    p,
                    f,
                    m,
                    g = i.type || i,
                    v = [];
                if (Oe.test(g + X.event.triggered))
                    return;
                if (g.indexOf("!") >= 0 && (g = g.slice(0, -1), r = !0), g.indexOf(".") >= 0 && (v = g.split("."), g = v.shift(), v.sort()), (!o || X.event.customEvent[g]) && !X.event.global[g])
                    return;
                if (i = "object" == typeof i ? i[X.expando] ? i : new X.Event(g, i) : new X.Event(g), i.type = g, i.isTrigger = !0, i.exclusive = r, i.namespace = v.join("."), i.namespace_re = i.namespace ? new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, u = g.indexOf(":") < 0 ? "on" + g : "", !o) {
                    s = X.cache;
                    for (l in s)
                        s[l].events && s[l].events[g] && X.event.trigger(i, n, s[l].handle.elem, !0);
                    return
                }
                if (i.result = t, i.target || (i.target = o), n = null != n ? X.makeArray(n) : [], n.unshift(i), h = X.event.special[g] || {}, h.trigger && h.trigger.apply(o, n) === !1)
                    return;
                if (f = [[o, h.bindType || g]], !a && !h.noBubble && !X.isWindow(o)) {
                    for (m = h.delegateType || g, c = Oe.test(m + g) ? o : o.parentNode, d = o; c; c = c.parentNode)
                        f.push([c, m]), d = c;
                    d === (o.ownerDocument || H) && f.push([d.defaultView || d.parentWindow || e, m])
                }
                for (l = 0; l < f.length && !i.isPropagationStopped(); l++)
                    c = f[l][0], i.type = f[l][1], p = (X._data(c, "events") || {})[i.type] && X._data(c, "handle"), p && p.apply(c, n), p = u && c[u], p && X.acceptData(c) && p.apply && p.apply(c, n) === !1 && i.preventDefault();
                return i.type = g, !a && !i.isDefaultPrevented() && (!h._default || h._default.apply(o.ownerDocument, n) === !1) && ("click" !== g || !X.nodeName(o, "a")) && X.acceptData(o) && u && o[g] && ("focus" !== g && "blur" !== g || 0 !== i.target.offsetWidth) && !X.isWindow(o) && (d = o[u], d && (o[u] = null), X.event.triggered = g, o[g](), X.event.triggered = t, d && (o[u] = d)), i.result
            }
        },
        dispatch: function(i) {
            i = X.event.fix(i || e.event);
            var n,
                o,
                a,
                s,
                r,
                l,
                c,
                d,
                u,
                h = (X._data(this, "events") || {})[i.type] || [],
                p = h.delegateCount,
                f = Y.call(arguments),
                m = !i.exclusive && !i.namespace,
                g = X.event.special[i.type] || {},
                v = [];
            if (f[0] = i, i.delegateTarget = this, !g.preDispatch || g.preDispatch.call(this, i) !== !1) {
                if (p && (!i.button || "click" !== i.type))
                    for (a = i.target; a != this; a = a.parentNode || this)
                        if (a.disabled !== !0 || "click" !== i.type) {
                            for (r = {}, c = [], n = 0; n < p; n++)
                                d = h[n], u = d.selector, r[u] === t && (r[u] = d.needsContext ? X(u, this).index(a) >= 0 : X.find(u, this, null, [a]).length), r[u] && c.push(d);
                            c.length && v.push({
                                elem: a,
                                matches: c
                            })
                        }
                for (h.length > p && v.push({
                    elem: this,
                    matches: h.slice(p)
                }), n = 0; n < v.length && !i.isPropagationStopped(); n++)
                    for (l = v[n], i.currentTarget = l.elem, o = 0; o < l.matches.length && !i.isImmediatePropagationStopped(); o++)
                        d = l.matches[o], (m || !i.namespace && !d.namespace || i.namespace_re && i.namespace_re.test(d.namespace)) && (i.data = d.data, i.handleObj = d, s = ((X.event.special[d.origType] || {}).handle || d.handler).apply(l.elem, f), s !== t && (i.result = s, s === !1 && (i.preventDefault(), i.stopPropagation())));
                return g.postDispatch && g.postDispatch.call(this, i), i.result
            }
        },
        props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(e, t) {
                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(e, i) {
                var n,
                    o,
                    a,
                    s = i.button,
                    r = i.fromElement;
                return null == e.pageX && null != i.clientX && (n = e.target.ownerDocument || H, o = n.documentElement, a = n.body, e.pageX = i.clientX + (o && o.scrollLeft || a && a.scrollLeft || 0) - (o && o.clientLeft || a && a.clientLeft || 0), e.pageY = i.clientY + (o && o.scrollTop || a && a.scrollTop || 0) - (o && o.clientTop || a && a.clientTop || 0)), !e.relatedTarget && r && (e.relatedTarget = r === e.target ? i.toElement : r), !e.which && s !== t && (e.which = 1 & s ? 1 : 2 & s ? 3 : 4 & s ? 2 : 0), e
            }
        },
        fix: function(e) {
            if (e[X.expando])
                return e;
            var t,
                i,
                n = e,
                o = X.event.fixHooks[e.type] || {},
                a = o.props ? this.props.concat(o.props) : this.props;
            for (e = X.Event(n), t = a.length; t;)
                i = a[--t], e[i] = n[i];
            return e.target || (e.target = n.srcElement || H), 3 === e.target.nodeType && (e.target = e.target.parentNode), e.metaKey = !!e.metaKey, o.filter ? o.filter(e, n) : e
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                delegateType: "focusin"
            },
            blur: {
                delegateType: "focusout"
            },
            beforeunload: {
                setup: function(e, t, i) {
                    X.isWindow(this) && (this.onbeforeunload = i)
                },
                teardown: function(e, t) {
                    this.onbeforeunload === t && (this.onbeforeunload = null)
                }
            }
        },
        simulate: function(e, t, i, n) {
            var o = X.extend(new X.Event, i, {
                type: e,
                isSimulated: !0,
                originalEvent: {}
            });
            n ? X.event.trigger(o, null, t) : X.event.dispatch.call(t, o), o.isDefaultPrevented() && i.preventDefault()
        }
    }, X.event.handle = X.event.dispatch, X.removeEvent = H.removeEventListener ? function(e, t, i) {
        e.removeEventListener && e.removeEventListener(t, i, !1)
    } : function(e, t, i) {
        var n = "on" + t;
        e.detachEvent && ("undefined" == typeof e[n] && (e[n] = null), e.detachEvent(n, i))
    }, X.Event = function(e, t) {
        return this instanceof X.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.returnValue === !1 || e.getPreventDefault && e.getPreventDefault() ? s : a) : this.type = e, t && X.extend(this, t), this.timeStamp = e && e.timeStamp || X.now(), this[X.expando] = !0, void 0) : new X.Event(e, t)
    }, X.Event.prototype = {
        preventDefault: function() {
            this.isDefaultPrevented = s;
            var e = this.originalEvent;
            e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1)
        },
        stopPropagation: function() {
            this.isPropagationStopped = s;
            var e = this.originalEvent;
            e && (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0)
        },
        stopImmediatePropagation: function() {
            this.isImmediatePropagationStopped = s, this.stopPropagation()
        },
        isDefaultPrevented: a,
        isPropagationStopped: a,
        isImmediatePropagationStopped: a
    }, X.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout"
    }, function(e, t) {
        X.event.special[e] = {
            delegateType: t,
            bindType: t,
            handle: function(e) {
                var i,
                    n = this,
                    o = e.relatedTarget,
                    a = e.handleObj;
                a.selector;
                return o && (o === n || X.contains(n, o)) || (e.type = a.origType, i = a.handler.apply(this, arguments), e.type = t), i
            }
        }
    }), X.support.submitBubbles || (X.event.special.submit = {
        setup: function() {
            return !X.nodeName(this, "form") && void X.event.add(this, "click._submit keypress._submit", function(e) {
                    var i = e.target,
                        n = X.nodeName(i, "input") || X.nodeName(i, "button") ? i.form : t;
                    n && !X._data(n, "_submit_attached") && (X.event.add(n, "submit._submit", function(e) {
                        e._submit_bubble = !0
                    }), X._data(n, "_submit_attached", !0))
                })
        },
        postDispatch: function(e) {
            e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && X.event.simulate("submit", this.parentNode, e, !0))
        },
        teardown: function() {
            return !X.nodeName(this, "form") && void X.event.remove(this, "._submit")
        }
    }), X.support.changeBubbles || (X.event.special.change = {
        setup: function() {
            return Ie.test(this.nodeName) ? ("checkbox" !== this.type && "radio" !== this.type || (X.event.add(this, "propertychange._change", function(e) {
                "checked" === e.originalEvent.propertyName && (this._just_changed = !0)
            }), X.event.add(this, "click._change", function(e) {
                this._just_changed && !e.isTrigger && (this._just_changed = !1), X.event.simulate("change", this, e, !0)
            })), !1) : void X.event.add(this, "beforeactivate._change", function(e) {
                var t = e.target;
                Ie.test(t.nodeName) && !X._data(t, "_change_attached") && (X.event.add(t, "change._change", function(e) {
                    this.parentNode && !e.isSimulated && !e.isTrigger && X.event.simulate("change", this.parentNode, e, !0)
                }), X._data(t, "_change_attached", !0))
            })
        },
        handle: function(e) {
            var t = e.target;
            if (this !== t || e.isSimulated || e.isTrigger || "radio" !== t.type && "checkbox" !== t.type)
                return e.handleObj.handler.apply(this, arguments)
        },
        teardown: function() {
            return X.event.remove(this, "._change"), !Ie.test(this.nodeName)
        }
    }), X.support.focusinBubbles || X.each({
        focus: "focusin",
        blur: "focusout"
    }, function(e, t) {
        var i = 0,
            n = function(e) {
                X.event.simulate(t, e.target, X.event.fix(e), !0)
            };
        X.event.special[t] = {
            setup: function() {
                0 === i++ && H.addEventListener(e, n, !0)
            },
            teardown: function() {
                0 === --i && H.removeEventListener(e, n, !0)
            }
        }
    }), X.fn.extend({
        on: function(e, i, n, o, s) {
            var r,
                l;
            if ("object" == typeof e) {
                "string" != typeof i && (n = n || i, i = t);
                for (l in e)
                    this.on(l, i, n, e[l], s);
                return this
            }
            if (null == n && null == o ? (o = i, n = i = t) : null == o && ("string" == typeof i ? (o = n, n = t) : (o = n, n = i, i = t)), o === !1)
                o = a;
            else if (!o)
                return this;
            return 1 === s && (r = o, o = function(e) {
                return X().off(e), r.apply(this, arguments)
            }, o.guid = r.guid || (r.guid = X.guid++)), this.each(function() {
                X.event.add(this, e, o, n, i)
            })
        },
        one: function(e, t, i, n) {
            return this.on(e, t, i, n, 1)
        },
        off: function(e, i, n) {
            var o,
                s;
            if (e && e.preventDefault && e.handleObj)
                return o = e.handleObj, X(e.delegateTarget).off(o.namespace ? o.origType + "." + o.namespace : o.origType, o.selector, o.handler), this;
            if ("object" == typeof e) {
                for (s in e)
                    this.off(s, i, e[s]);
                return this
            }
            return i !== !1 && "function" != typeof i || (n = i, i = t), n === !1 && (n = a), this.each(function() {
                X.event.remove(this, e, n, i)
            })
        },
        bind: function(e, t, i) {
            return this.on(e, null, t, i)
        },
        unbind: function(e, t) {
            return this.off(e, null, t)
        },
        live: function(e, t, i) {
            return X(this.context).on(e, this.selector, t, i), this
        },
        die: function(e, t) {
            return X(this.context).off(e, this.selector || "**", t), this
        },
        delegate: function(e, t, i, n) {
            return this.on(t, e, i, n)
        },
        undelegate: function(e, t, i) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", i)
        },
        trigger: function(e, t) {
            return this.each(function() {
                X.event.trigger(e, t, this)
            })
        },
        triggerHandler: function(e, t) {
            if (this[0])
                return X.event.trigger(e, t, this[0], !0)
        },
        toggle: function(e) {
            var t = arguments,
                i = e.guid || X.guid++,
                n = 0,
                o = function(i) {
                    var o = (X._data(this, "lastToggle" + e.guid) || 0) % n;
                    return X._data(this, "lastToggle" + e.guid, o + 1), i.preventDefault(), t[o].apply(this, arguments) || !1
                };
            for (o.guid = i; n < t.length;)
                t[n++].guid = i;
            return this.click(o)
        },
        hover: function(e, t) {
            return this.mouseenter(e).mouseleave(t || e)
        }
    }), X.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
        X.fn[t] = function(e, i) {
            return null == i && (i = e, e = null), arguments.length > 0 ? this.on(t, null, e, i) : this.trigger(t)
        }, De.test(t) && (X.event.fixHooks[t] = X.event.keyHooks), Ae.test(t) && (X.event.fixHooks[t] = X.event.mouseHooks)
    }), function(e, t) {
        function i(e, t, i, n) {
            i = i || [], t = t || A;
            var o,
                a,
                s,
                r,
                l = t.nodeType;
            if (!e || "string" != typeof e)
                return i;
            if (1 !== l && 9 !== l)
                return [];
            if (s = y(t), !s && !n && (o = ie.exec(e)))
                if (r = o[1]) {
                    if (9 === l) {
                        if (a = t.getElementById(r), !a || !a.parentNode)
                            return i;
                        if (a.id === r)
                            return i.push(a), i
                    } else if (t.ownerDocument && (a = t.ownerDocument.getElementById(r)) && $(t, a) && a.id === r)
                        return i.push(a), i
                } else {
                    if (o[2])
                        return M.apply(i, N.call(t.getElementsByTagName(e), 0)), i;
                    if ((r = o[3]) && he && t.getElementsByClassName)
                        return M.apply(i, N.call(t.getElementsByClassName(r), 0)), i
                }
            return m(e.replace(G, "$1"), t, i, n, s)
        }
        function n(e) {
            return function(t) {
                var i = t.nodeName.toLowerCase();
                return "input" === i && t.type === e
            }
        }
        function o(e) {
            return function(t) {
                var i = t.nodeName.toLowerCase();
                return ("input" === i || "button" === i) && t.type === e
            }
        }
        function a(e) {
            return L(function(t) {
                return t = +t, L(function(i, n) {
                    for (var o, a = e([], i.length, t), s = a.length; s--;)
                        i[o = a[s]] && (i[o] = !(n[o] = i[o]))
                })
            })
        }
        function s(e, t, i) {
            if (e === t)
                return i;
            for (var n = e.nextSibling; n;) {
                if (n === t)
                    return -1;
                n = n.nextSibling
            }
            return 1
        }
        function r(e, t) {
            var n,
                o,
                a,
                s,
                r,
                l,
                c,
                d = B[P][e + " "];
            if (d)
                return t ? 0 : d.slice(0);
            for (r = e, l = [], c = b.preFilter; r;) {
                n && !(o = J.exec(r)) || (o && (r = r.slice(o[0].length) || r), l.push(a = [])), n = !1, (o = ee.exec(r)) && (a.push(n = new D(o.shift())), r = r.slice(n.length), n.type = o[0].replace(G, " "));
                for (s in b.filter)
                    (o = re[s].exec(r)) && (!c[s] || (o = c[s](o))) && (a.push(n = new D(o.shift())), r = r.slice(n.length), n.type = s, n.matches = o);
                if (!n)
                    break
            }
            return t ? r.length : r ? i.error(e) : B(e, l).slice(0)
        }
        function l(e, t, i) {
            var n = t.dir,
                o = i && "parentNode" === t.dir,
                a = z++;
            return t.first ? function(t, i, a) {
                for (; t = t[n];)
                    if (o || 1 === t.nodeType)
                        return e(t, i, a)
            } : function(t, i, s) {
                if (s) {
                    for (; t = t[n];)
                        if ((o || 1 === t.nodeType) && e(t, i, s))
                            return t
                } else
                    for (var r, l = j + " " + a + " ", c = l + v; t = t[n];)
                        if (o || 1 === t.nodeType) {
                            if ((r = t[P]) === c)
                                return t.sizset;
                            if ("string" == typeof r && 0 === r.indexOf(l)) {
                                if (t.sizset)
                                    return t
                            } else {
                                if (t[P] = c, e(t, i, s))
                                    return t.sizset = !0, t;
                                t.sizset = !1
                            }
                        }
            }
        }
        function c(e) {
            return e.length > 1 ? function(t, i, n) {
                for (var o = e.length; o--;)
                    if (!e[o](t, i, n))
                        return !1;
                return !0
            } : e[0]
        }
        function d(e, t, i, n, o) {
            for (var a, s = [], r = 0, l = e.length, c = null != t; r < l; r++)
                (a = e[r]) && (i && !i(a, n, o) || (s.push(a), c && t.push(r)));
            return s
        }
        function u(e, t, i, n, o, a) {
            return n && !n[P] && (n = u(n)), o && !o[P] && (o = u(o, a)), L(function(a, s, r, l) {
                var c,
                    u,
                    h,
                    p = [],
                    m = [],
                    g = s.length,
                    v = a || f(t || "*", r.nodeType ? [r] : r, []),
                    _ = !e || !a && t ? v : d(v, p, e, r, l),
                    b = i ? o || (a ? e : g || n) ? [] : s : _;
                if (i && i(_, b, r, l), n)
                    for (c = d(b, m), n(c, [], r, l), u = c.length; u--;)
                        (h = c[u]) && (b[m[u]] = !(_[m[u]] = h));
                if (a) {
                    if (o || e) {
                        if (o) {
                            for (c = [], u = b.length; u--;)
                                (h = b[u]) && c.push(_[u] = h);
                            o(null, b = [], c, l)
                        }
                        for (u = b.length; u--;)
                            (h = b[u]) && (c = o ? F.call(a, h) : p[u]) > -1 && (a[c] = !(s[c] = h))
                    }
                } else
                    b = d(b === s ? b.splice(g, b.length) : b), o ? o(null, s, b, l) : M.apply(s, b)
            })
        }
        function h(e) {
            for (var t, i, n, o = e.length, a = b.relative[e[0].type], s = a || b.relative[" "], r = a ? 1 : 0, d = l(function(e) {
                    return e === t
                }, s, !0), p = l(function(e) {
                    return F.call(t, e) > -1
                }, s, !0), f = [function(e, i, n) {
                    return !a && (n || i !== T) || ((t = i).nodeType ? d(e, i, n) : p(e, i, n))
                }]; r < o; r++)
                if (i = b.relative[e[r].type])
                    f = [l(c(f), i)];
                else {
                    if (i = b.filter[e[r].type].apply(null, e[r].matches), i[P]) {
                        for (n = ++r; n < o && !b.relative[e[n].type]; n++)
                            ;
                        return u(r > 1 && c(f), r > 1 && e.slice(0, r - 1).join("").replace(G, "$1"), i, r < n && h(e.slice(r, n)), n < o && h(e = e.slice(n)), n < o && e.join(""))
                    }
                    f.push(i)
                }
            return c(f)
        }
        function p(e, t) {
            var n = t.length > 0,
                o = e.length > 0,
                a = function(s, r, l, c, u) {
                    var h,
                        p,
                        f,
                        m = [],
                        g = 0,
                        _ = "0",
                        w = s && [],
                        y = null != u,
                        $ = T,
                        k = s || o && b.find.TAG("*", u && r.parentNode || r),
                        x = j += null == $ ? 1 : Math.E;
                    for (y && (T = r !== A && r, v = a.el); null != (h = k[_]); _++) {
                        if (o && h) {
                            for (p = 0; f = e[p]; p++)
                                if (f(h, r, l)) {
                                    c.push(h);
                                    break
                                }
                            y && (j = x, v = ++a.el)
                        }
                        n && ((h = !f && h) && g--, s && w.push(h))
                    }
                    if (g += _, n && _ !== g) {
                        for (p = 0; f = t[p]; p++)
                            f(w, m, r, l);
                        if (s) {
                            if (g > 0)
                                for (; _--;)
                                    !w[_] && !m[_] && (m[_] = E.call(c));
                            m = d(m)
                        }
                        M.apply(c, m), y && !s && m.length > 0 && g + t.length > 1 && i.uniqueSort(c)
                    }
                    return y && (j = x, T = $), w
                };
            return a.el = 0, n ? L(a) : a
        }
        function f(e, t, n) {
            for (var o = 0, a = t.length; o < a; o++)
                i(e, t[o], n);
            return n
        }
        function m(e, t, i, n, o) {
            var a,
                s,
                l,
                c,
                d,
                u = r(e);
            u.length;
            if (!n && 1 === u.length) {
                if (s = u[0] = u[0].slice(0), s.length > 2 && "ID" === (l = s[0]).type && 9 === t.nodeType && !o && b.relative[s[1].type]) {
                    if (t = b.find.ID(l.matches[0].replace(se, ""), t, o)[0], !t)
                        return i;
                    e = e.slice(s.shift().length)
                }
                for (a = re.POS.test(e) ? -1 : s.length - 1; a >= 0 && (l = s[a], !b.relative[c = l.type]); a--)
                    if ((d = b.find[c]) && (n = d(l.matches[0].replace(se, ""), ne.test(s[0].type) && t.parentNode || t, o))) {
                        if (s.splice(a, 1), e = n.length && s.join(""), !e)
                            return M.apply(i, N.call(n, 0)), i;
                        break
                    }
            }
            return k(e, u)(n, t, o, i, ne.test(e)), i
        }
        function g() {}
        var v,
            _,
            b,
            w,
            y,
            $,
            k,
            x,
            C,
            T,
            I = !0,
            S = "undefined",
            P = ("sizcache" + Math.random()).replace(".", ""),
            D = String,
            A = e.document,
            O = A.documentElement,
            j = 0,
            z = 0,
            E = [].pop,
            M = [].push,
            N = [].slice,
            F = [].indexOf || function(e) {
                for (var t = 0, i = this.length; t < i; t++)
                    if (this[t] === e)
                        return t;
                return -1
            },
            L = function(e, t) {
                return e[P] = null == t || t, e
            },
            R = function() {
                var e = {},
                    t = [];
                return L(function(i, n) {
                    return t.push(i) > b.cacheLength && delete e[t.shift()], e[i + " "] = n
                }, e)
            },
            H = R(),
            B = R(),
            q = R(),
            W = "[\\x20\\t\\r\\n\\f]",
            U = "(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",
            K = U.replace("w", "w#"),
            Y = "([*^$|!~]?=)",
            Z = "\\[" + W + "*(" + U + ")" + W + "*(?:" + Y + W + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + K + ")|)|)" + W + "*\\]",
            Q = ":(" + U + ")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:" + Z + ")|[^:]|\\\\.)*|.*))\\)|)",
            V = ":(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + W + "*((?:-\\d)?\\d*)" + W + "*\\)|)(?=[^-]|$)",
            G = new RegExp("^" + W + "+|((?:^|[^\\\\])(?:\\\\.)*)" + W + "+$", "g"),
            J = new RegExp("^" + W + "*," + W + "*"),
            ee = new RegExp("^" + W + "*([\\x20\\t\\r\\n\\f>+~])" + W + "*"),
            te = new RegExp(Q),
            ie = /^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,
            ne = /[\x20\t\r\n\f]*[+~]/,
            oe = /h\d/i,
            ae = /input|select|textarea|button/i,
            se = /\\(?!\\)/g,
            re = {
                ID: new RegExp("^#(" + U + ")"),
                CLASS: new RegExp("^\\.(" + U + ")"),
                NAME: new RegExp("^\\[name=['\"]?(" + U + ")['\"]?\\]"),
                TAG: new RegExp("^(" + U.replace("w", "w*") + ")"),
                ATTR: new RegExp("^" + Z),
                PSEUDO: new RegExp("^" + Q),
                POS: new RegExp(V, "i"),
                CHILD: new RegExp("^:(only|nth|first|last)-child(?:\\(" + W + "*(even|odd|(([+-]|)(\\d*)n|)" + W + "*(?:([+-]|)" + W + "*(\\d+)|))" + W + "*\\)|)", "i"),
                needsContext: new RegExp("^" + W + "*[>+~]|" + V, "i")
            },
            le = function(e) {
                var t = A.createElement("div");
                try {
                    return e(t)
                } catch (i) {
                    return !1
                } finally {
                    t = null
                }
            },
            ce = le(function(e) {
                return e.appendChild(A.createComment("")), !e.getElementsByTagName("*").length
            }),
            de = le(function(e) {
                return e.innerHTML = "<a href='#'></a>", e.firstChild && typeof e.firstChild.getAttribute !== S && "#" === e.firstChild.getAttribute("href")
            }),
            ue = le(function(e) {
                e.innerHTML = "<select></select>";
                var t = typeof e.lastChild.getAttribute("multiple");
                return "boolean" !== t && "string" !== t
            }),
            he = le(function(e) {
                return e.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>", !(!e.getElementsByClassName || !e.getElementsByClassName("e").length) && (e.lastChild.className = "e", 2 === e.getElementsByClassName("e").length)
            }),
            pe = le(function(e) {
                e.id = P + 0, e.innerHTML = "<a name='" + P + "'></a><div name='" + P + "'></div>", O.insertBefore(e, O.firstChild);
                var t = A.getElementsByName && A.getElementsByName(P).length === 2 + A.getElementsByName(P + 0).length;
                return _ = !A.getElementById(P), O.removeChild(e), t
            });
        try {
            N.call(O.childNodes, 0)[0].nodeType
        } catch (fe) {
            N = function(e) {
                for (var t, i = []; t = this[e]; e++)
                    i.push(t);
                return i
            }
        }
        i.matches = function(e, t) {
            return i(e, null, null, t)
        }, i.matchesSelector = function(e, t) {
            return i(t, null, null, [e]).length > 0
        }, w = i.getText = function(e) {
            var t,
                i = "",
                n = 0,
                o = e.nodeType;
            if (o) {
                if (1 === o || 9 === o || 11 === o) {
                    if ("string" == typeof e.textContent)
                        return e.textContent;
                    for (e = e.firstChild; e; e = e.nextSibling)
                        i += w(e)
                } else if (3 === o || 4 === o)
                    return e.nodeValue
            } else
                for (; t = e[n]; n++)
                    i += w(t);
            return i
        }, y = i.isXML = function(e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return !!t && "HTML" !== t.nodeName
        }, $ = i.contains = O.contains ? function(e, t) {
            var i = 9 === e.nodeType ? e.documentElement : e,
                n = t && t.parentNode;
            return e === n || !!(n && 1 === n.nodeType && i.contains && i.contains(n))
        } : O.compareDocumentPosition ? function(e, t) {
            return t && !!(16 & e.compareDocumentPosition(t))
        } : function(e, t) {
            for (; t = t.parentNode;)
                if (t === e)
                    return !0;
            return !1
        }, i.attr = function(e, t) {
            var i,
                n = y(e);
            return n || (t = t.toLowerCase()), (i = b.attrHandle[t]) ? i(e) : n || ue ? e.getAttribute(t) : (i = e.getAttributeNode(t), i ? "boolean" == typeof e[t] ? e[t] ? t : null : i.specified ? i.value : null : null)
        }, b = i.selectors = {
            cacheLength: 50,
            createPseudo: L,
            match: re,
            attrHandle: de ? {} : {
                href: function(e) {
                    return e.getAttribute("href", 2)
                },
                type: function(e) {
                    return e.getAttribute("type")
                }
            },
            find: {
                ID: _ ? function(e, t, i) {
                    if (typeof t.getElementById !== S && !i) {
                        var n = t.getElementById(e);
                        return n && n.parentNode ? [n] : []
                    }
                } : function(e, i, n) {
                    if (typeof i.getElementById !== S && !n) {
                        var o = i.getElementById(e);
                        return o ? o.id === e || typeof o.getAttributeNode !== S && o.getAttributeNode("id").value === e ? [o] : t : []
                    }
                },
                TAG: ce ? function(e, t) {
                    if (typeof t.getElementsByTagName !== S)
                        return t.getElementsByTagName(e)
                } : function(e, t) {
                    var i = t.getElementsByTagName(e);
                    if ("*" === e) {
                        for (var n, o = [], a = 0; n = i[a]; a++)
                            1 === n.nodeType && o.push(n);
                        return o
                    }
                    return i
                },
                NAME: pe && function(e, t) {
                    if (typeof t.getElementsByName !== S)
                        return t.getElementsByName(name)
                },
                CLASS: he && function(e, t, i) {
                    if (typeof t.getElementsByClassName !== S && !i)
                        return t.getElementsByClassName(e)
                }
            },
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(e) {
                    return e[1] = e[1].replace(se, ""), e[3] = (e[4] || e[5] || "").replace(se, ""), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                },
                CHILD: function(e) {
                    return e[1] = e[1].toLowerCase(), "nth" === e[1] ? (e[2] || i.error(e[0]), e[3] = +(e[3] ? e[4] + (e[5] || 1) : 2 * ("even" === e[2] || "odd" === e[2])), e[4] = +(e[6] + e[7] || "odd" === e[2])) : e[2] && i.error(e[0]), e
                },
                PSEUDO: function(e) {
                    var t,
                        i;
                    return re.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[3] : (t = e[4]) && (te.test(t) && (i = r(t, !0)) && (i = t.indexOf(")", t.length - i) - t.length) && (t = t.slice(0, i), e[0] = e[0].slice(0, i)), e[2] = t), e.slice(0, 3))
                }
            },
            filter: {
                ID: _ ? function(e) {
                    return e = e.replace(se, ""), function(t) {
                        return t.getAttribute("id") === e
                    }
                } : function(e) {
                    return e = e.replace(se, ""), function(t) {
                        var i = typeof t.getAttributeNode !== S && t.getAttributeNode("id");
                        return i && i.value === e
                    }
                },
                TAG: function(e) {
                    return "*" === e ? function() {
                        return !0
                    } : (e = e.replace(se, "").toLowerCase(), function(t) {
                        return t.nodeName && t.nodeName.toLowerCase() === e
                    })
                },
                CLASS: function(e) {
                    var t = H[P][e + " "];
                    return t || (t = new RegExp("(^|" + W + ")" + e + "(" + W + "|$)")) && H(e, function(e) {
                            return t.test(e.className || typeof e.getAttribute !== S && e.getAttribute("class") || "")
                        })
                },
                ATTR: function(e, t, n) {
                    return function(o, a) {
                        var s = i.attr(o, e);
                        return null == s ? "!=" === t : !t || (s += "", "=" === t ? s === n : "!=" === t ? s !== n : "^=" === t ? n && 0 === s.indexOf(n) : "*=" === t ? n && s.indexOf(n) > -1 : "$=" === t ? n && s.substr(s.length - n.length) === n : "~=" === t ? (" " + s + " ").indexOf(n) > -1 : "|=" === t && (s === n || s.substr(0, n.length + 1) === n + "-"))
                    }
                },
                CHILD: function(e, t, i, n) {
                    return "nth" === e ? function(e) {
                        var t,
                            o,
                            a = e.parentNode;
                        if (1 === i && 0 === n)
                            return !0;
                        if (a)
                            for (o = 0, t = a.firstChild; t && (1 !== t.nodeType || (o++, e !== t)); t = t.nextSibling)
                                ;
                        return o -= n, o === i || o % i === 0 && o / i >= 0
                    } : function(t) {
                        var i = t;
                        switch (e) {
                        case "only":
                        case "first":
                            for (; i = i.previousSibling;)
                                if (1 === i.nodeType)
                                    return !1;
                            if ("first" === e)
                                return !0;
                            i = t;
                        case "last":
                            for (; i = i.nextSibling;)
                                if (1 === i.nodeType)
                                    return !1;
                            return !0
                        }
                    }
                },
                PSEUDO: function(e, t) {
                    var n,
                        o = b.pseudos[e] || b.setFilters[e.toLowerCase()] || i.error("unsupported pseudo: " + e);
                    return o[P] ? o(t) : o.length > 1 ? (n = [e, e, "", t], b.setFilters.hasOwnProperty(e.toLowerCase()) ? L(function(e, i) {
                        for (var n, a = o(e, t), s = a.length; s--;)
                            n = F.call(e, a[s]), e[n] = !(i[n] = a[s])
                    }) : function(e) {
                        return o(e, 0, n)
                    }) : o
                }
            },
            pseudos: {
                not: L(function(e) {
                    var t = [],
                        i = [],
                        n = k(e.replace(G, "$1"));
                    return n[P] ? L(function(e, t, i, o) {
                        for (var a, s = n(e, null, o, []), r = e.length; r--;)
                            (a = s[r]) && (e[r] = !(t[r] = a))
                    }) : function(e, o, a) {
                        return t[0] = e, n(t, null, a, i), !i.pop()
                    }
                }),
                has: L(function(e) {
                    return function(t) {
                        return i(e, t).length > 0
                    }
                }),
                contains: L(function(e) {
                    return function(t) {
                        return (t.textContent || t.innerText || w(t)).indexOf(e) > -1
                    }
                }),
                enabled: function(e) {
                    return e.disabled === !1
                },
                disabled: function(e) {
                    return e.disabled === !0
                },
                checked: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && !!e.checked || "option" === t && !!e.selected
                },
                selected: function(e) {
                    return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                },
                parent: function(e) {
                    return !b.pseudos.empty(e)
                },
                empty: function(e) {
                    var t;
                    for (e = e.firstChild; e;) {
                        if (e.nodeName > "@" || 3 === (t = e.nodeType) || 4 === t)
                            return !1;
                        e = e.nextSibling
                    }
                    return !0
                },
                header: function(e) {
                    return oe.test(e.nodeName)
                },
                text: function(e) {
                    var t,
                        i;
                    return "input" === e.nodeName.toLowerCase() && "text" === (t = e.type) && (null == (i = e.getAttribute("type")) || i.toLowerCase() === t)
                },
                radio: n("radio"),
                checkbox: n("checkbox"),
                file: n("file"),
                password: n("password"),
                image: n("image"),
                submit: o("submit"),
                reset: o("reset"),
                button: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return "input" === t && "button" === e.type || "button" === t
                },
                input: function(e) {
                    return ae.test(e.nodeName)
                },
                focus: function(e) {
                    var t = e.ownerDocument;
                    return e === t.activeElement && (!t.hasFocus || t.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                },
                active: function(e) {
                    return e === e.ownerDocument.activeElement
                },
                first: a(function() {
                    return [0]
                }),
                last: a(function(e, t) {
                    return [t - 1]
                }),
                eq: a(function(e, t, i) {
                    return [i < 0 ? i + t : i]
                }),
                even: a(function(e, t) {
                    for (var i = 0; i < t; i += 2)
                        e.push(i);
                    return e
                }),
                odd: a(function(e, t) {
                    for (var i = 1; i < t; i += 2)
                        e.push(i);
                    return e
                }),
                lt: a(function(e, t, i) {
                    for (var n = i < 0 ? i + t : i; --n >= 0;)
                        e.push(n);
                    return e
                }),
                gt: a(function(e, t, i) {
                    for (var n = i < 0 ? i + t : i; ++n < t;)
                        e.push(n);
                    return e
                })
            }
        }, x = O.compareDocumentPosition ? function(e, t) {
            return e === t ? (C = !0, 0) : (e.compareDocumentPosition && t.compareDocumentPosition ? 4 & e.compareDocumentPosition(t) : e.compareDocumentPosition) ? -1 : 1
        } : function(e, t) {
            if (e === t)
                return C = !0, 0;
            if (e.sourceIndex && t.sourceIndex)
                return e.sourceIndex - t.sourceIndex;
            var i,
                n,
                o = [],
                a = [],
                r = e.parentNode,
                l = t.parentNode,
                c = r;
            if (r === l)
                return s(e, t);
            if (!r)
                return -1;
            if (!l)
                return 1;
            for (; c;)
                o.unshift(c), c = c.parentNode;
            for (c = l; c;)
                a.unshift(c), c = c.parentNode;
            i = o.length, n = a.length;
            for (var d = 0; d < i && d < n; d++)
                if (o[d] !== a[d])
                    return s(o[d], a[d]);
            return d === i ? s(e, a[d], -1) : s(o[d], t, 1)
        }, [0, 0].sort(x), I = !C, i.uniqueSort = function(e) {
            var t,
                i = [],
                n = 1,
                o = 0;
            if (C = I, e.sort(x), C) {
                for (; t = e[n]; n++)
                    t === e[n - 1] && (o = i.push(n));
                for (; o--;)
                    e.splice(i[o], 1)
            }
            return e
        }, i.error = function(e) {
            throw new Error("Syntax error, unrecognized expression: " + e)
        }, k = i.compile = function(e, t) {
            var i,
                n = [],
                o = [],
                a = q[P][e + " "];
            if (!a) {
                for (t || (t = r(e)), i = t.length; i--;)
                    a = h(t[i]), a[P] ? n.push(a) : o.push(a);
                a = q(e, p(o, n))
            }
            return a
        }, A.querySelectorAll && function() {
            var e,
                t = m,
                n = /'|\\/g,
                o = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,
                a = [":focus"],
                s = [":active"],
                l = O.matchesSelector || O.mozMatchesSelector || O.webkitMatchesSelector || O.oMatchesSelector || O.msMatchesSelector;
            le(function(e) {
                e.innerHTML = "<select><option selected=''></option></select>", e.querySelectorAll("[selected]").length || a.push("\\[" + W + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"), e.querySelectorAll(":checked").length || a.push(":checked")
            }), le(function(e) {
                e.innerHTML = "<p test=''></p>", e.querySelectorAll("[test^='']").length && a.push("[*^$]=" + W + "*(?:\"\"|'')"), e.innerHTML = "<input type='hidden'/>", e.querySelectorAll(":enabled").length || a.push(":enabled", ":disabled")
            }), a = new RegExp(a.join("|")), m = function(e, i, o, s, l) {
                if (!s && !l && !a.test(e)) {
                    var c,
                        d,
                        u = !0,
                        h = P,
                        p = i,
                        f = 9 === i.nodeType && e;
                    if (1 === i.nodeType && "object" !== i.nodeName.toLowerCase()) {
                        for (c = r(e), (u = i.getAttribute("id")) ? h = u.replace(n, "\\$&") : i.setAttribute("id", h), h = "[id='" + h + "'] ", d = c.length; d--;)
                            c[d] = h + c[d].join("");
                        p = ne.test(e) && i.parentNode || i, f = c.join(",")
                    }
                    if (f)
                        try {
                            return M.apply(o, N.call(p.querySelectorAll(f), 0)), o
                        } catch (m) {} finally {
                            u || i.removeAttribute("id")
                        }
                }
                return t(e, i, o, s, l)
            }, l && (le(function(t) {
                e = l.call(t, "div");
                try {
                    l.call(t, "[test!='']:sizzle"), s.push("!=", Q)
                } catch (i) {}
            }), s = new RegExp(s.join("|")), i.matchesSelector = function(t, n) {
                if (n = n.replace(o, "='$1']"), !y(t) && !s.test(n) && !a.test(n))
                    try {
                        var r = l.call(t, n);
                        if (r || e || t.document && 11 !== t.document.nodeType)
                            return r
                    } catch (c) {}
                return i(n, null, null, [t]).length > 0
            })
        }(), b.pseudos.nth = b.pseudos.eq, b.filters = g.prototype = b.pseudos, b.setFilters = new g, i.attr = X.attr, X.find = i, X.expr = i.selectors, X.expr[":"] = X.expr.pseudos, X.unique = i.uniqueSort, X.text = i.getText, X.isXMLDoc = i.isXML, X.contains = i.contains
    }(e);
    var ze = /Until$/,
        Ee = /^(?:parents|prev(?:Until|All))/,
        Me = /^.[^:#\[\.,]*$/,
        Ne = X.expr.match.needsContext,
        Fe = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    X.fn.extend({
        find: function(e) {
            var t,
                i,
                n,
                o,
                a,
                s,
                r = this;
            if ("string" != typeof e)
                return X(e).filter(function() {
                    for (t = 0, i = r.length; t < i; t++)
                        if (X.contains(r[t], this))
                            return !0
                });
            for (s = this.pushStack("", "find", e), t = 0, i = this.length; t < i; t++)
                if (n = s.length, X.find(e, this[t], s), t > 0)
                    for (o = n; o < s.length; o++)
                        for (a = 0; a < n; a++)
                            if (s[a] === s[o]) {
                                s.splice(o--, 1);
                                break
                            }
            return s
        },
        has: function(e) {
            var t,
                i = X(e, this),
                n = i.length;
            return this.filter(function() {
                for (t = 0; t < n; t++)
                    if (X.contains(this, i[t]))
                        return !0
            })
        },
        not: function(e) {
            return this.pushStack(c(this, e, !1), "not", e)
        },
        filter: function(e) {
            return this.pushStack(c(this, e, !0), "filter", e)
        },
        is: function(e) {
            return !!e && ("string" == typeof e ? Ne.test(e) ? X(e, this.context).index(this[0]) >= 0 : X.filter(e, this).length > 0 : this.filter(e).length > 0)
        },
        closest: function(e, t) {
            for (var i, n = 0, o = this.length, a = [], s = Ne.test(e) || "string" != typeof e ? X(e, t || this.context) : 0; n < o; n++)
                for (i = this[n]; i && i.ownerDocument && i !== t && 11 !== i.nodeType;) {
                    if (s ? s.index(i) > -1 : X.find.matchesSelector(i, e)) {
                        a.push(i);
                        break
                    }
                    i = i.parentNode
                }
            return a = a.length > 1 ? X.unique(a) : a, this.pushStack(a, "closest", e)
        },
        index: function(e) {
            return e ? "string" == typeof e ? X.inArray(this[0], X(e)) : X.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.prevAll().length : -1
        },
        add: function(e, t) {
            var i = "string" == typeof e ? X(e, t) : X.makeArray(e && e.nodeType ? [e] : e),
                n = X.merge(this.get(), i);
            return this.pushStack(r(i[0]) || r(n[0]) ? n : X.unique(n))
        },
        addBack: function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }
    }), X.fn.andSelf = X.fn.addBack, X.each({
        parent: function(e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null
        },
        parents: function(e) {
            return X.dir(e, "parentNode")
        },
        parentsUntil: function(e, t, i) {
            return X.dir(e, "parentNode", i)
        },
        next: function(e) {
            return l(e, "nextSibling")
        },
        prev: function(e) {
            return l(e, "previousSibling")
        },
        nextAll: function(e) {
            return X.dir(e, "nextSibling")
        },
        prevAll: function(e) {
            return X.dir(e, "previousSibling")
        },
        nextUntil: function(e, t, i) {
            return X.dir(e, "nextSibling", i)
        },
        prevUntil: function(e, t, i) {
            return X.dir(e, "previousSibling", i)
        },
        siblings: function(e) {
            return X.sibling((e.parentNode || {}).firstChild, e)
        },
        children: function(e) {
            return X.sibling(e.firstChild)
        },
        contents: function(e) {
            return X.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : X.merge([], e.childNodes)
        }
    }, function(e, t) {
        X.fn[e] = function(i, n) {
            var o = X.map(this, t, i);
            return ze.test(e) || (n = i), n && "string" == typeof n && (o = X.filter(n, o)), o = this.length > 1 && !Fe[e] ? X.unique(o) : o, this.length > 1 && Ee.test(e) && (o = o.reverse()), this.pushStack(o, e, Y.call(arguments).join(","))
        }
    }), X.extend({
        filter: function(e, t, i) {
            return i && (e = ":not(" + e + ")"), 1 === t.length ? X.find.matchesSelector(t[0], e) ? [t[0]] : [] : X.find.matches(e, t)
        },
        dir: function(e, i, n) {
            for (var o = [], a = e[i]; a && 9 !== a.nodeType && (n === t || 1 !== a.nodeType || !X(a).is(n));)
                1 === a.nodeType && o.push(a), a = a[i];
            return o
        },
        sibling: function(e, t) {
            for (var i = []; e; e = e.nextSibling)
                1 === e.nodeType && e !== t && i.push(e);
            return i
        }
    });
    var Le = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
        Re = / jQuery\d+="(?:null|\d+)"/g,
        He = /^\s+/,
        Be = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        qe = /<([\w:]+)/,
        We = /<tbody/i,
        Ue = /<|&#?\w+;/,
        Ke = /<(?:script|style|link)/i,
        Ye = /<(?:script|object|embed|option|style)/i,
        Ze = new RegExp("<(?:" + Le + ")[\\s/>]", "i"),
        Qe = /^(?:checkbox|radio)$/,
        Ve = /checked\s*(?:[^=]|=\s*.checked.)/i,
        Ge = /\/(java|ecma)script/i,
        Xe = /^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,
        Je = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            legend: [1, "<fieldset>", "</fieldset>"],
            thead: [1, "<table>", "</table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
            area: [1, "<map>", "</map>"],
            _default: [0, "", ""]
        },
        et = d(H),
        tt = et.appendChild(H.createElement("div"));
    Je.optgroup = Je.option, Je.tbody = Je.tfoot = Je.colgroup = Je.caption = Je.thead, Je.th = Je.td, X.support.htmlSerialize || (Je._default = [1, "X<div>", "</div>"]), X.fn.extend({
        text: function(e) {
            return X.access(this, function(e) {
                return e === t ? X.text(this) : this.empty().append((this[0] && this[0].ownerDocument || H).createTextNode(e))
            }, null, e, arguments.length)
        },
        wrapAll: function(e) {
            if (X.isFunction(e))
                return this.each(function(t) {
                    X(this).wrapAll(e.call(this, t))
                });
            if (this[0]) {
                var t = X(e, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
                    for (var e = this; e.firstChild && 1 === e.firstChild.nodeType;)
                        e = e.firstChild;
                    return e
                }).append(this)
            }
            return this
        },
        wrapInner: function(e) {
            return X.isFunction(e) ? this.each(function(t) {
                X(this).wrapInner(e.call(this, t))
            }) : this.each(function() {
                var t = X(this),
                    i = t.contents();
                i.length ? i.wrapAll(e) : t.append(e)
            })
        },
        wrap: function(e) {
            var t = X.isFunction(e);
            return this.each(function(i) {
                X(this).wrapAll(t ? e.call(this, i) : e)
            })
        },
        unwrap: function() {
            return this.parent().each(function() {
                X.nodeName(this, "body") || X(this).replaceWith(this.childNodes)
            }).end()
        },
        append: function() {
            return this.domManip(arguments, !0, function(e) {
                (1 === this.nodeType || 11 === this.nodeType) && this.appendChild(e)
            })
        },
        prepend: function() {
            return this.domManip(arguments, !0, function(e) {
                (1 === this.nodeType || 11 === this.nodeType) && this.insertBefore(e, this.firstChild);
            })
        },
        before: function() {
            if (!r(this[0]))
                return this.domManip(arguments, !1, function(e) {
                    this.parentNode.insertBefore(e, this)
                });
            if (arguments.length) {
                var e = X.clean(arguments);
                return this.pushStack(X.merge(e, this), "before", this.selector)
            }
        },
        after: function() {
            if (!r(this[0]))
                return this.domManip(arguments, !1, function(e) {
                    this.parentNode.insertBefore(e, this.nextSibling)
                });
            if (arguments.length) {
                var e = X.clean(arguments);
                return this.pushStack(X.merge(this, e), "after", this.selector)
            }
        },
        remove: function(e, t) {
            for (var i, n = 0; null != (i = this[n]); n++)
                e && !X.filter(e, [i]).length || (!t && 1 === i.nodeType && (X.cleanData(i.getElementsByTagName("*")), X.cleanData([i])), i.parentNode && i.parentNode.removeChild(i));
            return this
        },
        empty: function() {
            for (var e, t = 0; null != (e = this[t]); t++)
                for (1 === e.nodeType && X.cleanData(e.getElementsByTagName("*")); e.firstChild;)
                    e.removeChild(e.firstChild);
            return this
        },
        clone: function(e, t) {
            return e = null != e && e, t = null == t ? e : t, this.map(function() {
                return X.clone(this, e, t)
            })
        },
        html: function(e) {
            return X.access(this, function(e) {
                var i = this[0] || {},
                    n = 0,
                    o = this.length;
                if (e === t)
                    return 1 === i.nodeType ? i.innerHTML.replace(Re, "") : t;
                if ("string" == typeof e && !Ke.test(e) && (X.support.htmlSerialize || !Ze.test(e)) && (X.support.leadingWhitespace || !He.test(e)) && !Je[(qe.exec(e) || ["", ""])[1].toLowerCase()]) {
                    e = e.replace(Be, "<$1></$2>");
                    try {
                        for (; n < o; n++)
                            i = this[n] || {}, 1 === i.nodeType && (X.cleanData(i.getElementsByTagName("*")), i.innerHTML = e);
                        i = 0
                    } catch (a) {}
                }
                i && this.empty().append(e)
            }, null, e, arguments.length)
        },
        replaceWith: function(e) {
            return r(this[0]) ? this.length ? this.pushStack(X(X.isFunction(e) ? e() : e), "replaceWith", e) : this : X.isFunction(e) ? this.each(function(t) {
                var i = X(this),
                    n = i.html();
                i.replaceWith(e.call(this, t, n))
            }) : ("string" != typeof e && (e = X(e).detach()), this.each(function() {
                var t = this.nextSibling,
                    i = this.parentNode;
                X(this).remove(), t ? X(t).before(e) : X(i).append(e)
            }))
        },
        detach: function(e) {
            return this.remove(e, !0)
        },
        domManip: function(e, i, n) {
            e = [].concat.apply([], e);
            var o,
                a,
                s,
                r,
                l = 0,
                c = e[0],
                d = [],
                h = this.length;
            if (!X.support.checkClone && h > 1 && "string" == typeof c && Ve.test(c))
                return this.each(function() {
                    X(this).domManip(e, i, n)
                });
            if (X.isFunction(c))
                return this.each(function(o) {
                    var a = X(this);
                    e[0] = c.call(this, o, i ? a.html() : t), a.domManip(e, i, n)
                });
            if (this[0]) {
                if (o = X.buildFragment(e, this, d), s = o.fragment, a = s.firstChild, 1 === s.childNodes.length && (s = a), a)
                    for (i = i && X.nodeName(a, "tr"), r = o.cacheable || h - 1; l < h; l++)
                        n.call(i && X.nodeName(this[l], "table") ? u(this[l], "tbody") : this[l], l === r ? s : X.clone(s, !0, !0));
                s = a = null, d.length && X.each(d, function(e, t) {
                    t.src ? X.ajax ? X.ajax({
                        url: t.src,
                        type: "GET",
                        dataType: "script",
                        async: !1,
                        global: !1,
                        "throws": !0
                    }) : X.error("no ajax") : X.globalEval((t.text || t.textContent || t.innerHTML || "").replace(Xe, "")), t.parentNode && t.parentNode.removeChild(t)
                })
            }
            return this
        }
    }), X.buildFragment = function(e, i, n) {
        var o,
            a,
            s,
            r = e[0];
        return i = i || H, i = !i.nodeType && i[0] || i, i = i.ownerDocument || i, 1 === e.length && "string" == typeof r && r.length < 512 && i === H && "<" === r.charAt(0) && !Ye.test(r) && (X.support.checkClone || !Ve.test(r)) && (X.support.html5Clone || !Ze.test(r)) && (a = !0, o = X.fragments[r], s = o !== t), o || (o = i.createDocumentFragment(), X.clean(e, i, o, n), a && (X.fragments[r] = s && o)), {
            fragment: o,
            cacheable: a
        }
    }, X.fragments = {}, X.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(e, t) {
        X.fn[e] = function(i) {
            var n,
                o = 0,
                a = [],
                s = X(i),
                r = s.length,
                l = 1 === this.length && this[0].parentNode;
            if ((null == l || l && 11 === l.nodeType && 1 === l.childNodes.length) && 1 === r)
                return s[t](this[0]), this;
            for (; o < r; o++)
                n = (o > 0 ? this.clone(!0) : this).get(), X(s[o])[t](n), a = a.concat(n);
            return this.pushStack(a, e, s.selector)
        }
    }), X.extend({
        clone: function(e, t, i) {
            var n,
                o,
                a,
                s;
            if (X.support.html5Clone || X.isXMLDoc(e) || !Ze.test("<" + e.nodeName + ">") ? s = e.cloneNode(!0) : (tt.innerHTML = e.outerHTML, tt.removeChild(s = tt.firstChild)), !(X.support.noCloneEvent && X.support.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || X.isXMLDoc(e)))
                for (p(e, s), n = f(e), o = f(s), a = 0; n[a]; ++a)
                    o[a] && p(n[a], o[a]);
            if (t && (h(e, s), i))
                for (n = f(e), o = f(s), a = 0; n[a]; ++a)
                    h(n[a], o[a]);
            return n = o = null, s
        },
        clean: function(e, t, i, n) {
            var o,
                a,
                s,
                r,
                l,
                c,
                u,
                h,
                p,
                f,
                g,
                v = t === H && et,
                _ = [];
            for (t && "undefined" != typeof t.createDocumentFragment || (t = H), o = 0; null != (s = e[o]); o++)
                if ("number" == typeof s && (s += ""), s) {
                    if ("string" == typeof s)
                        if (Ue.test(s)) {
                            for (v = v || d(t), u = t.createElement("div"), v.appendChild(u), s = s.replace(Be, "<$1></$2>"), r = (qe.exec(s) || ["", ""])[1].toLowerCase(), l = Je[r] || Je._default, c = l[0], u.innerHTML = l[1] + s + l[2]; c--;)
                                u = u.lastChild;
                            if (!X.support.tbody)
                                for (h = We.test(s), p = "table" !== r || h ? "<table>" !== l[1] || h ? [] : u.childNodes : u.firstChild && u.firstChild.childNodes, a = p.length - 1; a >= 0; --a)
                                    X.nodeName(p[a], "tbody") && !p[a].childNodes.length && p[a].parentNode.removeChild(p[a]);
                            !X.support.leadingWhitespace && He.test(s) && u.insertBefore(t.createTextNode(He.exec(s)[0]), u.firstChild), s = u.childNodes, u.parentNode.removeChild(u)
                        } else
                            s = t.createTextNode(s);
                    s.nodeType ? _.push(s) : X.merge(_, s)
                }
            if (u && (s = u = v = null), !X.support.appendChecked)
                for (o = 0; null != (s = _[o]); o++)
                    X.nodeName(s, "input") ? m(s) : "undefined" != typeof s.getElementsByTagName && X.grep(s.getElementsByTagName("input"), m);
            if (i)
                for (f = function(e) {
                    if (!e.type || Ge.test(e.type))
                        return n ? n.push(e.parentNode ? e.parentNode.removeChild(e) : e) : i.appendChild(e)
                }, o = 0; null != (s = _[o]); o++)
                    X.nodeName(s, "script") && f(s) || (i.appendChild(s), "undefined" != typeof s.getElementsByTagName && (g = X.grep(X.merge([], s.getElementsByTagName("script")), f), _.splice.apply(_, [o + 1, 0].concat(g)), o += g.length));
            return _
        },
        cleanData: function(e, t) {
            for (var i, n, o, a, s = 0, r = X.expando, l = X.cache, c = X.support.deleteExpando, d = X.event.special; null != (o = e[s]); s++)
                if ((t || X.acceptData(o)) && (n = o[r], i = n && l[n])) {
                    if (i.events)
                        for (a in i.events)
                            d[a] ? X.event.remove(o, a) : X.removeEvent(o, a, i.handle);
                    l[n] && (delete l[n], c ? delete o[r] : o.removeAttribute ? o.removeAttribute(r) : o[r] = null, X.deletedIds.push(n))
                }
        }
    }), function() {
        var e,
            t;
        X.uaMatch = function(e) {
            e = e.toLowerCase();
            var t = /(chrome)[ \/]([\w.]+)/.exec(e) || /(webkit)[ \/]([\w.]+)/.exec(e) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e) || /(msie) ([\w.]+)/.exec(e) || e.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e) || [];
            return {
                browser: t[1] || "",
                version: t[2] || "0"
            }
        }, e = X.uaMatch(q.userAgent), t = {}, e.browser && (t[e.browser] = !0, t.version = e.version), t.chrome ? t.webkit = !0 : t.webkit && (t.safari = !0), X.browser = t, X.sub = function() {
            function e(t, i) {
                return new e.fn.init(t, i)
            }
            X.extend(!0, e, this), e.superclass = this, e.fn = e.prototype = this(), e.fn.constructor = e, e.sub = this.sub, e.fn.init = function(i, n) {
                return n && n instanceof X && !(n instanceof e) && (n = e(n)), X.fn.init.call(this, i, n, t)
            }, e.fn.init.prototype = e.fn;
            var t = e(H);
            return e
        }
    }();
    var it,
        nt,
        ot,
        at = /alpha\([^)]*\)/i,
        st = /opacity=([^)]*)/,
        rt = /^(top|right|bottom|left)$/,
        lt = /^(none|table(?!-c[ea]).+)/,
        ct = /^margin/,
        dt = new RegExp("^(" + J + ")(.*)$", "i"),
        ut = new RegExp("^(" + J + ")(?!px)[a-z%]+$", "i"),
        ht = new RegExp("^([-+])=(" + J + ")", "i"),
        pt = {
            BODY: "block"
        },
        ft = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        mt = {
            letterSpacing: 0,
            fontWeight: 400
        },
        gt = ["Top", "Right", "Bottom", "Left"],
        vt = ["Webkit", "O", "Moz", "ms"],
        _t = X.fn.toggle;
    X.fn.extend({
        css: function(e, i) {
            return X.access(this, function(e, i, n) {
                return n !== t ? X.style(e, i, n) : X.css(e, i)
            }, e, i, arguments.length > 1)
        },
        show: function() {
            return _(this, !0)
        },
        hide: function() {
            return _(this)
        },
        toggle: function(e, t) {
            var i = "boolean" == typeof e;
            return X.isFunction(e) && X.isFunction(t) ? _t.apply(this, arguments) : this.each(function() {
                (i ? e : v(this)) ? X(this).show() : X(this).hide()
            })
        }
    }), X.extend({
        cssHooks: {
            opacity: {
                get: function(e, t) {
                    if (t) {
                        var i = it(e, "opacity");
                        return "" === i ? "1" : i
                    }
                }
            }
        },
        cssNumber: {
            fillOpacity: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": X.support.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(e, i, n, o) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var a,
                    s,
                    r,
                    l = X.camelCase(i),
                    c = e.style;
                if (i = X.cssProps[l] || (X.cssProps[l] = g(c, l)), r = X.cssHooks[i] || X.cssHooks[l], n === t)
                    return r && "get" in r && (a = r.get(e, !1, o)) !== t ? a : c[i];
                if (s = typeof n, "string" === s && (a = ht.exec(n)) && (n = (a[1] + 1) * a[2] + parseFloat(X.css(e, i)), s = "number"), !(null == n || "number" === s && isNaN(n) || ("number" === s && !X.cssNumber[l] && (n += "px"), r && "set" in r && (n = r.set(e, n, o)) === t)))
                    try {
                        c[i] = n
                    } catch (d) {}
            }
        },
        css: function(e, i, n, o) {
            var a,
                s,
                r,
                l = X.camelCase(i);
            return i = X.cssProps[l] || (X.cssProps[l] = g(e.style, l)), r = X.cssHooks[i] || X.cssHooks[l], r && "get" in r && (a = r.get(e, !0, o)), a === t && (a = it(e, i)), "normal" === a && i in mt && (a = mt[i]), n || o !== t ? (s = parseFloat(a), n || X.isNumeric(s) ? s || 0 : a) : a
        },
        swap: function(e, t, i) {
            var n,
                o,
                a = {};
            for (o in t)
                a[o] = e.style[o], e.style[o] = t[o];
            n = i.call(e);
            for (o in t)
                e.style[o] = a[o];
            return n
        }
    }), e.getComputedStyle ? it = function(t, i) {
        var n,
            o,
            a,
            s,
            r = e.getComputedStyle(t, null),
            l = t.style;
        return r && (n = r.getPropertyValue(i) || r[i], "" === n && !X.contains(t.ownerDocument, t) && (n = X.style(t, i)), ut.test(n) && ct.test(i) && (o = l.width, a = l.minWidth, s = l.maxWidth, l.minWidth = l.maxWidth = l.width = n, n = r.width, l.width = o, l.minWidth = a, l.maxWidth = s)), n
    } : H.documentElement.currentStyle && (it = function(e, t) {
        var i,
            n,
            o = e.currentStyle && e.currentStyle[t],
            a = e.style;
        return null == o && a && a[t] && (o = a[t]), ut.test(o) && !rt.test(t) && (i = a.left, n = e.runtimeStyle && e.runtimeStyle.left, n && (e.runtimeStyle.left = e.currentStyle.left), a.left = "fontSize" === t ? "1em" : o, o = a.pixelLeft + "px", a.left = i, n && (e.runtimeStyle.left = n)), "" === o ? "auto" : o
    }), X.each(["height", "width"], function(e, t) {
        X.cssHooks[t] = {
            get: function(e, i, n) {
                if (i)
                    return 0 === e.offsetWidth && lt.test(it(e, "display")) ? X.swap(e, ft, function() {
                        return y(e, t, n)
                    }) : y(e, t, n)
            },
            set: function(e, i, n) {
                return b(e, i, n ? w(e, t, n, X.support.boxSizing && "border-box" === X.css(e, "boxSizing")) : 0)
            }
        }
    }), X.support.opacity || (X.cssHooks.opacity = {
        get: function(e, t) {
            return st.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : t ? "1" : ""
        },
        set: function(e, t) {
            var i = e.style,
                n = e.currentStyle,
                o = X.isNumeric(t) ? "alpha(opacity=" + 100 * t + ")" : "",
                a = n && n.filter || i.filter || "";
            i.zoom = 1, t >= 1 && "" === X.trim(a.replace(at, "")) && i.removeAttribute && (i.removeAttribute("filter"), n && !n.filter) || (i.filter = at.test(a) ? a.replace(at, o) : a + " " + o)
        }
    }), X(function() {
        X.support.reliableMarginRight || (X.cssHooks.marginRight = {
            get: function(e, t) {
                return X.swap(e, {
                    display: "inline-block"
                }, function() {
                    if (t)
                        return it(e, "marginRight")
                })
            }
        }), !X.support.pixelPosition && X.fn.position && X.each(["top", "left"], function(e, t) {
            X.cssHooks[t] = {
                get: function(e, i) {
                    if (i) {
                        var n = it(e, t);
                        return ut.test(n) ? X(e).position()[t] + "px" : n
                    }
                }
            }
        })
    }), X.expr && X.expr.filters && (X.expr.filters.hidden = function(e) {
        return 0 === e.offsetWidth && 0 === e.offsetHeight || !X.support.reliableHiddenOffsets && "none" === (e.style && e.style.display || it(e, "display"))
    }, X.expr.filters.visible = function(e) {
        return !X.expr.filters.hidden(e)
    }), X.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(e, t) {
        X.cssHooks[e + t] = {
            expand: function(i) {
                var n,
                    o = "string" == typeof i ? i.split(" ") : [i],
                    a = {};
                for (n = 0; n < 4; n++)
                    a[e + gt[n] + t] = o[n] || o[n - 2] || o[0];
                return a
            }
        }, ct.test(e) || (X.cssHooks[e + t].set = b)
    });
    var bt = /%20/g,
        wt = /\[\]$/,
        yt = /\r?\n/g,
        $t = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
        kt = /^(?:select|textarea)/i;
    X.fn.extend({
        serialize: function() {
            return X.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                return this.elements ? X.makeArray(this.elements) : this
            }).filter(function() {
                return this.name && !this.disabled && (this.checked || kt.test(this.nodeName) || $t.test(this.type))
            }).map(function(e, t) {
                var i = X(this).val();
                return null == i ? null : X.isArray(i) ? X.map(i, function(e, i) {
                    return {
                        name: t.name,
                        value: e.replace(yt, "\r\n")
                    }
                }) : {
                    name: t.name,
                    value: i.replace(yt, "\r\n")
                }
            }).get()
        }
    }), X.param = function(e, i) {
        var n,
            o = [],
            a = function(e, t) {
                t = X.isFunction(t) ? t() : null == t ? "" : t, o[o.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
            };
        if (i === t && (i = X.ajaxSettings && X.ajaxSettings.traditional), X.isArray(e) || e.jquery && !X.isPlainObject(e))
            X.each(e, function() {
                a(this.name, this.value)
            });
        else
            for (n in e)
                k(n, e[n], i, a);
        return o.join("&").replace(bt, "+")
    };
    var xt,
        Ct,
        Tt = /#.*$/,
        It = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
        St = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,
        Pt = /^(?:GET|HEAD)$/,
        Dt = /^\/\//,
        At = /\?/,
        Ot = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
        jt = /([?&])_=[^&]*/,
        zt = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
        Et = X.fn.load,
        Mt = {},
        Nt = {},
        Ft = ["*/"] + ["*"];
    try {
        Ct = B.href
    } catch (Lt) {
        Ct = H.createElement("a"), Ct.href = "", Ct = Ct.href
    }
    xt = zt.exec(Ct.toLowerCase()) || [], X.fn.load = function(e, i, n) {
        if ("string" != typeof e && Et)
            return Et.apply(this, arguments);
        if (!this.length)
            return this;
        var o,
            a,
            s,
            r = this,
            l = e.indexOf(" ");
        return l >= 0 && (o = e.slice(l, e.length), e = e.slice(0, l)), X.isFunction(i) ? (n = i, i = t) : i && "object" == typeof i && (a = "POST"), X.ajax({
            url: e,
            type: a,
            dataType: "html",
            data: i,
            complete: function(e, t) {
                n && r.each(n, s || [e.responseText, t, e])
            }
        }).done(function(e) {
            s = arguments, r.html(o ? X("<div>").append(e.replace(Ot, "")).find(o) : e)
        }), this
    }, X.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function(e, t) {
        X.fn[t] = function(e) {
            return this.on(t, e)
        }
    }), X.each(["get", "post"], function(e, i) {
        X[i] = function(e, n, o, a) {
            return X.isFunction(n) && (a = a || o, o = n, n = t), X.ajax({
                type: i,
                url: e,
                data: n,
                success: o,
                dataType: a
            })
        }
    }), X.extend({
        getScript: function(e, i) {
            return X.get(e, t, i, "script")
        },
        getJSON: function(e, t, i) {
            return X.get(e, t, i, "json")
        },
        ajaxSetup: function(e, t) {
            return t ? T(e, X.ajaxSettings) : (t = e, e = X.ajaxSettings), T(e, t), e
        },
        ajaxSettings: {
            url: Ct,
            isLocal: St.test(xt[1]),
            global: !0,
            type: "GET",
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            processData: !0,
            async: !0,
            accepts: {
                xml: "application/xml, text/xml",
                html: "text/html",
                text: "text/plain",
                json: "application/json, text/javascript",
                "*": Ft
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText"
            },
            converters: {
                "* text": e.String,
                "text html": !0,
                "text json": X.parseJSON,
                "text xml": X.parseXML
            },
            flatOptions: {
                context: !0,
                url: !0
            }
        },
        ajaxPrefilter: x(Mt),
        ajaxTransport: x(Nt),
        ajax: function(e, i) {
            function n(e, i, n, s) {
                var c,
                    u,
                    _,
                    b,
                    y,
                    k = i;
                2 !== w && (w = 2, l && clearTimeout(l), r = t, a = s || "", $.readyState = e > 0 ? 4 : 0, n && (b = I(h, $, n)), e >= 200 && e < 300 || 304 === e ? (h.ifModified && (y = $.getResponseHeader("Last-Modified"), y && (X.lastModified[o] = y), y = $.getResponseHeader("Etag"), y && (X.etag[o] = y)), 304 === e ? (k = "notmodified", c = !0) : (c = S(h, b), k = c.state, u = c.data, _ = c.error, c = !_)) : (_ = k, k && !e || (k = "error", e < 0 && (e = 0))), $.status = e, $.statusText = (i || k) + "", c ? m.resolveWith(p, [u, k, $]) : m.rejectWith(p, [$, k, _]), $.statusCode(v), v = t, d && f.trigger("ajax" + (c ? "Success" : "Error"), [$, h, c ? u : _]), g.fireWith(p, [$, k]), d && (f.trigger("ajaxComplete", [$, h]), --X.active || X.event.trigger("ajaxStop")))
            }
            "object" == typeof e && (i = e, e = t), i = i || {};
            var o,
                a,
                s,
                r,
                l,
                c,
                d,
                u,
                h = X.ajaxSetup({}, i),
                p = h.context || h,
                f = p !== h && (p.nodeType || p instanceof X) ? X(p) : X.event,
                m = X.Deferred(),
                g = X.Callbacks("once memory"),
                v = h.statusCode || {},
                _ = {},
                b = {},
                w = 0,
                y = "canceled",
                $ = {
                    readyState: 0,
                    setRequestHeader: function(e, t) {
                        if (!w) {
                            var i = e.toLowerCase();
                            e = b[i] = b[i] || e, _[e] = t
                        }
                        return this
                    },
                    getAllResponseHeaders: function() {
                        return 2 === w ? a : null
                    },
                    getResponseHeader: function(e) {
                        var i;
                        if (2 === w) {
                            if (!s)
                                for (s = {}; i = It.exec(a);)
                                    s[i[1].toLowerCase()] = i[2];
                            i = s[e.toLowerCase()]
                        }
                        return i === t ? null : i
                    },
                    overrideMimeType: function(e) {
                        return w || (h.mimeType = e), this
                    },
                    abort: function(e) {
                        return e = e || y, r && r.abort(e), n(0, e), this
                    }
                };
            if (m.promise($), $.success = $.done, $.error = $.fail, $.complete = g.add, $.statusCode = function(e) {
                if (e) {
                    var t;
                    if (w < 2)
                        for (t in e)
                            v[t] = [v[t], e[t]];
                    else
                        t = e[$.status], $.always(t)
                }
                return this
            }, h.url = ((e || h.url) + "").replace(Tt, "").replace(Dt, xt[1] + "//"), h.dataTypes = X.trim(h.dataType || "*").toLowerCase().split(te), null == h.crossDomain && (c = zt.exec(h.url.toLowerCase()), h.crossDomain = !(!c || c[1] === xt[1] && c[2] === xt[2] && (c[3] || ("http:" === c[1] ? 80 : 443)) == (xt[3] || ("http:" === xt[1] ? 80 : 443)))), h.data && h.processData && "string" != typeof h.data && (h.data = X.param(h.data, h.traditional)), C(Mt, h, i, $), 2 === w)
                return $;
            if (d = h.global, h.type = h.type.toUpperCase(), h.hasContent = !Pt.test(h.type), d && 0 === X.active++ && X.event.trigger("ajaxStart"), !h.hasContent && (h.data && (h.url += (At.test(h.url) ? "&" : "?") + h.data, delete h.data), o = h.url, h.cache === !1)) {
                var k = X.now(),
                    x = h.url.replace(jt, "$1_=" + k);
                h.url = x + (x === h.url ? (At.test(h.url) ? "&" : "?") + "_=" + k : "")
            }
            (h.data && h.hasContent && h.contentType !== !1 || i.contentType) && $.setRequestHeader("Content-Type", h.contentType), h.ifModified && (o = o || h.url, X.lastModified[o] && $.setRequestHeader("If-Modified-Since", X.lastModified[o]), X.etag[o] && $.setRequestHeader("If-None-Match", X.etag[o])), $.setRequestHeader("Accept", h.dataTypes[0] && h.accepts[h.dataTypes[0]] ? h.accepts[h.dataTypes[0]] + ("*" !== h.dataTypes[0] ? ", " + Ft + "; q=0.01" : "") : h.accepts["*"]);
            for (u in h.headers)
                $.setRequestHeader(u, h.headers[u]);
            if (!h.beforeSend || h.beforeSend.call(p, $, h) !== !1 && 2 !== w) {
                y = "abort";
                for (u in {
                    success: 1,
                    error: 1,
                    complete: 1
                })
                    $[u](h[u]);
                if (r = C(Nt, h, i, $)) {
                    $.readyState = 1, d && f.trigger("ajaxSend", [$, h]), h.async && h.timeout > 0 && (l = setTimeout(function() {
                        $.abort("timeout")
                    }, h.timeout));
                    try {
                        w = 1, r.send(_, n)
                    } catch (T) {
                        if (!(w < 2))
                            throw T;
                        n(-1, T)
                    }
                } else
                    n(-1, "No Transport");
                return $
            }
            return $.abort()
        },
        active: 0,
        lastModified: {},
        etag: {}
    });
    var Rt = [],
        Ht = /\?/,
        Bt = /(=)\?(?=&|$)|\?\?/,
        qt = X.now();
    X.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var e = Rt.pop() || X.expando + "_" + qt++;
            return this[e] = !0, e
        }
    }), X.ajaxPrefilter("json jsonp", function(i, n, o) {
        var a,
            s,
            r,
            l = i.data,
            c = i.url,
            d = i.jsonp !== !1,
            u = d && Bt.test(c),
            h = d && !u && "string" == typeof l && !(i.contentType || "").indexOf("application/x-www-form-urlencoded") && Bt.test(l);
        if ("jsonp" === i.dataTypes[0] || u || h)
            return a = i.jsonpCallback = X.isFunction(i.jsonpCallback) ? i.jsonpCallback() : i.jsonpCallback, s = e[a], u ? i.url = c.replace(Bt, "$1" + a) : h ? i.data = l.replace(Bt, "$1" + a) : d && (i.url += (Ht.test(c) ? "&" : "?") + i.jsonp + "=" + a), i.converters["script json"] = function() {
                return r || X.error(a + " was not called"), r[0]
            }, i.dataTypes[0] = "json", e[a] = function() {
                r = arguments
            }, o.always(function() {
                e[a] = s, i[a] && (i.jsonpCallback = n.jsonpCallback, Rt.push(a)), r && X.isFunction(s) && s(r[0]), r = s = t
            }), "script"
    }), X.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /javascript|ecmascript/
        },
        converters: {
            "text script": function(e) {
                return X.globalEval(e), e
            }
        }
    }), X.ajaxPrefilter("script", function(e) {
        e.cache === t && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1)
    }), X.ajaxTransport("script", function(e) {
        if (e.crossDomain) {
            var i,
                n = H.head || H.getElementsByTagName("head")[0] || H.documentElement;
            return {
                send: function(o, a) {
                    i = H.createElement("script"), i.async = "async", e.scriptCharset && (i.charset = e.scriptCharset), i.src = e.url, i.onload = i.onreadystatechange = function(e, o) {
                        (o || !i.readyState || /loaded|complete/.test(i.readyState)) && (i.onload = i.onreadystatechange = null, n && i.parentNode && n.removeChild(i), i = t, o || a(200, "success"))
                    }, n.insertBefore(i, n.firstChild)
                },
                abort: function() {
                    i && i.onload(0, 1)
                }
            }
        }
    });
    var Wt,
        Ut = !!e.ActiveXObject && function() {
            for (var e in Wt)
                Wt[e](0, 1)
        },
        Kt = 0;
    X.ajaxSettings.xhr = e.ActiveXObject ? function() {
        return !this.isLocal && P() || D()
    } : P, function(e) {
        X.extend(X.support, {
            ajax: !!e,
            cors: !!e && "withCredentials" in e
        })
    }(X.ajaxSettings.xhr()), X.support.ajax && X.ajaxTransport(function(i) {
        if (!i.crossDomain || X.support.cors) {
            var n;
            return {
                send: function(o, a) {
                    var s,
                        r,
                        l = i.xhr();
                    if (i.username ? l.open(i.type, i.url, i.async, i.username, i.password) : l.open(i.type, i.url, i.async), i.xhrFields)
                        for (r in i.xhrFields)
                            l[r] = i.xhrFields[r];
                    i.mimeType && l.overrideMimeType && l.overrideMimeType(i.mimeType), !i.crossDomain && !o["X-Requested-With"] && (o["X-Requested-With"] = "XMLHttpRequest");
                    try {
                        for (r in o)
                            l.setRequestHeader(r, o[r])
                    } catch (c) {}
                    l.send(i.hasContent && i.data || null), n = function(e, o) {
                        var r,
                            c,
                            d,
                            u,
                            h;
                        try {
                            if (n && (o || 4 === l.readyState))
                                if (n = t, s && (l.onreadystatechange = X.noop, Ut && delete Wt[s]), o)
                                    4 !== l.readyState && l.abort();
                                else {
                                    r = l.status, d = l.getAllResponseHeaders(), u = {}, h = l.responseXML, h && h.documentElement && (u.xml = h);
                                    try {
                                        u.text = l.responseText
                                    } catch (p) {}
                                    try {
                                        c = l.statusText
                                    } catch (p) {
                                        c = ""
                                    }
                                    r || !i.isLocal || i.crossDomain ? 1223 === r && (r = 204) : r = u.text ? 200 : 404
                                }
                        } catch (f) {
                            o || a(-1, f)
                        }
                        u && a(r, c, u, d)
                    }, i.async ? 4 === l.readyState ? setTimeout(n, 0) : (s = ++Kt, Ut && (Wt || (Wt = {}, X(e).unload(Ut)), Wt[s] = n), l.onreadystatechange = n) : n()
                },
                abort: function() {
                    n && n(0, 1)
                }
            }
        }
    });
    var Yt,
        Zt,
        Qt = /^(?:toggle|show|hide)$/,
        Vt = new RegExp("^(?:([-+])=|)(" + J + ")([a-z%]*)$", "i"),
        Gt = /queueHooks$/,
        Xt = [E],
        Jt = {
            "*": [function(e, t) {
                var i,
                    n,
                    o = this.createTween(e, t),
                    a = Vt.exec(t),
                    s = o.cur(),
                    r = +s || 0,
                    l = 1,
                    c = 20;
                if (a) {
                    if (i = +a[2], n = a[3] || (X.cssNumber[e] ? "" : "px"), "px" !== n && r) {
                        r = X.css(o.elem, e, !0) || i || 1;
                        do l = l || ".5", r /= l, X.style(o.elem, e, r + n);
                        while (l !== (l = o.cur() / s) && 1 !== l && --c)
                    }
                    o.unit = n, o.start = r, o.end = a[1] ? r + (a[1] + 1) * i : i
                }
                return o
            }]
        };
    X.Animation = X.extend(j, {
        tweener: function(e, t) {
            X.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" ");
            for (var i, n = 0, o = e.length; n < o; n++)
                i = e[n], Jt[i] = Jt[i] || [], Jt[i].unshift(t)
        },
        prefilter: function(e, t) {
            t ? Xt.unshift(e) : Xt.push(e)
        }
    }), X.Tween = M, M.prototype = {
        constructor: M,
        init: function(e, t, i, n, o, a) {
            this.elem = e, this.prop = i, this.easing = o || "swing", this.options = t, this.start = this.now = this.cur(), this.end = n, this.unit = a || (X.cssNumber[i] ? "" : "px")
        },
        cur: function() {
            var e = M.propHooks[this.prop];
            return e && e.get ? e.get(this) : M.propHooks._default.get(this)
        },
        run: function(e) {
            var t,
                i = M.propHooks[this.prop];
            return this.options.duration ? this.pos = t = X.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), i && i.set ? i.set(this) : M.propHooks._default.set(this), this
        }
    }, M.prototype.init.prototype = M.prototype, M.propHooks = {
        _default: {
            get: function(e) {
                var t;
                return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = X.css(e.elem, e.prop, !1, ""), t && "auto" !== t ? t : 0) : e.elem[e.prop]
            },
            set: function(e) {
                X.fx.step[e.prop] ? X.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[X.cssProps[e.prop]] || X.cssHooks[e.prop]) ? X.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now
            }
        }
    }, M.propHooks.scrollTop = M.propHooks.scrollLeft = {
        set: function(e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
        }
    }, X.each(["toggle", "show", "hide"], function(e, t) {
        var i = X.fn[t];
        X.fn[t] = function(n, o, a) {
            return null == n || "boolean" == typeof n || !e && X.isFunction(n) && X.isFunction(o) ? i.apply(this, arguments) : this.animate(N(t, !0), n, o, a)
        }
    }), X.fn.extend({
        fadeTo: function(e, t, i, n) {
            return this.filter(v).css("opacity", 0).show().end().animate({
                opacity: t
            }, e, i, n)
        },
        animate: function(e, t, i, n) {
            var o = X.isEmptyObject(e),
                a = X.speed(t, i, n),
                s = function() {
                    var t = j(this, X.extend({}, e), a);
                    o && t.stop(!0)
                };
            return o || a.queue === !1 ? this.each(s) : this.queue(a.queue, s)
        },
        stop: function(e, i, n) {
            var o = function(e) {
                var t = e.stop;
                delete e.stop, t(n)
            };
            return "string" != typeof e && (n = i, i = e, e = t), i && e !== !1 && this.queue(e || "fx", []), this.each(function() {
                var t = !0,
                    i = null != e && e + "queueHooks",
                    a = X.timers,
                    s = X._data(this);
                if (i)
                    s[i] && s[i].stop && o(s[i]);
                else
                    for (i in s)
                        s[i] && s[i].stop && Gt.test(i) && o(s[i]);
                for (i = a.length; i--;)
                    a[i].elem === this && (null == e || a[i].queue === e) && (a[i].anim.stop(n), t = !1, a.splice(i, 1));
                (t || !n) && X.dequeue(this, e)
            })
        }
    }), X.each({
        slideDown: N("show"),
        slideUp: N("hide"),
        slideToggle: N("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(e, t) {
        X.fn[e] = function(e, i, n) {
            return this.animate(t, e, i, n)
        }
    }), X.speed = function(e, t, i) {
        var n = e && "object" == typeof e ? X.extend({}, e) : {
            complete: i || !i && t || X.isFunction(e) && e,
            duration: e,
            easing: i && t || t && !X.isFunction(t) && t
        };
        return n.duration = X.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in X.fx.speeds ? X.fx.speeds[n.duration] : X.fx.speeds._default, null != n.queue && n.queue !== !0 || (n.queue = "fx"), n.old = n.complete, n.complete = function() {
            X.isFunction(n.old) && n.old.call(this), n.queue && X.dequeue(this, n.queue)
        }, n
    }, X.easing = {
        linear: function(e) {
            return e
        },
        swing: function(e) {
            return .5 - Math.cos(e * Math.PI) / 2
        }
    }, X.timers = [], X.fx = M.prototype.init, X.fx.tick = function() {
        var e,
            i = X.timers,
            n = 0;
        for (Yt = X.now(); n < i.length; n++)
            e = i[n], !e() && i[n] === e && i.splice(n--, 1);
        i.length || X.fx.stop(), Yt = t
    }, X.fx.timer = function(e) {
        e() && X.timers.push(e) && !Zt && (Zt = setInterval(X.fx.tick, X.fx.interval))
    }, X.fx.interval = 13, X.fx.stop = function() {
        clearInterval(Zt), Zt = null
    }, X.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, X.fx.step = {}, X.expr && X.expr.filters && (X.expr.filters.animated = function(e) {
        return X.grep(X.timers, function(t) {
            return e === t.elem
        }).length
    });
    var ei = /^(?:body|html)$/i;
    X.fn.offset = function(e) {
        if (arguments.length)
            return e === t ? this : this.each(function(t) {
                X.offset.setOffset(this, e, t)
            });
        var i,
            n,
            o,
            a,
            s,
            r,
            l,
            c = {
                top: 0,
                left: 0
            },
            d = this[0],
            u = d && d.ownerDocument;
        if (u)
            return (n = u.body) === d ? X.offset.bodyOffset(d) : (i = u.documentElement, X.contains(i, d) ? ("undefined" != typeof d.getBoundingClientRect && (c = d.getBoundingClientRect()), o = F(u), a = i.clientTop || n.clientTop || 0, s = i.clientLeft || n.clientLeft || 0, r = o.pageYOffset || i.scrollTop, l = o.pageXOffset || i.scrollLeft, {
                top: c.top + r - a,
                left: c.left + l - s
            }) : c)
    }, X.offset = {
        bodyOffset: function(e) {
            var t = e.offsetTop,
                i = e.offsetLeft;
            return X.support.doesNotIncludeMarginInBodyOffset && (t += parseFloat(X.css(e, "marginTop")) || 0, i += parseFloat(X.css(e, "marginLeft")) || 0), {
                top: t,
                left: i
            }
        },
        setOffset: function(e, t, i) {
            var n = X.css(e, "position");
            "static" === n && (e.style.position = "relative");
            var o,
                a,
                s = X(e),
                r = s.offset(),
                l = X.css(e, "top"),
                c = X.css(e, "left"),
                d = ("absolute" === n || "fixed" === n) && X.inArray("auto", [l, c]) > -1,
                u = {},
                h = {};
            d ? (h = s.position(), o = h.top, a = h.left) : (o = parseFloat(l) || 0, a = parseFloat(c) || 0), X.isFunction(t) && (t = t.call(e, i, r)), null != t.top && (u.top = t.top - r.top + o), null != t.left && (u.left = t.left - r.left + a), "using" in t ? t.using.call(e, u) : s.css(u)
        }
    }, X.fn.extend({
        position: function() {
            if (this[0]) {
                var e = this[0],
                    t = this.offsetParent(),
                    i = this.offset(),
                    n = ei.test(t[0].nodeName) ? {
                        top: 0,
                        left: 0
                    } : t.offset();
                return i.top -= parseFloat(X.css(e, "marginTop")) || 0, i.left -= parseFloat(X.css(e, "marginLeft")) || 0, n.top += parseFloat(X.css(t[0], "borderTopWidth")) || 0, n.left += parseFloat(X.css(t[0], "borderLeftWidth")) || 0, {
                    top: i.top - n.top,
                    left: i.left - n.left
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var e = this.offsetParent || H.body; e && !ei.test(e.nodeName) && "static" === X.css(e, "position");)
                    e = e.offsetParent;
                return e || H.body
            })
        }
    }), X.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(e, i) {
        var n = /Y/.test(i);
        X.fn[e] = function(o) {
            return X.access(this, function(e, o, a) {
                var s = F(e);
                return a === t ? s ? i in s ? s[i] : s.document.documentElement[o] : e[o] : void (s ? s.scrollTo(n ? X(s).scrollLeft() : a, n ? a : X(s).scrollTop()) : e[o] = a)
            }, e, o, arguments.length, null)
        }
    }), X.each({
        Height: "height",
        Width: "width"
    }, function(e, i) {
        X.each({
            padding: "inner" + e,
            content: i,
            "": "outer" + e
        }, function(n, o) {
            X.fn[o] = function(o, a) {
                var s = arguments.length && (n || "boolean" != typeof o),
                    r = n || (o === !0 || a === !0 ? "margin" : "border");
                return X.access(this, function(i, n, o) {
                    var a;
                    return X.isWindow(i) ? i.document.documentElement["client" + e] : 9 === i.nodeType ? (a = i.documentElement, Math.max(i.body["scroll" + e], a["scroll" + e], i.body["offset" + e], a["offset" + e], a["client" + e])) : o === t ? X.css(i, n, o, r) : X.style(i, n, o, r)
                }, i, s ? o : t, s, null)
            }
        })
    }), e.jQuery = e.$ = X, "function" == typeof define && define.amd && define.amd.jQuery && define("jquery", [], function() {
        return X
    })
}(window), function(e) {
    e.fn.unveil = function(t, i) {
        function n() {
            var t = c.filter(function() {
                var t = e(this);
                if ("none" != t.css("display") && (0 != t.offset().width || 0 != t.offset().height)) {
                    var i = a.scrollTop(),
                        n = i + a.height(),
                        o = t.offset().top,
                        r = o + t.height();
                    return r >= i - s && o <= n + s && !e(this).hasClass("lazyback")
                }
            });
            o = t.trigger("unveil"), c = c.not(o)
        }
        var o,
            a = e(window),
            s = t || 0,
            r = window.devicePixelRatio > 1,
            l = r ? "data-src-retina" : "data-src",
            c = this;
        return this.one("unveil", function() {
            var t = this.getAttribute(l);
            t = t || this.getAttribute("data-src"), t && (e(this).is("img") ? this.setAttribute("src", t) : e(this).css("background-image", "url('" + t + "')"), "function" == typeof i && i.call(this))
        }), "object" == typeof common && "function" == typeof common.byWindowAction ? common.byWindowAction(["scroll", "resize", "lookup"], n) : a.on("scroll.unveil resize.unveil lookup.unveil", n), n(), this
    }
}(window.jQuery || window.Zepto), !function(e) {
    "use strict";
    e(function() {
        e.support.transition = function() {
            var e = function() {
                var e,
                    t = document.createElement("bootstrap"),
                    i = {
                        WebkitTransition: "webkitTransitionEnd",
                        MozTransition: "transitionend",
                        OTransition: "oTransitionEnd otransitionend",
                        transition: "transitionend"
                    };
                for (e in i)
                    if (void 0 !== t.style[e])
                        return i[e]
            }();
            return e && {
                    end: e
                }
        }()
    })
}(window.jQuery), !function(e) {
    "use strict";
    var t = '[data-dismiss="alert"]',
        i = function(i) {
            e(i).on("click", t, this.close)
        };
    i.prototype.close = function(t) {
        function i() {
            n.trigger("closed").remove()
        }
        var n,
            o = e(this),
            a = o.attr("data-target");
        a || (a = o.attr("href"), a = a && a.replace(/.*(?=#[^\s]*$)/, "")), n = e(a), t && t.preventDefault(), n.length || (n = o.hasClass("alert") ? o : o.parent()), n.trigger(t = e.Event("close")), t.isDefaultPrevented() || (n.removeClass("in"), e.support.transition && n.hasClass("fade") ? n.on(e.support.transition.end, i) : i())
    };
    var n = e.fn.alert;
    e.fn.alert = function(t) {
        return this.each(function() {
            var n = e(this),
                o = n.data("alert");
            o || n.data("alert", o = new i(this)), "string" == typeof t && o[t].call(n)
        })
    }, e.fn.alert.Constructor = i, e.fn.alert.noConflict = function() {
        return e.fn.alert = n, this
    }, e(document).on("click.alert.data-api", t, i.prototype.close)
}(window.jQuery), !function(e) {
    "use strict";
    var t = function(t, i) {
        this.$element = e(t), this.options = e.extend({}, e.fn.button.defaults, i)
    };
    t.prototype.setState = function(e) {
        var t = "disabled",
            i = this.$element,
            n = i.data(),
            o = i.is("input") ? "val" : "html";
        e += "Text", n.resetText || i.data("resetText", i[o]()), i[o](n[e] || this.options[e]), setTimeout(function() {
            "loadingText" == e ? i.addClass(t).attr(t, t) : i.removeClass(t).removeAttr(t)
        }, 0)
    }, t.prototype.toggle = function() {
        var e = this.$element.closest('[data-toggle="buttons-radio"]');
        e && e.find(".active").removeClass("active"), this.$element.toggleClass("active")
    };
    var i = e.fn.button;
    e.fn.button = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("button"),
                a = "object" == typeof i && i;
            o || n.data("button", o = new t(this, a)), "toggle" == i ? o.toggle() : i && o.setState(i)
        })
    }, e.fn.button.defaults = {
        loadingText: "loading..."
    }, e.fn.button.Constructor = t, e.fn.button.noConflict = function() {
        return e.fn.button = i, this
    }, e(document).on("click.button.data-api", "[data-toggle^=button]", function(t) {
        var i = e(t.target);
        i.hasClass("btn") || (i = i.closest(".btn")), i.button("toggle")
    })
}(window.jQuery), !function(e) {
    "use strict";
    var t = function(t, i) {
        this.$element = e(t), this.$indicators = this.$element.find(".carousel-indicators"), this.options = i, "hover" == this.options.pause && this.$element.on("mouseenter", e.proxy(this.pause, this)).on("mouseleave", e.proxy(this.cycle, this))
    };
    t.prototype = {
        cycle: function(t) {
            return t || (this.paused = !1), this.interval && clearInterval(this.interval), this.options.interval && !this.paused && (this.interval = setInterval(e.proxy(this.next, this), this.options.interval)), this
        },
        getActiveIndex: function() {
            return this.$active = this.$element.find(".item.active"), this.$items = this.$active.parent().children(), this.$items.index(this.$active)
        },
        to: function(t) {
            var i = this.getActiveIndex(),
                n = this;
            if (!(t > this.$items.length - 1 || t < 0))
                return this.sliding ? this.$element.one("slid", function() {
                    n.to(t)
                }) : i == t ? this.pause().cycle() : this.slide(t > i ? "next" : "prev", e(this.$items[t]))
        },
        pause: function(t) {
            return t || (this.paused = !0), this.$element.find(".next, .prev").length && e.support.transition.end && (this.$element.trigger(e.support.transition.end), this.cycle(!0)), clearInterval(this.interval), this.interval = null, this
        },
        next: function() {
            if (!this.sliding)
                return this.slide("next")
        },
        prev: function() {
            if (!this.sliding)
                return this.slide("prev")
        },
        slide: function(t, i) {
            var n,
                o = this.$element.find(".item.active"),
                a = i || o[t](),
                s = this.interval,
                r = "next" == t ? "left" : "right",
                l = "next" == t ? "first" : "last",
                c = this;
            if (this.sliding = !0, s && this.pause(), a = a.length ? a : this.$element.find(".item")[l](), n = e.Event("slide", {
                relatedTarget: a[0],
                direction: r
            }), !a.hasClass("active")) {
                if (this.$indicators.length && (this.$indicators.find(".active").removeClass("active"), this.$element.one("slid", function() {
                    var t = e(c.$indicators.children()[c.getActiveIndex()]);
                    t && t.addClass("active")
                })), e.support.transition && this.$element.hasClass("slide")) {
                    if (this.$element.trigger(n), n.isDefaultPrevented())
                        return;
                    a.addClass(t), a[0].offsetWidth, o.addClass(r), a.addClass(r), this.$element.one(e.support.transition.end, function() {
                        a.removeClass([t, r].join(" ")).addClass("active"), o.removeClass(["active", r].join(" ")), c.sliding = !1, setTimeout(function() {
                            c.$element.trigger("slid")
                        }, 0)
                    })
                } else {
                    if (this.$element.trigger(n),
                    n.isDefaultPrevented())
                        return;
                    o.removeClass("active"), a.addClass("active"), this.sliding = !1, this.$element.trigger("slid")
                }
                return s && this.cycle(), this
            }
        }
    };
    var i = e.fn.carousel;
    e.fn.carousel = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("carousel"),
                a = e.extend({}, e.fn.carousel.defaults, "object" == typeof i && i),
                s = "string" == typeof i ? i : a.slide;
            o || n.data("carousel", o = new t(this, a)), "number" == typeof i ? o.to(i) : s ? o[s]() : a.interval && o.pause().cycle()
        })
    }, e.fn.carousel.defaults = {
        interval: 5e3,
        pause: "hover"
    }, e.fn.carousel.Constructor = t, e.fn.carousel.noConflict = function() {
        return e.fn.carousel = i, this
    }, e(document).on("click.carousel.data-api", "[data-slide], [data-slide-to]", function(t) {
        var i,
            n,
            o = e(this),
            a = e(o.attr("data-target") || (i = o.attr("href")) && i.replace(/.*(?=#[^\s]+$)/, "")),
            s = e.extend({}, a.data(), o.data());
        a.carousel(s), (n = o.attr("data-slide-to")) && a.data("carousel").pause().to(n).cycle(), t.preventDefault()
    })
}(window.jQuery), !function(e) {
    "use strict";
    var t = function(t, i) {
        this.$element = e(t), this.options = e.extend({}, e.fn.collapse.defaults, i), this.options.parent && (this.$parent = e(this.options.parent)), this.options.toggle && this.toggle()
    };
    t.prototype = {
        constructor: t,
        dimension: function() {
            var e = this.$element.hasClass("width");
            return e ? "width" : "height"
        },
        show: function() {
            var t,
                i,
                n,
                o;
            if (!this.transitioning && !this.$element.hasClass("in")) {
                if (t = this.dimension(), i = e.camelCase(["scroll", t].join("-")), n = this.$parent && this.$parent.find("> .accordion-group > .in"), n && n.length) {
                    if (o = n.data("collapse"), o && o.transitioning)
                        return;
                    n.collapse("hide"), o || n.data("collapse", null)
                }
                this.$element[t](0), this.transition("addClass", e.Event("show"), "shown"), e.support.transition && this.$element[t](this.$element[0][i])
            }
        },
        hide: function() {
            var t;
            !this.transitioning && this.$element.hasClass("in") && (t = this.dimension(), this.reset(this.$element[t]()), this.transition("removeClass", e.Event("hide"), "hidden"), this.$element[t](0))
        },
        reset: function(e) {
            var t = this.dimension();
            return this.$element.removeClass("collapse")[t](e || "auto")[0].offsetWidth, this.$element[null !== e ? "addClass" : "removeClass"]("collapse"), this
        },
        transition: function(t, i, n) {
            var o = this,
                a = function() {
                    "show" == i.type && o.reset(), o.transitioning = 0, o.$element.trigger(n)
                };
            this.$element.trigger(i), i.isDefaultPrevented() || (this.transitioning = 1, this.$element[t]("in"), e.support.transition && this.$element.hasClass("collapse") ? this.$element.one(e.support.transition.end, a) : a())
        },
        toggle: function() {
            this[this.$element.hasClass("in") ? "hide" : "show"]()
        }
    };
    var i = e.fn.collapse;
    e.fn.collapse = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("collapse"),
                a = e.extend({}, e.fn.collapse.defaults, n.data(), "object" == typeof i && i);
            o || n.data("collapse", o = new t(this, a)), "string" == typeof i && o[i]()
        })
    }, e.fn.collapse.defaults = {
        toggle: !0
    }, e.fn.collapse.Constructor = t, e.fn.collapse.noConflict = function() {
        return e.fn.collapse = i, this
    }, e(document).on("click.collapse.data-api", "[data-toggle=collapse]", function(t) {
        var i,
            n = e(this),
            o = n.attr("data-target") || t.preventDefault() || (i = n.attr("href")) && i.replace(/.*(?=#[^\s]+$)/, ""),
            a = e(o).data("collapse") ? "toggle" : n.data();
        n[e(o).hasClass("in") ? "addClass" : "removeClass"]("collapsed"), e(o).collapse(a)
    })
}(window.jQuery), !function(e) {
    "use strict";
    function t() {
        e(".dropdown-backdrop").remove(), e(n).each(function() {
            i(e(this)).removeClass("open")
        })
    }
    function i(t) {
        var i,
            n = t.attr("data-target");
        return n || (n = t.attr("href"), n = n && /#/.test(n) && n.replace(/.*(?=#[^\s]*$)/, "")), i = n && e(n), i && i.length || (i = t.parent()), i
    }
    var n = "[data-toggle=dropdown]",
        o = function(t) {
            var i = e(t).on("click.dropdown.data-api", this.toggle);
            e("html").on("click.dropdown.data-api", function() {
                i.parent().removeClass("open")
            })
        };
    o.prototype = {
        constructor: o,
        toggle: function(n) {
            var o,
                a,
                s = e(this);
            if (!s.is(".disabled, :disabled"))
                return o = i(s), a = o.hasClass("open"), t(), a || ("ontouchstart" in document.documentElement && e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click", t), o.toggleClass("open")), s.focus(), !1
        },
        keydown: function(t) {
            var o,
                a,
                s,
                r,
                l;
            if (/(38|40|27)/.test(t.keyCode) && (o = e(this), t.preventDefault(), t.stopPropagation(), !o.is(".disabled, :disabled"))) {
                if (s = i(o), r = s.hasClass("open"), !r || r && 27 == t.keyCode)
                    return 27 == t.which && s.find(n).focus(), o.click();
                a = e("[role=menu] li:not(.divider):visible a", s), a.length && (l = a.index(a.filter(":focus")), 38 == t.keyCode && l > 0 && l--, 40 == t.keyCode && l < a.length - 1 && l++, ~l || (l = 0), a.eq(l).focus())
            }
        }
    };
    var a = e.fn.dropdown;
    e.fn.dropdown = function(t) {
        return this.each(function() {
            var i = e(this),
                n = i.data("dropdown");
            n || i.data("dropdown", n = new o(this)), "string" == typeof t && n[t].call(i)
        })
    }, e.fn.dropdown.Constructor = o, e.fn.dropdown.noConflict = function() {
        return e.fn.dropdown = a, this
    }, e(document).on("click.dropdown.data-api", t).on("click.dropdown.data-api", ".dropdown form", function(e) {
        e.stopPropagation()
    }).on("click.dropdown.data-api", n, o.prototype.toggle).on("keydown.dropdown.data-api", n + ", [role=menu]", o.prototype.keydown)
}(window.jQuery), !function(e) {
    "use strict";
    var t = function(t, i) {
        this.options = i, this.$element = e(t).delegate('[data-dismiss="modal"]', "click.dismiss.modal", e.proxy(this.hide, this)), this.options.remote && this.$element.find(".modal-body").load(this.options.remote)
    };
    t.prototype = {
        constructor: t,
        toggle: function() {
            return this[this.isShown ? "hide" : "show"]()
        },
        show: function() {
            var t = this,
                i = e.Event("show");
            this.$element.trigger(i), this.isShown || i.isDefaultPrevented() || (this.isShown = !0, this.escape(), this.backdrop(function() {
                var i = e.support.transition && t.$element.hasClass("fade");
                t.$element.parent().length || t.$element.appendTo(document.body), t.$element.show(), i && t.$element[0].offsetWidth, t.$element.addClass("in").attr("aria-hidden", !1), t.enforceFocus(), i ? t.$element.one(e.support.transition.end, function() {
                    t.$element.focus().trigger("shown")
                }) : t.$element.focus().trigger("shown")
            }))
        },
        hide: function(t) {
            t && t.preventDefault();
            t = e.Event("hide"), this.$element.trigger(t), this.isShown && !t.isDefaultPrevented() && (this.isShown = !1, this.escape(), e(document).off("focusin.modal"), this.$element.removeClass("in").attr("aria-hidden", !0), e.support.transition && this.$element.hasClass("fade") ? this.hideWithTransition() : this.hideModal())
        },
        enforceFocus: function() {
            var t = this;
            e(document).on("focusin.modal", function(e) {
                t.$element[0] !== e.target && !t.$element.has(e.target).length && t.$element.focus()
            })
        },
        escape: function() {
            var e = this;
            this.isShown && this.options.keyboard ? this.$element.on("keyup.dismiss.modal", function(t) {
                27 == t.which && e.hide()
            }) : this.isShown || this.$element.off("keyup.dismiss.modal")
        },
        hideWithTransition: function() {
            var t = this,
                i = setTimeout(function() {
                    t.$element.off(e.support.transition.end), t.hideModal()
                }, 500);
            this.$element.one(e.support.transition.end, function() {
                clearTimeout(i), t.hideModal()
            })
        },
        hideModal: function() {
            var e = this;
            this.$element.hide(), this.backdrop(function() {
                e.removeBackdrop(), e.$element.trigger("hidden")
            })
        },
        removeBackdrop: function() {
            this.$backdrop && this.$backdrop.remove(), this.$backdrop = null
        },
        backdrop: function(t) {
            var i = this.$element.hasClass("fade") ? "fade" : "";
            if (this.isShown && this.options.backdrop) {
                var n = e.support.transition && i;
                if (this.$backdrop = e('<div class="modal-backdrop ' + i + '" />').appendTo(document.body), this.$backdrop.click("static" == this.options.backdrop ? e.proxy(this.$element[0].focus, this.$element[0]) : e.proxy(this.hide, this)), n && this.$backdrop[0].offsetWidth, this.$backdrop.addClass("in"), !t)
                    return;
                n ? this.$backdrop.one(e.support.transition.end, t) : t()
            } else
                !this.isShown && this.$backdrop ? (this.$backdrop.removeClass("in"), e.support.transition && this.$element.hasClass("fade") ? this.$backdrop.one(e.support.transition.end, t) : t()) : t && t()
        }
    };
    var i = e.fn.modal;
    e.fn.modal = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("modal"),
                a = e.extend({}, e.fn.modal.defaults, n.data(), "object" == typeof i && i);
            o || n.data("modal", o = new t(this, a)), "string" == typeof i ? o[i]() : a.show && o.show()
        })
    }, e.fn.modal.defaults = {
        backdrop: !0,
        keyboard: !0,
        show: !0
    }, e.fn.modal.Constructor = t, e.fn.modal.noConflict = function() {
        return e.fn.modal = i, this
    }, e(document).on("click.modal.data-api", '[data-toggle="modal"]', function(t) {
        var i = e(this),
            n = i.attr("href"),
            o = e(i.attr("data-target") || n && n.replace(/.*(?=#[^\s]+$)/, "")),
            a = o.data("modal") ? "toggle" : e.extend({
                remote: !/#/.test(n) && n
            }, o.data(), i.data());
        t.preventDefault(), o.modal(a).one("hide", function() {
            i.focus()
        })
    })
}(window.jQuery), !function(e) {
    "use strict";
    var t = function(e, t) {
        this.init("tooltip", e, t)
    };
    t.prototype = {
        constructor: t,
        init: function(t, i, n) {
            var o,
                a,
                s,
                r,
                l;
            for (this.type = t, this.$element = e(i), this.options = this.getOptions(n), this.enabled = !0, s = this.options.trigger.split(" "), l = s.length; l--;)
                r = s[l], "click" == r ? this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this)) : "manual" != r && (o = "hover" == r ? "mouseenter" : "focus", a = "hover" == r ? "mouseleave" : "blur", this.$element.on(o + "." + this.type, this.options.selector, e.proxy(this.enter, this)), this.$element.on(a + "." + this.type, this.options.selector, e.proxy(this.leave, this)));
            this.options.selector ? this._options = e.extend({}, this.options, {
                trigger: "manual",
                selector: ""
            }) : this.fixTitle()
        },
        getOptions: function(t) {
            return t = e.extend({}, e.fn[this.type].defaults, this.$element.data(), t), t.delay && "number" == typeof t.delay && (t.delay = {
                show: t.delay,
                hide: t.delay
            }), t
        },
        enter: function(t) {
            var i,
                n = e.fn[this.type].defaults,
                o = {};
            return this._options && e.each(this._options, function(e, t) {
                n[e] != t && (o[e] = t)
            }, this), i = e(t.currentTarget)[this.type](o).data(this.type), i.options.delay && i.options.delay.show ? (clearTimeout(this.timeout), i.hoverState = "in", this.timeout = setTimeout(function() {
                "in" == i.hoverState && i.show()
            }, i.options.delay.show), void 0) : i.show()
        },
        leave: function(t) {
            var i = e(t.currentTarget)[this.type](this._options).data(this.type);
            return this.timeout && clearTimeout(this.timeout), i.options.delay && i.options.delay.hide ? (i.hoverState = "out", void (this.timeout = setTimeout(function() {
                "out" == i.hoverState && i.hide()
            }, i.options.delay.hide))) : i.hide()
        },
        show: function() {
            var t,
                i,
                n,
                o,
                a,
                s,
                r = e.Event("show");
            if (this.hasContent() && this.enabled) {
                if (this.$element.trigger(r), r.isDefaultPrevented())
                    return;
                switch (t = this.tip(), this.setContent(), this.options.animation && t.addClass("fade"), a = "function" == typeof this.options.placement ? this.options.placement.call(this, t[0], this.$element[0]) : this.options.placement, t.detach().css({
                    top: 0,
                    left: 0,
                    display: "block"
                }), this.options.container ? t.appendTo(this.options.container) : t.insertAfter(this.$element), i = this.getPosition(), n = t[0].offsetWidth, o = t[0].offsetHeight, a) {
                case "bottom":
                    s = {
                        top: i.top + i.height,
                        left: i.left + i.width / 2 - n / 2
                    };
                    break;
                case "top":
                    s = {
                        top: i.top - o,
                        left: i.left + i.width / 2 - n / 2
                    };
                    break;
                case "left":
                    s = {
                        top: i.top + i.height / 2 - o / 2,
                        left: i.left - n
                    };
                    break;
                case "right":
                    s = {
                        top: i.top + i.height / 2 - o / 2,
                        left: i.left + i.width
                    }
                }
                this.applyPlacement(s, a), this.$element.trigger("shown")
            }
        },
        applyPlacement: function(e, t) {
            var i,
                n,
                o,
                a,
                s = this.tip(),
                r = s[0].offsetWidth,
                l = s[0].offsetHeight;
            s.offset(e).addClass(t).addClass("in"), i = s[0].offsetWidth, n = s[0].offsetHeight, "top" == t && n != l && (e.top = e.top + l - n, a = !0), "bottom" == t || "top" == t ? (o = 0, e.left < 0 && (o = e.left * -2, e.left = 0, s.offset(e), i = s[0].offsetWidth, n = s[0].offsetHeight), this.replaceArrow(o - r + i, i, "left")) : this.replaceArrow(n - l, n, "top"), a && s.offset(e)
        },
        replaceArrow: function(e, t, i) {
            this.arrow().css(i, e ? 50 * (1 - e / t) + "%" : "")
        },
        setContent: function() {
            var e = this.tip(),
                t = this.getTitle();
            e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t), e.removeClass("fade in top bottom left right")
        },
        hide: function() {
            function t() {
                var t = setTimeout(function() {
                    i.off(e.support.transition.end).detach()
                }, 500);
                i.one(e.support.transition.end, function() {
                    clearTimeout(t), i.detach()
                })
            }
            var i = this.tip(),
                n = e.Event("hide");
            if (this.$element.trigger(n), !n.isDefaultPrevented())
                return i.removeClass("in"), e.support.transition && this.$tip.hasClass("fade") ? t() : i.detach(), this.$element.trigger("hidden"), this
        },
        fixTitle: function() {
            var e = this.$element;
            (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "")
        },
        hasContent: function() {
            return this.getTitle()
        },
        getPosition: function() {
            var t = this.$element[0];
            return e.extend({}, "function" == typeof t.getBoundingClientRect ? t.getBoundingClientRect() : {
                width: t.offsetWidth,
                height: t.offsetHeight
            }, this.$element.offset())
        },
        getTitle: function() {
            var e,
                t = this.$element,
                i = this.options;
            return e = t.attr("data-original-title") || ("function" == typeof i.title ? i.title.call(t[0]) : i.title)
        },
        tip: function() {
            return this.$tip = this.$tip || e(this.options.template)
        },
        arrow: function() {
            return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
        },
        validate: function() {
            this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null)
        },
        enable: function() {
            this.enabled = !0
        },
        disable: function() {
            this.enabled = !1
        },
        toggleEnabled: function() {
            this.enabled = !this.enabled
        },
        toggle: function(t) {
            var i = t ? e(t.currentTarget)[this.type](this._options).data(this.type) : this;
            i.tip().hasClass("in") ? i.hide() : i.show()
        },
        destroy: function() {
            this.hide().$element.off("." + this.type).removeData(this.type)
        }
    };
    var i = e.fn.tooltip;
    e.fn.tooltip = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("tooltip"),
                a = "object" == typeof i && i;
            o || n.data("tooltip", o = new t(this, a)), "string" == typeof i && o[i]()
        })
    }, e.fn.tooltip.Constructor = t, e.fn.tooltip.defaults = {
        animation: !0,
        placement: "top",
        selector: !1,
        template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
        trigger: "hover focus",
        title: "",
        delay: 0,
        html: !1,
        container: !1
    }, e.fn.tooltip.noConflict = function() {
        return e.fn.tooltip = i, this
    }
}(window.jQuery), !function(e) {
    "use strict";
    var t = function(e, t) {
        this.init("popover", e, t)
    };
    t.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype, {
        constructor: t,
        setContent: function() {
            var e = this.tip(),
                t = this.getTitle(),
                i = this.getContent();
            e.find(".popover-title")[this.options.html ? "html" : "text"](t), e.find(".popover-content")[this.options.html ? "html" : "text"](i), e.removeClass("fade top bottom left right in")
        },
        hasContent: function() {
            return this.getTitle() || this.getContent()
        },
        getContent: function() {
            var e,
                t = this.$element,
                i = this.options;
            return e = ("function" == typeof i.content ? i.content.call(t[0]) : i.content) || t.attr("data-content")
        },
        tip: function() {
            return this.$tip || (this.$tip = e(this.options.template)), this.$tip
        },
        destroy: function() {
            this.hide().$element.off("." + this.type).removeData(this.type)
        }
    });
    var i = e.fn.popover;
    e.fn.popover = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("popover"),
                a = "object" == typeof i && i;
            o || n.data("popover", o = new t(this, a)), "string" == typeof i && o[i]()
        })
    }, e.fn.popover.Constructor = t, e.fn.popover.defaults = e.extend({}, e.fn.tooltip.defaults, {
        placement: "right",
        trigger: "click",
        content: "",
        template: '<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
    }), e.fn.popover.noConflict = function() {
        return e.fn.popover = i, this
    }
}(window.jQuery), !function(e) {
    "use strict";
    function t(t, i) {
        var n,
            o = e.proxy(this.process, this),
            a = e(e(t).is("body") ? window : t);
        this.options = e.extend({}, e.fn.scrollspy.defaults, i), this.$scrollElement = a.on("scroll.scroll-spy.data-api", o), this.selector = (this.options.target || (n = e(t).attr("href")) && n.replace(/.*(?=#[^\s]+$)/, "") || "") + " .nav li > a", this.$body = e("body"), this.refresh(), this.process()
    }
    t.prototype = {
        constructor: t,
        refresh: function() {
            var t,
                i = this;
            this.offsets = e([]), this.targets = e([]), t = this.$body.find(this.selector).map(function() {
                var t = e(this),
                    n = t.data("target") || t.attr("href"),
                    o = /^#\w/.test(n) && e(n);
                return o && o.length && [[o.position().top + (!e.isWindow(i.$scrollElement.get(0)) && i.$scrollElement.scrollTop()), n]] || null
            }).sort(function(e, t) {
                return e[0] - t[0]
            }).each(function() {
                i.offsets.push(this[0]), i.targets.push(this[1])
            })
        },
        process: function() {
            var e,
                t = this.$scrollElement.scrollTop() + this.options.offset,
                i = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight,
                n = i - this.$scrollElement.height(),
                o = this.offsets,
                a = this.targets,
                s = this.activeTarget;
            if (t >= n)
                return s != (e = a.last()[0]) && this.activate(e);
            for (e = o.length; e--;)
                s != a[e] && t >= o[e] && (!o[e + 1] || t <= o[e + 1]) && this.activate(a[e])
        },
        activate: function(t) {
            var i,
                n;
            this.activeTarget = t, e(this.selector).parent(".active").removeClass("active"), n = this.selector + '[data-target="' + t + '"],' + this.selector + '[href="' + t + '"]', i = e(n).parent("li").addClass("active"), i.parent(".dropdown-menu").length && (i = i.closest("li.dropdown").addClass("active")), i.trigger("activate")
        }
    };
    var i = e.fn.scrollspy;
    e.fn.scrollspy = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("scrollspy"),
                a = "object" == typeof i && i;
            o || n.data("scrollspy", o = new t(this, a)), "string" == typeof i && o[i]()
        })
    }, e.fn.scrollspy.Constructor = t, e.fn.scrollspy.defaults = {
        offset: 10
    }, e.fn.scrollspy.noConflict = function() {
        return e.fn.scrollspy = i, this
    }, e(window).on("load", function() {
        e('[data-spy="scroll"]').each(function() {
            var t = e(this);
            t.scrollspy(t.data())
        })
    })
}(window.jQuery), !function(e) {
    "use strict";
    var t = function(t) {
        this.element = e(t)
    };
    t.prototype = {
        constructor: t,
        show: function() {
            var t,
                i,
                n,
                o = this.element,
                a = o.closest("ul:not(.dropdown-menu)"),
                s = o.attr("data-target");
            s || (s = o.attr("href"), s = s && s.replace(/.*(?=#[^\s]*$)/, "")), o.parent("li").hasClass("active") || (t = a.find(".active:last a")[0], n = e.Event("show", {
                relatedTarget: t
            }), o.trigger(n), n.isDefaultPrevented() || (i = e(s), this.activate(o.parent("li"), a), this.activate(i, i.parent(), function() {
                o.trigger({
                    type: "shown",
                    relatedTarget: t
                })
            })))
        },
        activate: function(t, i, n) {
            function o() {
                a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"), t.addClass("active"), s ? (t[0].offsetWidth, t.addClass("in")) : t.removeClass("fade"), t.parent(".dropdown-menu") && t.closest("li.dropdown").addClass("active"), n && n()
            }
            var a = i.find("> .active"),
                s = n && e.support.transition && a.hasClass("fade");
            s ? a.one(e.support.transition.end, o) : o(), a.removeClass("in")
        }
    };
    var i = e.fn.tab;
    e.fn.tab = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("tab");
            o || n.data("tab", o = new t(this)), "string" == typeof i && o[i]()
        })
    }, e.fn.tab.Constructor = t, e.fn.tab.noConflict = function() {
        return e.fn.tab = i, this
    }, e(document).on("click.tab.data-api", '[data-toggle="tab"], [data-toggle="pill"]', function(t) {
        t.preventDefault(), e(this).tab("show")
    })
}(window.jQuery), !function(e) {
    "use strict";
    var t = function(t, i) {
        this.$element = e(t), this.options = e.extend({}, e.fn.typeahead.defaults, i), this.matcher = this.options.matcher || this.matcher, this.sorter = this.options.sorter || this.sorter, this.highlighter = this.options.highlighter || this.highlighter, this.updater = this.options.updater || this.updater, this.source = this.options.source, this.$menu = e(this.options.menu), this.shown = !1, this.listen()
    };
    t.prototype = {
        constructor: t,
        select: function() {
            var e = this.$menu.find(".active").attr("data-value");
            return this.$element.val(this.updater(e)).change(), this.hide()
        },
        updater: function(e) {
            return e
        },
        show: function() {
            var t = e.extend({}, this.$element.position(), {
                height: this.$element[0].offsetHeight
            });
            return this.$menu.insertAfter(this.$element).css({
                top: t.top + t.height,
                left: t.left
            }).show(), this.shown = !0, this
        },
        hide: function() {
            return this.$menu.hide(), this.shown = !1, this
        },
        lookup: function(t) {
            var i;
            return this.query = this.$element.val(), !this.query || this.query.length < this.options.minLength ? this.shown ? this.hide() : this : (i = e.isFunction(this.source) ? this.source(this.query, e.proxy(this.process, this)) : this.source, i ? this.process(i) : this)
        },
        process: function(t) {
            var i = this;
            return t = e.grep(t, function(e) {
                return i.matcher(e)
            }), t = this.sorter(t), t.length ? this.render(t.slice(0, this.options.items)).show() : this.shown ? this.hide() : this
        },
        matcher: function(e) {
            return ~e.toLowerCase().indexOf(this.query.toLowerCase())
        },
        sorter: function(e) {
            for (var t, i = [], n = [], o = []; t = e.shift();)
                t.toLowerCase().indexOf(this.query.toLowerCase()) ? ~t.indexOf(this.query) ? n.push(t) : o.push(t) : i.push(t);
            return i.concat(n, o)
        },
        highlighter: function(e) {
            var t = this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
            return e.replace(new RegExp("(" + t + ")", "ig"), function(e, t) {
                return "<strong>" + t + "</strong>"
            })
        },
        render: function(t) {
            var i = this;
            return t = e(t).map(function(t, n) {
                return t = e(i.options.item).attr("data-value", n), t.find("a").html(i.highlighter(n)), t[0]
            }), t.first().addClass("active"), this.$menu.html(t), this
        },
        next: function(t) {
            var i = this.$menu.find(".active").removeClass("active"),
                n = i.next();
            n.length || (n = e(this.$menu.find("li")[0])), n.addClass("active")
        },
        prev: function(e) {
            var t = this.$menu.find(".active").removeClass("active"),
                i = t.prev();
            i.length || (i = this.$menu.find("li").last()), i.addClass("active")
        },
        listen: function() {
            this.$element.on("focus", e.proxy(this.focus, this)).on("blur", e.proxy(this.blur, this)).on("keypress", e.proxy(this.keypress, this)).on("keyup", e.proxy(this.keyup, this)), this.eventSupported("keydown") && this.$element.on("keydown", e.proxy(this.keydown, this)), this.$menu.on("click", e.proxy(this.click, this)).on("mouseenter", "li", e.proxy(this.mouseenter, this)).on("mouseleave", "li", e.proxy(this.mouseleave, this))
        },
        eventSupported: function(e) {
            var t = e in this.$element;
            return t || (this.$element.setAttribute(e, "return;"), t = "function" == typeof this.$element[e]), t
        },
        move: function(e) {
            if (this.shown) {
                switch (e.keyCode) {
                case 9:
                case 13:
                case 27:
                    e.preventDefault();
                    break;
                case 38:
                    e.preventDefault(), this.prev();
                    break;
                case 40:
                    e.preventDefault(), this.next()
                }
                e.stopPropagation()
            }
        },
        keydown: function(t) {
            this.suppressKeyPressRepeat = ~e.inArray(t.keyCode, [40, 38, 9, 13, 27]), this.move(t)
        },
        keypress: function(e) {
            this.suppressKeyPressRepeat || this.move(e)
        },
        keyup: function(e) {
            switch (e.keyCode) {
            case 40:
            case 38:
            case 16:
            case 17:
            case 18:
                break;
            case 9:
            case 13:
                if (!this.shown)
                    return;
                this.select();
                break;
            case 27:
                if (!this.shown)
                    return;
                this.hide();
                break;
            default:
                this.lookup()
            }
            e.stopPropagation(), e.preventDefault()
        },
        focus: function(e) {
            this.focused = !0
        },
        blur: function(e) {
            this.focused = !1, !this.mousedover && this.shown && this.hide()
        },
        click: function(e) {
            e.stopPropagation(), e.preventDefault(), this.select(), this.$element.focus()
        },
        mouseenter: function(t) {
            this.mousedover = !0, this.$menu.find(".active").removeClass("active"), e(t.currentTarget).addClass("active")
        },
        mouseleave: function(e) {
            this.mousedover = !1, !this.focused && this.shown && this.hide()
        }
    };
    var i = e.fn.typeahead;
    e.fn.typeahead = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("typeahead"),
                a = "object" == typeof i && i;
            o || n.data("typeahead", o = new t(this, a)), "string" == typeof i && o[i]()
        })
    }, e.fn.typeahead.defaults = {
        source: [],
        items: 8,
        menu: '<ul class="typeahead dropdown-menu"></ul>',
        item: '<li><a href="#"></a></li>',
        minLength: 1
    }, e.fn.typeahead.Constructor = t, e.fn.typeahead.noConflict = function() {
        return e.fn.typeahead = i, this
    }, e(document).on("focus.typeahead.data-api", '[data-provide="typeahead"]', function(t) {
        var i = e(this);
        i.data("typeahead") || i.typeahead(i.data())
    })
}(window.jQuery), !function(e) {
    "use strict";
    var t = function(t, i) {
        this.options = e.extend({}, e.fn.affix.defaults, i), this.$window = e(window).on("scroll.affix.data-api", e.proxy(this.checkPosition, this)).on("click.affix.data-api", e.proxy(function() {
            setTimeout(e.proxy(this.checkPosition, this), 1)
        }, this)), this.$element = e(t), this.checkPosition()
    };
    t.prototype.checkPosition = function() {
        if (this.$element.is(":visible")) {
            var t,
                i = e(document).height(),
                n = this.$window.scrollTop(),
                o = this.$element.offset(),
                a = this.options.offset,
                s = a.bottom,
                r = a.top,
                l = "affix affix-top affix-bottom";
            "object" != typeof a && (s = r = a), "function" == typeof r && (r = a.top()), "function" == typeof s && (s = a.bottom()), t = !(null != this.unpin && n + this.unpin <= o.top) && (null != s && o.top + this.$element.height() >= i - s ? "bottom" : null != r && n <= r && "top"), this.affixed !== t && (this.affixed = t, this.unpin = "bottom" == t ? o.top - n : null, this.$element.removeClass(l).addClass("affix" + (t ? "-" + t : "")))
        }
    };
    var i = e.fn.affix;
    e.fn.affix = function(i) {
        return this.each(function() {
            var n = e(this),
                o = n.data("affix"),
                a = "object" == typeof i && i;
            o || n.data("affix", o = new t(this, a)), "string" == typeof i && o[i]()
        })
    }, e.fn.affix.Constructor = t, e.fn.affix.defaults = {
        offset: 0
    }, e.fn.affix.noConflict = function() {
        return e.fn.affix = i, this
    }, e(window).on("load", function() {
        e('[data-spy="affix"]').each(function() {
            var t = e(this),
                i = t.data();
            i.offset = i.offset || {}, i.offsetBottom && (i.offset.bottom = i.offsetBottom), i.offsetTop && (i.offset.top = i.offsetTop), t.affix(i)
        })
    })
}(window.jQuery);
var fb_logged = null,
    fb_permissions = new Object,
    fb_process = !1,
    fb_complete = !1;
if (function() {
    var e = {};
    "undefined" != typeof define ? define([], function() {
        return e
    }) : "undefined" != typeof window ? window.my = e : module.exports = e, e.Class = function() {
        var e,
            n,
            o = arguments.length,
            a = arguments[o - 1],
            s = o > 1 ? arguments[0] : null,
            r = o > 2;
        if (a.constructor === Object ? e = function() {} : (e = a.constructor, delete a.constructor), s && (n = function() {}, n.prototype = s.prototype, e.prototype = new n, e.prototype.constructor = e, e.Super = s, i(e, s, !1)), r)
            for (var l = 1; l < o - 1; l++)
                i(e.prototype, arguments[l].prototype, !1);
        return t(e, a), e
    };
    var t = e.extendClass = function(e, t, n) {
            t.STATIC && (i(e, t.STATIC, n), delete t.STATIC), i(e.prototype, t, n)
        },
        i = function(e, t, i) {
            var n;
            if (i === !1)
                for (n in t)
                    n in e || (e[n] = t[n]);
            else {
                for (n in t)
                    e[n] = t[n];
                t.toString !== Object.prototype.toString && (e.toString = t.toString)
            }
        }
}(), function(e, t) {
    var n = {},
        o = {},
        a = "undefined";
    if (typeof t == a) {
        var s = function() {
            throw "Amslib.js: jQuery.Deferred is required for the wait API"
        };
        return e.wait = {
            until: s,
            resolve: s
        }, s()
    }
    e.wait = {
        until: function() {
            var e = [],
                s = !1,
                r = !1,
                c = [].slice.call(arguments);
            for (i = 0, l = c.length; i < l; i++) {
                var d = c[i];
                switch (typeof d) {
                case "string":
                    typeof n[d] == a && (n[d] = t.Deferred()), typeof o[d] != a && n[d].resolve.apply(n[d], o[d]), e.push(n[d]);
                    break;
                case "function":
                    s || (s = d), r || (r = d)
                }
            }
            var u = t.when.apply(t, e);
            return s && u.done(s), r && u.fail(r), u
        },
        resolve: function(e) {
            var t = [].slice.call(arguments, 1),
                i = n[e];
            typeof i != a && i.resolve.apply(i, t), o[e] = t
        }
    }
}(window, jQuery), function(e) {
    function t() {}
    for (var i, n = "assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(","); i = n.pop();)
        e[i] = e[i] || t
}(function() {
    try {
        return console.log(), window.console
    } catch (e) {
        return window.console = {}
    }
}()), "undefined" == typeof my || "undefined" == typeof my.Class)
    throw "Amslib.js: requires my.[class/common] to be loaded first";
var Amslib = my.Amslib = my.Class({
    parent: !1,
    __controller: !1,
    __value: !1,
    __services: !1,
    __translation: !1,
    __images: !1,
    __events: !1,
    STATIC: {
        autoload: function() {
            wait.resolve("Amslib", Amslib)
        },
        options: {
            controller: "Default_Controller"
        },
        getController: function(e) {
            return console.log("POSSIBLY FAULTY CODE DETECTED", "getController executed: I don't think this function works"), "undefined" != typeof e.instances && 0 != e.instances && e.instances.data(e.options.amslibName)
        },
        firebug: function() {
            console.log("DEPRECATED, STOP USING THIS METHOD (Amslib.firebug)"), console && console.log && console.log.apply(console, arguments)
        },
        getPath: function(e) {
            console.log("DEPRECATED, STOP USING THIS METHOD (Amslib.getPath)");
            var t = new RegExp("^(.*?)" + e.replace(/[-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") + "$", "g"),
                i = !1;
            return $("script[src]").each(function() {
                var e = t.exec(this.src);
                if (e)
                    return i = e[1], !1
            }), i || Amslib.firebug("requested path[" + e + "] using regexp[" + t + "] was not found"), i
        },
        locate: function() {
            return Amslib.__location = Amslib.js.find("/js/Amslib.js", !0), Amslib.__location || !1
        },
        getQuery: function() {
            console.log("DEPRECATED, STOP USING THIS METHOD (Amslib.getQuery)");
            var e = function(e) {
                var t,
                    n = /\+/g,
                    o = /([^&=]+)=?([^&]*)/g,
                    a = function(e) {
                        return decodeURIComponent(e.replace(n, " "))
                    },
                    s = {};
                for ((i = e.indexOf("?")) && (e = e.substring(i + 1)); t = o.exec(e);) {
                    var r = a(t[1]),
                        l = a(t[2]);
                    r.indexOf("[]") >= 0 ? (s[r] || (s[r] = new Array), s[r].push(l)) : s[r] = l
                }
                return s
            };
            return 1 == arguments.length ? e(arguments[0]) : arguments.length >= 2 && ((f = e(arguments[1])) && arguments[0] in f ? f[arguments[0]] : f)
        },
        loadJS: function(e, t, i) {
            Amslib.js.load(e, t, i)
        },
        hasJS: function(e, t) {
            Amslib.js.has(e, t)
        },
        getJSPath: function(e, t) {
            return Amslib.js.find(e, t)
        },
        loadCSS: function(e) {
            Amslib.css.load(e)
        },
        __urlParams: [],
        __location: !1
    },
    constructor: function(e, t) {
        return this.parent = $(e) || !1, !!this.parent && (this.__controller = t || Amslib.options.controller, Amslib.controller.set(this.parent, this.__controller, this), this.__value = $("<div/>"), this.__services = $("<div/>"), this.__translation = $("<div/>"), this.__images = $("<div/>"), this.__events = this.parent, this.readMVC(), this)
    },
    readMVC: function() {
        try {
            var e = this.parent.find(".__amslib_mvc_values");
            if (0 == e.length)
                return;
            var t = e.find("input[type='hidden']"),
                i = {};
            t.length ? t.each(function() {
                i[$(this).attr("name")] = $(this).val()
            }) : i = $.parseJSON(e.text());
            for (k in i)
                k.indexOf("service:") >= 0 ? this.setService(k.replace("service:", ""), i[k]) : k.indexOf("translation:") >= 0 ? this.setTranslation(k.replace("translation:", ""), i[k]) : k.indexOf("image:") >= 0 ? this.setImage(k.replace("image:", ""), i[k]) : this.setValue(k, i[k])
        } catch (n) {
            console.log("Exception caused whilst reading Amslib.readMVC"), console.log(n)
        }
    },
    getAmslibName: function() {
        return this.__controller
    },
    getParentNode: function() {
        return this.parent
    },
    bind: function(e, t, i) {
        console.log("DEPRECATED, STOP USING THIS METHOD (Amslib.bind)"), this.__events.bind(e, t)
    },
    on: function(e, t) {
        console.log("DEPRECATED, STOP USING THIS METHOD (Amslib.on)"), this.__events.on(e, t)
    },
    live: function(e, t) {
        console.log("DEPRECATED, STOP USING THIS METHOD (Amslib.live)"), this.on(e, t)
    },
    trigger: function(e, t) {
        console.log("DEPRECATED, STOP USING THIS METHOD (Amslib.trigger)"), this.__events.trigger(e, Array.prototype.slice.call(arguments, 1))
    },
    setValue: function(e, t) {
        this.__value.data(e, t)
    },
    getValue: function(e) {
        return this.__value.data(e)
    },
    setService: function(e, t) {
        this.__services.data(e, t)
    },
    getService: function(e) {
        return this.__services.data(e)
    },
    setTranslation: function(e, t) {
        this.__translation.data(e, t)
    },
    getTranslation: function(e) {
        return this.__translation.data(e)
    },
    setImage: function(e, t) {
        this.__images.data(e, t)
    },
    getImage: function(e) {
        return this.__images.data(e)
    }
});
Amslib.controller = {
    set: function(e, t, i) {
        return e = $(e), 0 != t && (t = "Amslib.controller." + t), e && e.length ? e.data(t, i) : i
    },
    get: function(e, t) {
        return e = $(e), e && e.length ? e.data("Amslib.controller." + t) : (console.log("the requested controller was not found", t), $())
    },
    remove: function(e, t) {
        Amslib.controller.set(e, !1) || console.log("the requested controller could not be removed", t)
    }
}, Amslib.wait = {
    until: window.wait.until,
    resolve: window.wait.resolve
}, Amslib.js = {
    handles: {},
    load: function(e, t, i) {
        return "function" != typeof require || "function" != typeof scope ? (console.log("ERROR[Amslib.js.load]: Functions 'require' or 'scope' are not available"), void console.log("ERROR[Amslib.js.load]: Did you load my.common into your website?")) : ("undefined" == typeof Amslib.js.handles[e] && (Amslib.js.handles[e] = require(t)), void scope(function() {
            wait.resolve(e), "function" == typeof i && i()
        }, Amslib.js.handles[e]))
    },
    loadSeq: function() {
        var e = [].slice.call(arguments);
        if (!(e.length < 2)) {
            var t = e.shift(),
                i = e.shift();
            if (!("object" != typeof i || i.length < 2)) {
                Amslib.js.load.apply(null, i);
                var n = [i[0]];
                for (a in e) {
                    var o = e[a];
                    "object" != typeof o || o.length < 2 || (Amslib.js.has(i[0], function() {
                        Amslib.js.load.apply(null, o)
                    }), i = o, n.push(i[0]))
                }
                n.push(function() {
                    wait.resolve.resolve(t)
                }), wait.until.apply(null, n)
            }
        }
    },
    has: function(e, t) {
        return wait.until.apply(null, arguments)
    },
    find: function(e, t) {
        var i = $("script[src*='" + e + "']").attr("src");
        return i && t ? i.split(e)[0] : i
    }
}, Amslib.css = {
    load: function(e) {
        $("head").append($("<link/>").attr({
            rel: "stylesheet",
            type: "text/css",
            href: e
        }))
    }
}, $(document).ready(Amslib.autoload);
var TR_Core = my.TR_Core = my.Class({
        until: !1,
        resolve: !1,
        STATIC: {
            autoload: function() {
                new TR_Core
            },
            css: {
                overlay_brochure_email: "[data-overlay='brochure-email']",
                overlay_brochure_thanks: "[data-overlay='brochure-thanks']"
            }
        },
        constructor: function() {
            this.until = window.wait.until, this.resolve = window.wait.resolve, this.setupDownloadBrochure()
        },
        setupDownloadBrochure: function() {
            var e = $(TR_Core.css.overlay_brochure_email),
                t = $(TR_Core.css.overlay_brochure_thanks);
            $(document).on("tr_open_brochure_email", function(t, i) {
                var n = $(i).data("tour-id"),
                    o = $(i).data("travel-credit"),
                    a = $(i).data("tour-name"),
                    s = new RespCommon;
                return s.send_google_event("Download Brochure", "Open Enter Email", a), e.find("input[name='tour_id']").val(n), e.find("input[name='tour_name']").val(a), e.find("p span.tour_name").text(a), e.find("input[name='travel_credit']").val(o), t.stopPropagation(), !1
            }), e.on("tr_open_brochure_thanks", function(i, n, o) {
                e.removeClass("sending"), e.find("a.overlay-thanks").trigger("click"), t.find(".download-button").attr("href", o);
                var a = e.find("input[name='tour_name']").val(),
                    s = e.find("input[name='travel_credit']").val();
                t.find(".tour-name").text(a), t.find(".travel-credit").text(s);
                var r = new RespCommon;
                return r.send_google_event("Download Brochure", "Open Thank you", a), r.optimizely_event("DownloadBrochure"), i.stopPropagation(), !1
            }), TR_Form.on(e, "start", function() {
                e.addClass("sending"), e.removeClass("failure")
            }), TR_Form.on(e, "failure", function(t, i, n) {
                e.addClass("failure"), e.removeClass("sending")
            }), TR_Form.on(e, "validate", function() {
                e.find(".email").val().length ? TR_Form.trigger(e, "validate_success") : TR_Form.trigger(e, "validate_failure")
            }), TR_Form.on(e, "validate_failure", function() {
                e.addClass("failure"), e.removeClass("sending")
            }), e.on("keyup focus", ".email", function(t) {
                e.removeClass("failure")
            })
        }
    }),
    TR_Overlay = my.TR_Overlay = my.Class({
        STATIC: {
            autoload: function() {
                new TR_Overlay
            },
            css: {
                open: "[data-role~='overlay-open']",
                close: "[data-role~='overlay-close']"
            }
        },
        attachFancyBox: function() {
            $(TR_Overlay.css.open).each(function() {
                $(this).fancybox()
            })
        },
        constructor: function() {
            this.attachFancyBox(), $(document).on("tr_search_filter_update", $.proxy(this, "attachFancyBox")), $(document).on("click", TR_Overlay.css.close, function(e) {
                return $.fancybox.close(), e.stopPropagation(), !1
            });
            $(document).on("click", TR_Overlay.css.open, function(e) {
                var t = $(this).data("trigger");
                return t && $(this).trigger(t, [this]), e.stopPropagation(), !1
            })
        }
    }),
    TR_Form = my.TR_Form = my.Class({
        STATIC: {
            prefix: "tr_ajaxform",
            css: {
                ajaxform: "[data-role~='ajax-form']",
                ajaxform_submit: "[data-role~='ajax-form-submit']"
            },
            autoload: function() {
                new TR_Form
            },
            on: function() {
                var e = [].slice.call(arguments);
                if (e.length < 3)
                    return !1;
                var t = $(e[0]),
                    i = e[2];
                t.on(TR_Form.prefix + "_" + e[1], function(e) {
                    return i.apply(t, arguments), e.stopPropagation(), !1
                })
            },
            trigger: function() {
                var e = [].slice.call(arguments);
                if (e.length < 2)
                    return !1;
                var t = e.length > 2 ? e.slice(2) : [];
                $(e[0]).trigger(TR_Form.prefix + "_" + e[1], t)
            }
        },
        constructor: function() {
            var e = TR_Form.css.ajaxform,
                t = TR_Form.css.ajaxform_submit,
                i = function(i) {
                    var n = $(this).is(t) ? $(this).closest(e) : $(this);
                    return TR_Form.trigger(n, "validate"), i.stopPropagation(), !1
                };
            $(document).on("submit", e, i), $(document).on("click", t, i), TR_Form.on(e, "validate_success", function() {
                var e = $(this);
                TR_Form.trigger(e, "start"), e = e.is(t) ? e.closest(t) : e;
                var i = function(t, i) {
                        TR_Form.trigger(e, "failure", [e, i]), TR_Form.trigger(e, "finish", [e, i])
                    },
                    n = function(t) {
                        t && t.success && t.filename ? (TR_Form.trigger(e, "success", [e, t]), e.trigger(e.data("trigger"), [e, t.filename]), TR_Form.trigger(e, "finish", [e, t]), $("#pdf_promo_code").html(t.promo)) : i("ignore", "ajax command succeeded but webservice returned failure")
                    };
                $.ajax({
                    url: e.attr("action"),
                    type: e.attr("method"),
                    dataType: "json",
                    data: e.serializeArray()
                }).done(n).fail(i)
            })
        }
    }),
    TR_Social = my.TR_Social = my.Class({
        STATIC: {
            autoload: function() {
                $(".tr-multi-social").each(function() {
                    new TR_Social(this)
                })
            }
        },
        constructor: function(e) {
            e = $(e);
            var t = encodeURIComponent;
            e.find(".share_fb").on("click", function() {
                var e = "https://www.facebook.com/sharer.php?u=" + t(location.href),
                    i = "scrollbars=yes,width=800,height=400";
                params = "", popup = window.open(e + params, "popupwindow", i), popup.focus()
            }), e.find(".share_tw").on("click", function() {
                var e = "https://twitter.com/share?url=",
                    i = "scrollbars=yes,width=800,height=400",
                    n = $(this).data("text") || "",
                    o = $(this).data("hashtag") || "TourRadar",
                    a = t(location.href.split("#")[0]) + "&text=" + n + "&hashtags=" + o;
                popup = window.open(e + a, "popupwindow", i), popup.focus()
            }), e.find(".share_gg").on("click", function() {
                var e = "https://plus.google.com/share?url=",
                    i = "scrollbars=yes,width=800,height=400",
                    n = t(location.href.split("#")[0]);
                popup = window.open(e + n, "popupwindow", i), popup.focus()
            })
        }
    });
$(document).ready(TR_Overlay.autoload), $(document).ready(TR_Social.autoload), function(e) {
    var t,
        i,
        n,
        o,
        a,
        s,
        r,
        l,
        c,
        d,
        u,
        h,
        p,
        f = 0,
        m = {},
        g = [],
        v = 0,
        _ = {},
        b = [],
        w = null,
        y = new Image,
        $ = /\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,
        k = /[^\.]\.(swf)\s*$/i,
        x = 1,
        C = 0,
        T = "",
        I = !1,
        S = e.extend(e("<div/>")[0], {
            prop: 0
        }),
        P = e.browser.msie && e.browser.version < 7 && !window.XMLHttpRequest,
        D = function() {
            i.hide(), y.onerror = y.onload = null, w && w.abort(), t.empty()
        },
        A = function() {
            !1 === m.onError(g, f, m) ? (i.hide(), I = !1) : (m.titleShow = !1, m.width = "auto", m.height = "auto", t.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'), j())
        },
        O = function() {
            var n,
                o,
                a,
                r,
                l,
                c,
                d = g[f];
            if (D(), m = e.extend({}, e.fn.fancybox.defaults, "undefined" == typeof e(d).data("fancybox") ? m : e(d).data("fancybox")), c = m.onStart(g, f, m), c === !1)
                I = !1;
            else if ("object" == typeof c && (m = e.extend(m, c)), a = m.title || (d.nodeName ? e(d).attr("title") : d.title) || "", d.nodeName && !m.orig && (m.orig = e(d).children("img:first").length ? e(d).children("img:first") : e(d)), "" === a && m.orig && m.titleFromAlt && (a = m.orig.attr("alt")), n = m.href || (d.nodeName ? e(d).attr("href") : d.href) || null, (/^(?:javascript)/i.test(n) || "#" == n) && (n = null), m.type ? (o = m.type, n || (n = m.content)) : m.content ? o = "html" : n && (o = n.match($) ? "image" : n.match(k) ? "swf" : e(d).hasClass("iframe") ? "iframe" : 0 === n.indexOf("#") ? "inline" : "ajax"), o)
                switch ("inline" == o && (d = n.substr(n.indexOf("#")), o = e(d).length > 0 ? "inline" : "ajax"), m.type = o, m.href = n, m.title = a, m.autoDimensions && ("html" == m.type || "inline" == m.type || "ajax" == m.type ? (m.width = "auto", m.height = "auto") : m.autoDimensions = !1), m.modal && (m.overlayShow = !0, m.hideOnOverlayClick = !1, m.hideOnContentClick = !1, m.enableEscapeButton = !1, m.showCloseButton = !1), m.padding = parseInt(m.padding, 10), m.margin = parseInt(m.margin, 10), t.css("padding", m.padding + m.margin), e(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change", function() {
                    e(this).replaceWith(s.children())
                }), o) {
                case "html":
                    t.html(m.content), j();
                    break;
                case "inline":
                    if (e(d).parent().is("#fancybox-content") === !0) {
                        I = !1;
                        break
                    }
                    e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(d)).bind("fancybox-cleanup", function() {
                        e(this).replaceWith(s.children())
                    }).bind("fancybox-cancel", function() {
                        e(this).replaceWith(t.children())
                    }), e(d).appendTo(t), j();
                    break;
                case "image":
                    I = !1, e.fancybox.showActivity(), y = new Image, y.onerror = function() {
                        A()
                    }, y.onload = function() {
                        I = !0, y.onerror = y.onload = null, m.width = y.width, m.height = y.height, e("<img />").attr({
                            id: "fancybox-img",
                            src: y.src,
                            alt: m.title
                        }).appendTo(t), z()
                    }, y.src = n;
                    break;
                case "swf":
                    m.scrolling = "no", r = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="' + m.width + '" height="' + m.height + '"><param name="movie" value="' + n + '"></param>', l = "", e.each(m.swf, function(e, t) {
                        r += '<param name="' + e + '" value="' + t + '"></param>', l += " " + e + '="' + t + '"'
                    }), r += '<embed src="' + n + '" type="application/x-shockwave-flash" width="' + m.width + '" height="' + m.height + '"' + l + "></embed></object>", t.html(r), j();
                    break;
                case "ajax":
                    I = !1, e.fancybox.showActivity(), m.ajax.win = m.ajax.success, w = e.ajax(e.extend({}, m.ajax, {
                        url: n,
                        data: m.ajax.data || {},
                        error: function(e) {
                            e.status > 0 && A()
                        },
                        success: function(e, o, a) {
                            if (200 == ("object" == typeof a ? a : w).status) {
                                if ("function" == typeof m.ajax.win) {
                                    if (c = m.ajax.win(n, e, o, a), c === !1)
                                        return void i.hide();
                                    "string" != typeof c && "object" != typeof c || (e = c)
                                }
                                t.html(e), j()
                            }
                        }
                    }));
                    break;
                case "iframe":
                    z()
                }
            else
                A()
        },
        j = function() {
            var i = m.width,
                n = m.height;
            i = i.toString().indexOf("%") > -1 ? parseInt((e(window).width() - 2 * m.margin) * parseFloat(i) / 100, 10) + "px" : "auto" == i ? "auto" : i + "px", n = n.toString().indexOf("%") > -1 ? parseInt((e(window).height() - 2 * m.margin) * parseFloat(n) / 100, 10) + "px" : "auto" == n ? "auto" : n + "px", t.wrapInner('<div style="width:' + i + ";height:" + n + ";overflow: " + ("auto" == m.scrolling ? "auto" : "yes" == m.scrolling ? "scroll" : "hidden") + ';position:relative;"></div>'), m.width = t.width(), m.height = t.height(), z()
        },
        z = function() {
            var u,
                w;
            if (i.hide(), o.is(":visible") && !1 === _.onCleanup(b, v, _))
                e.event.trigger("fancybox-cancel"), I = !1;
            else {
                if (I = !0, e(s.add(n)).unbind(), e(window).unbind("resize.fb scroll.fb"), e(document).unbind("keydown.fb"), o.is(":visible") && "outside" !== _.titlePosition && o.css("height", o.height()), b = g, v = f, _ = m, _.overlayShow ? (n.css({
                    "background-color": _.overlayColor,
                    opacity: _.overlayOpacity,
                    cursor: _.hideOnOverlayClick ? "pointer" : "auto",
                    height: e(document).height()
                }), n.is(":visible") || (P && e("select:not(#fancybox-tmp select)").filter(function() {
                    return "hidden" !== this.style.visibility
                }).css({
                    visibility: "hidden"
                }).one("fancybox-cleanup", function() {
                    this.style.visibility = "inherit"
                }), n.show())) : n.hide(), p = L(), T = _.title || "", C = 0, l.empty().removeAttr("style").removeClass(), _.titleShow !== !1 && (u = e.isFunction(_.titleFormat) ? _.titleFormat(T, b, v, _) : !(!T || !T.length) && ("float" == _.titlePosition ? '<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">' + T + '</td><td id="fancybox-title-float-right"></td></tr></table>' : '<div id="fancybox-title-' + _.titlePosition + '">' + T + "</div>"), T = u, T && "" !== T))
                    switch (l.addClass("fancybox-title-" + _.titlePosition).html(T).appendTo("body").show(), _.titlePosition) {
                    case "inside":
                        l.css({
                            width: p.width - 2 * _.padding,
                            marginLeft: _.padding,
                            marginRight: _.padding
                        }), C = l.outerHeight(!0), l.appendTo(a), p.height += C;
                        break;
                    case "over":
                        l.css({
                            marginLeft: _.padding,
                            width: p.width - 2 * _.padding,
                            bottom: _.padding
                        }).appendTo(a);
                        break;
                    case "float":
                        l.css("left", parseInt((l.width() - p.width - 40) / 2, 10) * -1).appendTo(o);
                        break;
                    default:
                        l.css({
                            width: p.width - 2 * _.padding,
                            paddingLeft: _.padding,
                            paddingRight: _.padding
                        }).appendTo(o)
                    }
                l.hide(), o.is(":visible") ? (e(r.add(c).add(d)).hide(), u = o.position(), h = {
                    top: u.top,
                    left: u.left,
                    width: o.width(),
                    height: o.height()
                }, w = h.width == p.width && h.height == p.height, s.fadeTo(_.changeFade, .3, function() {
                    var i = function() {
                        s.html(t.contents()).fadeTo(_.changeFade, 1, M)
                    };
                    e.event.trigger("fancybox-change"), s.empty().removeAttr("filter").css({
                        "border-width": _.padding,
                        width: p.width - 2 * _.padding,
                        height: m.autoDimensions ? "auto" : p.height - C - 2 * _.padding
                    }), w ? i() : (S.prop = 0, e(S).animate({
                        prop: 1
                    }, {
                        duration: _.changeSpeed,
                        easing: _.easingChange,
                        step: N,
                        complete: i
                    }))
                })) : (o.removeAttr("style"), s.css("border-width", _.padding), "elastic" == _.transitionIn ? (h = R(), s.html(t.contents()), o.show(), _.opacity && (p.opacity = 0), S.prop = 0, e(S).animate({
                    prop: 1
                }, {
                    duration: _.speedIn,
                    easing: _.easingIn,
                    step: N,
                    complete: M
                })) : ("inside" == _.titlePosition && C > 0 && l.show(), s.css({
                    width: p.width - 2 * _.padding,
                    height: m.autoDimensions ? "auto" : p.height - C - 2 * _.padding
                }).html(t.contents()), o.css(p).fadeIn("none" == _.transitionIn ? 0 : _.speedIn, M)))
            }
        },
        E = function() {
            (_.enableEscapeButton || _.enableKeyboardNav) && e(document).bind("keydown.fb", function(t) {
                27 == t.keyCode && _.enableEscapeButton ? (t.preventDefault(), e.fancybox.close()) : 37 != t.keyCode && 39 != t.keyCode || !_.enableKeyboardNav || "INPUT" === t.target.tagName || "TEXTAREA" === t.target.tagName || "SELECT" === t.target.tagName || (t.preventDefault(), e.fancybox[37 == t.keyCode ? "prev" : "next"]())
            }), _.showNavArrows ? ((_.cyclic && b.length > 1 || 0 !== v) && c.show(), (_.cyclic && b.length > 1 || v != b.length - 1) && d.show()) : (c.hide(), d.hide())
        },
        M = function() {
            e.support.opacity || (s.get(0).style.removeAttribute("filter"), o.get(0).style.removeAttribute("filter")), m.autoDimensions && s.css("height", "auto"), o.css("height", "auto"), T && T.length && l.show(), _.showCloseButton && r.show(), E(), _.hideOnContentClick && s.bind("click", e.fancybox.close), _.hideOnOverlayClick && n.bind("click", e.fancybox.close), e(window).bind("resize.fb", e.fancybox.resize), _.centerOnScroll && e(window).bind("scroll.fb", e.fancybox.center), "iframe" == _.type && e('<iframe id="fancybox-frame" name="fancybox-frame' + (new Date).getTime() + '" frameborder="0" hspace="0" ' + (e.browser.msie ? 'allowtransparency="true""' : "") + ' scrolling="' + m.scrolling + '" src="' + _.href + '"></iframe>').appendTo(s), o.show(), I = !1, e.fancybox.center(), _.onComplete(b, v, _);
            var t,
                i;
            b.length - 1 > v && (t = b[v + 1].href, "undefined" != typeof t && t.match($) && (i = new Image, i.src = t)), v > 0 && (t = b[v - 1].href, "undefined" != typeof t && t.match($) && (i = new Image, i.src = t))
        },
        N = function(e) {
            var t = {
                width: parseInt(h.width + (p.width - h.width) * e, 10),
                height: parseInt(h.height + (p.height - h.height) * e, 10),
                top: parseInt(h.top + (p.top - h.top) * e, 10),
                left: parseInt(h.left + (p.left - h.left) * e, 10)
            };
            "undefined" != typeof p.opacity && (t.opacity = e < .5 ? .5 : e), o.css(t), s.css({
                width: t.width - 2 * _.padding,
                height: t.height - C * e - 2 * _.padding
            })
        },
        F = function() {
            return [e(window).width() - 2 * _.margin, e(window).height() - 2 * _.margin, e(document).scrollLeft() + _.margin, e(document).scrollTop() + _.margin]
        },
        L = function() {
            var e = F(),
                t = {},
                i = _.autoScale,
                n = 2 * _.padding;
            return t.width = _.width.toString().indexOf("%") > -1 ? parseInt(e[0] * parseFloat(_.width) / 100, 10) : _.width + n, t.height = _.height.toString().indexOf("%") > -1 ? parseInt(e[1] * parseFloat(_.height) / 100, 10) : _.height + n, i && (t.width > e[0] || t.height > e[1]) && ("image" == m.type || "swf" == m.type ? (i = _.width / _.height, t.width > e[0] && (t.width = e[0], t.height = parseInt((t.width - n) / i + n, 10)), t.height > e[1] && (t.height = e[1], t.width = parseInt((t.height - n) * i + n, 10))) : (t.width = Math.min(t.width, e[0]), t.height = Math.min(t.height, e[1]))), t.top = parseInt(Math.max(e[3] - 20, e[3] + .5 * (e[1] - t.height - 40)), 10), t.left = parseInt(Math.max(e[2] - 20, e[2] + .5 * (e[0] - t.width - 40)), 10), t
        },
        R = function() {
            var t = !!m.orig && e(m.orig),
                i = {};
            return t && t.length ? (i = t.offset(), i.top += parseInt(t.css("paddingTop"), 10) || 0, i.left += parseInt(t.css("paddingLeft"), 10) || 0, i.top += parseInt(t.css("border-top-width"), 10) || 0, i.left += parseInt(t.css("border-left-width"), 10) || 0, i.width = t.width(), i.height = t.height(), i = {
                width: i.width + 2 * _.padding,
                height: i.height + 2 * _.padding,
                top: i.top - _.padding - 20,
                left: i.left - _.padding - 20
            }) : (t = F(), i = {
                width: 2 * _.padding,
                height: 2 * _.padding,
                top: parseInt(t[3] + .5 * t[1], 10),
                left: parseInt(t[2] + .5 * t[0], 10)
            }), i
        },
        H = function() {
            i.is(":visible") ? (e("div", i).css("top", x * -40 + "px"), x = (x + 1) % 12) : clearInterval(u)
        };
    e.fn.fancybox = function(t) {
        return e(this).length ? (e(this).data("fancybox", e.extend({}, t, e.metadata ? e(this).metadata() : {})).unbind("click.fb").bind("click.fb", function(t) {
            t.preventDefault(), I || (I = !0, e(this).blur(), g = [], f = 0, t = e(this).attr("rel") || "", t && "" != t && "nofollow" !== t ? (g = e("a[rel=" + t + "], area[rel=" + t + "]"), f = g.index(this)) : g.push(this), O())
        }), this) : this
    }, e.fancybox = function(t, i) {
        var n;
        if (!I) {
            if (I = !0, n = "undefined" != typeof i ? i : {}, g = [], f = parseInt(n.index, 10) || 0, e.isArray(t)) {
                for (var o = 0, a = t.length; o < a; o++)
                    "object" == typeof t[o] ? e(t[o]).data("fancybox", e.extend({}, n, t[o])) : t[o] = e({}).data("fancybox", e.extend({
                        content: t[o]
                    }, n));
                g = jQuery.merge(g, t)
            } else
                "object" == typeof t ? e(t).data("fancybox", e.extend({}, n, t)) : t = e({}).data("fancybox", e.extend({
                    content: t
                }, n)), g.push(t);
            (f > g.length || f < 0) && (f = 0), O()
        }
    }, e.fancybox.showActivity = function() {
        clearInterval(u), i.show(), u = setInterval(H, 66)
    }, e.fancybox.hideActivity = function() {
        i.hide()
    }, e.fancybox.next = function() {
        return e.fancybox.pos(v + 1)
    }, e.fancybox.prev = function() {
        return e.fancybox.pos(v - 1)
    }, e.fancybox.pos = function(e) {
        I || (e = parseInt(e), g = b, e > -1 && e < b.length ? (f = e, O()) : _.cyclic && b.length > 1 && (f = e >= b.length ? 0 : b.length - 1, O()))
    }, e.fancybox.cancel = function() {
        I || (I = !0, e.event.trigger("fancybox-cancel"), D(), m.onCancel(g, f, m), I = !1)
    }, e.fancybox.close = function() {
        function t() {
            n.fadeOut("fast"), l.empty().hide(), o.hide(), e.event.trigger("fancybox-cleanup"), s.empty(), _.onClosed(b, v, _), b = m = [], v = f = 0, _ = m = {}, I = !1
        }
        if (!I && !o.is(":hidden"))
            if (I = !0, _ && !1 === _.onCleanup(b, v, _))
                I = !1;
            else if (D(), e(r.add(c).add(d)).hide(), e(s.add(n)).unbind(), e(window).unbind("resize.fb scroll.fb"), e(document).unbind("keydown.fb"), s.find("iframe").attr("src", P && /^https/i.test(window.location.href || "") ? "javascript:void(false)" : "about:blank"), "inside" !== _.titlePosition && l.empty(), o.stop(), "elastic" == _.transitionOut) {
                h = R();
                var i = o.position();
                p = {
                    top: i.top,
                    left: i.left,
                    width: o.width(),
                    height: o.height()
                }, _.opacity && (p.opacity = 1), l.empty().hide(), S.prop = 1, e(S).animate({
                    prop: 0
                }, {
                    duration: _.speedOut,
                    easing: _.easingOut,
                    step: N,
                    complete: t
                })
            } else
                o.fadeOut("none" == _.transitionOut ? 0 : _.speedOut, t)
    }, e.fancybox.resize = function() {
        n.is(":visible") && n.css("height", e(document).height()), e.fancybox.center(!0)
    }, e.fancybox.center = function(e) {
        var t,
            i;
        I || (i = e === !0 ? 1 : 0, t = F(), !i && (o.width() > t[0] || o.height() > t[1]) || o.stop().animate({
            top: parseInt(Math.max(t[3] - 20, t[3] + .5 * (t[1] - s.height() - 40) - _.padding)),
            left: parseInt(Math.max(t[2] - 20, t[2] + .5 * (t[0] - s.width() - 40) - _.padding))
        }, "number" == typeof e ? e : 200))
    }, e.fancybox.init = function() {
        e("#fancybox-wrap").length || (e("body").append(t = e('<div id="fancybox-tmp"></div>'), i = e('<div id="fancybox-loading"><div></div></div>'), n = e('<div id="fancybox-overlay"></div>'), o = e('<div id="fancybox-wrap"></div>')), a = e('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(o), a.append(s = e('<div id="fancybox-content"></div>'), r = e('<a id="fancybox-close"></a>'), l = e('<div id="fancybox-title"></div>'), c = e('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'), d = e('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')), r.click(e.fancybox.close), i.click(e.fancybox.cancel), c.click(function(t) {
            t.preventDefault(), e.fancybox.prev()
        }), d.click(function(t) {
            t.preventDefault(), e.fancybox.next()
        }), e.fn.mousewheel && o.bind("mousewheel.fb", function(t, i) {
            I ? t.preventDefault() : 0 != e(t.target).get(0).clientHeight && e(t.target).get(0).scrollHeight !== e(t.target).get(0).clientHeight || (t.preventDefault(), e.fancybox[i > 0 ? "prev" : "next"]())
        }), e.support.opacity || o.addClass("fancybox-ie"), P && (i.addClass("fancybox-ie6"), o.addClass("fancybox-ie6"), e('<iframe id="fancybox-hide-sel-frame" src="' + (/^https/i.test(window.location.href || "") ? "javascript:void(false)" : "about:blank") + '" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(a)))
    }, e.fn.fancybox.defaults = {
        padding: 10,
        margin: 40,
        opacity: !1,
        modal: !1,
        cyclic: !1,
        scrolling: "auto",
        width: 560,
        height: 340,
        autoScale: !0,
        autoDimensions: !0,
        centerOnScroll: !1,
        ajax: {},
        swf: {
            wmode: "transparent"
        },
        hideOnOverlayClick: !0,
        hideOnContentClick: !1,
        overlayShow: !0,
        overlayOpacity: .7,
        overlayColor: "#777",
        titleShow: !0,
        titlePosition: "float",
        titleFormat: null,
        titleFromAlt: !1,
        transitionIn: "fade",
        transitionOut: "fade",
        speedIn: 300,
        speedOut: 300,
        changeSpeed: 300,
        changeFade: "fast",
        easingIn: "swing",
        easingOut: "swing",
        showCloseButton: !0,
        showNavArrows: !0,
        enableEscapeButton: !0,
        enableKeyboardNav: !0,
        onStart: function() {},
        onCancel: function() {},
        onComplete: function() {},
        onCleanup: function() {},
        onClosed: function() {},
        onError: function() {}
    }, e(document).ready(function() {
        e.fancybox.init()
    })
}(jQuery), jQuery.autocomplete = function(e, t) {
    function i() {
        D = {}, D.data = {}, D.length = 0
    }
    function n() {
        if (46 == O || O > 8 && O < 32)
            return T.hide();
        var e = x.val();
        e != S && (S = e, e.length >= t.minChars ? (x.addClass(t.loadingClass), m(e)) : (x.removeClass(t.loadingClass), T.hide()))
    }
    function o(e) {
        var t = $("li", C);
        t && (P += e, P < 0 ? P = 0 : P >= t.size() && (P = t.size() - 1), t.removeClass("ac_over"), $(t[P]).addClass("ac_over"))
    }
    function a() {
        var e = $("li.ac_over", C)[0];
        if (!e) {
            var i = $("li", C);
            t.selectOnly ? 1 == i.length && (e = i[0]) : t.selectFirst && (e = i[0])
        }
        return !!e && (s(e), !0)
    }
    function s(i) {
        i || (i = document.createElement("li"), i.extra = [], i.selectValue = "");
        var n = $.trim(i.selectValue ? i.selectValue : i.innerHTML);
        e.lastSelected = n, S = n, T.html(""), x.val(n), u(), t.onItemSelect && setTimeout(function() {
            t.onItemSelect(i)
        }, 1)
    }
    function r(e, t) {
        var i = x.get(0);
        if (i.createTextRange) {
            var n = i.createTextRange();
            n.collapse(!0), n.moveStart("character", e), n.moveEnd("character", t), n.select()
        } else
            i.setSelectionRange ? i.setSelectionRange(e, t) : i.selectionStart && (i.selectionStart = e, i.selectionEnd = t);
        i.focus()
    }
    function l(e) {
        8 != O && (x.val(x.val() + e.substring(S.length)), r(S.length, e.length))
    }
    function c() {
        var i = y(e),
            n = t.width > 0 ? t.width : x.width();
        T.css({
            width: parseInt(n) + "px",
            top: i.y + e.offsetHeight + "px",
            left: i.x + "px"
        }).show()
    }
    function d() {
        I && clearTimeout(I), I = setTimeout(u, 200)
    }
    function u() {
        if (I && clearTimeout(I), x.removeClass(t.loadingClass), T.is(":visible") && T.hide(), t.mustMatch) {
            var i = x.val();
            i != e.lastSelected && s(null)
        }
    }
    function h(e, i) {
        if (i) {
            if (x.removeClass(t.loadingClass), C.innerHTML = "", !A || 0 == i.length)
                return u();
            C.appendChild(f(i)), t.autoFill && x.val().toLowerCase() == e.toLowerCase() && l(i[0][0]), c()
        } else
            u()
    }
    function p(e) {
        if (!e)
            return null;
        for (var i = [], n = e.split(t.lineSeparator), o = 0; o < n.length; o++) {
            var a = $.trim(n[o]);
            a && (i[i.length] = a.split(t.cellSeparator))
        }
        return i
    }
    function f(e) {
        var i = document.createElement("ul"),
            n = e.length;
        t.maxItemsToShow > 0 && t.maxItemsToShow < n && (n = t.maxItemsToShow);
        for (var o = 0; o < n; o++) {
            var a = e[o];
            if (a) {
                var r = document.createElement("li");
                t.formatItem ? (r.innerHTML = t.formatItem(a, o, n), r.selectValue = a[0]) : (r.innerHTML = a[0], r.selectValue = a[0]);
                var l = null;
                if (a.length > 1) {
                    l = [];
                    for (var c = 1; c < a.length; c++)
                        l[l.length] = a[c]
                }
                r.extra = l, i.appendChild(r), $(r).hover(function() {
                    $("li", i).removeClass("ac_over"), $(this).addClass("ac_over"), P = $("li", i).indexOf($(this).get(0))
                }, function() {
                    $(this).removeClass("ac_over")
                }).click(function(e) {
                    e.preventDefault(), e.stopPropagation(), s(this)
                })
            }
        }
        return i
    }
    function m(e) {
        t.matchCase || (e = e.toLowerCase());
        var i = t.enableCache && t.cacheLength ? v(e) : null;
        i ? h(e, i) : "string" == typeof t.url && t.url.length > 0 ? $.get(g(e), function(t) {
            t = p(t), w(e, t), h(e, t)
        }) : x.removeClass(t.loadingClass)
    }
    function g(e) {
        var i = t.url + "?q=" + encodeURI(e);
        for (var n in t.extraParams)
            i += "&" + n + "=" + encodeURI(t.extraParams[n]);
        return i
    }
    function v(e) {
        if (!e)
            return null;
        if (D.data[e])
            return D.data[e];
        if (t.matchSubset)
            for (var i = e.length - 1; i >= t.minChars; i--) {
                var n = e.substr(0, i),
                    o = D.data[n];
                if (o) {
                    for (var a = [], s = 0; s < o.length; s++) {
                        var r = o[s],
                            l = r[0];
                        _(l, e) && (a[a.length] = r)
                    }
                    return a
                }
            }
        return null
    }
    function _(e, i) {
        t.matchCase || (e = e.toLowerCase());
        var n = e.indexOf(i);
        return n != -1 && (0 == n || t.matchContains)
    }
    function b(e, i) {
        i && x.removeClass(t.loadingClass);
        for (var n = i ? i.length : 0, o = null, a = 0; a < n; a++) {
            var s = i[a];
            if (s[0].toLowerCase() == e.toLowerCase()) {
                o = document.createElement("li"), t.formatItem ? (o.innerHTML = t.formatItem(s, a, n), o.selectValue = s[0]) : (o.innerHTML = s[0], o.selectValue = s[0]);
                var r = null;
                if (s.length > 1) {
                    r = [];
                    for (var l = 1; l < s.length; l++)
                        r[r.length] = s[l]
                }
                o.extra = r
            }
        }
        t.onFindValue && setTimeout(function() {
            t.onFindValue(o)
        }, 1)
    }
    function w(e, n) {
        n && e && t.cacheLength && (!D.length || D.length > t.cacheLength ? (i(), D.length++) : D[e] || D.length++, D.data[e] = n)
    }
    function y(e) {
        for (var t = e.offsetLeft || 0, i = e.offsetTop || 0; e = e.offsetParent;)
            t += e.offsetLeft, i += e.offsetTop;
        return {
            x: t,
            y: i
        }
    }
    var k = this,
        x = $(e).attr("autocomplete", "off");
    t.inputClass && x.addClass(t.inputClass);
    var C = document.createElement("div"),
        T = $(C);
    T.hide().addClass(t.resultsClass).css("position", "absolute"), t.width > 0 && T.css("width", t.width), $("body").append(C), e.autocompleter = k;
    var I = null,
        S = "",
        P = -1,
        D = {},
        A = !1,
        O = null;
    if (i(), null != t.data) {
        var j = "",
            z = {},
            E = [];
        "string" != typeof t.url && (t.cacheLength = 1);
        for (var M = 0; M < t.data.length; M++)
            E = "string" == typeof t.data[M] ? [t.data[M]] : t.data[M], E[0].length > 0 && (j = E[0].substring(0, 1).toLowerCase(), z[j] || (z[j] = []), z[j].push(E));
        for (var N in z)
            t.cacheLength++, w(N, z[N])
    }
    x.keydown(function(e) {
        switch (O = e.keyCode, e.keyCode) {
        case 38:
            e.preventDefault(), o(-1);
            break;
        case 40:
            e.preventDefault(), o(1);
            break;
        case 9:
        case 13:
            a() && (x.get(0).blur(), e.preventDefault());
            break;
        default:
            P = -1, I && clearTimeout(I), I = setTimeout(function() {
                n()
            }, t.delay)
        }
    }).focus(function() {
        A = !0
    }).blur(function() {
        A = !1, d()
    }), u(), this.flushCache = function() {
        i()
    }, this.setExtraParams = function(e) {
        t.extraParams = e
    }, this.findValue = function() {
        var e = x.val();
        t.matchCase || (e = e.toLowerCase());
        var i = t.cacheLength ? v(e) : null;
        i ? b(e, i) : "string" == typeof t.url && t.url.length > 0 ? $.get(g(e), function(t) {
            t = p(t), w(e, t), b(e, t)
        }) : b(e, null)
    }
}, jQuery.fn.autocomplete = function(e, t, i) {
    return t = t || {}, t.url = e, t.data = "object" == typeof i && i.constructor == Array ? i : null, t.inputClass = t.inputClass || "ac_input", t.resultsClass = t.resultsClass || "ac_results", t.lineSeparator = t.lineSeparator || "\n", t.cellSeparator = t.cellSeparator || "|", t.minChars = t.minChars || 1, t.delay = t.delay || 400, t.matchCase = t.matchCase || 0, t.matchSubset = t.matchSubset || 1, t.matchContains = t.matchContains || 0, t.cacheLength = t.cacheLength || 0, t.enableCache = t.enableCache || !1, t.mustMatch = t.mustMatch || 0, t.extraParams = t.extraParams || {}, t.loadingClass = t.loadingClass || "ac_loading", t.selectFirst = t.selectFirst || !1, t.selectOnly = t.selectOnly || !1, t.maxItemsToShow = t.maxItemsToShow || -1, t.autoFill = t.autoFill || !1, t.width = parseInt(t.width, 10) || 0, this.each(function() {
        var e = this;
        new jQuery.autocomplete(e, t)
    }), t
}, jQuery.fn.autocompleteArray = function(e, t) {
    return this.autocomplete(null, t, e)
}, jQuery.fn.indexOf = function(e) {
    for (var t = 0; t < this.length; t++)
        if (this[t] == e)
            return t;
    return -1
}, function(e, t) {
    "function" == typeof define && define.amd ? define(["jquery"], t) : "object" == typeof exports ? module.exports = t(require("jquery")) : t(e.jQuery)
}(this, function(e) {
    function t(e) {
        if (e in u.style)
            return e;
        for (var t = ["Moz", "Webkit", "O", "ms"], i = e.charAt(0).toUpperCase() + e.substr(1), n = 0; n < t.length; ++n) {
            var o = t[n] + i;
            if (o in u.style)
                return o
        }
    }
    function i() {
        return u.style[h.transform] = "", u.style[h.transform] = "rotateY(90deg)", "" !== u.style[h.transform]
    }
    function n(e) {
        return "string" == typeof e && this.parse(e), this
    }
    function o(e, t, i) {
        t === !0 ? e.queue(i) : t ? e.queue(t, i) : e.each(function() {
            i.call(this)
        })
    }
    function a(t) {
        var i = [];
        return e.each(t, function(t) {
            t = e.camelCase(t), t = e.transit.propertyMap[t] || e.cssProps[t] || t, t = l(t), h[t] && (t = l(h[t])), e.inArray(t, i) === -1 && i.push(t)
        }), i
    }
    function s(t, i, n, o) {
        var s = a(t);
        e.cssEase[n] && (n = e.cssEase[n]);
        var r = "" + d(i) + " " + n;
        parseInt(o, 10) > 0 && (r += " " + d(o));
        var l = [];
        return e.each(s, function(e, t) {
            l.push(t + " " + r)
        }), l.join(", ")
    }
    function r(t, i) {
        i || (e.cssNumber[t] = !0), e.transit.propertyMap[t] = h.transform, e.cssHooks[t] = {
            get: function(i) {
                var n = e(i).css("transit:transform");
                return n.get(t)
            },
            set: function(i, n) {
                var o = e(i).css("transit:transform");
                o.setFromString(t, n), e(i).css({
                    "transit:transform": o
                })
            }
        }
    }
    function l(e) {
        return e.replace(/([A-Z])/g, function(e) {
            return "-" + e.toLowerCase()
        })
    }
    function c(e, t) {
        return "string" != typeof e || e.match(/^[\-0-9\.]+$/) ? "" + e + t : e
    }
    function d(t) {
        var i = t;
        return "string" != typeof i || i.match(/^[\-0-9\.]+/) || (i = e.fx.speeds[i] || e.fx.speeds._default), c(i, "ms")
    }
    e.transit = {
        version: "0.9.12",
        propertyMap: {
            marginLeft: "margin",
            marginRight: "margin",
            marginBottom: "margin",
            marginTop: "margin",
            paddingLeft: "padding",
            paddingRight: "padding",
            paddingBottom: "padding",
            paddingTop: "padding"
        },
        enabled: !0,
        useTransitionEnd: !1
    };
    var u = document.createElement("div"),
        h = {},
        p = navigator.userAgent.toLowerCase().indexOf("chrome") > -1;
    h.transition = t("transition"), h.transitionDelay = t("transitionDelay"), h.transform = t("transform"), h.transformOrigin = t("transformOrigin"), h.filter = t("Filter"), h.transform3d = i();
    var f = {
            transition: "transitionend",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd",
            WebkitTransition: "webkitTransitionEnd",
            msTransition: "MSTransitionEnd"
        },
        m = h.transitionEnd = f[h.transition] || null;
    for (var g in h)
        h.hasOwnProperty(g) && "undefined" == typeof e.support[g] && (e.support[g] = h[g]);
    return u = null, e.cssEase = {
        _default: "ease",
        "in": "ease-in",
        out: "ease-out",
        "in-out": "ease-in-out",
        snap: "cubic-bezier(0,1,.5,1)",
        easeInCubic: "cubic-bezier(.550,.055,.675,.190)",
        easeOutCubic: "cubic-bezier(.215,.61,.355,1)",
        easeInOutCubic: "cubic-bezier(.645,.045,.355,1)",
        easeInCirc: "cubic-bezier(.6,.04,.98,.335)",
        easeOutCirc: "cubic-bezier(.075,.82,.165,1)",
        easeInOutCirc: "cubic-bezier(.785,.135,.15,.86)",
        easeInExpo: "cubic-bezier(.95,.05,.795,.035)",
        easeOutExpo: "cubic-bezier(.19,1,.22,1)",
        easeInOutExpo: "cubic-bezier(1,0,0,1)",
        easeInQuad: "cubic-bezier(.55,.085,.68,.53)",
        easeOutQuad: "cubic-bezier(.25,.46,.45,.94)",
        easeInOutQuad: "cubic-bezier(.455,.03,.515,.955)",
        easeInQuart: "cubic-bezier(.895,.03,.685,.22)",
        easeOutQuart: "cubic-bezier(.165,.84,.44,1)",
        easeInOutQuart: "cubic-bezier(.77,0,.175,1)",
        easeInQuint: "cubic-bezier(.755,.05,.855,.06)",
        easeOutQuint: "cubic-bezier(.23,1,.32,1)",
        easeInOutQuint: "cubic-bezier(.86,0,.07,1)",
        easeInSine: "cubic-bezier(.47,0,.745,.715)",
        easeOutSine: "cubic-bezier(.39,.575,.565,1)",
        easeInOutSine: "cubic-bezier(.445,.05,.55,.95)",
        easeInBack: "cubic-bezier(.6,-.28,.735,.045)",
        easeOutBack: "cubic-bezier(.175, .885,.32,1.275)",
        easeInOutBack: "cubic-bezier(.68,-.55,.265,1.55)"
    }, e.cssHooks["transit:transform"] = {
        get: function(t) {
            return e(t).data("transform") || new n
        },
        set: function(t, i) {
            var o = i;
            o instanceof n || (o = new n(o)), "WebkitTransform" !== h.transform || p ? t.style[h.transform] = o.toString() : t.style[h.transform] = o.toString(!0), e(t).data("transform", o)
        }
    }, e.cssHooks.transform = {
        set: e.cssHooks["transit:transform"].set
    }, e.cssHooks.filter = {
        get: function(e) {
            return e.style[h.filter]
        },
        set: function(e, t) {
            e.style[h.filter] = t
        }
    }, e.fn.jquery < "1.8" && (e.cssHooks.transformOrigin = {
        get: function(e) {
            return e.style[h.transformOrigin]
        },
        set: function(e, t) {
            e.style[h.transformOrigin] = t
        }
    }, e.cssHooks.transition = {
        get: function(e) {
            return e.style[h.transition]
        },
        set: function(e, t) {
            e.style[h.transition] = t
        }
    }), r("scale"), r("scaleX"), r("scaleY"), r("translate"), r("rotate"), r("rotateX"), r("rotateY"), r("rotate3d"), r("perspective"), r("skewX"), r("skewY"), r("x", !0), r("y", !0), n.prototype = {
        setFromString: function(e, t) {
            var i = "string" == typeof t ? t.split(",") : t.constructor === Array ? t : [t];
            i.unshift(e), n.prototype.set.apply(this, i)
        },
        set: function(e) {
            var t = Array.prototype.slice.apply(arguments, [1]);
            this.setter[e] ? this.setter[e].apply(this, t) : this[e] = t.join(",")
        },
        get: function(e) {
            return this.getter[e] ? this.getter[e].apply(this) : this[e] || 0
        },
        setter: {
            rotate: function(e) {
                this.rotate = c(e, "deg")
            },
            rotateX: function(e) {
                this.rotateX = c(e, "deg")
            },
            rotateY: function(e) {
                this.rotateY = c(e, "deg")
            },
            scale: function(e, t) {
                void 0 === t && (t = e), this.scale = e + "," + t
            },
            skewX: function(e) {
                this.skewX = c(e, "deg")
            },
            skewY: function(e) {
                this.skewY = c(e, "deg")
            },
            perspective: function(e) {
                this.perspective = c(e, "px")
            },
            x: function(e) {
                this.set("translate", e, null)
            },
            y: function(e) {
                this.set("translate", null, e)
            },
            translate: function(e, t) {
                void 0 === this._translateX && (this._translateX = 0), void 0 === this._translateY && (this._translateY = 0), null !== e && void 0 !== e && (this._translateX = c(e, "px")), null !== t && void 0 !== t && (this._translateY = c(t, "px")), this.translate = this._translateX + "," + this._translateY
            }
        },
        getter: {
            x: function() {
                return this._translateX || 0
            },
            y: function() {
                return this._translateY || 0
            },
            scale: function() {
                var e = (this.scale || "1,1").split(",");
                return e[0] && (e[0] = parseFloat(e[0])), e[1] && (e[1] = parseFloat(e[1])), e[0] === e[1] ? e[0] : e
            },
            rotate3d: function() {
                for (var e = (this.rotate3d || "0,0,0,0deg").split(","), t = 0; t <= 3; ++t)
                    e[t] && (e[t] = parseFloat(e[t]));
                return e[3] && (e[3] = c(e[3], "deg")), e
            }
        },
        parse: function(e) {
            var t = this;
            e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g, function(e, i, n) {
                t.setFromString(i, n)
            })
        },
        toString: function(e) {
            var t = [];
            for (var i in this)
                if (this.hasOwnProperty(i)) {
                    if (!h.transform3d && ("rotateX" === i || "rotateY" === i || "perspective" === i || "transformOrigin" === i))
                        continue;
                    "_" !== i[0] && (e && "scale" === i ? t.push(i + "3d(" + this[i] + ",1)") : e && "translate" === i ? t.push(i + "3d(" + this[i] + ",0)") : t.push(i + "(" + this[i] + ")"))
                }
            return t.join(" ")
        }
    }, e.fn.transition = e.fn.transit = function(t, i, n, a) {
        var r = this,
            l = 0,
            c = !0,
            u = e.extend(!0, {}, t);
        "function" == typeof i && (a = i, i = void 0), "object" == typeof i && (n = i.easing, l = i.delay || 0, c = "undefined" == typeof i.queue || i.queue, a = i.complete, i = i.duration), "function" == typeof n && (a = n, n = void 0), "undefined" != typeof u.easing && (n = u.easing, delete u.easing), "undefined" != typeof u.duration && (i = u.duration, delete u.duration), "undefined" != typeof u.complete && (a = u.complete, delete u.complete), "undefined" != typeof u.queue && (c = u.queue, delete u.queue), "undefined" != typeof u.delay && (l = u.delay, delete u.delay), "undefined" == typeof i && (i = e.fx.speeds._default), "undefined" == typeof n && (n = e.cssEase._default), i = d(i);
        var p = s(u, i, n, l),
            f = e.transit.enabled && h.transition,
            g = f ? parseInt(i, 10) + parseInt(l, 10) : 0;
        if (0 === g) {
            var v = function(e) {
                r.css(u), a && a.apply(r), e && e()
            };
            return o(r, c, v), r
        }
        var _ = {},
            b = function(t) {
                var i = !1,
                    n = function() {
                        i && r.unbind(m, n), g > 0 && r.each(function() {
                            this.style[h.transition] = _[this] || null
                        }), "function" == typeof a && a.apply(r), "function" == typeof t && t()
                    };
                g > 0 && m && e.transit.useTransitionEnd ? (i = !0, r.bind(m, n)) : window.setTimeout(n, g), r.each(function() {
                    g > 0 && (this.style[h.transition] = p), e(this).css(u)
                })
            },
            w = function(e) {
                this.offsetWidth, b(e)
            };
        return o(r, c, w), this
    }, e.transit.getTransitionValue = s, e
}), jQuery.easing.jswing = jQuery.easing.swing, jQuery.extend(jQuery.easing, {
    def: "easeOutQuad",
    swing: function(e, t, i, n, o) {
        return jQuery.easing[jQuery.easing.def](e, t, i, n, o)
    },
    easeInQuad: function(e, t, i, n, o) {
        return n * (t /= o) * t + i
    },
    easeOutQuad: function(e, t, i, n, o) {
        return -n * (t /= o) * (t - 2) + i
    },
    easeInOutQuad: function(e, t, i, n, o) {
        return (t /= o / 2) < 1 ? n / 2 * t * t + i : -n / 2 * (--t * (t - 2) - 1) + i
    },
    easeInCubic: function(e, t, i, n, o) {
        return n * (t /= o) * t * t + i
    },
    easeOutCubic: function(e, t, i, n, o) {
        return n * ((t = t / o - 1) * t * t + 1) + i
    },
    easeInOutCubic: function(e, t, i, n, o) {
        return (t /= o / 2) < 1 ? n / 2 * t * t * t + i : n / 2 * ((t -= 2) * t * t + 2) + i
    },
    easeInQuart: function(e, t, i, n, o) {
        return n * (t /= o) * t * t * t + i
    },
    easeOutQuart: function(e, t, i, n, o) {
        return -n * ((t = t / o - 1) * t * t * t - 1) + i
    },
    easeInOutQuart: function(e, t, i, n, o) {
        return (t /= o / 2) < 1 ? n / 2 * t * t * t * t + i : -n / 2 * ((t -= 2) * t * t * t - 2) + i
    },
    easeInQuint: function(e, t, i, n, o) {
        return n * (t /= o) * t * t * t * t + i
    },
    easeOutQuint: function(e, t, i, n, o) {
        return n * ((t = t / o - 1) * t * t * t * t + 1) + i
    },
    easeInOutQuint: function(e, t, i, n, o) {
        return (t /= o / 2) < 1 ? n / 2 * t * t * t * t * t + i : n / 2 * ((t -= 2) * t * t * t * t + 2) + i
    },
    easeInSine: function(e, t, i, n, o) {
        return -n * Math.cos(t / o * (Math.PI / 2)) + n + i
    },
    easeOutSine: function(e, t, i, n, o) {
        return n * Math.sin(t / o * (Math.PI / 2)) + i
    },
    easeInOutSine: function(e, t, i, n, o) {
        return -n / 2 * (Math.cos(Math.PI * t / o) - 1) + i
    },
    easeInExpo: function(e, t, i, n, o) {
        return 0 == t ? i : n * Math.pow(2, 10 * (t / o - 1)) + i
    },
    easeOutExpo: function(e, t, i, n, o) {
        return t == o ? i + n : n * (-Math.pow(2, -10 * t / o) + 1) + i
    },
    easeInOutExpo: function(e, t, i, n, o) {
        return 0 == t ? i : t == o ? i + n : (t /= o / 2) < 1 ? n / 2 * Math.pow(2, 10 * (t - 1)) + i : n / 2 * (-Math.pow(2, -10 * --t) + 2) + i
    },
    easeInCirc: function(e, t, i, n, o) {
        return -n * (Math.sqrt(1 - (t /= o) * t) - 1) + i
    },
    easeOutCirc: function(e, t, i, n, o) {
        return n * Math.sqrt(1 - (t = t / o - 1) * t) + i
    },
    easeInOutCirc: function(e, t, i, n, o) {
        return (t /= o / 2) < 1 ? -n / 2 * (Math.sqrt(1 - t * t) - 1) + i : n / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + i
    },
    easeInElastic: function(e, t, i, n, o) {
        var a = 1.70158,
            s = 0,
            r = n;
        if (0 == t)
            return i;
        if (1 == (t /= o))
            return i + n;
        if (s || (s = .3 * o), r < Math.abs(n)) {
            r = n;
            var a = s / 4
        } else
            var a = s / (2 * Math.PI) * Math.asin(n / r);
        return -(r * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * o - a) * (2 * Math.PI) / s)) + i
    },
    easeOutElastic: function(e, t, i, n, o) {
        var a = 1.70158,
            s = 0,
            r = n;
        if (0 == t)
            return i;
        if (1 == (t /= o))
            return i + n;
        if (s || (s = .3 * o), r < Math.abs(n)) {
            r = n;
            var a = s / 4
        } else
            var a = s / (2 * Math.PI) * Math.asin(n / r);
        return r * Math.pow(2, -10 * t) * Math.sin((t * o - a) * (2 * Math.PI) / s) + n + i
    },
    easeInOutElastic: function(e, t, i, n, o) {
        var a = 1.70158,
            s = 0,
            r = n;
        if (0 == t)
            return i;
        if (2 == (t /= o / 2))
            return i + n;
        if (s || (s = o * (.3 * 1.5)), r < Math.abs(n)) {
            r = n;
            var a = s / 4
        } else
            var a = s / (2 * Math.PI) * Math.asin(n / r);
        return t < 1 ? -.5 * (r * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * o - a) * (2 * Math.PI) / s)) + i : r * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * o - a) * (2 * Math.PI) / s) * .5 + n + i
    },
    easeInBack: function(e, t, i, n, o, a) {
        return void 0 == a && (a = 1.70158), n * (t /= o) * t * ((a + 1) * t - a) + i
    },
    easeOutBack: function(e, t, i, n, o, a) {
        return void 0 == a && (a = 1.70158), n * ((t = t / o - 1) * t * ((a + 1) * t + a) + 1) + i
    },
    easeInOutBack: function(e, t, i, n, o, a) {
        return void 0 == a && (a = 1.70158), (t /= o / 2) < 1 ? n / 2 * (t * t * (((a *= 1.525) + 1) * t - a)) + i : n / 2 * ((t -= 2) * t * (((a *= 1.525) + 1) * t + a) + 2) + i
    },
    easeInBounce: function(e, t, i, n, o) {
        return n - jQuery.easing.easeOutBounce(e, o - t, 0, n, o) + i
    },
    easeOutBounce: function(e, t, i, n, o) {
        return (t /= o) < 1 / 2.75 ? n * (7.5625 * t * t) + i : t < 2 / 2.75 ? n * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + i : t < 2.5 / 2.75 ? n * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + i : n * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + i
    },
    easeInOutBounce: function(e, t, i, n, o) {
        return t < o / 2 ? .5 * jQuery.easing.easeInBounce(e, 2 * t, 0, n, o) + i : .5 * jQuery.easing.easeOutBounce(e, 2 * t - o, 0, n, o) + .5 * n + i
    }
}), function(e, t) {
    function i(t, i) {
        var o,
            a,
            s,
            r = t.nodeName.toLowerCase();
        return "area" === r ? (o = t.parentNode, a = o.name, !(!t.href || !a || "map" !== o.nodeName.toLowerCase()) && (s = e("img[usemap=#" + a + "]")[0], !!s && n(s))) : (/input|select|textarea|button|object/.test(r) ? !t.disabled : "a" === r ? t.href || i : i) && n(t)
    }
    function n(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
                return "hidden" === e.css(this, "visibility")
            }).length
    }
    var o = 0,
        a = /^ui-id-\d+$/;
    e.ui = e.ui || {}, e.extend(e.ui, {
        version: "1.10.3",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_ENTER: 108,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }), e.fn.extend({
        focus: function(t) {
            return function(i, n) {
                return "number" == typeof i ? this.each(function() {
                    var t = this;
                    setTimeout(function() {
                        e(t).focus(), n && n.call(t)
                    }, i)
                }) : t.apply(this, arguments)
            }
        }(e.fn.focus),
        scrollParent: function() {
            var t;
            return t = e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
                return /(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
            }).eq(0) : this.parents().filter(function() {
                return /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
            }).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t
        },
        zIndex: function(i) {
            if (i !== t)
                return this.css("zIndex", i);
            if (this.length)
                for (var n, o, a = e(this[0]); a.length && a[0] !== document;) {
                    if (n = a.css("position"), ("absolute" === n || "relative" === n || "fixed" === n) && (o = parseInt(a.css("zIndex"), 10), !isNaN(o) && 0 !== o))
                        return o;
                    a = a.parent()
                }
            return 0
        },
        uniqueId: function() {
            return this.each(function() {
                this.id || (this.id = "ui-id-" + ++o)
            })
        },
        removeUniqueId: function() {
            return this.each(function() {
                a.test(this.id) && e(this).removeAttr("id")
            })
        }
    }), e.extend(e.expr[":"], {
        data: e.expr.createPseudo ? e.expr.createPseudo(function(t) {
            return function(i) {
                return !!e.data(i, t)
            }
        }) : function(t, i, n) {
            return !!e.data(t, n[3])
        },
        focusable: function(t) {
            return i(t, !isNaN(e.attr(t, "tabindex")))
        },
        tabbable: function(t) {
            var n = e.attr(t, "tabindex"),
                o = isNaN(n);
            return (o || n >= 0) && i(t, !o)
        }
    }), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function(i, n) {
        function o(t, i, n, o) {
            return e.each(a, function() {
                i -= parseFloat(e.css(t, "padding" + this)) || 0, n && (i -= parseFloat(e.css(t, "border" + this + "Width")) || 0), o && (i -= parseFloat(e.css(t, "margin" + this)) || 0)
            }), i
        }
        var a = "Width" === n ? ["Left", "Right"] : ["Top", "Bottom"],
            s = n.toLowerCase(),
            r = {
                innerWidth: e.fn.innerWidth,
                innerHeight: e.fn.innerHeight,
                outerWidth: e.fn.outerWidth,
                outerHeight: e.fn.outerHeight
            };
        e.fn["inner" + n] = function(i) {
            return i === t ? r["inner" + n].call(this) : this.each(function() {
                e(this).css(s, o(this, i) + "px")
            })
        }, e.fn["outer" + n] = function(t, i) {
            return "number" != typeof t ? r["outer" + n].call(this, t) : this.each(function() {
                e(this).css(s, o(this, t, !0, i) + "px")
            })
        }
    }), e.fn.addBack || (e.fn.addBack = function(e) {
        return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
        return function(i) {
            return arguments.length ? t.call(this, e.camelCase(i)) : t.call(this)
        }
    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), e.support.selectstart = "onselectstart" in document.createElement("div"), e.fn.extend({
        disableSelection: function() {
            return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(e) {
                e.preventDefault()
            })
        },
        enableSelection: function() {
            return this.unbind(".ui-disableSelection")
        }
    }), e.extend(e.ui, {
        plugin: {
            add: function(t, i, n) {
                var o,
                    a = e.ui[t].prototype;
                for (o in n)
                    a.plugins[o] = a.plugins[o] || [], a.plugins[o].push([i, n[o]])
            },
            call: function(e, t, i) {
                var n,
                    o = e.plugins[t];
                if (o && e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType)
                    for (n = 0; o.length > n; n++)
                        e.options[o[n][0]] && o[n][1].apply(e.element, i)
            }
        },
        hasScroll: function(t, i) {
            if ("hidden" === e(t).css("overflow"))
                return !1;
            var n = i && "left" === i ? "scrollLeft" : "scrollTop",
                o = !1;
            return t[n] > 0 || (t[n] = 1, o = t[n] > 0, t[n] = 0, o)
        }
    })
}(jQuery), function(e, t) {
    var i = 0,
        n = Array.prototype.slice,
        o = e.cleanData;
    e.cleanData = function(t) {
        for (var i, n = 0; null != (i = t[n]); n++)
            try {
                e(i).triggerHandler("remove")
            } catch (a) {}
        o(t)
    }, e.widget = function(i, n, o) {
        var a,
            s,
            r,
            l,
            c = {},
            d = i.split(".")[0];
        i = i.split(".")[1], a = d + "-" + i, o || (o = n, n = e.Widget), e.expr[":"][a.toLowerCase()] = function(t) {
            return !!e.data(t, a)
        }, e[d] = e[d] || {}, s = e[d][i], r = e[d][i] = function(e, i) {
            return this._createWidget ? (arguments.length && this._createWidget(e, i), t) : new r(e, i)
        }, e.extend(r, s, {
            version: o.version,
            _proto: e.extend({}, o),
            _childConstructors: []
        }), l = new n, l.options = e.widget.extend({}, l.options), e.each(o, function(i, o) {
            return e.isFunction(o) ? (c[i] = function() {
                var e = function() {
                        return n.prototype[i].apply(this, arguments)
                    },
                    t = function(e) {
                        return n.prototype[i].apply(this, e)
                    };
                return function() {
                    var i,
                        n = this._super,
                        a = this._superApply;
                    return this._super = e, this._superApply = t, i = o.apply(this, arguments), this._super = n, this._superApply = a, i
                }
            }(), t) : (c[i] = o, t)
        }), r.prototype = e.widget.extend(l, {
            widgetEventPrefix: s ? l.widgetEventPrefix : i
        }, c, {
            constructor: r,
            namespace: d,
            widgetName: i,
            widgetFullName: a
        }), s ? (e.each(s._childConstructors, function(t, i) {
            var n = i.prototype;
            e.widget(n.namespace + "." + n.widgetName, r, i._proto)
        }), delete s._childConstructors) : n._childConstructors.push(r), e.widget.bridge(i, r)
    }, e.widget.extend = function(i) {
        for (var o, a, s = n.call(arguments, 1), r = 0, l = s.length; l > r; r++)
            for (o in s[r])
                a = s[r][o], s[r].hasOwnProperty(o) && a !== t && (i[o] = e.isPlainObject(a) ? e.isPlainObject(i[o]) ? e.widget.extend({}, i[o], a) : e.widget.extend({}, a) : a);
        return i
    }, e.widget.bridge = function(i, o) {
        var a = o.prototype.widgetFullName || i;
        e.fn[i] = function(s) {
            var r = "string" == typeof s,
                l = n.call(arguments, 1),
                c = this;
            return s = !r && l.length ? e.widget.extend.apply(null, [s].concat(l)) : s, r ? this.each(function() {
                var n,
                    o = e.data(this, a);
                return o ? e.isFunction(o[s]) && "_" !== s.charAt(0) ? (n = o[s].apply(o, l), n !== o && n !== t ? (c = n && n.jquery ? c.pushStack(n.get()) : n, !1) : t) : e.error("no such method '" + s + "' for " + i + " widget instance") : e.error("cannot call methods on " + i + " prior to initialization; attempted to call method '" + s + "'")
            }) : this.each(function() {
                var t = e.data(this, a);
                t ? t.option(s || {})._init() : e.data(this, a, new o(s, this))
            }), c
        }
    }, e.Widget = function() {}, e.Widget._childConstructors = [], e.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            disabled: !1,
            create: null
        },
        _createWidget: function(t, n) {
            n = e(n || this.defaultElement || this)[0], this.element = e(n), this.uuid = i++, this.eventNamespace = "." + this.widgetName + this.uuid, this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this.bindings = e(), this.hoverable = e(), this.focusable = e(), n !== this && (e.data(n, this.widgetFullName, this), this._on(!0, this.element, {
                remove: function(e) {
                    e.target === n && this.destroy()
                }
            }), this.document = e(n.style ? n.ownerDocument : n.document || n), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
        },
        _getCreateOptions: e.noop,
        _getCreateEventData: e.noop,
        _create: e.noop,
        _init: e.noop,
        destroy: function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
        },
        _destroy: e.noop,
        widget: function() {
            return this.element
        },
        option: function(i, n) {
            var o,
                a,
                s,
                r = i;
            if (0 === arguments.length)
                return e.widget.extend({}, this.options);
            if ("string" == typeof i)
                if (r = {}, o = i.split("."), i = o.shift(), o.length) {
                    for (a = r[i] = e.widget.extend({}, this.options[i]), s = 0; o.length - 1 > s; s++)
                        a[o[s]] = a[o[s]] || {}, a = a[o[s]];
                    if (i = o.pop(), n === t)
                        return a[i] === t ? null : a[i];
                    a[i] = n
                } else {
                    if (n === t)
                        return this.options[i] === t ? null : this.options[i];
                    r[i] = n
                }
            return this._setOptions(r), this
        },
        _setOptions: function(e) {
            var t;
            for (t in e)
                this._setOption(t, e[t]);
            return this
        },
        _setOption: function(e, t) {
            return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!t).attr("aria-disabled", t), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), this
        },
        enable: function() {
            return this._setOption("disabled", !1)
        },
        disable: function() {
            return this._setOption("disabled", !0)
        },
        _on: function(i, n, o) {
            var a,
                s = this;
            "boolean" != typeof i && (o = n, n = i, i = !1), o ? (n = a = e(n), this.bindings = this.bindings.add(n)) : (o = n, n = this.element, a = this.widget()), e.each(o, function(o, r) {
                function l() {
                    return i || s.options.disabled !== !0 && !e(this).hasClass("ui-state-disabled") ? ("string" == typeof r ? s[r] : r).apply(s, arguments) : t
                }
                "string" != typeof r && (l.guid = r.guid = r.guid || l.guid || e.guid++);
                var c = o.match(/^(\w+)\s*(.*)$/),
                    d = c[1] + s.eventNamespace,
                    u = c[2];
                u ? a.delegate(u, d, l) : n.bind(d, l)
            })
        },
        _off: function(e, t) {
            t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, e.unbind(t).undelegate(t)
        },
        _delay: function(e, t) {
            function i() {
                return ("string" == typeof e ? n[e] : e).apply(n, arguments)
            }
            var n = this;
            return setTimeout(i, t || 0)
        },
        _hoverable: function(t) {
            this.hoverable = this.hoverable.add(t), this._on(t, {
                mouseenter: function(t) {
                    e(t.currentTarget).addClass("ui-state-hover")
                },
                mouseleave: function(t) {
                    e(t.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function(t) {
            this.focusable = this.focusable.add(t), this._on(t, {
                focusin: function(t) {
                    e(t.currentTarget).addClass("ui-state-focus")
                },
                focusout: function(t) {
                    e(t.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function(t, i, n) {
            var o,
                a,
                s = this.options[t];
            if (n = n || {}, i = e.Event(i), i.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), i.target = this.element[0], a = i.originalEvent)
                for (o in a)
                    o in i || (i[o] = a[o]);
            return this.element.trigger(i, n), !(e.isFunction(s) && s.apply(this.element[0], [i].concat(n)) === !1 || i.isDefaultPrevented())
        }
    }, e.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(t, i) {
        e.Widget.prototype["_" + t] = function(n, o, a) {
            "string" == typeof o && (o = {
                effect: o
            });
            var s,
                r = o ? o === !0 || "number" == typeof o ? i : o.effect || i : t;
            o = o || {}, "number" == typeof o && (o = {
                duration: o
            }), s = !e.isEmptyObject(o), o.complete = a, o.delay && n.delay(o.delay), s && e.effects && e.effects.effect[r] ? n[t](o) : r !== t && n[r] ? n[r](o.duration, o.easing, a) : n.queue(function(i) {
                e(this)[t](), a && a.call(n[0]), i()
            })
        }
    })
}(jQuery), function(e) {
    var t = !1;
    e(document).mouseup(function() {
        t = !1
    }), e.widget("ui.mouse", {
        version: "1.10.3",
        options: {
            cancel: "input,textarea,button,select,option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function() {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function(e) {
                return t._mouseDown(e)
            }).bind("click." + this.widgetName, function(i) {
                return !0 === e.data(i.target, t.widgetName + ".preventClickEvent") ? (e.removeData(i.target, t.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1) : void 0
            }), this.started = !1
        },
        _mouseDestroy: function() {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function(i) {
            if (!t) {
                this._mouseStarted && this._mouseUp(i), this._mouseDownEvent = i;
                var n = this,
                    o = 1 === i.which,
                    a = !("string" != typeof this.options.cancel || !i.target.nodeName) && e(i.target).closest(this.options.cancel).length;
                return !(o && !a && this._mouseCapture(i)) || (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                        n.mouseDelayMet = !0
                    }, this.options.delay)), this._mouseDistanceMet(i) && this._mouseDelayMet(i) && (this._mouseStarted = this._mouseStart(i) !== !1, !this._mouseStarted) ? (i.preventDefault(), !0) : (!0 === e.data(i.target, this.widgetName + ".preventClickEvent") && e.removeData(i.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function(e) {
                        return n._mouseMove(e)
                    }, this._mouseUpDelegate = function(e) {
                        return n._mouseUp(e)
                    }, e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), i.preventDefault(), t = !0, !0))
            }
        },
        _mouseMove: function(t) {
            return e.ui.ie && (!document.documentMode || 9 > document.documentMode) && !t.button ? this._mouseUp(t) : this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted)
        },
        _mouseUp: function(t) {
            return e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), !1
        },
        _mouseDistanceMet: function(e) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function() {
            return this.mouseDelayMet
        },
        _mouseStart: function() {},
        _mouseDrag: function() {},
        _mouseStop: function() {},
        _mouseCapture: function() {
            return !0
        }
    })
}(jQuery), function(e, t) {
    function i(e, t, i) {
        return [parseFloat(e[0]) * (p.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (p.test(e[1]) ? i / 100 : 1)]
    }
    function n(t, i) {
        return parseInt(e.css(t, i), 10) || 0
    }
    function o(t) {
        var i = t[0];
        return 9 === i.nodeType ? {
            width: t.width(),
            height: t.height(),
            offset: {
                top: 0,
                left: 0
            }
        } : e.isWindow(i) ? {
            width: t.width(),
            height: t.height(),
            offset: {
                top: t.scrollTop(),
                left: t.scrollLeft()
            }
        } : i.preventDefault ? {
            width: 0,
            height: 0,
            offset: {
                top: i.pageY,
                left: i.pageX
            }
        } : {
            width: t.outerWidth(),
            height: t.outerHeight(),
            offset: t.offset()
        }
    }
    e.ui = e.ui || {};
    var a,
        s = Math.max,
        r = Math.abs,
        l = Math.round,
        c = /left|center|right/,
        d = /top|center|bottom/,
        u = /[\+\-]\d+(\.[\d]+)?%?/,
        h = /^\w+/,
        p = /%$/,
        f = e.fn.position;
    e.position = {
        scrollbarWidth: function() {
            if (a !== t)
                return a;
            var i,
                n,
                o = e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                s = o.children()[0];
            return e("body").append(o), i = s.offsetWidth, o.css("overflow", "scroll"), n = s.offsetWidth, i === n && (n = o[0].clientWidth), o.remove(), a = i - n
        },
        getScrollInfo: function(t) {
            var i = t.isWindow ? "" : t.element.css("overflow-x"),
                n = t.isWindow ? "" : t.element.css("overflow-y"),
                o = "scroll" === i || "auto" === i && t.width < t.element[0].scrollWidth,
                a = "scroll" === n || "auto" === n && t.height < t.element[0].scrollHeight;
            return {
                width: a ? e.position.scrollbarWidth() : 0,
                height: o ? e.position.scrollbarWidth() : 0
            }
        },
        getWithinInfo: function(t) {
            var i = e(t || window),
                n = e.isWindow(i[0]);
            return {
                element: i,
                isWindow: n,
                offset: i.offset() || {
                    left: 0,
                    top: 0
                },
                scrollLeft: i.scrollLeft(),
                scrollTop: i.scrollTop(),
                width: n ? i.width() : i.outerWidth(),
                height: n ? i.height() : i.outerHeight()
            }
        }
    }, e.fn.position = function(t) {
        if (!t || !t.of)
            return f.apply(this, arguments);
        t = e.extend({}, t);
        var a,
            p,
            m,
            g,
            v,
            _,
            b = e(t.of),
            w = e.position.getWithinInfo(t.within),
            y = e.position.getScrollInfo(w),
            $ = (t.collision || "flip").split(" "),
            k = {};
        return _ = o(b), b[0].preventDefault && (t.at = "left top"), p = _.width, m = _.height, g = _.offset, v = e.extend({}, g), e.each(["my", "at"], function() {
            var e,
                i,
                n = (t[this] || "").split(" ");
            1 === n.length && (n = c.test(n[0]) ? n.concat(["center"]) : d.test(n[0]) ? ["center"].concat(n) : ["center", "center"]), n[0] = c.test(n[0]) ? n[0] : "center", n[1] = d.test(n[1]) ? n[1] : "center", e = u.exec(n[0]), i = u.exec(n[1]), k[this] = [e ? e[0] : 0, i ? i[0] : 0], t[this] = [h.exec(n[0])[0], h.exec(n[1])[0]]
        }), 1 === $.length && ($[1] = $[0]), "right" === t.at[0] ? v.left += p : "center" === t.at[0] && (v.left += p / 2), "bottom" === t.at[1] ? v.top += m : "center" === t.at[1] && (v.top += m / 2), a = i(k.at, p, m), v.left += a[0], v.top += a[1], this.each(function() {
            var o,
                c,
                d = e(this),
                u = d.outerWidth(),
                h = d.outerHeight(),
                f = n(this, "marginLeft"),
                _ = n(this, "marginTop"),
                x = u + f + n(this, "marginRight") + y.width,
                C = h + _ + n(this, "marginBottom") + y.height,
                T = e.extend({}, v),
                I = i(k.my, d.outerWidth(), d.outerHeight());
            "right" === t.my[0] ? T.left -= u : "center" === t.my[0] && (T.left -= u / 2), "bottom" === t.my[1] ? T.top -= h : "center" === t.my[1] && (T.top -= h / 2), T.left += I[0], T.top += I[1], e.support.offsetFractions || (T.left = l(T.left), T.top = l(T.top)), o = {
                marginLeft: f,
                marginTop: _
            }, e.each(["left", "top"], function(i, n) {
                e.ui.position[$[i]] && e.ui.position[$[i]][n](T, {
                    targetWidth: p,
                    targetHeight: m,
                    elemWidth: u,
                    elemHeight: h,
                    collisionPosition: o,
                    collisionWidth: x,
                    collisionHeight: C,
                    offset: [a[0] + I[0], a[1] + I[1]],
                    my: t.my,
                    at: t.at,
                    within: w,
                    elem: d
                })
            }), t.using && (c = function(e) {
                var i = g.left - T.left,
                    n = i + p - u,
                    o = g.top - T.top,
                    a = o + m - h,
                    l = {
                        target: {
                            element: b,
                            left: g.left,
                            top: g.top,
                            width: p,
                            height: m
                        },
                        element: {
                            element: d,
                            left: T.left,
                            top: T.top,
                            width: u,
                            height: h
                        },
                        horizontal: 0 > n ? "left" : i > 0 ? "right" : "center",
                        vertical: 0 > a ? "top" : o > 0 ? "bottom" : "middle"
                    };
                u > p && p > r(i + n) && (l.horizontal = "center"), h > m && m > r(o + a) && (l.vertical = "middle"), l.important = s(r(i), r(n)) > s(r(o), r(a)) ? "horizontal" : "vertical", t.using.call(this, e, l)
            }), d.offset(e.extend(T, {
                using: c
            }))
        })
    }, e.ui.position = {
        fit: {
            left: function(e, t) {
                var i,
                    n = t.within,
                    o = n.isWindow ? n.scrollLeft : n.offset.left,
                    a = n.width,
                    r = e.left - t.collisionPosition.marginLeft,
                    l = o - r,
                    c = r + t.collisionWidth - a - o;
                t.collisionWidth > a ? l > 0 && 0 >= c ? (i = e.left + l + t.collisionWidth - a - o, e.left += l - i) : e.left = c > 0 && 0 >= l ? o : l > c ? o + a - t.collisionWidth : o : l > 0 ? e.left += l : c > 0 ? e.left -= c : e.left = s(e.left - r, e.left)
            },
            top: function(e, t) {
                var i,
                    n = t.within,
                    o = n.isWindow ? n.scrollTop : n.offset.top,
                    a = t.within.height,
                    r = e.top - t.collisionPosition.marginTop,
                    l = o - r,
                    c = r + t.collisionHeight - a - o;
                t.collisionHeight > a ? l > 0 && 0 >= c ? (i = e.top + l + t.collisionHeight - a - o, e.top += l - i) : e.top = c > 0 && 0 >= l ? o : l > c ? o + a - t.collisionHeight : o : l > 0 ? e.top += l : c > 0 ? e.top -= c : e.top = s(e.top - r, e.top)
            }
        },
        flip: {
            left: function(e, t) {
                var i,
                    n,
                    o = t.within,
                    a = o.offset.left + o.scrollLeft,
                    s = o.width,
                    l = o.isWindow ? o.scrollLeft : o.offset.left,
                    c = e.left - t.collisionPosition.marginLeft,
                    d = c - l,
                    u = c + t.collisionWidth - s - l,
                    h = "left" === t.my[0] ? -t.elemWidth : "right" === t.my[0] ? t.elemWidth : 0,
                    p = "left" === t.at[0] ? t.targetWidth : "right" === t.at[0] ? -t.targetWidth : 0,
                    f = -2 * t.offset[0];
                0 > d ? (i = e.left + h + p + f + t.collisionWidth - s - a, (0 > i || r(d) > i) && (e.left += h + p + f)) : u > 0 && (n = e.left - t.collisionPosition.marginLeft + h + p + f - l, (n > 0 || u > r(n)) && (e.left += h + p + f))
            },
            top: function(e, t) {
                var i,
                    n,
                    o = t.within,
                    a = o.offset.top + o.scrollTop,
                    s = o.height,
                    l = o.isWindow ? o.scrollTop : o.offset.top,
                    c = e.top - t.collisionPosition.marginTop,
                    d = c - l,
                    u = c + t.collisionHeight - s - l,
                    h = "top" === t.my[1],
                    p = h ? -t.elemHeight : "bottom" === t.my[1] ? t.elemHeight : 0,
                    f = "top" === t.at[1] ? t.targetHeight : "bottom" === t.at[1] ? -t.targetHeight : 0,
                    m = -2 * t.offset[1];
                0 > d ? (n = e.top + p + f + m + t.collisionHeight - s - a, e.top + p + f + m > d && (0 > n || r(d) > n) && (e.top += p + f + m)) : u > 0 && (i = e.top - t.collisionPosition.marginTop + p + f + m - l, e.top + p + f + m > u && (i > 0 || u > r(i)) && (e.top += p + f + m))
            }
        },
        flipfit: {
            left: function() {
                e.ui.position.flip.left.apply(this, arguments), e.ui.position.fit.left.apply(this, arguments)
            },
            top: function() {
                e.ui.position.flip.top.apply(this, arguments), e.ui.position.fit.top.apply(this, arguments)
            }
        }
    }, function() {
        var t,
            i,
            n,
            o,
            a,
            s = document.getElementsByTagName("body")[0],
            r = document.createElement("div");
        t = document.createElement(s ? "div" : "body"), n = {
            visibility: "hidden",
            width: 0,
            height: 0,
            border: 0,
            margin: 0,
            background: "none"
        }, s && e.extend(n, {
            position: "absolute",
            left: "-1000px",
            top: "-1000px"
        });
        for (a in n)
            t.style[a] = n[a];
        t.appendChild(r), i = s || document.documentElement, i.insertBefore(t, i.firstChild), r.style.cssText = "position: absolute; left: 10.7432222px;", o = e(r).offset().left, e.support.offsetFractions = o > 10 && 11 > o, t.innerHTML = "", i.removeChild(t)
    }()
}(jQuery), function(e) {
    e.widget("ui.draggable", e.ui.mouse, {
        version: "1.10.3",
        widgetEventPrefix: "drag",
        options: {
            addClasses: !0,
            appendTo: "parent",
            axis: !1,
            connectToSortable: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            iframeFix: !1,
            opacity: !1,
            refreshPositions: !1,
            revert: !1,
            revertDuration: 500,
            scope: "default",
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: !1,
            snapMode: "both",
            snapTolerance: 20,
            stack: !1,
            zIndex: !1,
            drag: null,
            start: null,
            stop: null
        },
        _create: function() {
            "original" !== this.options.helper || /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative"), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._mouseInit()
        },
        _destroy: function() {
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._mouseDestroy()
        },
        _mouseCapture: function(t) {
            var i = this.options;
            return !(this.helper || i.disabled || e(t.target).closest(".ui-resizable-handle").length > 0) && (this.handle = this._getHandle(t), !!this.handle && (e(i.iframeFix === !0 ? "iframe" : i.iframeFix).each(function() {
                    e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({
                        width: this.offsetWidth + "px",
                        height: this.offsetHeight + "px",
                        position: "absolute",
                        opacity: "0.001",
                        zIndex: 1e3
                    }).css(e(this).offset()).appendTo("body")
                }), !0))
        },
        _mouseStart: function(t) {
            var i = this.options;
            return this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(), this.offsetParent = this.helper.offsetParent(), this.offsetParentCssPosition = this.offsetParent.css("position"), this.offset = this.positionAbs = this.element.offset(), this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            }, this.offset.scroll = !1, e.extend(this.offset, {
                click: {
                    left: t.pageX - this.offset.left,
                    top: t.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }), this.originalPosition = this.position = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this._setContainment(), this._trigger("start", t) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._mouseDrag(t, !0), e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0)
        },
        _mouseDrag: function(t, i) {
            if ("fixed" === this.offsetParentCssPosition && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), !i) {
                var n = this._uiHash();
                if (this._trigger("drag", t, n) === !1)
                    return this._mouseUp({}), !1;
                this.position = n.position
            }
            return this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1
        },
        _mouseStop: function(t) {
            var i = this,
                n = !1;
            return e.ui.ddmanager && !this.options.dropBehaviour && (n = e.ui.ddmanager.drop(this, t)), this.dropped && (n = this.dropped, this.dropped = !1), !("original" === this.options.helper && !e.contains(this.element[0].ownerDocument, this.element[0])) && ("invalid" === this.options.revert && !n || "valid" === this.options.revert && n || this.options.revert === !0 || e.isFunction(this.options.revert) && this.options.revert.call(this.element, n) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                i._trigger("stop", t) !== !1 && i._clear()
            }) : this._trigger("stop", t) !== !1 && this._clear(), !1)
        },
        _mouseUp: function(t) {
            return e("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this)
            }), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), e.ui.mouse.prototype._mouseUp.call(this, t)
        },
        cancel: function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this
        },
        _getHandle: function(t) {
            return !this.options.handle || !!e(t.target).closest(this.element.find(this.options.handle)).length
        },
        _createHelper: function(t) {
            var i = this.options,
                n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [t])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element;
            return n.parents("body").length || n.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), n[0] === this.element[0] || /(fixed|absolute)/.test(n.css("position")) || n.css("position", "absolute"), n
        },
        _adjustOffsetFromHelper: function(t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                left: +t[0],
                top: +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
        },
        _getParentOffset: function() {
            var t = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                top: 0,
                left: 0
            }), {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if ("relative" === this.cssPosition) {
                var e = this.element.position();
                return {
                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            return {
                top: 0,
                left: 0
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var t,
                i,
                n,
                o = this.options;
            return o.containment ? "window" === o.containment ? void (this.containment = [e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : "document" === o.containment ? void (this.containment = [0, 0, e(document).width() - this.helperProportions.width - this.margins.left, (e(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]) : o.containment.constructor === Array ? void (this.containment = o.containment) : ("parent" === o.containment && (o.containment = this.helper[0].parentNode), i = e(o.containment), n = i[0], void (n && (t = "hidden" !== i.css("overflow"), this.containment = [(parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (t ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relative_container = i))) : void (this.containment = null)
        },
        _convertPositionTo: function(t, i) {
            i || (i = this.position);
            var n = "absolute" === t ? 1 : -1,
                o = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent;
            return this.offset.scroll || (this.offset.scroll = {
                top: o.scrollTop(),
                left: o.scrollLeft()
            }), {
                top: i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top) * n,
                left: i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left) * n
            }
        },
        _generatePosition: function(t) {
            var i,
                n,
                o,
                a,
                s = this.options,
                r = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                l = t.pageX,
                c = t.pageY;
            return this.offset.scroll || (this.offset.scroll = {
                top: r.scrollTop(),
                left: r.scrollLeft()
            }), this.originalPosition && (this.containment && (this.relative_container ? (n = this.relative_container.offset(), i = [this.containment[0] + n.left, this.containment[1] + n.top, this.containment[2] + n.left, this.containment[3] + n.top]) : i = this.containment, t.pageX - this.offset.click.left < i[0] && (l = i[0] + this.offset.click.left), t.pageY - this.offset.click.top < i[1] && (c = i[1] + this.offset.click.top), t.pageX - this.offset.click.left > i[2] && (l = i[2] + this.offset.click.left), t.pageY - this.offset.click.top > i[3] && (c = i[3] + this.offset.click.top)), s.grid && (o = s.grid[1] ? this.originalPageY + Math.round((c - this.originalPageY) / s.grid[1]) * s.grid[1] : this.originalPageY, c = i ? o - this.offset.click.top >= i[1] || o - this.offset.click.top > i[3] ? o : o - this.offset.click.top >= i[1] ? o - s.grid[1] : o + s.grid[1] : o, a = s.grid[0] ? this.originalPageX + Math.round((l - this.originalPageX) / s.grid[0]) * s.grid[0] : this.originalPageX,
            l = i ? a - this.offset.click.left >= i[0] || a - this.offset.click.left > i[2] ? a : a - this.offset.click.left >= i[0] ? a - s.grid[0] : a + s.grid[0] : a)), {
                top: c - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top),
                left: l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left)
            }
        },
        _clear: function() {
            this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1
        },
        _trigger: function(t, i, n) {
            return n = n || this._uiHash(), e.ui.plugin.call(this, t, [i, n]), "drag" === t && (this.positionAbs = this._convertPositionTo("absolute")), e.Widget.prototype._trigger.call(this, t, i, n)
        },
        plugins: {},
        _uiHash: function() {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            }
        }
    }), e.ui.plugin.add("draggable", "connectToSortable", {
        start: function(t, i) {
            var n = e(this).data("ui-draggable"),
                o = n.options,
                a = e.extend({}, i, {
                    item: n.element
                });
            n.sortables = [], e(o.connectToSortable).each(function() {
                var i = e.data(this, "ui-sortable");
                i && !i.options.disabled && (n.sortables.push({
                    instance: i,
                    shouldRevert: i.options.revert
                }), i.refreshPositions(), i._trigger("activate", t, a))
            })
        },
        stop: function(t, i) {
            var n = e(this).data("ui-draggable"),
                o = e.extend({}, i, {
                    item: n.element
                });
            e.each(n.sortables, function() {
                this.instance.isOver ? (this.instance.isOver = 0, n.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, this.shouldRevert && (this.instance.options.revert = this.shouldRevert), this.instance._mouseStop(t), this.instance.options.helper = this.instance.options._helper, "original" === n.options.helper && this.instance.currentItem.css({
                    top: "auto",
                    left: "auto"
                })) : (this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", t, o))
            })
        },
        drag: function(t, i) {
            var n = e(this).data("ui-draggable"),
                o = this;
            e.each(n.sortables, function() {
                var a = !1,
                    s = this;
                this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, this.instance.offset.click = n.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (a = !0, e.each(n.sortables, function() {
                    return this.instance.positionAbs = n.positionAbs, this.instance.helperProportions = n.helperProportions, this.instance.offset.click = n.offset.click, this !== s && this.instance._intersectsWith(this.instance.containerCache) && e.contains(s.instance.element[0], this.instance.element[0]) && (a = !1), a
                })), a ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = e(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", !0), this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function() {
                    return i.helper[0]
                }, t.target = this.instance.currentItem[0], this.instance._mouseCapture(t, !0), this.instance._mouseStart(t, !0, !0), this.instance.offset.click.top = n.offset.click.top, this.instance.offset.click.left = n.offset.click.left, this.instance.offset.parent.left -= n.offset.parent.left - this.instance.offset.parent.left, this.instance.offset.parent.top -= n.offset.parent.top - this.instance.offset.parent.top, n._trigger("toSortable", t), n.dropped = this.instance.element, n.currentItem = n.element, this.instance.fromOutside = n), this.instance.currentItem && this.instance._mouseDrag(t)) : this.instance.isOver && (this.instance.isOver = 0, this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", t, this.instance._uiHash(this.instance)), this.instance._mouseStop(t, !0), this.instance.options.helper = this.instance.options._helper, this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), n._trigger("fromSortable", t), n.dropped = !1)
            })
        }
    }), e.ui.plugin.add("draggable", "cursor", {
        start: function() {
            var t = e("body"),
                i = e(this).data("ui-draggable").options;
            t.css("cursor") && (i._cursor = t.css("cursor")), t.css("cursor", i.cursor)
        },
        stop: function() {
            var t = e(this).data("ui-draggable").options;
            t._cursor && e("body").css("cursor", t._cursor)
        }
    }), e.ui.plugin.add("draggable", "opacity", {
        start: function(t, i) {
            var n = e(i.helper),
                o = e(this).data("ui-draggable").options;
            n.css("opacity") && (o._opacity = n.css("opacity")), n.css("opacity", o.opacity)
        },
        stop: function(t, i) {
            var n = e(this).data("ui-draggable").options;
            n._opacity && e(i.helper).css("opacity", n._opacity)
        }
    }), e.ui.plugin.add("draggable", "scroll", {
        start: function() {
            var t = e(this).data("ui-draggable");
            t.scrollParent[0] !== document && "HTML" !== t.scrollParent[0].tagName && (t.overflowOffset = t.scrollParent.offset())
        },
        drag: function(t) {
            var i = e(this).data("ui-draggable"),
                n = i.options,
                o = !1;
            i.scrollParent[0] !== document && "HTML" !== i.scrollParent[0].tagName ? (n.axis && "x" === n.axis || (i.overflowOffset.top + i.scrollParent[0].offsetHeight - t.pageY < n.scrollSensitivity ? i.scrollParent[0].scrollTop = o = i.scrollParent[0].scrollTop + n.scrollSpeed : t.pageY - i.overflowOffset.top < n.scrollSensitivity && (i.scrollParent[0].scrollTop = o = i.scrollParent[0].scrollTop - n.scrollSpeed)), n.axis && "y" === n.axis || (i.overflowOffset.left + i.scrollParent[0].offsetWidth - t.pageX < n.scrollSensitivity ? i.scrollParent[0].scrollLeft = o = i.scrollParent[0].scrollLeft + n.scrollSpeed : t.pageX - i.overflowOffset.left < n.scrollSensitivity && (i.scrollParent[0].scrollLeft = o = i.scrollParent[0].scrollLeft - n.scrollSpeed))) : (n.axis && "x" === n.axis || (t.pageY - e(document).scrollTop() < n.scrollSensitivity ? o = e(document).scrollTop(e(document).scrollTop() - n.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < n.scrollSensitivity && (o = e(document).scrollTop(e(document).scrollTop() + n.scrollSpeed))), n.axis && "y" === n.axis || (t.pageX - e(document).scrollLeft() < n.scrollSensitivity ? o = e(document).scrollLeft(e(document).scrollLeft() - n.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < n.scrollSensitivity && (o = e(document).scrollLeft(e(document).scrollLeft() + n.scrollSpeed)))), o !== !1 && e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(i, t)
        }
    }), e.ui.plugin.add("draggable", "snap", {
        start: function() {
            var t = e(this).data("ui-draggable"),
                i = t.options;
            t.snapElements = [], e(i.snap.constructor !== String ? i.snap.items || ":data(ui-draggable)" : i.snap).each(function() {
                var i = e(this),
                    n = i.offset();
                this !== t.element[0] && t.snapElements.push({
                    item: this,
                    width: i.outerWidth(),
                    height: i.outerHeight(),
                    top: n.top,
                    left: n.left
                })
            })
        },
        drag: function(t, i) {
            var n,
                o,
                a,
                s,
                r,
                l,
                c,
                d,
                u,
                h,
                p = e(this).data("ui-draggable"),
                f = p.options,
                m = f.snapTolerance,
                g = i.offset.left,
                v = g + p.helperProportions.width,
                _ = i.offset.top,
                b = _ + p.helperProportions.height;
            for (u = p.snapElements.length - 1; u >= 0; u--)
                r = p.snapElements[u].left, l = r + p.snapElements[u].width, c = p.snapElements[u].top, d = c + p.snapElements[u].height, r - m > v || g > l + m || c - m > b || _ > d + m || !e.contains(p.snapElements[u].item.ownerDocument, p.snapElements[u].item) ? (p.snapElements[u].snapping && p.options.snap.release && p.options.snap.release.call(p.element, t, e.extend(p._uiHash(), {
                    snapItem: p.snapElements[u].item
                })), p.snapElements[u].snapping = !1) : ("inner" !== f.snapMode && (n = m >= Math.abs(c - b), o = m >= Math.abs(d - _), a = m >= Math.abs(r - v), s = m >= Math.abs(l - g), n && (i.position.top = p._convertPositionTo("relative", {
                    top: c - p.helperProportions.height,
                    left: 0
                }).top - p.margins.top), o && (i.position.top = p._convertPositionTo("relative", {
                    top: d,
                    left: 0
                }).top - p.margins.top), a && (i.position.left = p._convertPositionTo("relative", {
                    top: 0,
                    left: r - p.helperProportions.width
                }).left - p.margins.left), s && (i.position.left = p._convertPositionTo("relative", {
                    top: 0,
                    left: l
                }).left - p.margins.left)), h = n || o || a || s, "outer" !== f.snapMode && (n = m >= Math.abs(c - _), o = m >= Math.abs(d - b), a = m >= Math.abs(r - g), s = m >= Math.abs(l - v), n && (i.position.top = p._convertPositionTo("relative", {
                    top: c,
                    left: 0
                }).top - p.margins.top), o && (i.position.top = p._convertPositionTo("relative", {
                    top: d - p.helperProportions.height,
                    left: 0
                }).top - p.margins.top), a && (i.position.left = p._convertPositionTo("relative", {
                    top: 0,
                    left: r
                }).left - p.margins.left), s && (i.position.left = p._convertPositionTo("relative", {
                    top: 0,
                    left: l - p.helperProportions.width
                }).left - p.margins.left)), !p.snapElements[u].snapping && (n || o || a || s || h) && p.options.snap.snap && p.options.snap.snap.call(p.element, t, e.extend(p._uiHash(), {
                    snapItem: p.snapElements[u].item
                })), p.snapElements[u].snapping = n || o || a || s || h)
        }
    }), e.ui.plugin.add("draggable", "stack", {
        start: function() {
            var t,
                i = this.data("ui-draggable").options,
                n = e.makeArray(e(i.stack)).sort(function(t, i) {
                    return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(i).css("zIndex"), 10) || 0)
                });
            n.length && (t = parseInt(e(n[0]).css("zIndex"), 10) || 0, e(n).each(function(i) {
                e(this).css("zIndex", t + i)
            }), this.css("zIndex", t + n.length))
        }
    }), e.ui.plugin.add("draggable", "zIndex", {
        start: function(t, i) {
            var n = e(i.helper),
                o = e(this).data("ui-draggable").options;
            n.css("zIndex") && (o._zIndex = n.css("zIndex")), n.css("zIndex", o.zIndex)
        },
        stop: function(t, i) {
            var n = e(this).data("ui-draggable").options;
            n._zIndex && e(i.helper).css("zIndex", n._zIndex)
        }
    })
}(jQuery), function(e) {
    function t(e, t, i) {
        return e > t && t + i > e
    }
    e.widget("ui.droppable", {
        version: "1.10.3",
        widgetEventPrefix: "drop",
        options: {
            accept: "*",
            activeClass: !1,
            addClasses: !0,
            greedy: !1,
            hoverClass: !1,
            scope: "default",
            tolerance: "intersect",
            activate: null,
            deactivate: null,
            drop: null,
            out: null,
            over: null
        },
        _create: function() {
            var t = this.options,
                i = t.accept;
            this.isover = !1, this.isout = !0, this.accept = e.isFunction(i) ? i : function(e) {
                return e.is(i)
            }, this.proportions = {
                width: this.element[0].offsetWidth,
                height: this.element[0].offsetHeight
            }, e.ui.ddmanager.droppables[t.scope] = e.ui.ddmanager.droppables[t.scope] || [], e.ui.ddmanager.droppables[t.scope].push(this), t.addClasses && this.element.addClass("ui-droppable")
        },
        _destroy: function() {
            for (var t = 0, i = e.ui.ddmanager.droppables[this.options.scope]; i.length > t; t++)
                i[t] === this && i.splice(t, 1);
            this.element.removeClass("ui-droppable ui-droppable-disabled")
        },
        _setOption: function(t, i) {
            "accept" === t && (this.accept = e.isFunction(i) ? i : function(e) {
                return e.is(i)
            }), e.Widget.prototype._setOption.apply(this, arguments)
        },
        _activate: function(t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass), i && this._trigger("activate", t, this.ui(i))
        },
        _deactivate: function(t) {
            var i = e.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass), i && this._trigger("deactivate", t, this.ui(i))
        },
        _over: function(t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", t, this.ui(i)))
        },
        _out: function(t) {
            var i = e.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", t, this.ui(i)))
        },
        _drop: function(t, i) {
            var n = i || e.ui.ddmanager.current,
                o = !1;
            return !(!n || (n.currentItem || n.element)[0] === this.element[0]) && (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                    var t = e.data(this, "ui-droppable");
                    return t.options.greedy && !t.options.disabled && t.options.scope === n.options.scope && t.accept.call(t.element[0], n.currentItem || n.element) && e.ui.intersect(n, e.extend(t, {
                        offset: t.element.offset()
                    }), t.options.tolerance) ? (o = !0, !1) : void 0
                }), !o && (!!this.accept.call(this.element[0], n.currentItem || n.element) && (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(n)), this.element)))
        },
        ui: function(e) {
            return {
                draggable: e.currentItem || e.element,
                helper: e.helper,
                position: e.position,
                offset: e.positionAbs
            }
        }
    }), e.ui.intersect = function(e, i, n) {
        if (!i.offset)
            return !1;
        var o,
            a,
            s = (e.positionAbs || e.position.absolute).left,
            r = s + e.helperProportions.width,
            l = (e.positionAbs || e.position.absolute).top,
            c = l + e.helperProportions.height,
            d = i.offset.left,
            u = d + i.proportions.width,
            h = i.offset.top,
            p = h + i.proportions.height;
        switch (n) {
        case "fit":
            return s >= d && u >= r && l >= h && p >= c;
        case "intersect":
            return s + e.helperProportions.width / 2 > d && u > r - e.helperProportions.width / 2 && l + e.helperProportions.height / 2 > h && p > c - e.helperProportions.height / 2;
        case "pointer":
            return o = (e.positionAbs || e.position.absolute).left + (e.clickOffset || e.offset.click).left, a = (e.positionAbs || e.position.absolute).top + (e.clickOffset || e.offset.click).top, t(a, h, i.proportions.height) && t(o, d, i.proportions.width);
        case "touch":
            return (l >= h && p >= l || c >= h && p >= c || h > l && c > p) && (s >= d && u >= s || r >= d && u >= r || d > s && r > u);
        default:
            return !1
        }
    }, e.ui.ddmanager = {
        current: null,
        droppables: {
            "default": []
        },
        prepareOffsets: function(t, i) {
            var n,
                o,
                a = e.ui.ddmanager.droppables[t.options.scope] || [],
                s = i ? i.type : null,
                r = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
            e:
            for (n = 0; a.length > n; n++)
                if (!(a[n].options.disabled || t && !a[n].accept.call(a[n].element[0], t.currentItem || t.element))) {
                    for (o = 0; r.length > o; o++)
                        if (r[o] === a[n].element[0]) {
                            a[n].proportions.height = 0;
                            continue e
                        }
                    a[n].visible = "none" !== a[n].element.css("display"), a[n].visible && ("mousedown" === s && a[n]._activate.call(a[n], i), a[n].offset = a[n].element.offset(), a[n].proportions = {
                        width: a[n].element[0].offsetWidth,
                        height: a[n].element[0].offsetHeight
                    })
                }
        },
        drop: function(t, i) {
            var n = !1;
            return e.each((e.ui.ddmanager.droppables[t.options.scope] || []).slice(), function() {
                this.options && (!this.options.disabled && this.visible && e.ui.intersect(t, this, this.options.tolerance) && (n = this._drop.call(this, i) || n), !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, i)))
            }), n
        },
        dragStart: function(t, i) {
            t.element.parentsUntil("body").bind("scroll.droppable", function() {
                t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i)
            })
        },
        drag: function(t, i) {
            t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, i), e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function() {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var n,
                        o,
                        a,
                        s = e.ui.intersect(t, this, this.options.tolerance),
                        r = !s && this.isover ? "isout" : s && !this.isover ? "isover" : null;
                    r && (this.options.greedy && (o = this.options.scope, a = this.element.parents(":data(ui-droppable)").filter(function() {
                        return e.data(this, "ui-droppable").options.scope === o
                    }), a.length && (n = e.data(a[0], "ui-droppable"), n.greedyChild = "isover" === r)), n && "isover" === r && (n.isover = !1, n.isout = !0, n._out.call(n, i)), this[r] = !0, this["isout" === r ? "isover" : "isout"] = !1, this["isover" === r ? "_over" : "_out"].call(this, i), n && "isout" === r && (n.isout = !1, n.isover = !0, n._over.call(n, i)))
                }
            })
        },
        dragStop: function(t, i) {
            t.element.parentsUntil("body").unbind("scroll.droppable"), t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i)
        }
    }
}(jQuery), function(e) {
    function t(e) {
        return parseInt(e, 10) || 0
    }
    function i(e) {
        return !isNaN(parseInt(e, 10))
    }
    e.widget("ui.resizable", e.ui.mouse, {
        version: "1.10.3",
        widgetEventPrefix: "resize",
        options: {
            alsoResize: !1,
            animate: !1,
            animateDuration: "slow",
            animateEasing: "swing",
            aspectRatio: !1,
            autoHide: !1,
            containment: !1,
            ghost: !1,
            grid: !1,
            handles: "e,s,se",
            helper: !1,
            maxHeight: null,
            maxWidth: null,
            minHeight: 10,
            minWidth: 10,
            zIndex: 90,
            resize: null,
            start: null,
            stop: null
        },
        _create: function() {
            var t,
                i,
                n,
                o,
                a,
                s = this,
                r = this.options;
            if (this.element.addClass("ui-resizable"), e.extend(this, {
                _aspectRatio: !!r.aspectRatio,
                aspectRatio: r.aspectRatio,
                originalElement: this.element,
                _proportionallyResizeElements: [],
                _helper: r.helper || r.ghost || r.animate ? r.helper || "ui-resizable-helper" : null
            }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                position: this.element.css("position"),
                width: this.element.outerWidth(),
                height: this.element.outerHeight(),
                top: this.element.css("top"),
                left: this.element.css("left")
            })), this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable")), this.elementIsWrapper = !0, this.element.css({
                marginLeft: this.originalElement.css("marginLeft"),
                marginTop: this.originalElement.css("marginTop"),
                marginRight: this.originalElement.css("marginRight"),
                marginBottom: this.originalElement.css("marginBottom")
            }), this.originalElement.css({
                marginLeft: 0,
                marginTop: 0,
                marginRight: 0,
                marginBottom: 0
            }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({
                position: "static",
                zoom: 1,
                display: "block"
            })), this.originalElement.css({
                margin: this.originalElement.css("margin")
            }), this._proportionallyResize()), this.handles = r.handles || (e(".ui-resizable-handle", this.element).length ? {
                n: ".ui-resizable-n",
                e: ".ui-resizable-e",
                s: ".ui-resizable-s",
                w: ".ui-resizable-w",
                se: ".ui-resizable-se",
                sw: ".ui-resizable-sw",
                ne: ".ui-resizable-ne",
                nw: ".ui-resizable-nw"
            } : "e,s,se"), this.handles.constructor === String)
                for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), t = this.handles.split(","), this.handles = {}, i = 0; t.length > i; i++)
                    n = e.trim(t[i]), a = "ui-resizable-" + n, o = e("<div class='ui-resizable-handle " + a + "'></div>"), o.css({
                        zIndex: r.zIndex
                    }), "se" === n && o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[n] = ".ui-resizable-" + n, this.element.append(o);
            this._renderAxis = function(t) {
                var i,
                    n,
                    o,
                    a;
                t = t || this.element;
                for (i in this.handles)
                    this.handles[i].constructor === String && (this.handles[i] = e(this.handles[i], this.element).show()), this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (n = e(this.handles[i], this.element), a = /sw|ne|nw|se|n|s/.test(i) ? n.outerHeight() : n.outerWidth(), o = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""), t.css(o, a), this._proportionallyResize()), e(this.handles[i]).length
            }, this._renderAxis(this.element), this._handles = e(".ui-resizable-handle", this.element).disableSelection(), this._handles.mouseover(function() {
                s.resizing || (this.className && (o = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), s.axis = o && o[1] ? o[1] : "se")
            }), r.autoHide && (this._handles.hide(), e(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                r.disabled || (e(this).removeClass("ui-resizable-autohide"), s._handles.show())
            }).mouseleave(function() {
                r.disabled || s.resizing || (e(this).addClass("ui-resizable-autohide"), s._handles.hide())
            })), this._mouseInit()
        },
        _destroy: function() {
            this._mouseDestroy();
            var t,
                i = function(t) {
                    e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
                };
            return this.elementIsWrapper && (i(this.element), t = this.element, this.originalElement.css({
                position: t.css("position"),
                width: t.outerWidth(),
                height: t.outerHeight(),
                top: t.css("top"),
                left: t.css("left")
            }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), i(this.originalElement), this
        },
        _mouseCapture: function(t) {
            var i,
                n,
                o = !1;
            for (i in this.handles)
                n = e(this.handles[i])[0], (n === t.target || e.contains(n, t.target)) && (o = !0);
            return !this.options.disabled && o
        },
        _mouseStart: function(i) {
            var n,
                o,
                a,
                s = this.options,
                r = this.element.position(),
                l = this.element;
            return this.resizing = !0, /absolute/.test(l.css("position")) ? l.css({
                position: "absolute",
                top: l.css("top"),
                left: l.css("left")
            }) : l.is(".ui-draggable") && l.css({
                position: "absolute",
                top: r.top,
                left: r.left
            }), this._renderProxy(), n = t(this.helper.css("left")), o = t(this.helper.css("top")), s.containment && (n += e(s.containment).scrollLeft() || 0, o += e(s.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {
                left: n,
                top: o
            }, this.size = this._helper ? {
                width: l.outerWidth(),
                height: l.outerHeight()
            } : {
                width: l.width(),
                height: l.height()
            }, this.originalSize = this._helper ? {
                width: l.outerWidth(),
                height: l.outerHeight()
            } : {
                width: l.width(),
                height: l.height()
            }, this.originalPosition = {
                left: n,
                top: o
            }, this.sizeDiff = {
                width: l.outerWidth() - l.width(),
                height: l.outerHeight() - l.height()
            }, this.originalMousePosition = {
                left: i.pageX,
                top: i.pageY
            }, this.aspectRatio = "number" == typeof s.aspectRatio ? s.aspectRatio : this.originalSize.width / this.originalSize.height || 1, a = e(".ui-resizable-" + this.axis).css("cursor"), e("body").css("cursor", "auto" === a ? this.axis + "-resize" : a), l.addClass("ui-resizable-resizing"), this._propagate("start", i), !0
        },
        _mouseDrag: function(t) {
            var i,
                n = this.helper,
                o = {},
                a = this.originalMousePosition,
                s = this.axis,
                r = this.position.top,
                l = this.position.left,
                c = this.size.width,
                d = this.size.height,
                u = t.pageX - a.left || 0,
                h = t.pageY - a.top || 0,
                p = this._change[s];
            return !!p && (i = p.apply(this, [t, u, h]), this._updateVirtualBoundaries(t.shiftKey), (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)), i = this._respectSize(i, t), this._updateCache(i), this._propagate("resize", t), this.position.top !== r && (o.top = this.position.top + "px"), this.position.left !== l && (o.left = this.position.left + "px"), this.size.width !== c && (o.width = this.size.width + "px"), this.size.height !== d && (o.height = this.size.height + "px"), n.css(o), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), e.isEmptyObject(o) || this._trigger("resize", t, this.ui()), !1)
        },
        _mouseStop: function(t) {
            this.resizing = !1;
            var i,
                n,
                o,
                a,
                s,
                r,
                l,
                c = this.options,
                d = this;
            return this._helper && (i = this._proportionallyResizeElements, n = i.length && /textarea/i.test(i[0].nodeName), o = n && e.ui.hasScroll(i[0], "left") ? 0 : d.sizeDiff.height, a = n ? 0 : d.sizeDiff.width, s = {
                width: d.helper.width() - a,
                height: d.helper.height() - o
            }, r = parseInt(d.element.css("left"), 10) + (d.position.left - d.originalPosition.left) || null, l = parseInt(d.element.css("top"), 10) + (d.position.top - d.originalPosition.top) || null, c.animate || this.element.css(e.extend(s, {
                top: l,
                left: r
            })), d.helper.height(d.size.height), d.helper.width(d.size.width), this._helper && !c.animate && this._proportionallyResize()), e("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", t), this._helper && this.helper.remove(), !1
        },
        _updateVirtualBoundaries: function(e) {
            var t,
                n,
                o,
                a,
                s,
                r = this.options;
            s = {
                minWidth: i(r.minWidth) ? r.minWidth : 0,
                maxWidth: i(r.maxWidth) ? r.maxWidth : 1 / 0,
                minHeight: i(r.minHeight) ? r.minHeight : 0,
                maxHeight: i(r.maxHeight) ? r.maxHeight : 1 / 0
            }, (this._aspectRatio || e) && (t = s.minHeight * this.aspectRatio, o = s.minWidth / this.aspectRatio, n = s.maxHeight * this.aspectRatio, a = s.maxWidth / this.aspectRatio, t > s.minWidth && (s.minWidth = t), o > s.minHeight && (s.minHeight = o), s.maxWidth > n && (s.maxWidth = n), s.maxHeight > a && (s.maxHeight = a)), this._vBoundaries = s
        },
        _updateCache: function(e) {
            this.offset = this.helper.offset(), i(e.left) && (this.position.left = e.left), i(e.top) && (this.position.top = e.top), i(e.height) && (this.size.height = e.height), i(e.width) && (this.size.width = e.width)
        },
        _updateRatio: function(e) {
            var t = this.position,
                n = this.size,
                o = this.axis;
            return i(e.height) ? e.width = e.height * this.aspectRatio : i(e.width) && (e.height = e.width / this.aspectRatio), "sw" === o && (e.left = t.left + (n.width - e.width), e.top = null), "nw" === o && (e.top = t.top + (n.height - e.height), e.left = t.left + (n.width - e.width)), e
        },
        _respectSize: function(e) {
            var t = this._vBoundaries,
                n = this.axis,
                o = i(e.width) && t.maxWidth && t.maxWidth < e.width,
                a = i(e.height) && t.maxHeight && t.maxHeight < e.height,
                s = i(e.width) && t.minWidth && t.minWidth > e.width,
                r = i(e.height) && t.minHeight && t.minHeight > e.height,
                l = this.originalPosition.left + this.originalSize.width,
                c = this.position.top + this.size.height,
                d = /sw|nw|w/.test(n),
                u = /nw|ne|n/.test(n);
            return s && (e.width = t.minWidth), r && (e.height = t.minHeight), o && (e.width = t.maxWidth), a && (e.height = t.maxHeight), s && d && (e.left = l - t.minWidth), o && d && (e.left = l - t.maxWidth), r && u && (e.top = c - t.minHeight), a && u && (e.top = c - t.maxHeight), e.width || e.height || e.left || !e.top ? e.width || e.height || e.top || !e.left || (e.left = null) : e.top = null, e
        },
        _proportionallyResize: function() {
            if (this._proportionallyResizeElements.length) {
                var e,
                    t,
                    i,
                    n,
                    o,
                    a = this.helper || this.element;
                for (e = 0; this._proportionallyResizeElements.length > e; e++) {
                    if (o = this._proportionallyResizeElements[e], !this.borderDif)
                        for (this.borderDif = [], i = [o.css("borderTopWidth"), o.css("borderRightWidth"), o.css("borderBottomWidth"), o.css("borderLeftWidth")], n = [o.css("paddingTop"), o.css("paddingRight"), o.css("paddingBottom"), o.css("paddingLeft")], t = 0; i.length > t; t++)
                            this.borderDif[t] = (parseInt(i[t], 10) || 0) + (parseInt(n[t], 10) || 0);
                    o.css({
                        height: a.height() - this.borderDif[0] - this.borderDif[2] || 0,
                        width: a.width() - this.borderDif[1] - this.borderDif[3] || 0
                    })
                }
            }
        },
        _renderProxy: function() {
            var t = this.element,
                i = this.options;
            this.elementOffset = t.offset(), this._helper ? (this.helper = this.helper || e("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({
                width: this.element.outerWidth() - 1,
                height: this.element.outerHeight() - 1,
                position: "absolute",
                left: this.elementOffset.left + "px",
                top: this.elementOffset.top + "px",
                zIndex: ++i.zIndex
            }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element
        },
        _change: {
            e: function(e, t) {
                return {
                    width: this.originalSize.width + t
                }
            },
            w: function(e, t) {
                var i = this.originalSize,
                    n = this.originalPosition;
                return {
                    left: n.left + t,
                    width: i.width - t
                }
            },
            n: function(e, t, i) {
                var n = this.originalSize,
                    o = this.originalPosition;
                return {
                    top: o.top + i,
                    height: n.height - i
                }
            },
            s: function(e, t, i) {
                return {
                    height: this.originalSize.height + i
                }
            },
            se: function(t, i, n) {
                return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, i, n]))
            },
            sw: function(t, i, n) {
                return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, i, n]))
            },
            ne: function(t, i, n) {
                return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, i, n]))
            },
            nw: function(t, i, n) {
                return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, i, n]))
            }
        },
        _propagate: function(t, i) {
            e.ui.plugin.call(this, t, [i, this.ui()]), "resize" !== t && this._trigger(t, i, this.ui())
        },
        plugins: {},
        ui: function() {
            return {
                originalElement: this.originalElement,
                element: this.element,
                helper: this.helper,
                position: this.position,
                size: this.size,
                originalSize: this.originalSize,
                originalPosition: this.originalPosition
            }
        }
    }), e.ui.plugin.add("resizable", "animate", {
        stop: function(t) {
            var i = e(this).data("ui-resizable"),
                n = i.options,
                o = i._proportionallyResizeElements,
                a = o.length && /textarea/i.test(o[0].nodeName),
                s = a && e.ui.hasScroll(o[0], "left") ? 0 : i.sizeDiff.height,
                r = a ? 0 : i.sizeDiff.width,
                l = {
                    width: i.size.width - r,
                    height: i.size.height - s
                },
                c = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null,
                d = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null;
            i.element.animate(e.extend(l, d && c ? {
                top: d,
                left: c
            } : {}), {
                duration: n.animateDuration,
                easing: n.animateEasing,
                step: function() {
                    var n = {
                        width: parseInt(i.element.css("width"), 10),
                        height: parseInt(i.element.css("height"), 10),
                        top: parseInt(i.element.css("top"), 10),
                        left: parseInt(i.element.css("left"), 10)
                    };
                    o && o.length && e(o[0]).css({
                        width: n.width,
                        height: n.height
                    }), i._updateCache(n), i._propagate("resize", t)
                }
            })
        }
    }), e.ui.plugin.add("resizable", "containment", {
        start: function() {
            var i,
                n,
                o,
                a,
                s,
                r,
                l,
                c = e(this).data("ui-resizable"),
                d = c.options,
                u = c.element,
                h = d.containment,
                p = h instanceof e ? h.get(0) : /parent/.test(h) ? u.parent().get(0) : h;
            p && (c.containerElement = e(p), /document/.test(h) || h === document ? (c.containerOffset = {
                left: 0,
                top: 0
            }, c.containerPosition = {
                left: 0,
                top: 0
            }, c.parentData = {
                element: e(document),
                left: 0,
                top: 0,
                width: e(document).width(),
                height: e(document).height() || document.body.parentNode.scrollHeight
            }) : (i = e(p), n = [], e(["Top", "Right", "Left", "Bottom"]).each(function(e, o) {
                n[e] = t(i.css("padding" + o))
            }), c.containerOffset = i.offset(), c.containerPosition = i.position(), c.containerSize = {
                height: i.innerHeight() - n[3],
                width: i.innerWidth() - n[1]
            }, o = c.containerOffset, a = c.containerSize.height, s = c.containerSize.width, r = e.ui.hasScroll(p, "left") ? p.scrollWidth : s, l = e.ui.hasScroll(p) ? p.scrollHeight : a, c.parentData = {
                element: p,
                left: o.left,
                top: o.top,
                width: r,
                height: l
            }))
        },
        resize: function(t) {
            var i,
                n,
                o,
                a,
                s = e(this).data("ui-resizable"),
                r = s.options,
                l = s.containerOffset,
                c = s.position,
                d = s._aspectRatio || t.shiftKey,
                u = {
                    top: 0,
                    left: 0
                },
                h = s.containerElement;
            h[0] !== document && /static/.test(h.css("position")) && (u = l), c.left < (s._helper ? l.left : 0) && (s.size.width = s.size.width + (s._helper ? s.position.left - l.left : s.position.left - u.left), d && (s.size.height = s.size.width / s.aspectRatio), s.position.left = r.helper ? l.left : 0), c.top < (s._helper ? l.top : 0) && (s.size.height = s.size.height + (s._helper ? s.position.top - l.top : s.position.top), d && (s.size.width = s.size.height * s.aspectRatio), s.position.top = s._helper ? l.top : 0), s.offset.left = s.parentData.left + s.position.left, s.offset.top = s.parentData.top + s.position.top, i = Math.abs((s._helper ? s.offset.left - u.left : s.offset.left - u.left) + s.sizeDiff.width), n = Math.abs((s._helper ? s.offset.top - u.top : s.offset.top - l.top) + s.sizeDiff.height), o = s.containerElement.get(0) === s.element.parent().get(0), a = /relative|absolute/.test(s.containerElement.css("position")), o && a && (i -= s.parentData.left), i + s.size.width >= s.parentData.width && (s.size.width = s.parentData.width - i, d && (s.size.height = s.size.width / s.aspectRatio)), n + s.size.height >= s.parentData.height && (s.size.height = s.parentData.height - n, d && (s.size.width = s.size.height * s.aspectRatio))
        },
        stop: function() {
            var t = e(this).data("ui-resizable"),
                i = t.options,
                n = t.containerOffset,
                o = t.containerPosition,
                a = t.containerElement,
                s = e(t.helper),
                r = s.offset(),
                l = s.outerWidth() - t.sizeDiff.width,
                c = s.outerHeight() - t.sizeDiff.height;
            t._helper && !i.animate && /relative/.test(a.css("position")) && e(this).css({
                left: r.left - o.left - n.left,
                width: l,
                height: c
            }), t._helper && !i.animate && /static/.test(a.css("position")) && e(this).css({
                left: r.left - o.left - n.left,
                width: l,
                height: c
            })
        }
    }), e.ui.plugin.add("resizable", "alsoResize", {
        start: function() {
            var t = e(this).data("ui-resizable"),
                i = t.options,
                n = function(t) {
                    e(t).each(function() {
                        var t = e(this);
                        t.data("ui-resizable-alsoresize", {
                            width: parseInt(t.width(), 10),
                            height: parseInt(t.height(), 10),
                            left: parseInt(t.css("left"), 10),
                            top: parseInt(t.css("top"), 10)
                        })
                    })
                };
            "object" != typeof i.alsoResize || i.alsoResize.parentNode ? n(i.alsoResize) : i.alsoResize.length ? (i.alsoResize = i.alsoResize[0], n(i.alsoResize)) : e.each(i.alsoResize, function(e) {
                n(e)
            })
        },
        resize: function(t, i) {
            var n = e(this).data("ui-resizable"),
                o = n.options,
                a = n.originalSize,
                s = n.originalPosition,
                r = {
                    height: n.size.height - a.height || 0,
                    width: n.size.width - a.width || 0,
                    top: n.position.top - s.top || 0,
                    left: n.position.left - s.left || 0
                },
                l = function(t, n) {
                    e(t).each(function() {
                        var t = e(this),
                            o = e(this).data("ui-resizable-alsoresize"),
                            a = {},
                            s = n && n.length ? n : t.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                        e.each(s, function(e, t) {
                            var i = (o[t] || 0) + (r[t] || 0);
                            i && i >= 0 && (a[t] = i || null)
                        }), t.css(a)
                    })
                };
            "object" != typeof o.alsoResize || o.alsoResize.nodeType ? l(o.alsoResize) : e.each(o.alsoResize, function(e, t) {
                l(e, t)
            })
        },
        stop: function() {
            e(this).removeData("resizable-alsoresize")
        }
    }), e.ui.plugin.add("resizable", "ghost", {
        start: function() {
            var t = e(this).data("ui-resizable"),
                i = t.options,
                n = t.size;
            t.ghost = t.originalElement.clone(), t.ghost.css({
                opacity: .25,
                display: "block",
                position: "relative",
                height: n.height,
                width: n.width,
                margin: 0,
                left: 0,
                top: 0
            }).addClass("ui-resizable-ghost").addClass("string" == typeof i.ghost ? i.ghost : ""), t.ghost.appendTo(t.helper)
        },
        resize: function() {
            var t = e(this).data("ui-resizable");
            t.ghost && t.ghost.css({
                position: "relative",
                height: t.size.height,
                width: t.size.width
            })
        },
        stop: function() {
            var t = e(this).data("ui-resizable");
            t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0))
        }
    }), e.ui.plugin.add("resizable", "grid", {
        resize: function() {
            var t = e(this).data("ui-resizable"),
                i = t.options,
                n = t.size,
                o = t.originalSize,
                a = t.originalPosition,
                s = t.axis,
                r = "number" == typeof i.grid ? [i.grid, i.grid] : i.grid,
                l = r[0] || 1,
                c = r[1] || 1,
                d = Math.round((n.width - o.width) / l) * l,
                u = Math.round((n.height - o.height) / c) * c,
                h = o.width + d,
                p = o.height + u,
                f = i.maxWidth && h > i.maxWidth,
                m = i.maxHeight && p > i.maxHeight,
                g = i.minWidth && i.minWidth > h,
                v = i.minHeight && i.minHeight > p;
            i.grid = r, g && (h += l), v && (p += c), f && (h -= l), m && (p -= c), /^(se|s|e)$/.test(s) ? (t.size.width = h, t.size.height = p) : /^(ne)$/.test(s) ? (t.size.width = h, t.size.height = p, t.position.top = a.top - u) : /^(sw)$/.test(s) ? (t.size.width = h, t.size.height = p, t.position.left = a.left - d) : (t.size.width = h, t.size.height = p, t.position.top = a.top - u, t.position.left = a.left - d)
        }
    })
}(jQuery), function(e) {
    e.widget("ui.selectable", e.ui.mouse, {
        version: "1.10.3",
        options: {
            appendTo: "body",
            autoRefresh: !0,
            distance: 0,
            filter: "*",
            tolerance: "touch",
            selected: null,
            selecting: null,
            start: null,
            stop: null,
            unselected: null,
            unselecting: null
        },
        _create: function() {
            var t,
                i = this;
            this.element.addClass("ui-selectable"), this.dragged = !1, this.refresh = function() {
                t = e(i.options.filter, i.element[0]), t.addClass("ui-selectee"), t.each(function() {
                    var t = e(this),
                        i = t.offset();
                    e.data(this, "selectable-item", {
                        element: this,
                        $element: t,
                        left: i.left,
                        top: i.top,
                        right: i.left + t.outerWidth(),
                        bottom: i.top + t.outerHeight(),
                        startselected: !1,
                        selected: t.hasClass("ui-selected"),
                        selecting: t.hasClass("ui-selecting"),
                        unselecting: t.hasClass("ui-unselecting")
                    })
                })
            }, this.refresh(), this.selectees = t.addClass("ui-selectee"), this._mouseInit(), this.helper = e("<div class='ui-selectable-helper'></div>")
        },
        _destroy: function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), this._mouseDestroy()
        },
        _mouseStart: function(t) {
            var i = this,
                n = this.options;
            this.opos = [t.pageX, t.pageY], this.options.disabled || (this.selectees = e(n.filter, this.element[0]), this._trigger("start", t), e(n.appendTo).append(this.helper), this.helper.css({
                left: t.pageX,
                top: t.pageY,
                width: 0,
                height: 0
            }), n.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function() {
                var n = e.data(this, "selectable-item");
                n.startselected = !0, t.metaKey || t.ctrlKey || (n.$element.removeClass("ui-selected"), n.selected = !1, n.$element.addClass("ui-unselecting"), n.unselecting = !0, i._trigger("unselecting", t, {
                    unselecting: n.element
                }))
            }), e(t.target).parents().addBack().each(function() {
                var n,
                    o = e.data(this, "selectable-item");
                return o ? (n = !t.metaKey && !t.ctrlKey || !o.$element.hasClass("ui-selected"), o.$element.removeClass(n ? "ui-unselecting" : "ui-selected").addClass(n ? "ui-selecting" : "ui-unselecting"), o.unselecting = !n, o.selecting = n, o.selected = n, n ? i._trigger("selecting", t, {
                    selecting: o.element
                }) : i._trigger("unselecting", t, {
                    unselecting: o.element
                }), !1) : void 0
            }))
        },
        _mouseDrag: function(t) {
            if (this.dragged = !0, !this.options.disabled) {
                var i,
                    n = this,
                    o = this.options,
                    a = this.opos[0],
                    s = this.opos[1],
                    r = t.pageX,
                    l = t.pageY;
                return a > r && (i = r, r = a, a = i), s > l && (i = l, l = s, s = i), this.helper.css({
                    left: a,
                    top: s,
                    width: r - a,
                    height: l - s
                }), this.selectees.each(function() {
                    var i = e.data(this, "selectable-item"),
                        c = !1;
                    i && i.element !== n.element[0] && ("touch" === o.tolerance ? c = !(i.left > r || a > i.right || i.top > l || s > i.bottom) : "fit" === o.tolerance && (c = i.left > a && r > i.right && i.top > s && l > i.bottom), c ? (i.selected && (i.$element.removeClass("ui-selected"), i.selected = !1), i.unselecting && (i.$element.removeClass("ui-unselecting"), i.unselecting = !1), i.selecting || (i.$element.addClass("ui-selecting"), i.selecting = !0, n._trigger("selecting", t, {
                        selecting: i.element
                    }))) : (i.selecting && ((t.metaKey || t.ctrlKey) && i.startselected ? (i.$element.removeClass("ui-selecting"), i.selecting = !1, i.$element.addClass("ui-selected"), i.selected = !0) : (i.$element.removeClass("ui-selecting"), i.selecting = !1, i.startselected && (i.$element.addClass("ui-unselecting"), i.unselecting = !0), n._trigger("unselecting", t, {
                        unselecting: i.element
                    }))), i.selected && (t.metaKey || t.ctrlKey || i.startselected || (i.$element.removeClass("ui-selected"), i.selected = !1, i.$element.addClass("ui-unselecting"), i.unselecting = !0, n._trigger("unselecting", t, {
                        unselecting: i.element
                    })))))
                }), !1
            }
        },
        _mouseStop: function(t) {
            var i = this;
            return this.dragged = !1, e(".ui-unselecting", this.element[0]).each(function() {
                var n = e.data(this, "selectable-item");
                n.$element.removeClass("ui-unselecting"), n.unselecting = !1, n.startselected = !1, i._trigger("unselected", t, {
                    unselected: n.element
                })
            }), e(".ui-selecting", this.element[0]).each(function() {
                var n = e.data(this, "selectable-item");
                n.$element.removeClass("ui-selecting").addClass("ui-selected"), n.selecting = !1, n.selected = !0, n.startselected = !0, i._trigger("selected", t, {
                    selected: n.element
                })
            }), this._trigger("stop", t), this.helper.remove(), !1
        }
    })
}(jQuery), function(e) {
    function t(e, t, i) {
        return e > t && t + i > e
    }
    function i(e) {
        return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display"))
    }
    e.widget("ui.sortable", e.ui.mouse, {
        version: "1.10.3",
        widgetEventPrefix: "sort",
        ready: !1,
        options: {
            appendTo: "parent",
            axis: !1,
            connectWith: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            dropOnEmpty: !0,
            forcePlaceholderSize: !1,
            forceHelperSize: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            items: "> *",
            opacity: !1,
            placeholder: !1,
            revert: !1,
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            scope: "default",
            tolerance: "intersect",
            zIndex: 1e3,
            activate: null,
            beforeStop: null,
            change: null,
            deactivate: null,
            out: null,
            over: null,
            receive: null,
            remove: null,
            sort: null,
            start: null,
            stop: null,
            update: null
        },
        _create: function() {
            var e = this.options;
            this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.floating = !!this.items.length && ("x" === e.axis || i(this.items[0].item)), this.offset = this.element.offset(), this._mouseInit(), this.ready = !0
        },
        _destroy: function() {
            this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
            for (var e = this.items.length - 1; e >= 0; e--)
                this.items[e].item.removeData(this.widgetName + "-item");
            return this
        },
        _setOption: function(t, i) {
            "disabled" === t ? (this.options[t] = i, this.widget().toggleClass("ui-sortable-disabled", !!i)) : e.Widget.prototype._setOption.apply(this, arguments)
        },
        _mouseCapture: function(t, i) {
            var n = null,
                o = !1,
                a = this;
            return !this.reverting && (!this.options.disabled && "static" !== this.options.type && (this._refreshItems(t), e(t.target).parents().each(function() {
                    return e.data(this, a.widgetName + "-item") === a ? (n = e(this), !1) : void 0
                }), e.data(t.target, a.widgetName + "-item") === a && (n = e(t.target)), !!n && (!(this.options.handle && !i && (e(this.options.handle, n).find("*").addBack().each(function() {
                    this === t.target && (o = !0)
                }), !o)) && (this.currentItem = n, this._removeCurrentsFromItems(), !0))))
        },
        _mouseStart: function(t, i, n) {
            var o,
                a,
                s = this.options;
            if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            }, e.extend(this.offset, {
                click: {
                    left: t.pageX - this.offset.left,
                    top: t.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, s.cursorAt && this._adjustOffsetFromHelper(s.cursorAt), this.domPosition = {
                prev: this.currentItem.prev()[0],
                parent: this.currentItem.parent()[0]
            }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), s.containment && this._setContainment(), s.cursor && "auto" !== s.cursor && (a = this.document.find("body"), this.storedCursor = a.css("cursor"), a.css("cursor", s.cursor), this.storedStylesheet = e("<style>*{ cursor: " + s.cursor + " !important; }</style>").appendTo(a)), s.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", s.opacity)), s.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", s.zIndex)), this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !n)
                for (o = this.containers.length - 1; o >= 0; o--)
                    this.containers[o]._trigger("activate", t, this._uiHash(this));
            return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !s.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), !0
        },
        _mouseDrag: function(t) {
            var i,
                n,
                o,
                a,
                s = this.options,
                r = !1;
            for (this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < s.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + s.scrollSpeed : t.pageY - this.overflowOffset.top < s.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - s.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < s.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + s.scrollSpeed : t.pageX - this.overflowOffset.left < s.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - s.scrollSpeed)) : (t.pageY - e(document).scrollTop() < s.scrollSensitivity ? r = e(document).scrollTop(e(document).scrollTop() - s.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < s.scrollSensitivity && (r = e(document).scrollTop(e(document).scrollTop() + s.scrollSpeed)), t.pageX - e(document).scrollLeft() < s.scrollSensitivity ? r = e(document).scrollLeft(e(document).scrollLeft() - s.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < s.scrollSensitivity && (r = e(document).scrollLeft(e(document).scrollLeft() + s.scrollSpeed))), r !== !1 && e.ui.ddmanager && !s.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), i = this.items.length - 1; i >= 0; i--)
                if (n = this.items[i], o = n.item[0], a = this._intersectsWithPointer(n), a && n.instance === this.currentContainer && o !== this.currentItem[0] && this.placeholder[1 === a ? "next" : "prev"]()[0] !== o && !e.contains(this.placeholder[0], o) && ("semi-dynamic" !== this.options.type || !e.contains(this.element[0], o))) {
                    if (this.direction = 1 === a ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(n))
                        break;
                    this._rearrange(t, n), this._trigger("change", t, this._uiHash());
                    break
                }
            return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
        },
        _mouseStop: function(t, i) {
            if (t) {
                if (e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t), this.options.revert) {
                    var n = this,
                        o = this.placeholder.offset(),
                        a = this.options.axis,
                        s = {};
                    a && "x" !== a || (s.left = o.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)), a && "y" !== a || (s.top = o.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)), this.reverting = !0, e(this.helper).animate(s, parseInt(this.options.revert, 10) || 500, function() {
                        n._clear(t)
                    })
                } else
                    this._clear(t, i);
                return !1
            }
        },
        cancel: function() {
            if (this.dragging) {
                this._mouseUp({
                    target: null
                }), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                for (var t = this.containers.length - 1; t >= 0; t--)
                    this.containers[t]._trigger("deactivate", null, this._uiHash(this)), this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), this.containers[t].containerCache.over = 0)
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), e.extend(this, {
                helper: null,
                dragging: !1,
                reverting: !1,
                _noFinalSort: null
            }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), this
        },
        serialize: function(t) {
            var i = this._getItemsAsjQuery(t && t.connected),
                n = [];
            return t = t || {}, e(i).each(function() {
                var i = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                i && n.push((t.key || i[1] + "[]") + "=" + (t.key && t.expression ? i[1] : i[2]))
            }), !n.length && t.key && n.push(t.key + "="), n.join("&")
        },
        toArray: function(t) {
            var i = this._getItemsAsjQuery(t && t.connected),
                n = [];
            return t = t || {}, i.each(function() {
                n.push(e(t.item || this).attr(t.attribute || "id") || "")
            }), n
        },
        _intersectsWith: function(e) {
            var t = this.positionAbs.left,
                i = t + this.helperProportions.width,
                n = this.positionAbs.top,
                o = n + this.helperProportions.height,
                a = e.left,
                s = a + e.width,
                r = e.top,
                l = r + e.height,
                c = this.offset.click.top,
                d = this.offset.click.left,
                u = "x" === this.options.axis || n + c > r && l > n + c,
                h = "y" === this.options.axis || t + d > a && s > t + d,
                p = u && h;
            return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? p : t + this.helperProportions.width / 2 > a && s > i - this.helperProportions.width / 2 && n + this.helperProportions.height / 2 > r && l > o - this.helperProportions.height / 2
        },
        _intersectsWithPointer: function(e) {
            var i = "x" === this.options.axis || t(this.positionAbs.top + this.offset.click.top, e.top, e.height),
                n = "y" === this.options.axis || t(this.positionAbs.left + this.offset.click.left, e.left, e.width),
                o = i && n,
                a = this._getDragVerticalDirection(),
                s = this._getDragHorizontalDirection();
            return !!o && (this.floating ? s && "right" === s || "down" === a ? 2 : 1 : a && ("down" === a ? 2 : 1))
        },
        _intersectsWithSides: function(e) {
            var i = t(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height),
                n = t(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width),
                o = this._getDragVerticalDirection(),
                a = this._getDragHorizontalDirection();
            return this.floating && a ? "right" === a && n || "left" === a && !n : o && ("down" === o && i || "up" === o && !i)
        },
        _getDragVerticalDirection: function() {
            var e = this.positionAbs.top - this.lastPositionAbs.top;
            return 0 !== e && (e > 0 ? "down" : "up")
        },
        _getDragHorizontalDirection: function() {
            var e = this.positionAbs.left - this.lastPositionAbs.left;
            return 0 !== e && (e > 0 ? "right" : "left")
        },
        refresh: function(e) {
            return this._refreshItems(e), this.refreshPositions(), this
        },
        _connectWith: function() {
            var e = this.options;
            return e.connectWith.constructor === String ? [e.connectWith] : e.connectWith
        },
        _getItemsAsjQuery: function(t) {
            var i,
                n,
                o,
                a,
                s = [],
                r = [],
                l = this._connectWith();
            if (l && t)
                for (i = l.length - 1; i >= 0; i--)
                    for (o = e(l[i]), n = o.length - 1; n >= 0; n--)
                        a = e.data(o[n], this.widgetFullName), a && a !== this && !a.options.disabled && r.push([e.isFunction(a.options.items) ? a.options.items.call(a.element) : e(a.options.items, a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), a]);
            for (r.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                options: this.options,
                item: this.currentItem
            }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]), i = r.length - 1; i >= 0; i--)
                r[i][0].each(function() {
                    s.push(this)
                });
            return e(s)
        },
        _removeCurrentsFromItems: function() {
            var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = e.grep(this.items, function(e) {
                for (var i = 0; t.length > i; i++)
                    if (t[i] === e.item[0])
                        return !1;
                return !0
            })
        },
        _refreshItems: function(t) {
            this.items = [], this.containers = [this];
            var i,
                n,
                o,
                a,
                s,
                r,
                l,
                c,
                d = this.items,
                u = [[e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                    item: this.currentItem
                }) : e(this.options.items, this.element), this]],
                h = this._connectWith();
            if (h && this.ready)
                for (i = h.length - 1; i >= 0; i--)
                    for (o = e(h[i]), n = o.length - 1; n >= 0; n--)
                        a = e.data(o[n], this.widgetFullName), a && a !== this && !a.options.disabled && (u.push([e.isFunction(a.options.items) ? a.options.items.call(a.element[0], t, {
                            item: this.currentItem
                        }) : e(a.options.items, a.element), a]), this.containers.push(a));
            for (i = u.length - 1; i >= 0; i--)
                for (s = u[i][1], r = u[i][0], n = 0, c = r.length; c > n; n++)
                    l = e(r[n]), l.data(this.widgetName + "-item", s), d.push({
                        item: l,
                        instance: s,
                        width: 0,
                        height: 0,
                        left: 0,
                        top: 0
                    })
        },
        refreshPositions: function(t) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            var i,
                n,
                o,
                a;
            for (i = this.items.length - 1; i >= 0; i--)
                n = this.items[i], n.instance !== this.currentContainer && this.currentContainer && n.item[0] !== this.currentItem[0] || (o = this.options.toleranceElement ? e(this.options.toleranceElement, n.item) : n.item, t || (n.width = o.outerWidth(), n.height = o.outerHeight()), a = o.offset(), n.left = a.left, n.top = a.top);
            if (this.options.custom && this.options.custom.refreshContainers)
                this.options.custom.refreshContainers.call(this);
            else
                for (i = this.containers.length - 1; i >= 0; i--)
                    a = this.containers[i].element.offset(), this.containers[i].containerCache.left = a.left, this.containers[i].containerCache.top = a.top, this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
            return this
        },
        _createPlaceholder: function(t) {
            t = t || this;
            var i,
                n = t.options;
            n.placeholder && n.placeholder.constructor !== String || (i = n.placeholder, n.placeholder = {
                element: function() {
                    var n = t.currentItem[0].nodeName.toLowerCase(),
                        o = e("<" + n + ">", t.document[0]).addClass(i || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                    return "tr" === n ? t.currentItem.children().each(function() {
                        e("<td>&#160;</td>", t.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(o)
                    }) : "img" === n && o.attr("src", t.currentItem.attr("src")), i || o.css("visibility", "hidden"), o
                },
                update: function(e, o) {
                    (!i || n.forcePlaceholderSize) && (o.height() || o.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), o.width() || o.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10)))
                }
            }), t.placeholder = e(n.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), n.placeholder.update(t, t.placeholder)
        },
        _contactContainers: function(n) {
            var o,
                a,
                s,
                r,
                l,
                c,
                d,
                u,
                h,
                p,
                f = null,
                m = null;
            for (o = this.containers.length - 1; o >= 0; o--)
                if (!e.contains(this.currentItem[0], this.containers[o].element[0]))
                    if (this._intersectsWith(this.containers[o].containerCache)) {
                        if (f && e.contains(this.containers[o].element[0], f.element[0]))
                            continue;
                        f = this.containers[o], m = o
                    } else
                        this.containers[o].containerCache.over && (this.containers[o]._trigger("out", n, this._uiHash(this)), this.containers[o].containerCache.over = 0);
            if (f)
                if (1 === this.containers.length)
                    this.containers[m].containerCache.over || (this.containers[m]._trigger("over", n, this._uiHash(this)), this.containers[m].containerCache.over = 1);
                else {
                    for (s = 1e4, r = null, p = f.floating || i(this.currentItem), l = p ? "left" : "top", c = p ? "width" : "height", d = this.positionAbs[l] + this.offset.click[l], a = this.items.length - 1; a >= 0; a--)
                        e.contains(this.containers[m].element[0], this.items[a].item[0]) && this.items[a].item[0] !== this.currentItem[0] && (!p || t(this.positionAbs.top + this.offset.click.top, this.items[a].top, this.items[a].height)) && (u = this.items[a].item.offset()[l], h = !1, Math.abs(u - d) > Math.abs(u + this.items[a][c] - d) && (h = !0, u += this.items[a][c]), s > Math.abs(u - d) && (s = Math.abs(u - d), r = this.items[a], this.direction = h ? "up" : "down"));
                    if (!r && !this.options.dropOnEmpty)
                        return;
                    if (this.currentContainer === this.containers[m])
                        return;
                    r ? this._rearrange(n, r, null, !0) : this._rearrange(n, null, this.containers[m].element, !0), this._trigger("change", n, this._uiHash()), this.containers[m]._trigger("change", n, this._uiHash(this)), this.currentContainer = this.containers[m], this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[m]._trigger("over", n, this._uiHash(this)), this.containers[m].containerCache.over = 1
                }
        },
        _createHelper: function(t) {
            var i = this.options,
                n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [t, this.currentItem])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem;
            return n.parents("body").length || e("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(n[0]), n[0] === this.currentItem[0] && (this._storedCSS = {
                width: this.currentItem[0].style.width,
                height: this.currentItem[0].style.height,
                position: this.currentItem.css("position"),
                top: this.currentItem.css("top"),
                left: this.currentItem.css("left")
            }), (!n[0].style.width || i.forceHelperSize) && n.width(this.currentItem.width()), (!n[0].style.height || i.forceHelperSize) && n.height(this.currentItem.height()), n
        },
        _adjustOffsetFromHelper: function(t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                left: +t[0],
                top: +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
        },
        _getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var t = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                top: 0,
                left: 0
            }), {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if ("relative" === this.cssPosition) {
                var e = this.currentItem.position();
                return {
                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            return {
                top: 0,
                left: 0
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                top: parseInt(this.currentItem.css("marginTop"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var t,
                i,
                n,
                o = this.options;
            "parent" === o.containment && (o.containment = this.helper[0].parentNode), ("document" === o.containment || "window" === o.containment) && (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e("document" === o.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (e("document" === o.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), /^(document|window|parent)$/.test(o.containment) || (t = e(o.containment)[0], i = e(o.containment).offset(), n = "hidden" !== e(t).css("overflow"), this.containment = [i.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (n ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (n ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
        },
        _convertPositionTo: function(t, i) {
            i || (i = this.position);
            var n = "absolute" === t ? 1 : -1,
                o = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                a = /(html|body)/i.test(o[0].tagName);
            return {
                top: i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : a ? 0 : o.scrollTop()) * n,
                left: i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : a ? 0 : o.scrollLeft()) * n
            }
        },
        _generatePosition: function(t) {
            var i,
                n,
                o = this.options,
                a = t.pageX,
                s = t.pageY,
                r = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                l = /(html|body)/i.test(r[0].tagName);
            return "relative" !== this.cssPosition || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (a = this.containment[0] + this.offset.click.left), t.pageY - this.offset.click.top < this.containment[1] && (s = this.containment[1] + this.offset.click.top), t.pageX - this.offset.click.left > this.containment[2] && (a = this.containment[2] + this.offset.click.left), t.pageY - this.offset.click.top > this.containment[3] && (s = this.containment[3] + this.offset.click.top)), o.grid && (i = this.originalPageY + Math.round((s - this.originalPageY) / o.grid[1]) * o.grid[1], s = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - o.grid[1] : i + o.grid[1] : i, n = this.originalPageX + Math.round((a - this.originalPageX) / o.grid[0]) * o.grid[0], a = this.containment ? n - this.offset.click.left >= this.containment[0] && n - this.offset.click.left <= this.containment[2] ? n : n - this.offset.click.left >= this.containment[0] ? n - o.grid[0] : n + o.grid[0] : n)), {
                top: s - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : r.scrollTop()),
                left: a - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : r.scrollLeft())
            }
        },
        _rearrange: function(e, t, i, n) {
            i ? i[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? t.item[0] : t.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
            var o = this.counter;
            this._delay(function() {
                o === this.counter && this.refreshPositions(!n)
            })
        },
        _clear: function(e, t) {
            this.reverting = !1;
            var i,
                n = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                for (i in this._storedCSS)
                    ("auto" === this._storedCSS[i] || "static" === this._storedCSS[i]) && (this._storedCSS[i] = "");
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
            } else
                this.currentItem.show();
            for (this.fromOutside && !t && n.push(function(e) {
                this._trigger("receive", e, this._uiHash(this.fromOutside))
            }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || t || n.push(function(e) {
                this._trigger("update", e, this._uiHash())
            }), this !== this.currentContainer && (t || (n.push(function(e) {
                this._trigger("remove", e, this._uiHash())
            }), n.push(function(e) {
                return function(t) {
                    e._trigger("receive", t, this._uiHash(this))
                }
            }.call(this, this.currentContainer)), n.push(function(e) {
                return function(t) {
                    e._trigger("update", t, this._uiHash(this))
                }
            }.call(this, this.currentContainer)))), i = this.containers.length - 1; i >= 0; i--)
                t || n.push(function(e) {
                    return function(t) {
                        e._trigger("deactivate", t, this._uiHash(this))
                    }
                }.call(this, this.containers[i])), this.containers[i].containerCache.over && (n.push(function(e) {
                    return function(t) {
                        e._trigger("out", t, this._uiHash(this))
                    }
                }.call(this, this.containers[i])), this.containers[i].containerCache.over = 0);
            if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, this.cancelHelperRemoval) {
                if (!t) {
                    for (this._trigger("beforeStop", e, this._uiHash()), i = 0; n.length > i; i++)
                        n[i].call(this, e);
                    this._trigger("stop", e, this._uiHash())
                }
                return this.fromOutside = !1, !1
            }
            if (t || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null, !t) {
                for (i = 0; n.length > i; i++)
                    n[i].call(this, e);
                this._trigger("stop", e, this._uiHash())
            }
            return this.fromOutside = !1, !0
        },
        _trigger: function() {
            e.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
        },
        _uiHash: function(t) {
            var i = t || this;
            return {
                helper: i.helper,
                placeholder: i.placeholder || e([]),
                position: i.position,
                originalPosition: i.originalPosition,
                offset: i.positionAbs,
                item: i.currentItem,
                sender: t ? t.element : null
            }
        }
    })
}(jQuery), function(e) {
    var t,
        i,
        n,
        o,
        a = "ui-button ui-widget ui-state-default ui-corner-all",
        s = "ui-state-hover ui-state-active ",
        r = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",
        l = function() {
            var t = e(this);
            setTimeout(function() {
                t.find(":ui-button").button("refresh")
            }, 1)
        },
        c = function(t) {
            var i = t.name,
                n = t.form,
                o = e([]);
            return i && (i = i.replace(/'/g, "\\'"), o = n ? e(n).find("[name='" + i + "']") : e("[name='" + i + "']", t.ownerDocument).filter(function() {
                return !this.form
            })), o
        };
    e.widget("ui.button", {
        version: "1.10.3",
        defaultElement: "<button>",
        options: {
            disabled: null,
            text: !0,
            label: null,
            icons: {
                primary: null,
                secondary: null
            }
        },
        _create: function() {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, l), "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled), this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title");
            var s = this,
                r = this.options,
                d = "checkbox" === this.type || "radio" === this.type,
                u = d ? "" : "ui-state-active",
                h = "ui-state-focus";
            null === r.label && (r.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()), this._hoverable(this.buttonElement), this.buttonElement.addClass(a).attr("role", "button").bind("mouseenter" + this.eventNamespace, function() {
                r.disabled || this === t && e(this).addClass("ui-state-active")
            }).bind("mouseleave" + this.eventNamespace, function() {
                r.disabled || e(this).removeClass(u)
            }).bind("click" + this.eventNamespace, function(e) {
                r.disabled && (e.preventDefault(), e.stopImmediatePropagation())
            }), this.element.bind("focus" + this.eventNamespace, function() {
                s.buttonElement.addClass(h)
            }).bind("blur" + this.eventNamespace, function() {
                s.buttonElement.removeClass(h)
            }), d && (this.element.bind("change" + this.eventNamespace, function() {
                o || s.refresh()
            }), this.buttonElement.bind("mousedown" + this.eventNamespace, function(e) {
                r.disabled || (o = !1, i = e.pageX, n = e.pageY)
            }).bind("mouseup" + this.eventNamespace, function(e) {
                r.disabled || (i !== e.pageX || n !== e.pageY) && (o = !0)
            })), "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                return !r.disabled && !o && void 0
            }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (r.disabled || o)
                    return !1;
                e(this).addClass("ui-state-active"), s.buttonElement.attr("aria-pressed", "true");
                var t = s.element[0];
                c(t).not(t).map(function() {
                    return e(this).button("widget")[0]
                }).removeClass("ui-state-active").attr("aria-pressed", "false")
            }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function() {
                return !r.disabled && (e(this).addClass("ui-state-active"), t = this, void s.document.one("mouseup", function() {
                        t = null
                    }))
            }).bind("mouseup" + this.eventNamespace, function() {
                return !r.disabled && void e(this).removeClass("ui-state-active")
            }).bind("keydown" + this.eventNamespace, function(t) {
                return !r.disabled && void ((t.keyCode === e.ui.keyCode.SPACE || t.keyCode === e.ui.keyCode.ENTER) && e(this).addClass("ui-state-active"))
            }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
                e(this).removeClass("ui-state-active")
            }), this.buttonElement.is("a") && this.buttonElement.keyup(function(t) {
                t.keyCode === e.ui.keyCode.SPACE && e(this).click()
            })), this._setOption("disabled", r.disabled), this._resetButton()
        },
        _determineButtonType: function() {
            var e,
                t,
                i;
            this.type = this.element.is("[type=checkbox]") ? "checkbox" : this.element.is("[type=radio]") ? "radio" : this.element.is("input") ? "input" : "button", "checkbox" === this.type || "radio" === this.type ? (e = this.element.parents().last(), t = "label[for='" + this.element.attr("id") + "']", this.buttonElement = e.find(t), this.buttonElement.length || (e = e.length ? e.siblings() : this.element.siblings(), this.buttonElement = e.filter(t), this.buttonElement.length || (this.buttonElement = e.find(t))), this.element.addClass("ui-helper-hidden-accessible"), i = this.element.is(":checked"), i && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element
        },
        widget: function() {
            return this.buttonElement
        },
        _destroy: function() {
            this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(a + " " + s + " " + r).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), this.hasTitle || this.buttonElement.removeAttr("title");
        },
        _setOption: function(e, t) {
            return this._super(e, t), "disabled" === e ? void (t ? this.element.prop("disabled", !0) : this.element.prop("disabled", !1)) : void this._resetButton()
        },
        refresh: function() {
            var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
            t !== this.options.disabled && this._setOption("disabled", t), "radio" === this.type ? c(this.element[0]).each(function() {
                e(this).is(":checked") ? e(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false")
            }) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"))
        },
        _resetButton: function() {
            if ("input" === this.type)
                return void (this.options.label && this.element.val(this.options.label));
            var t = this.buttonElement.removeClass(r),
                i = e("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),
                n = this.options.icons,
                o = n.primary && n.secondary,
                a = [];
            n.primary || n.secondary ? (this.options.text && a.push("ui-button-text-icon" + (o ? "s" : n.primary ? "-primary" : "-secondary")), n.primary && t.prepend("<span class='ui-button-icon-primary ui-icon " + n.primary + "'></span>"), n.secondary && t.append("<span class='ui-button-icon-secondary ui-icon " + n.secondary + "'></span>"), this.options.text || (a.push(o ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || t.attr("title", e.trim(i)))) : a.push("ui-button-text-only"), t.addClass(a.join(" "))
        }
    }), e.widget("ui.buttonset", {
        version: "1.10.3",
        options: {
            items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
        },
        _create: function() {
            this.element.addClass("ui-buttonset")
        },
        _init: function() {
            this.refresh()
        },
        _setOption: function(e, t) {
            "disabled" === e && this.buttons.button("option", e, t), this._super(e, t)
        },
        refresh: function() {
            var t = "rtl" === this.element.css("direction");
            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
                return e(this).button("widget")[0]
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(t ? "ui-corner-left" : "ui-corner-right").end().end()
        },
        _destroy: function() {
            this.element.removeClass("ui-buttonset"), this.buttons.map(function() {
                return e(this).button("widget")[0]
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy")
        }
    })
}(jQuery), function(e, t) {
    function i() {
        this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: !1,
            showMonthAfterYear: !1,
            yearSuffix: ""
        }, this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: !1,
            hideIfNoPrevNext: !1,
            navigationAsDateFormat: !1,
            gotoCurrent: !1,
            changeMonth: !1,
            changeYear: !1,
            yearRange: "c-10:c+10",
            showOtherMonths: !1,
            selectOtherMonths: !1,
            showWeek: !1,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null,
            maxDate: null,
            duration: "fast",
            beforeShowDay: null,
            beforeShow: null,
            onSelect: null,
            onChangeMonthYear: null,
            onClose: null,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: !0,
            showButtonPanel: !1,
            autoSize: !1,
            disabled: !1
        }, e.extend(this._defaults, this.regional[""]), this.dpDiv = n(e("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
    }
    function n(t) {
        var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return t.delegate(i, "mouseout", function() {
            e(this).removeClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).removeClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && e(this).removeClass("ui-datepicker-next-hover")
        }).delegate(i, "mouseover", function() {
            e.datepicker._isDisabledDatepicker(a.inline ? t.parent()[0] : a.input[0]) || (e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), e(this).addClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).addClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && e(this).addClass("ui-datepicker-next-hover"))
        })
    }
    function o(t, i) {
        e.extend(t, i);
        for (var n in i)
            null == i[n] && (t[n] = i[n]);
        return t
    }
    e.extend(e.ui, {
        datepicker: {
            version: "1.10.3"
        }
    });
    var a,
        s = "datepicker";
    e.extend(i.prototype, {
        markerClassName: "hasDatepicker",
        maxRows: 4,
        _widgetDatepicker: function() {
            return this.dpDiv
        },
        setDefaults: function(e) {
            return o(this._defaults, e || {}), this
        },
        _attachDatepicker: function(t, i) {
            var n,
                o,
                a;
            n = t.nodeName.toLowerCase(), o = "div" === n || "span" === n, t.id || (this.uuid += 1, t.id = "dp" + this.uuid), a = this._newInst(e(t), o), a.settings = e.extend({}, i || {}), "input" === n ? this._connectDatepicker(t, a) : o && this._inlineDatepicker(t, a)
        },
        _newInst: function(t, i) {
            var o = t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return {
                id: o,
                input: t,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: i,
                dpDiv: i ? n(e("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
            }
        },
        _connectDatepicker: function(t, i) {
            var n = e(t);
            i.append = e([]), i.trigger = e([]), n.hasClass(this.markerClassName) || (this._attachments(n, i), n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp), this._autoSize(i), e.data(t, s, i), i.settings.disabled && this._disableDatepicker(t))
        },
        _attachments: function(t, i) {
            var n,
                o,
                a,
                s = this._get(i, "appendText"),
                r = this._get(i, "isRTL");
            i.append && i.append.remove(), s && (i.append = e("<span class='" + this._appendClass + "'>" + s + "</span>"), t[r ? "before" : "after"](i.append)), t.unbind("focus", this._showDatepicker), i.trigger && i.trigger.remove(), n = this._get(i, "showOn"), ("focus" === n || "both" === n) && t.focus(this._showDatepicker), ("button" === n || "both" === n) && (o = this._get(i, "buttonText"), a = this._get(i, "buttonImage"), i.trigger = e(this._get(i, "buttonImageOnly") ? e("<img/>").addClass(this._triggerClass).attr({
                src: a,
                alt: o,
                title: o
            }) : e("<button type='button'></button>").addClass(this._triggerClass).html(a ? e("<img/>").attr({
                src: a,
                alt: o,
                title: o
            }) : o)), t[r ? "before" : "after"](i.trigger), i.trigger.click(function() {
                return e.datepicker._datepickerShowing && e.datepicker._lastInput === t[0] ? e.datepicker._hideDatepicker() : e.datepicker._datepickerShowing && e.datepicker._lastInput !== t[0] ? (e.datepicker._hideDatepicker(), e.datepicker._showDatepicker(t[0])) : e.datepicker._showDatepicker(t[0]), !1
            }))
        },
        _autoSize: function(e) {
            if (this._get(e, "autoSize") && !e.inline) {
                var t,
                    i,
                    n,
                    o,
                    a = new Date(2009, 11, 20),
                    s = this._get(e, "dateFormat");
                s.match(/[DM]/) && (t = function(e) {
                    for (i = 0, n = 0, o = 0; e.length > o; o++)
                        e[o].length > i && (i = e[o].length, n = o);
                    return n
                }, a.setMonth(t(this._get(e, s.match(/MM/) ? "monthNames" : "monthNamesShort"))), a.setDate(t(this._get(e, s.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - a.getDay())), e.input.attr("size", this._formatDate(e, a).length)
            }
        },
        _inlineDatepicker: function(t, i) {
            var n = e(t);
            n.hasClass(this.markerClassName) || (n.addClass(this.markerClassName).append(i.dpDiv), e.data(t, s, i), this._setDate(i, this._getDefaultDate(i), !0), this._updateDatepicker(i), this._updateAlternate(i), i.settings.disabled && this._disableDatepicker(t), i.dpDiv.css("display", "block"))
        },
        _dialogDatepicker: function(t, i, n, a, r) {
            var l,
                c,
                d,
                u,
                h,
                p = this._dialogInst;
            return p || (this.uuid += 1, l = "dp" + this.uuid, this._dialogInput = e("<input type='text' id='" + l + "' style='position: absolute; top: -100px; width: 0px;'/>"), this._dialogInput.keydown(this._doKeyDown), e("body").append(this._dialogInput), p = this._dialogInst = this._newInst(this._dialogInput, !1), p.settings = {}, e.data(this._dialogInput[0], s, p)), o(p.settings, a || {}), i = i && i.constructor === Date ? this._formatDate(p, i) : i, this._dialogInput.val(i), this._pos = r ? r.length ? r : [r.pageX, r.pageY] : null, this._pos || (c = document.documentElement.clientWidth, d = document.documentElement.clientHeight, u = document.documentElement.scrollLeft || document.body.scrollLeft, h = document.documentElement.scrollTop || document.body.scrollTop, this._pos = [c / 2 - 100 + u, d / 2 - 150 + h]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), p.settings.onSelect = n, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), e.blockUI && e.blockUI(this.dpDiv), e.data(this._dialogInput[0], s, p), this
        },
        _destroyDatepicker: function(t) {
            var i,
                n = e(t),
                o = e.data(t, s);
            n.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), e.removeData(t, s), "input" === i ? (o.append.remove(), o.trigger.remove(), n.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : ("div" === i || "span" === i) && n.removeClass(this.markerClassName).empty())
        },
        _enableDatepicker: function(t) {
            var i,
                n,
                o = e(t),
                a = e.data(t, s);
            o.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), "input" === i ? (t.disabled = !1, a.trigger.filter("button").each(function() {
                this.disabled = !1
            }).end().filter("img").css({
                opacity: "1.0",
                cursor: ""
            })) : ("div" === i || "span" === i) && (n = o.children("." + this._inlineClass), n.children().removeClass("ui-state-disabled"), n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)), this._disabledInputs = e.map(this._disabledInputs, function(e) {
                return e === t ? null : e
            }))
        },
        _disableDatepicker: function(t) {
            var i,
                n,
                o = e(t),
                a = e.data(t, s);
            o.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), "input" === i ? (t.disabled = !0, a.trigger.filter("button").each(function() {
                this.disabled = !0
            }).end().filter("img").css({
                opacity: "0.5",
                cursor: "default"
            })) : ("div" === i || "span" === i) && (n = o.children("." + this._inlineClass), n.children().addClass("ui-state-disabled"), n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)), this._disabledInputs = e.map(this._disabledInputs, function(e) {
                return e === t ? null : e
            }), this._disabledInputs[this._disabledInputs.length] = t)
        },
        _isDisabledDatepicker: function(e) {
            if (!e)
                return !1;
            for (var t = 0; this._disabledInputs.length > t; t++)
                if (this._disabledInputs[t] === e)
                    return !0;
            return !1
        },
        _getInst: function(t) {
            try {
                return e.data(t, s)
            } catch (i) {
                throw "Missing instance data for this datepicker"
            }
        },
        _optionDatepicker: function(i, n, a) {
            var s,
                r,
                l,
                c,
                d = this._getInst(i);
            return 2 === arguments.length && "string" == typeof n ? "defaults" === n ? e.extend({}, e.datepicker._defaults) : d ? "all" === n ? e.extend({}, d.settings) : this._get(d, n) : null : (s = n || {}, "string" == typeof n && (s = {}, s[n] = a), d && (this._curInst === d && this._hideDatepicker(), r = this._getDateDatepicker(i, !0), l = this._getMinMaxDate(d, "min"), c = this._getMinMaxDate(d, "max"), o(d.settings, s), null !== l && s.dateFormat !== t && s.minDate === t && (d.settings.minDate = this._formatDate(d, l)), null !== c && s.dateFormat !== t && s.maxDate === t && (d.settings.maxDate = this._formatDate(d, c)), "disabled" in s && (s.disabled ? this._disableDatepicker(i) : this._enableDatepicker(i)), this._attachments(e(i), d), this._autoSize(d), this._setDate(d, r), this._updateAlternate(d), this._updateDatepicker(d)), t)
        },
        _changeDatepicker: function(e, t, i) {
            this._optionDatepicker(e, t, i)
        },
        _refreshDatepicker: function(e) {
            var t = this._getInst(e);
            t && this._updateDatepicker(t)
        },
        _setDateDatepicker: function(e, t) {
            var i = this._getInst(e);
            i && (this._setDate(i, t), this._updateDatepicker(i), this._updateAlternate(i))
        },
        _getDateDatepicker: function(e, t) {
            var i = this._getInst(e);
            return i && !i.inline && this._setDateFromField(i, t), i ? this._getDate(i) : null
        },
        _doKeyDown: function(t) {
            var i,
                n,
                o,
                a = e.datepicker._getInst(t.target),
                s = !0,
                r = a.dpDiv.is(".ui-datepicker-rtl");
            if (a._keyEvent = !0, e.datepicker._datepickerShowing)
                switch (t.keyCode) {
                case 9:
                    e.datepicker._hideDatepicker(), s = !1;
                    break;
                case 13:
                    return o = e("td." + e.datepicker._dayOverClass + ":not(." + e.datepicker._currentClass + ")", a.dpDiv), o[0] && e.datepicker._selectDay(t.target, a.selectedMonth, a.selectedYear, o[0]), i = e.datepicker._get(a, "onSelect"), i ? (n = e.datepicker._formatDate(a), i.apply(a.input ? a.input[0] : null, [n, a])) : e.datepicker._hideDatepicker(), !1;
                case 27:
                    e.datepicker._hideDatepicker();
                    break;
                case 33:
                    e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(a, "stepBigMonths") : -e.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 34:
                    e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(a, "stepBigMonths") : +e.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 35:
                    (t.ctrlKey || t.metaKey) && e.datepicker._clearDate(t.target), s = t.ctrlKey || t.metaKey;
                    break;
                case 36:
                    (t.ctrlKey || t.metaKey) && e.datepicker._gotoToday(t.target), s = t.ctrlKey || t.metaKey;
                    break;
                case 37:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, r ? 1 : -1, "D"), s = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(a, "stepBigMonths") : -e.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 38:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, -7, "D"), s = t.ctrlKey || t.metaKey;
                    break;
                case 39:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, r ? -1 : 1, "D"), s = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(a, "stepBigMonths") : +e.datepicker._get(a, "stepMonths"), "M");
                    break;
                case 40:
                    (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, 7, "D"), s = t.ctrlKey || t.metaKey;
                    break;
                default:
                    s = !1
                }
            else
                36 === t.keyCode && t.ctrlKey ? e.datepicker._showDatepicker(this) : s = !1;
            s && (t.preventDefault(), t.stopPropagation())
        },
        _doKeyPress: function(i) {
            var n,
                o,
                a = e.datepicker._getInst(i.target);
            return e.datepicker._get(a, "constrainInput") ? (n = e.datepicker._possibleChars(e.datepicker._get(a, "dateFormat")), o = String.fromCharCode(null == i.charCode ? i.keyCode : i.charCode), i.ctrlKey || i.metaKey || " " > o || !n || n.indexOf(o) > -1) : t
        },
        _doKeyUp: function(t) {
            var i,
                n = e.datepicker._getInst(t.target);
            if (n.input.val() !== n.lastVal)
                try {
                    i = e.datepicker.parseDate(e.datepicker._get(n, "dateFormat"), n.input ? n.input.val() : null, e.datepicker._getFormatConfig(n)), i && (e.datepicker._setDateFromField(n), e.datepicker._updateAlternate(n), e.datepicker._updateDatepicker(n))
                } catch (o) {}
            return !0
        },
        _showDatepicker: function(t) {
            if (t = t.target || t, "input" !== t.nodeName.toLowerCase() && (t = e("input", t.parentNode)[0]), !e.datepicker._isDisabledDatepicker(t) && e.datepicker._lastInput !== t) {
                var i,
                    n,
                    a,
                    s,
                    r,
                    l,
                    c;
                i = e.datepicker._getInst(t), e.datepicker._curInst && e.datepicker._curInst !== i && (e.datepicker._curInst.dpDiv.stop(!0, !0), i && e.datepicker._datepickerShowing && e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])), n = e.datepicker._get(i, "beforeShow"), a = n ? n.apply(t, [t, i]) : {}, a !== !1 && (o(i.settings, a), i.lastVal = null, e.datepicker._lastInput = t, e.datepicker._setDateFromField(i), e.datepicker._inDialog && (t.value = ""), e.datepicker._pos || (e.datepicker._pos = e.datepicker._findPos(t), e.datepicker._pos[1] += t.offsetHeight), s = !1, e(t).parents().each(function() {
                    return s |= "fixed" === e(this).css("position"), !s
                }), r = {
                    left: e.datepicker._pos[0],
                    top: e.datepicker._pos[1]
                }, e.datepicker._pos = null, i.dpDiv.empty(), i.dpDiv.css({
                    position: "absolute",
                    display: "block",
                    top: "-1000px"
                }), e.datepicker._updateDatepicker(i), r = e.datepicker._checkOffset(i, r, s), i.dpDiv.css({
                    position: e.datepicker._inDialog && e.blockUI ? "static" : s ? "fixed" : "absolute",
                    display: "none",
                    left: r.left + "px",
                    top: r.top + "px"
                }), i.inline || (l = e.datepicker._get(i, "showAnim"), c = e.datepicker._get(i, "duration"), i.dpDiv.zIndex(e(t).zIndex() + 1), e.datepicker._datepickerShowing = !0, e.effects && e.effects.effect[l] ? i.dpDiv.show(l, e.datepicker._get(i, "showOptions"), c) : i.dpDiv[l || "show"](l ? c : null), e.datepicker._shouldFocusInput(i) && i.input.focus(), e.datepicker._curInst = i))
            }
        },
        _updateDatepicker: function(t) {
            this.maxRows = 4, a = t, t.dpDiv.empty().append(this._generateHTML(t)), this._attachHandlers(t), t.dpDiv.find("." + this._dayOverClass + " a").mouseover();
            var i,
                n = this._getNumberOfMonths(t),
                o = n[1],
                s = 17;
            t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), o > 1 && t.dpDiv.addClass("ui-datepicker-multi-" + o).css("width", s * o + "em"), t.dpDiv[(1 !== n[0] || 1 !== n[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"), t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), t === e.datepicker._curInst && e.datepicker._datepickerShowing && e.datepicker._shouldFocusInput(t) && t.input.focus(), t.yearshtml && (i = t.yearshtml, setTimeout(function() {
                i === t.yearshtml && t.yearshtml && t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml), i = t.yearshtml = null
            }, 0))
        },
        _shouldFocusInput: function(e) {
            return e.input && e.input.is(":visible") && !e.input.is(":disabled") && !e.input.is(":focus")
        },
        _checkOffset: function(t, i, n) {
            var o = t.dpDiv.outerWidth(),
                a = t.dpDiv.outerHeight(),
                s = t.input ? t.input.outerWidth() : 0,
                r = t.input ? t.input.outerHeight() : 0,
                l = document.documentElement.clientWidth + (n ? 0 : e(document).scrollLeft()),
                c = document.documentElement.clientHeight + (n ? 0 : e(document).scrollTop());
            return i.left -= this._get(t, "isRTL") ? o - s : 0, i.left -= n && i.left === t.input.offset().left ? e(document).scrollLeft() : 0, i.top -= n && i.top === t.input.offset().top + r ? e(document).scrollTop() : 0, i.left -= Math.min(i.left, i.left + o > l && l > o ? Math.abs(i.left + o - l) : 0), i.top -= Math.min(i.top, i.top + a > c && c > a ? Math.abs(a + r) : 0), i
        },
        _findPos: function(t) {
            for (var i, n = this._getInst(t), o = this._get(n, "isRTL"); t && ("hidden" === t.type || 1 !== t.nodeType || e.expr.filters.hidden(t));)
                t = t[o ? "previousSibling" : "nextSibling"];
            return i = e(t).offset(), [i.left, i.top]
        },
        _hideDatepicker: function(t) {
            var i,
                n,
                o,
                a,
                r = this._curInst;
            !r || t && r !== e.data(t, s) || this._datepickerShowing && (i = this._get(r, "showAnim"), n = this._get(r, "duration"), o = function() {
                e.datepicker._tidyDialog(r)
            }, e.effects && (e.effects.effect[i] || e.effects[i]) ? r.dpDiv.hide(i, e.datepicker._get(r, "showOptions"), n, o) : r.dpDiv["slideDown" === i ? "slideUp" : "fadeIn" === i ? "fadeOut" : "hide"](i ? n : null, o), i || o(), this._datepickerShowing = !1, a = this._get(r, "onClose"), a && a.apply(r.input ? r.input[0] : null, [r.input ? r.input.val() : "", r]), this._lastInput = null, this._inDialog && (this._dialogInput.css({
                position: "absolute",
                left: "0",
                top: "-100px"
            }), e.blockUI && (e.unblockUI(), e("body").append(this.dpDiv))), this._inDialog = !1)
        },
        _tidyDialog: function(e) {
            e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
        },
        _checkExternalClick: function(t) {
            if (e.datepicker._curInst) {
                var i = e(t.target),
                    n = e.datepicker._getInst(i[0]);
                (i[0].id !== e.datepicker._mainDivId && 0 === i.parents("#" + e.datepicker._mainDivId).length && !i.hasClass(e.datepicker.markerClassName) && !i.closest("." + e.datepicker._triggerClass).length && e.datepicker._datepickerShowing && (!e.datepicker._inDialog || !e.blockUI) || i.hasClass(e.datepicker.markerClassName) && e.datepicker._curInst !== n) && e.datepicker._hideDatepicker()
            }
        },
        _adjustDate: function(t, i, n) {
            var o = e(t),
                a = this._getInst(o[0]);
            this._isDisabledDatepicker(o[0]) || (this._adjustInstDate(a, i + ("M" === n ? this._get(a, "showCurrentAtPos") : 0), n), this._updateDatepicker(a))
        },
        _gotoToday: function(t) {
            var i,
                n = e(t),
                o = this._getInst(n[0]);
            this._get(o, "gotoCurrent") && o.currentDay ? (o.selectedDay = o.currentDay, o.drawMonth = o.selectedMonth = o.currentMonth, o.drawYear = o.selectedYear = o.currentYear) : (i = new Date, o.selectedDay = i.getDate(), o.drawMonth = o.selectedMonth = i.getMonth(), o.drawYear = o.selectedYear = i.getFullYear()), this._notifyChange(o), this._adjustDate(n)
        },
        _selectMonthYear: function(t, i, n) {
            var o = e(t),
                a = this._getInst(o[0]);
            a["selected" + ("M" === n ? "Month" : "Year")] = a["draw" + ("M" === n ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10), this._notifyChange(a), this._adjustDate(o)
        },
        _selectDay: function(t, i, n, o) {
            var a,
                s = e(t);
            e(o).hasClass(this._unselectableClass) || this._isDisabledDatepicker(s[0]) || (a = this._getInst(s[0]), a.selectedDay = a.currentDay = e("a", o).html(), a.selectedMonth = a.currentMonth = i, a.selectedYear = a.currentYear = n, this._selectDate(t, this._formatDate(a, a.currentDay, a.currentMonth, a.currentYear)))
        },
        _clearDate: function(t) {
            var i = e(t);
            this._selectDate(i, "")
        },
        _selectDate: function(t, i) {
            var n,
                o = e(t),
                a = this._getInst(o[0]);
            i = null != i ? i : this._formatDate(a), a.input && a.input.val(i), this._updateAlternate(a), n = this._get(a, "onSelect"), n ? n.apply(a.input ? a.input[0] : null, [i, a]) : a.input && a.input.trigger("change"), a.inline ? this._updateDatepicker(a) : (this._hideDatepicker(), this._lastInput = a.input[0], "object" != typeof a.input[0] && a.input.focus(), this._lastInput = null)
        },
        _updateAlternate: function(t) {
            var i,
                n,
                o,
                a = this._get(t, "altField");
            a && (i = this._get(t, "altFormat") || this._get(t, "dateFormat"), n = this._getDate(t), o = this.formatDate(i, n, this._getFormatConfig(t)), e(a).each(function() {
                e(this).val(o)
            }))
        },
        noWeekends: function(e) {
            var t = e.getDay();
            return [t > 0 && 6 > t, ""]
        },
        iso8601Week: function(e) {
            var t,
                i = new Date(e.getTime());
            return i.setDate(i.getDate() + 4 - (i.getDay() || 7)), t = i.getTime(), i.setMonth(0), i.setDate(1), Math.floor(Math.round((t - i) / 864e5) / 7) + 1
        },
        parseDate: function(i, n, o) {
            if (null == i || null == n)
                throw "Invalid arguments";
            if (n = "object" == typeof n ? "" + n : n + "", "" === n)
                return null;
            var a,
                s,
                r,
                l,
                c = 0,
                d = (o ? o.shortYearCutoff : null) || this._defaults.shortYearCutoff,
                u = "string" != typeof d ? d : (new Date).getFullYear() % 100 + parseInt(d, 10),
                h = (o ? o.dayNamesShort : null) || this._defaults.dayNamesShort,
                p = (o ? o.dayNames : null) || this._defaults.dayNames,
                f = (o ? o.monthNamesShort : null) || this._defaults.monthNamesShort,
                m = (o ? o.monthNames : null) || this._defaults.monthNames,
                g = -1,
                v = -1,
                _ = -1,
                b = -1,
                w = !1,
                y = function(e) {
                    var t = i.length > a + 1 && i.charAt(a + 1) === e;
                    return t && a++, t
                },
                $ = function(e) {
                    var t = y(e),
                        i = "@" === e ? 14 : "!" === e ? 20 : "y" === e && t ? 4 : "o" === e ? 3 : 2,
                        o = RegExp("^\\d{1," + i + "}"),
                        a = n.substring(c).match(o);
                    if (!a)
                        throw "Missing number at position " + c;
                    return c += a[0].length, parseInt(a[0], 10)
                },
                k = function(i, o, a) {
                    var s = -1,
                        r = e.map(y(i) ? a : o, function(e, t) {
                            return [[t, e]]
                        }).sort(function(e, t) {
                            return -(e[1].length - t[1].length)
                        });
                    if (e.each(r, function(e, i) {
                        var o = i[1];
                        return n.substr(c, o.length).toLowerCase() === o.toLowerCase() ? (s = i[0], c += o.length, !1) : t
                    }), -1 !== s)
                        return s + 1;
                    throw "Unknown name at position " + c
                },
                x = function() {
                    if (n.charAt(c) !== i.charAt(a))
                        throw "Unexpected literal at position " + c;
                    c++
                };
            for (a = 0; i.length > a; a++)
                if (w)
                    "'" !== i.charAt(a) || y("'") ? x() : w = !1;
                else
                    switch (i.charAt(a)) {
                    case "d":
                        _ = $("d");
                        break;
                    case "D":
                        k("D", h, p);
                        break;
                    case "o":
                        b = $("o");
                        break;
                    case "m":
                        v = $("m");
                        break;
                    case "M":
                        v = k("M", f, m);
                        break;
                    case "y":
                        g = $("y");
                        break;
                    case "@":
                        l = new Date($("@")), g = l.getFullYear(), v = l.getMonth() + 1, _ = l.getDate();
                        break;
                    case "!":
                        l = new Date(($("!") - this._ticksTo1970) / 1e4), g = l.getFullYear(), v = l.getMonth() + 1, _ = l.getDate();
                        break;
                    case "'":
                        y("'") ? x() : w = !0;
                        break;
                    default:
                        x()
                    }
            if (n.length > c && (r = n.substr(c), !/^\s+/.test(r)))
                throw "Extra/unparsed characters found in date: " + r;
            if (-1 === g ? g = (new Date).getFullYear() : 100 > g && (g += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (u >= g ? 0 : -100)), b > -1)
                for (v = 1, _ = b; s = this._getDaysInMonth(g, v - 1), !(s >= _);)
                    v++, _ -= s;
            if (l = this._daylightSavingAdjust(new Date(g, v - 1, _)), l.getFullYear() !== g || l.getMonth() + 1 !== v || l.getDate() !== _)
                throw "Invalid date";
            return l
        },
        ATOM: "yy-mm-dd",
        COOKIE: "D, dd M yy",
        ISO_8601: "yy-mm-dd",
        RFC_822: "D, d M y",
        RFC_850: "DD, dd-M-y",
        RFC_1036: "D, d M y",
        RFC_1123: "D, d M yy",
        RFC_2822: "D, d M yy",
        RSS: "D, d M y",
        TICKS: "!",
        TIMESTAMP: "@",
        W3C: "yy-mm-dd",
        _ticksTo1970: 864e9 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)),
        formatDate: function(e, t, i) {
            if (!t)
                return "";
            var n,
                o = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort,
                a = (i ? i.dayNames : null) || this._defaults.dayNames,
                s = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort,
                r = (i ? i.monthNames : null) || this._defaults.monthNames,
                l = function(t) {
                    var i = e.length > n + 1 && e.charAt(n + 1) === t;
                    return i && n++, i
                },
                c = function(e, t, i) {
                    var n = "" + t;
                    if (l(e))
                        for (; i > n.length;)
                            n = "0" + n;
                    return n
                },
                d = function(e, t, i, n) {
                    return l(e) ? n[t] : i[t]
                },
                u = "",
                h = !1;
            if (t)
                for (n = 0; e.length > n; n++)
                    if (h)
                        "'" !== e.charAt(n) || l("'") ? u += e.charAt(n) : h = !1;
                    else
                        switch (e.charAt(n)) {
                        case "d":
                            u += c("d", t.getDate(), 2);
                            break;
                        case "D":
                            u += d("D", t.getDay(), o, a);
                            break;
                        case "o":
                            u += c("o", Math.round((new Date(t.getFullYear(), t.getMonth(), t.getDate()).getTime() - new Date(t.getFullYear(), 0, 0).getTime()) / 864e5), 3);
                            break;
                        case "m":
                            u += c("m", t.getMonth() + 1, 2);
                            break;
                        case "M":
                            u += d("M", t.getMonth(), s, r);
                            break;
                        case "y":
                            u += l("y") ? t.getFullYear() : (10 > t.getYear() % 100 ? "0" : "") + t.getYear() % 100;
                            break;
                        case "@":
                            u += t.getTime();
                            break;
                        case "!":
                            u += 1e4 * t.getTime() + this._ticksTo1970;
                            break;
                        case "'":
                            l("'") ? u += "'" : h = !0;
                            break;
                        default:
                            u += e.charAt(n)
                        }
            return u
        },
        _possibleChars: function(e) {
            var t,
                i = "",
                n = !1,
                o = function(i) {
                    var n = e.length > t + 1 && e.charAt(t + 1) === i;
                    return n && t++, n
                };
            for (t = 0; e.length > t; t++)
                if (n)
                    "'" !== e.charAt(t) || o("'") ? i += e.charAt(t) : n = !1;
                else
                    switch (e.charAt(t)) {
                    case "d":
                    case "m":
                    case "y":
                    case "@":
                        i += "0123456789";
                        break;
                    case "D":
                    case "M":
                        return null;
                    case "'":
                        o("'") ? i += "'" : n = !0;
                        break;
                    default:
                        i += e.charAt(t)
                    }
            return i
        },
        _get: function(e, i) {
            return e.settings[i] !== t ? e.settings[i] : this._defaults[i]
        },
        _setDateFromField: function(e, t) {
            if (e.input.val() !== e.lastVal) {
                var i = this._get(e, "dateFormat"),
                    n = e.lastVal = e.input ? e.input.val() : null,
                    o = this._getDefaultDate(e),
                    a = o,
                    s = this._getFormatConfig(e);
                try {
                    a = this.parseDate(i, n, s) || o
                } catch (r) {
                    n = t ? "" : n
                }
                e.selectedDay = a.getDate(), e.drawMonth = e.selectedMonth = a.getMonth(), e.drawYear = e.selectedYear = a.getFullYear(), e.currentDay = n ? a.getDate() : 0, e.currentMonth = n ? a.getMonth() : 0, e.currentYear = n ? a.getFullYear() : 0, this._adjustInstDate(e)
            }
        },
        _getDefaultDate: function(e) {
            return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date))
        },
        _determineDate: function(t, i, n) {
            var o = function(e) {
                    var t = new Date;
                    return t.setDate(t.getDate() + e), t
                },
                a = function(i) {
                    try {
                        return e.datepicker.parseDate(e.datepicker._get(t, "dateFormat"), i, e.datepicker._getFormatConfig(t))
                    } catch (n) {}
                    for (var o = (i.toLowerCase().match(/^c/) ? e.datepicker._getDate(t) : null) || new Date, a = o.getFullYear(), s = o.getMonth(), r = o.getDate(), l = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, c = l.exec(i); c;) {
                        switch (c[2] || "d") {
                        case "d":
                        case "D":
                            r += parseInt(c[1], 10);
                            break;
                        case "w":
                        case "W":
                            r += 7 * parseInt(c[1], 10);
                            break;
                        case "m":
                        case "M":
                            s += parseInt(c[1], 10), r = Math.min(r, e.datepicker._getDaysInMonth(a, s));
                            break;
                        case "y":
                        case "Y":
                            a += parseInt(c[1], 10), r = Math.min(r, e.datepicker._getDaysInMonth(a, s))
                        }
                        c = l.exec(i)
                    }
                    return new Date(a, s, r)
                },
                s = null == i || "" === i ? n : "string" == typeof i ? a(i) : "number" == typeof i ? isNaN(i) ? n : o(i) : new Date(i.getTime());
            return s = s && "Invalid Date" == "" + s ? n : s, s && (s.setHours(0), s.setMinutes(0), s.setSeconds(0), s.setMilliseconds(0)), this._daylightSavingAdjust(s)
        },
        _daylightSavingAdjust: function(e) {
            return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null
        },
        _setDate: function(e, t, i) {
            var n = !t,
                o = e.selectedMonth,
                a = e.selectedYear,
                s = this._restrictMinMax(e, this._determineDate(e, t, new Date));
            e.selectedDay = e.currentDay = s.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = s.getMonth(), e.drawYear = e.selectedYear = e.currentYear = s.getFullYear(), o === e.selectedMonth && a === e.selectedYear || i || this._notifyChange(e), this._adjustInstDate(e), e.input && e.input.val(n ? "" : this._formatDate(e))
        },
        _getDate: function(e) {
            var t = !e.currentYear || e.input && "" === e.input.val() ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return t
        },
        _attachHandlers: function(t) {
            var i = this._get(t, "stepMonths"),
                n = "#" + t.id.replace(/\\\\/g, "\\");
            t.dpDiv.find("[data-handler]").map(function() {
                var t = {
                    prev: function() {
                        e.datepicker._adjustDate(n, -i, "M")
                    },
                    next: function() {
                        e.datepicker._adjustDate(n, +i, "M")
                    },
                    hide: function() {
                        e.datepicker._hideDatepicker()
                    },
                    today: function() {
                        e.datepicker._gotoToday(n)
                    },
                    selectDay: function() {
                        return e.datepicker._selectDay(n, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), !1
                    },
                    selectMonth: function() {
                        return e.datepicker._selectMonthYear(n, this, "M"), !1
                    },
                    selectYear: function() {
                        return e.datepicker._selectMonthYear(n, this, "Y"), !1
                    }
                };
                e(this).bind(this.getAttribute("data-event"), t[this.getAttribute("data-handler")])
            })
        },
        _generateHTML: function(e) {
            var t,
                i,
                n,
                o,
                a,
                s,
                r,
                l,
                c,
                d,
                u,
                h,
                p,
                f,
                m,
                g,
                v,
                _,
                b,
                w,
                y,
                $,
                k,
                x,
                C,
                T,
                I,
                S,
                P,
                D,
                A,
                O,
                j,
                z,
                E,
                M,
                N,
                F,
                L,
                R = new Date,
                H = this._daylightSavingAdjust(new Date(R.getFullYear(), R.getMonth(), R.getDate())),
                B = this._get(e, "isRTL"),
                q = this._get(e, "showButtonPanel"),
                W = this._get(e, "hideIfNoPrevNext"),
                U = this._get(e, "navigationAsDateFormat"),
                K = this._getNumberOfMonths(e),
                Y = this._get(e, "showCurrentAtPos"),
                Z = this._get(e, "stepMonths"),
                Q = 1 !== K[0] || 1 !== K[1],
                V = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)),
                G = this._getMinMaxDate(e, "min"),
                X = this._getMinMaxDate(e, "max"),
                J = e.drawMonth - Y,
                ee = e.drawYear;
            if (0 > J && (J += 12, ee--), X)
                for (t = this._daylightSavingAdjust(new Date(X.getFullYear(), X.getMonth() - K[0] * K[1] + 1, X.getDate())), t = G && G > t ? G : t; this._daylightSavingAdjust(new Date(ee, J, 1)) > t;)
                    J--, 0 > J && (J = 11, ee--);
            for (e.drawMonth = J, e.drawYear = ee, i = this._get(e, "prevText"), i = U ? this.formatDate(i, this._daylightSavingAdjust(new Date(ee, J - Z, 1)), this._getFormatConfig(e)) : i, n = this._canAdjustMonth(e, -1, ee, J) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (B ? "e" : "w") + "'>" + i + "</span></a>" : W ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (B ? "e" : "w") + "'>" + i + "</span></a>", o = this._get(e, "nextText"), o = U ? this.formatDate(o, this._daylightSavingAdjust(new Date(ee, J + Z, 1)), this._getFormatConfig(e)) : o, a = this._canAdjustMonth(e, 1, ee, J) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + o + "'><span class='ui-icon ui-icon-circle-triangle-" + (B ? "w" : "e") + "'>" + o + "</span></a>" : W ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + o + "'><span class='ui-icon ui-icon-circle-triangle-" + (B ? "w" : "e") + "'>" + o + "</span></a>", s = this._get(e, "currentText"), r = this._get(e, "gotoCurrent") && e.currentDay ? V : H, s = U ? this.formatDate(s, r, this._getFormatConfig(e)) : s, l = e.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(e, "closeText") + "</button>", c = q ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (B ? l : "") + (this._isInRange(e, r) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + s + "</button>" : "") + (B ? "" : l) + "</div>" : "", d = parseInt(this._get(e, "firstDay"), 10), d = isNaN(d) ? 0 : d, u = this._get(e, "showWeek"), h = this._get(e, "dayNames"), p = this._get(e, "dayNamesMin"), f = this._get(e, "monthNames"), m = this._get(e, "monthNamesShort"), g = this._get(e, "beforeShowDay"), v = this._get(e, "showOtherMonths"), _ = this._get(e, "selectOtherMonths"), b = this._getDefaultDate(e), w = "", $ = 0; K[0] > $; $++) {
                for (k = "", this.maxRows = 4, x = 0; K[1] > x; x++) {
                    if (C = this._daylightSavingAdjust(new Date(ee, J, e.selectedDay)), T = " ui-corner-all", I = "", Q) {
                        if (I += "<div class='ui-datepicker-group", K[1] > 1)
                            switch (x) {
                            case 0:
                                I += " ui-datepicker-group-first", T = " ui-corner-" + (B ? "right" : "left");
                                break;
                            case K[1] - 1:
                                I += " ui-datepicker-group-last", T = " ui-corner-" + (B ? "left" : "right");
                                break;
                            default:
                                I += " ui-datepicker-group-middle", T = ""
                            }
                        I += "'>"
                    }
                    for (I += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + T + "'>" + (/all|left/.test(T) && 0 === $ ? B ? a : n : "") + (/all|right/.test(T) && 0 === $ ? B ? n : a : "") + this._generateMonthYearHeader(e, J, ee, G, X, $ > 0 || x > 0, f, m) + "</div><table class='ui-datepicker-calendar'><thead><tr>", S = u ? "<th class='ui-datepicker-week-col'>" + this._get(e, "weekHeader") + "</th>" : "", y = 0; 7 > y; y++)
                        P = (y + d) % 7, S += "<th" + ((y + d + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + h[P] + "'>" + p[P] + "</span></th>";
                    for (I += S + "</tr></thead><tbody>", D = this._getDaysInMonth(ee, J), ee === e.selectedYear && J === e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, D)), A = (this._getFirstDayOfMonth(ee, J) - d + 7) % 7, O = Math.ceil((A + D) / 7), j = Q && this.maxRows > O ? this.maxRows : O, this.maxRows = j, z = this._daylightSavingAdjust(new Date(ee, J, 1 - A)), E = 0; j > E; E++) {
                        for (I += "<tr>", M = u ? "<td class='ui-datepicker-week-col'>" + this._get(e, "calculateWeek")(z) + "</td>" : "", y = 0; 7 > y; y++)
                            N = g ? g.apply(e.input ? e.input[0] : null, [z]) : [!0, ""], F = z.getMonth() !== J, L = F && !_ || !N[0] || G && G > z || X && z > X, M += "<td class='" + ((y + d + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (F ? " ui-datepicker-other-month" : "") + (z.getTime() === C.getTime() && J === e.selectedMonth && e._keyEvent || b.getTime() === z.getTime() && b.getTime() === C.getTime() ? " " + this._dayOverClass : "") + (L ? " " + this._unselectableClass + " ui-state-disabled" : "") + (F && !v ? "" : " " + N[1] + (z.getTime() === V.getTime() ? " " + this._currentClass : "") + (z.getTime() === H.getTime() ? " ui-datepicker-today" : "")) + "'" + (F && !v || !N[2] ? "" : " title='" + N[2].replace(/'/g, "&#39;") + "'") + (L ? "" : " data-handler='selectDay' data-event='click' data-month='" + z.getMonth() + "' data-year='" + z.getFullYear() + "'") + ">" + (F && !v ? "&#xa0;" : L ? "<span class='ui-state-default'>" + z.getDate() + "</span>" : "<a class='ui-state-default" + (z.getTime() === H.getTime() ? " ui-state-highlight" : "") + (z.getTime() === V.getTime() ? " ui-state-active" : "") + (F ? " ui-priority-secondary" : "") + "' href='#'>" + z.getDate() + "</a>") + "</td>", z.setDate(z.getDate() + 1), z = this._daylightSavingAdjust(z);
                        I += M + "</tr>"
                    }
                    J++, J > 11 && (J = 0, ee++), I += "</tbody></table>" + (Q ? "</div>" + (K[0] > 0 && x === K[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : ""), k += I
                }
                w += k
            }
            return w += c, e._keyEvent = !1, w
        },
        _generateMonthYearHeader: function(e, t, i, n, o, a, s, r) {
            var l,
                c,
                d,
                u,
                h,
                p,
                f,
                m,
                g = this._get(e, "changeMonth"),
                v = this._get(e, "changeYear"),
                _ = this._get(e, "showMonthAfterYear"),
                b = "<div class='ui-datepicker-title'>",
                w = "";
            if (a || !g)
                w += "<span class='ui-datepicker-month'>" + s[t] + "</span>";
            else {
                for (l = n && n.getFullYear() === i, c = o && o.getFullYear() === i, w += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>", d = 0; 12 > d; d++)
                    (!l || d >= n.getMonth()) && (!c || o.getMonth() >= d) && (w += "<option value='" + d + "'" + (d === t ? " selected='selected'" : "") + ">" + r[d] + "</option>");
                w += "</select>"
            }
            if (_ || (b += w + (!a && g && v ? "" : "&#xa0;")), !e.yearshtml)
                if (e.yearshtml = "", a || !v)
                    b += "<span class='ui-datepicker-year'>" + i + "</span>";
                else {
                    for (u = this._get(e, "yearRange").split(":"), h = (new Date).getFullYear(), p = function(e) {
                        var t = e.match(/c[+\-].*/) ? i + parseInt(e.substring(1), 10) : e.match(/[+\-].*/) ? h + parseInt(e, 10) : parseInt(e, 10);
                        return isNaN(t) ? h : t
                    }, f = p(u[0]), m = Math.max(f, p(u[1] || "")), f = n ? Math.max(f, n.getFullYear()) : f, m = o ? Math.min(m, o.getFullYear()) : m, e.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; m >= f; f++)
                        e.yearshtml += "<option value='" + f + "'" + (f === i ? " selected='selected'" : "") + ">" + f + "</option>";
                    e.yearshtml += "</select>", b += e.yearshtml, e.yearshtml = null
                }
            return b += this._get(e, "yearSuffix"), _ && (b += (!a && g && v ? "" : "&#xa0;") + w), b += "</div>"
        },
        _adjustInstDate: function(e, t, i) {
            var n = e.drawYear + ("Y" === i ? t : 0),
                o = e.drawMonth + ("M" === i ? t : 0),
                a = Math.min(e.selectedDay, this._getDaysInMonth(n, o)) + ("D" === i ? t : 0),
                s = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(n, o, a)));
            e.selectedDay = s.getDate(), e.drawMonth = e.selectedMonth = s.getMonth(), e.drawYear = e.selectedYear = s.getFullYear(), ("M" === i || "Y" === i) && this._notifyChange(e)
        },
        _restrictMinMax: function(e, t) {
            var i = this._getMinMaxDate(e, "min"),
                n = this._getMinMaxDate(e, "max"),
                o = i && i > t ? i : t;
            return n && o > n ? n : o
        },
        _notifyChange: function(e) {
            var t = this._get(e, "onChangeMonthYear");
            t && t.apply(e.input ? e.input[0] : null, [e.selectedYear, e.selectedMonth + 1, e])
        },
        _getNumberOfMonths: function(e) {
            var t = this._get(e, "numberOfMonths");
            return null == t ? [1, 1] : "number" == typeof t ? [1, t] : t
        },
        _getMinMaxDate: function(e, t) {
            return this._determineDate(e, this._get(e, t + "Date"), null)
        },
        _getDaysInMonth: function(e, t) {
            return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate()
        },
        _getFirstDayOfMonth: function(e, t) {
            return new Date(e, t, 1).getDay()
        },
        _canAdjustMonth: function(e, t, i, n) {
            var o = this._getNumberOfMonths(e),
                a = this._daylightSavingAdjust(new Date(i, n + (0 > t ? t : o[0] * o[1]), 1));
            return 0 > t && a.setDate(this._getDaysInMonth(a.getFullYear(), a.getMonth())), this._isInRange(e, a)
        },
        _isInRange: function(e, t) {
            var i,
                n,
                o = this._getMinMaxDate(e, "min"),
                a = this._getMinMaxDate(e, "max"),
                s = null,
                r = null,
                l = this._get(e, "yearRange");
            return l && (i = l.split(":"), n = (new Date).getFullYear(), s = parseInt(i[0], 10), r = parseInt(i[1], 10), i[0].match(/[+\-].*/) && (s += n), i[1].match(/[+\-].*/) && (r += n)), (!o || t.getTime() >= o.getTime()) && (!a || t.getTime() <= a.getTime()) && (!s || t.getFullYear() >= s) && (!r || r >= t.getFullYear())
        },
        _getFormatConfig: function(e) {
            var t = this._get(e, "shortYearCutoff");
            return t = "string" != typeof t ? t : (new Date).getFullYear() % 100 + parseInt(t, 10), {
                shortYearCutoff: t,
                dayNamesShort: this._get(e, "dayNamesShort"),
                dayNames: this._get(e, "dayNames"),
                monthNamesShort: this._get(e, "monthNamesShort"),
                monthNames: this._get(e, "monthNames")
            }
        },
        _formatDate: function(e, t, i, n) {
            t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
            var o = t ? "object" == typeof t ? t : this._daylightSavingAdjust(new Date(n, i, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
            return this.formatDate(this._get(e, "dateFormat"), o, this._getFormatConfig(e))
        }
    }), e.fn.datepicker = function(t) {
        if (!this.length)
            return this;
        e.datepicker.initialized || (e(document).mousedown(e.datepicker._checkExternalClick), e.datepicker.initialized = !0), 0 === e("#" + e.datepicker._mainDivId).length && e("body").append(e.datepicker.dpDiv);
        var i = Array.prototype.slice.call(arguments, 1);
        return "string" != typeof t || "isDisabled" !== t && "getDate" !== t && "widget" !== t ? "option" === t && 2 === arguments.length && "string" == typeof arguments[1] ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i)) : this.each(function() {
            "string" == typeof t ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this].concat(i)) : e.datepicker._attachDatepicker(this, t)
        }) : e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i))
    }, e.datepicker = new i, e.datepicker.initialized = !1, e.datepicker.uuid = (new Date).getTime(), e.datepicker.version = "1.10.3"
}(jQuery), function(e) {
    var t = {
            buttons: !0,
            height: !0,
            maxHeight: !0,
            maxWidth: !0,
            minHeight: !0,
            minWidth: !0,
            width: !0
        },
        i = {
            maxHeight: !0,
            maxWidth: !0,
            minHeight: !0,
            minWidth: !0
        };
    e.widget("ui.dialog", {
        version: "1.10.3",
        options: {
            appendTo: "body",
            autoOpen: !0,
            buttons: [],
            closeOnEscape: !0,
            closeText: "close",
            dialogClass: "",
            draggable: !0,
            hide: null,
            height: "auto",
            maxHeight: null,
            maxWidth: null,
            minHeight: 150,
            minWidth: 150,
            modal: !1,
            position: {
                my: "center",
                at: "center",
                of: window,
                collision: "fit",
                using: function(t) {
                    var i = e(this).css(t).offset().top;
                    0 > i && e(this).css("top", t.top - i)
                }
            },
            resizable: !0,
            show: null,
            title: null,
            width: 300,
            beforeClose: null,
            close: null,
            drag: null,
            dragStart: null,
            dragStop: null,
            focus: null,
            open: null,
            resize: null,
            resizeStart: null,
            resizeStop: null
        },
        _create: function() {
            this.originalCss = {
                display: this.element[0].style.display,
                width: this.element[0].style.width,
                minHeight: this.element[0].style.minHeight,
                maxHeight: this.element[0].style.maxHeight,
                height: this.element[0].style.height
            }, this.originalPosition = {
                parent: this.element.parent(),
                index: this.element.parent().children().index(this.element)
            }, this.originalTitle = this.element.attr("title"), this.options.title = this.options.title || this.originalTitle, this._createWrapper(), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog), this._createTitlebar(), this._createButtonPane(), this.options.draggable && e.fn.draggable && this._makeDraggable(), this.options.resizable && e.fn.resizable && this._makeResizable(), this._isOpen = !1
        },
        _init: function() {
            this.options.autoOpen && this.open()
        },
        _appendTo: function() {
            var t = this.options.appendTo;
            return t && (t.jquery || t.nodeType) ? e(t) : this.document.find(t || "body").eq(0)
        },
        _destroy: function() {
            var e,
                t = this.originalPosition;
            this._destroyOverlay(), this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(), this.uiDialog.stop(!0, !0).remove(), this.originalTitle && this.element.attr("title", this.originalTitle), e = t.parent.children().eq(t.index), e.length && e[0] !== this.element[0] ? e.before(this.element) : t.parent.append(this.element)
        },
        widget: function() {
            return this.uiDialog
        },
        disable: e.noop,
        enable: e.noop,
        close: function(t) {
            var i = this;
            this._isOpen && this._trigger("beforeClose", t) !== !1 && (this._isOpen = !1, this._destroyOverlay(), this.opener.filter(":focusable").focus().length || e(this.document[0].activeElement).blur(), this._hide(this.uiDialog, this.options.hide, function() {
                i._trigger("close", t)
            }))
        },
        isOpen: function() {
            return this._isOpen
        },
        moveToTop: function() {
            this._moveToTop()
        },
        _moveToTop: function(e, t) {
            var i = !!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
            return i && !t && this._trigger("focus", e), i
        },
        open: function() {
            var t = this;
            return this._isOpen ? void (this._moveToTop() && this._focusTabbable()) : (this._isOpen = !0, this.opener = e(this.document[0].activeElement), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this._show(this.uiDialog, this.options.show, function() {
                t._focusTabbable(), t._trigger("focus")
            }), void this._trigger("open"))
        },
        _focusTabbable: function() {
            var e = this.element.find("[autofocus]");
            e.length || (e = this.element.find(":tabbable")), e.length || (e = this.uiDialogButtonPane.find(":tabbable")), e.length || (e = this.uiDialogTitlebarClose.filter(":tabbable")), e.length || (e = this.uiDialog), e.eq(0).focus()
        },
        _keepFocus: function(t) {
            function i() {
                var t = this.document[0].activeElement,
                    i = this.uiDialog[0] === t || e.contains(this.uiDialog[0], t);
                i || this._focusTabbable()
            }
            t.preventDefault(), i.call(this), this._delay(i)
        },
        _createWrapper: function() {
            this.uiDialog = e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({
                tabIndex: -1,
                role: "dialog"
            }).appendTo(this._appendTo()), this._on(this.uiDialog, {
                keydown: function(t) {
                    if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === e.ui.keyCode.ESCAPE)
                        return t.preventDefault(), void this.close(t);
                    if (t.keyCode === e.ui.keyCode.TAB) {
                        var i = this.uiDialog.find(":tabbable"),
                            n = i.filter(":first"),
                            o = i.filter(":last");
                        t.target !== o[0] && t.target !== this.uiDialog[0] || t.shiftKey ? t.target !== n[0] && t.target !== this.uiDialog[0] || !t.shiftKey || (o.focus(1), t.preventDefault()) : (n.focus(1), t.preventDefault())
                    }
                },
                mousedown: function(e) {
                    this._moveToTop(e) && this._focusTabbable()
                }
            }), this.element.find("[aria-describedby]").length || this.uiDialog.attr({
                "aria-describedby": this.element.uniqueId().attr("id")
            })
        },
        _createTitlebar: function() {
            var t;
            this.uiDialogTitlebar = e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog), this._on(this.uiDialogTitlebar, {
                mousedown: function(t) {
                    e(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus()
                }
            }), this.uiDialogTitlebarClose = e("<button></button>").button({
                label: this.options.closeText,
                icons: {
                    primary: "ui-icon-closethick"
                },
                text: !1
            }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar), this._on(this.uiDialogTitlebarClose, {
                click: function(e) {
                    e.preventDefault(), this.close(e)
                }
            }), t = e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar), this._title(t), this.uiDialog.attr({
                "aria-labelledby": t.attr("id")
            })
        },
        _title: function(e) {
            this.options.title || e.html("&#160;"), e.text(this.options.title)
        },
        _createButtonPane: function() {
            this.uiDialogButtonPane = e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), this.uiButtonSet = e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane), this._createButtons()
        },
        _createButtons: function() {
            var t = this,
                i = this.options.buttons;
            return this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), e.isEmptyObject(i) || e.isArray(i) && !i.length ? void this.uiDialog.removeClass("ui-dialog-buttons") : (e.each(i, function(i, n) {
                var o,
                    a;
                n = e.isFunction(n) ? {
                    click: n,
                    text: i
                } : n, n = e.extend({
                    type: "button"
                }, n), o = n.click, n.click = function() {
                    o.apply(t.element[0], arguments)
                }, a = {
                    icons: n.icons,
                    text: n.showText
                }, delete n.icons, delete n.showText, e("<button></button>", n).button(a).appendTo(t.uiButtonSet)
            }), this.uiDialog.addClass("ui-dialog-buttons"), void this.uiDialogButtonPane.appendTo(this.uiDialog))
        },
        _makeDraggable: function() {
            function t(e) {
                return {
                    position: e.position,
                    offset: e.offset
                }
            }
            var i = this,
                n = this.options;
            this.uiDialog.draggable({
                cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
                handle: ".ui-dialog-titlebar",
                containment: "document",
                start: function(n, o) {
                    e(this).addClass("ui-dialog-dragging"), i._blockFrames(), i._trigger("dragStart", n, t(o))
                },
                drag: function(e, n) {
                    i._trigger("drag", e, t(n))
                },
                stop: function(o, a) {
                    n.position = [a.position.left - i.document.scrollLeft(), a.position.top - i.document.scrollTop()], e(this).removeClass("ui-dialog-dragging"), i._unblockFrames(), i._trigger("dragStop", o, t(a))
                }
            })
        },
        _makeResizable: function() {
            function t(e) {
                return {
                    originalPosition: e.originalPosition,
                    originalSize: e.originalSize,
                    position: e.position,
                    size: e.size
                }
            }
            var i = this,
                n = this.options,
                o = n.resizable,
                a = this.uiDialog.css("position"),
                s = "string" == typeof o ? o : "n,e,s,w,se,sw,ne,nw";
            this.uiDialog.resizable({
                cancel: ".ui-dialog-content",
                containment: "document",
                alsoResize: this.element,
                maxWidth: n.maxWidth,
                maxHeight: n.maxHeight,
                minWidth: n.minWidth,
                minHeight: this._minHeight(),
                handles: s,
                start: function(n, o) {
                    e(this).addClass("ui-dialog-resizing"), i._blockFrames(), i._trigger("resizeStart", n, t(o))
                },
                resize: function(e, n) {
                    i._trigger("resize", e, t(n))
                },
                stop: function(o, a) {
                    n.height = e(this).height(), n.width = e(this).width(), e(this).removeClass("ui-dialog-resizing"), i._unblockFrames(), i._trigger("resizeStop", o, t(a))
                }
            }).css("position", a)
        },
        _minHeight: function() {
            var e = this.options;
            return "auto" === e.height ? e.minHeight : Math.min(e.minHeight, e.height)
        },
        _position: function() {
            var e = this.uiDialog.is(":visible");
            e || this.uiDialog.show(), this.uiDialog.position(this.options.position), e || this.uiDialog.hide()
        },
        _setOptions: function(n) {
            var o = this,
                a = !1,
                s = {};
            e.each(n, function(e, n) {
                o._setOption(e, n), e in t && (a = !0), e in i && (s[e] = n)
            }), a && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", s)
        },
        _setOption: function(e, t) {
            var i,
                n,
                o = this.uiDialog;
            "dialogClass" === e && o.removeClass(this.options.dialogClass).addClass(t), "disabled" !== e && (this._super(e, t), "appendTo" === e && this.uiDialog.appendTo(this._appendTo()), "buttons" === e && this._createButtons(), "closeText" === e && this.uiDialogTitlebarClose.button({
                label: "" + t
            }), "draggable" === e && (i = o.is(":data(ui-draggable)"), i && !t && o.draggable("destroy"), !i && t && this._makeDraggable()), "position" === e && this._position(), "resizable" === e && (n = o.is(":data(ui-resizable)"), n && !t && o.resizable("destroy"), n && "string" == typeof t && o.resizable("option", "handles", t), n || t === !1 || this._makeResizable()), "title" === e && this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))
        },
        _size: function() {
            var e,
                t,
                i,
                n = this.options;
            this.element.show().css({
                width: "auto",
                minHeight: 0,
                maxHeight: "none",
                height: 0
            }), n.minWidth > n.width && (n.width = n.minWidth), e = this.uiDialog.css({
                height: "auto",
                width: n.width
            }).outerHeight(), t = Math.max(0, n.minHeight - e), i = "number" == typeof n.maxHeight ? Math.max(0, n.maxHeight - e) : "none", "auto" === n.height ? this.element.css({
                minHeight: t,
                maxHeight: i,
                height: "auto"
            }) : this.element.height(Math.max(0, n.height - e)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight())
        },
        _blockFrames: function() {
            this.iframeBlocks = this.document.find("iframe").map(function() {
                var t = e(this);
                return e("<div>").css({
                    position: "absolute",
                    width: t.outerWidth(),
                    height: t.outerHeight()
                }).appendTo(t.parent()).offset(t.offset())[0]
            })
        },
        _unblockFrames: function() {
            this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
        },
        _allowInteraction: function(t) {
            return !!e(t.target).closest(".ui-dialog").length || !!e(t.target).closest(".ui-datepicker").length
        },
        _createOverlay: function() {
            if (this.options.modal) {
                var t = this,
                    i = this.widgetFullName;
                e.ui.dialog.overlayInstances || this._delay(function() {
                    e.ui.dialog.overlayInstances && this.document.bind("focusin.dialog", function(n) {
                        t._allowInteraction(n) || (n.preventDefault(), e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())
                    })
                }), this.overlay = e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()), this._on(this.overlay, {
                    mousedown: "_keepFocus"
                }), e.ui.dialog.overlayInstances++
            }
        },
        _destroyOverlay: function() {
            this.options.modal && this.overlay && (e.ui.dialog.overlayInstances--, e.ui.dialog.overlayInstances || this.document.unbind("focusin.dialog"), this.overlay.remove(), this.overlay = null)
        }
    }), e.ui.dialog.overlayInstances = 0, e.uiBackCompat !== !1 && e.widget("ui.dialog", e.ui.dialog, {
        _position: function() {
            var t,
                i = this.options.position,
                n = [],
                o = [0, 0];
            i ? (("string" == typeof i || "object" == typeof i && "0" in i) && (n = i.split ? i.split(" ") : [i[0], i[1]], 1 === n.length && (n[1] = n[0]), e.each(["left", "top"], function(e, t) {
                +n[e] === n[e] && (o[e] = n[e], n[e] = t)
            }), i = {
                my: n[0] + (0 > o[0] ? o[0] : "+" + o[0]) + " " + n[1] + (0 > o[1] ? o[1] : "+" + o[1]),
                at: n.join(" ")
            }), i = e.extend({}, e.ui.dialog.prototype.options.position, i)) : i = e.ui.dialog.prototype.options.position, t = this.uiDialog.is(":visible"), t || this.uiDialog.show(), this.uiDialog.position(i), t || this.uiDialog.hide()
        }
    })
}(jQuery), function(e) {
    var t = 5;
    e.widget("ui.slider", e.ui.mouse, {
        version: "1.10.3",
        widgetEventPrefix: "slide",
        options: {
            animate: !1,
            distance: 0,
            max: 100,
            min: 0,
            orientation: "horizontal",
            range: !1,
            step: 1,
            value: 0,
            values: null,
            change: null,
            slide: null,
            start: null,
            stop: null
        },
        _create: function() {
            this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all"), this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1
        },
        _refresh: function() {
            this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue()
        },
        _createHandles: function() {
            var t,
                i,
                n = this.options,
                o = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),
                a = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
                s = [];
            for (i = n.values && n.values.length || 1, o.length > i && (o.slice(i).remove(), o = o.slice(0, i)), t = o.length; i > t; t++)
                s.push(a);
            this.handles = o.add(e(s.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), this.handles.each(function(t) {
                e(this).data("ui-slider-handle-index", t)
            })
        },
        _createRange: function() {
            var t = this.options,
                i = "";
            t.range ? (t.range === !0 && (t.values ? t.values.length && 2 !== t.values.length ? t.values = [t.values[0], t.values[0]] : e.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                left: "",
                bottom: ""
            }) : (this.range = e("<div></div>").appendTo(this.element), i = "ui-slider-range ui-widget-header ui-corner-all"), this.range.addClass(i + ("min" === t.range || "max" === t.range ? " ui-slider-range-" + t.range : ""))) : this.range = e([])
        },
        _setupEvents: function() {
            var e = this.handles.add(this.range).filter("a");
            this._off(e), this._on(e, this._handleEvents), this._hoverable(e), this._focusable(e)
        },
        _destroy: function() {
            this.handles.remove(), this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), this._mouseDestroy()
        },
        _mouseCapture: function(t) {
            var i,
                n,
                o,
                a,
                s,
                r,
                l,
                c,
                d = this,
                u = this.options;
            return !u.disabled && (this.elementSize = {
                    width: this.element.outerWidth(),
                    height: this.element.outerHeight()
                }, this.elementOffset = this.element.offset(), i = {
                    x: t.pageX,
                    y: t.pageY
                }, n = this._normValueFromMouse(i), o = this._valueMax() - this._valueMin() + 1, this.handles.each(function(t) {
                    var i = Math.abs(n - d.values(t));
                    (o > i || o === i && (t === d._lastChangedValue || d.values(t) === u.min)) && (o = i, a = e(this), s = t)
                }), r = this._start(t, s), r !== !1 && (this._mouseSliding = !0, this._handleIndex = s, a.addClass("ui-state-active").focus(), l = a.offset(), c = !e(t.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = c ? {
                    left: 0,
                    top: 0
                } : {
                    left: t.pageX - l.left - a.width() / 2,
                    top: t.pageY - l.top - a.height() / 2 - (parseInt(a.css("borderTopWidth"), 10) || 0) - (parseInt(a.css("borderBottomWidth"), 10) || 0) + (parseInt(a.css("marginTop"), 10) || 0)
                }, this.handles.hasClass("ui-state-hover") || this._slide(t, s, n), this._animateOff = !0, !0))
        },
        _mouseStart: function() {
            return !0
        },
        _mouseDrag: function(e) {
            var t = {
                    x: e.pageX,
                    y: e.pageY
                },
                i = this._normValueFromMouse(t);
            return this._slide(e, this._handleIndex, i), !1
        },
        _mouseStop: function(e) {
            return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1
        },
        _detectOrientation: function() {
            this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
        },
        _normValueFromMouse: function(e) {
            var t,
                i,
                n,
                o,
                a;
            return "horizontal" === this.orientation ? (t = this.elementSize.width, i = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, i = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), n = i / t, n > 1 && (n = 1), 0 > n && (n = 0), "vertical" === this.orientation && (n = 1 - n), o = this._valueMax() - this._valueMin(), a = this._valueMin() + n * o, this._trimAlignValue(a)
        },
        _start: function(e, t) {
            var i = {
                handle: this.handles[t],
                value: this.value()
            };
            return this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._trigger("start", e, i)
        },
        _slide: function(e, t, i) {
            var n,
                o,
                a;
            this.options.values && this.options.values.length ? (n = this.values(t ? 0 : 1), 2 === this.options.values.length && this.options.range === !0 && (0 === t && i > n || 1 === t && n > i) && (i = n), i !== this.values(t) && (o = this.values(), o[t] = i, a = this._trigger("slide", e, {
                handle: this.handles[t],
                value: i,
                values: o
            }), n = this.values(t ? 0 : 1), a !== !1 && this.values(t, i, !0))) : i !== this.value() && (a = this._trigger("slide", e, {
                handle: this.handles[t],
                value: i
            }), a !== !1 && this.value(i))
        },
        _stop: function(e, t) {
            var i = {
                handle: this.handles[t],
                value: this.value()
            };
            this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._trigger("stop", e, i)
        },
        _change: function(e, t) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {
                    handle: this.handles[t],
                    value: this.value()
                };
                this.options.values && this.options.values.length && (i.value = this.values(t), i.values = this.values()), this._lastChangedValue = t, this._trigger("change", e, i)
            }
        },
        value: function(e) {
            return arguments.length ? (this.options.value = this._trimAlignValue(e), this._refreshValue(), void this._change(null, 0)) : this._value()
        },
        values: function(t, i) {
            var n,
                o,
                a;
            if (arguments.length > 1)
                return this.options.values[t] = this._trimAlignValue(i), this._refreshValue(), void this._change(null, t);
            if (!arguments.length)
                return this._values();
            if (!e.isArray(arguments[0]))
                return this.options.values && this.options.values.length ? this._values(t) : this.value();
            for (n = this.options.values, o = arguments[0], a = 0; n.length > a; a += 1)
                n[a] = this._trimAlignValue(o[a]), this._change(null, a);
            this._refreshValue()
        },
        _setOption: function(t, i) {
            var n,
                o = 0;
            switch ("range" === t && this.options.range === !0 && ("min" === i ? (this.options.value = this._values(0), this.options.values = null) : "max" === i && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), e.isArray(this.options.values) && (o = this.options.values.length), e.Widget.prototype._setOption.apply(this, arguments), t) {
            case "orientation":
                this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), this._refreshValue();
                break;
            case "value":
                this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                break;
            case "values":
                for (this._animateOff = !0, this._refreshValue(), n = 0; o > n; n += 1)
                    this._change(null, n);
                this._animateOff = !1;
                break;
            case "min":
            case "max":
                this._animateOff = !0, this._refreshValue(), this._animateOff = !1;
                break;
            case "range":
                this._animateOff = !0, this._refresh(), this._animateOff = !1
            }
        },
        _value: function() {
            var e = this.options.value;
            return e = this._trimAlignValue(e)
        },
        _values: function(e) {
            var t,
                i,
                n;
            if (arguments.length)
                return t = this.options.values[e], t = this._trimAlignValue(t);
            if (this.options.values && this.options.values.length) {
                for (i = this.options.values.slice(), n = 0; i.length > n; n += 1)
                    i[n] = this._trimAlignValue(i[n]);
                return i
            }
            return []
        },
        _trimAlignValue: function(e) {
            if (this._valueMin() >= e)
                return this._valueMin();
            if (e >= this._valueMax())
                return this._valueMax();
            var t = this.options.step > 0 ? this.options.step : 1,
                i = (e - this._valueMin()) % t,
                n = e - i;
            return 2 * Math.abs(i) >= t && (n += i > 0 ? t : -t), parseFloat(n.toFixed(5))
        },
        _valueMin: function() {
            return this.options.min
        },
        _valueMax: function() {
            return this.options.max
        },
        _refreshValue: function() {
            var t,
                i,
                n,
                o,
                a,
                s = this.options.range,
                r = this.options,
                l = this,
                c = !this._animateOff && r.animate,
                d = {};
            this.options.values && this.options.values.length ? this.handles.each(function(n) {
                i = 100 * ((l.values(n) - l._valueMin()) / (l._valueMax() - l._valueMin())), d["horizontal" === l.orientation ? "left" : "bottom"] = i + "%", e(this).stop(1, 1)[c ? "animate" : "css"](d, r.animate), l.options.range === !0 && ("horizontal" === l.orientation ? (0 === n && l.range.stop(1, 1)[c ? "animate" : "css"]({
                    left: i + "%"
                }, r.animate), 1 === n && l.range[c ? "animate" : "css"]({
                    width: i - t + "%"
                }, {
                    queue: !1,
                    duration: r.animate
                })) : (0 === n && l.range.stop(1, 1)[c ? "animate" : "css"]({
                    bottom: i + "%"
                }, r.animate), 1 === n && l.range[c ? "animate" : "css"]({
                    height: i - t + "%"
                }, {
                    queue: !1,
                    duration: r.animate
                }))), t = i
            }) : (n = this.value(), o = this._valueMin(), a = this._valueMax(), i = a !== o ? 100 * ((n - o) / (a - o)) : 0, d["horizontal" === this.orientation ? "left" : "bottom"] = i + "%", this.handle.stop(1, 1)[c ? "animate" : "css"](d, r.animate), "min" === s && "horizontal" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                width: i + "%"
            }, r.animate), "max" === s && "horizontal" === this.orientation && this.range[c ? "animate" : "css"]({
                width: 100 - i + "%"
            }, {
                queue: !1,
                duration: r.animate
            }), "min" === s && "vertical" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                height: i + "%"
            }, r.animate), "max" === s && "vertical" === this.orientation && this.range[c ? "animate" : "css"]({
                height: 100 - i + "%"
            }, {
                queue: !1,
                duration: r.animate
            }))
        },
        _handleEvents: {
            keydown: function(i) {
                var n,
                    o,
                    a,
                    s,
                    r = e(i.target).data("ui-slider-handle-index");
                switch (i.keyCode) {
                case e.ui.keyCode.HOME:
                case e.ui.keyCode.END:
                case e.ui.keyCode.PAGE_UP:
                case e.ui.keyCode.PAGE_DOWN:
                case e.ui.keyCode.UP:
                case e.ui.keyCode.RIGHT:
                case e.ui.keyCode.DOWN:
                case e.ui.keyCode.LEFT:
                    if (i.preventDefault(), !this._keySliding && (this._keySliding = !0, e(i.target).addClass("ui-state-active"), n = this._start(i, r), n === !1))
                        return
                }
                switch (s = this.options.step, o = a = this.options.values && this.options.values.length ? this.values(r) : this.value(), i.keyCode) {
                case e.ui.keyCode.HOME:
                    a = this._valueMin();
                    break;
                case e.ui.keyCode.END:
                    a = this._valueMax();
                    break;
                case e.ui.keyCode.PAGE_UP:
                    a = this._trimAlignValue(o + (this._valueMax() - this._valueMin()) / t);
                    break;
                case e.ui.keyCode.PAGE_DOWN:
                    a = this._trimAlignValue(o - (this._valueMax() - this._valueMin()) / t);
                    break;
                case e.ui.keyCode.UP:
                case e.ui.keyCode.RIGHT:
                    if (o === this._valueMax())
                        return;
                    a = this._trimAlignValue(o + s);
                    break;
                case e.ui.keyCode.DOWN:
                case e.ui.keyCode.LEFT:
                    if (o === this._valueMin())
                        return;
                    a = this._trimAlignValue(o - s)
                }
                this._slide(i, r, a)
            },
            click: function(e) {
                e.preventDefault()
            },
            keyup: function(t) {
                var i = e(t.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1, this._stop(t, i), this._change(t, i), e(t.target).removeClass("ui-state-active"))
            }
        }
    })
}(jQuery), function(e, t) {
    function i() {
        return ++o
    }
    function n(e) {
        return e.hash.length > 1 && decodeURIComponent(e.href.replace(a, "")) === decodeURIComponent(location.href.replace(a, ""))
    }
    var o = 0,
        a = /#.*$/;
    e.widget("ui.tabs", {
        version: "1.10.3",
        delay: 300,
        options: {
            active: null,
            collapsible: !1,
            event: "click",
            heightStyle: "content",
            hide: null,
            show: null,
            activate: null,
            beforeActivate: null,
            beforeLoad: null,
            load: null
        },
        _create: function() {
            var t = this,
                i = this.options;
            this.running = !1, this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", i.collapsible).delegate(".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function(t) {
                e(this).is(".ui-state-disabled") && t.preventDefault()
            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                e(this).closest("li").is(".ui-state-disabled") && this.blur()
            }), this._processTabs(), i.active = this._initialActive(), e.isArray(i.disabled) && (i.disabled = e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"), function(e) {
                return t.tabs.index(e)
            }))).sort()), this.active = this.options.active !== !1 && this.anchors.length ? this._findActive(i.active) : e(), this._refresh(), this.active.length && this.load(i.active)
        },
        _initialActive: function() {
            var i = this.options.active,
                n = this.options.collapsible,
                o = location.hash.substring(1);
            return null === i && (o && this.tabs.each(function(n, a) {
                return e(a).attr("aria-controls") === o ? (i = n, !1) : t
            }), null === i && (i = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), (null === i || -1 === i) && (i = !!this.tabs.length && 0)), i !== !1 && (i = this.tabs.index(this.tabs.eq(i)), -1 === i && (i = !n && 0)), !n && i === !1 && this.anchors.length && (i = 0), i
        },
        _getCreateEventData: function() {
            return {
                tab: this.active,
                panel: this.active.length ? this._getPanelForTab(this.active) : e()
            }
        },
        _tabKeydown: function(i) {
            var n = e(this.document[0].activeElement).closest("li"),
                o = this.tabs.index(n),
                a = !0;
            if (!this._handlePageNav(i)) {
                switch (i.keyCode) {
                case e.ui.keyCode.RIGHT:
                case e.ui.keyCode.DOWN:
                    o++;
                    break;
                case e.ui.keyCode.UP:
                case e.ui.keyCode.LEFT:
                    a = !1, o--;
                    break;
                case e.ui.keyCode.END:
                    o = this.anchors.length - 1;
                    break;
                case e.ui.keyCode.HOME:
                    o = 0;
                    break;
                case e.ui.keyCode.SPACE:
                    return i.preventDefault(), clearTimeout(this.activating), this._activate(o), t;
                case e.ui.keyCode.ENTER:
                    return i.preventDefault(), clearTimeout(this.activating), this._activate(o !== this.options.active && o), t;
                default:
                    return
                }
                i.preventDefault(), clearTimeout(this.activating), o = this._focusNextTab(o, a), i.ctrlKey || (n.attr("aria-selected", "false"), this.tabs.eq(o).attr("aria-selected", "true"), this.activating = this._delay(function() {
                    this.option("active", o)
                }, this.delay))
            }
        },
        _panelKeydown: function(t) {
            this._handlePageNav(t) || t.ctrlKey && t.keyCode === e.ui.keyCode.UP && (t.preventDefault(), this.active.focus())
        },
        _handlePageNav: function(i) {
            return i.altKey && i.keyCode === e.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), !0) : i.altKey && i.keyCode === e.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), !0) : t
        },
        _findNextTab: function(t, i) {
            function n() {
                return t > o && (t = 0), 0 > t && (t = o), t
            }
            for (var o = this.tabs.length - 1; -1 !== e.inArray(n(), this.options.disabled);)
                t = i ? t + 1 : t - 1;
            return t
        },
        _focusNextTab: function(e, t) {
            return e = this._findNextTab(e, t), this.tabs.eq(e).focus(), e
        },
        _setOption: function(e, i) {
            return "active" === e ? (this._activate(i), t) : "disabled" === e ? (this._setupDisabled(i), t) : (this._super(e, i), "collapsible" === e && (this.element.toggleClass("ui-tabs-collapsible", i), i || this.options.active !== !1 || this._activate(0)), "event" === e && this._setupEvents(i), "heightStyle" === e && this._setupHeightStyle(i), t)
        },
        _tabId: function(e) {
            return e.attr("aria-controls") || "ui-tabs-" + i()
        },
        _sanitizeSelector: function(e) {
            return e ? e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : ""
        },
        refresh: function() {
            var t = this.options,
                i = this.tablist.children(":has(a[href])");
            t.disabled = e.map(i.filter(".ui-state-disabled"), function(e) {
                return i.index(e)
            }), this._processTabs(), t.active !== !1 && this.anchors.length ? this.active.length && !e.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1, this.active = e()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active) : (t.active = !1, this.active = e()), this._refresh()
        },
        _refresh: function() {
            this._setupDisabled(this.options.disabled), this._setupEvents(this.options.event), this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({
                "aria-selected": "false",
                tabIndex: -1
            }), this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            }), this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({
                "aria-selected": "true",
                tabIndex: 0
            }), this._getPanelForTab(this.active).show().attr({
                "aria-expanded": "true",
                "aria-hidden": "false"
            })) : this.tabs.eq(0).attr("tabIndex", 0);
        },
        _processTabs: function() {
            var t = this;
            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist"), this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({
                role: "tab",
                tabIndex: -1
            }), this.anchors = this.tabs.map(function() {
                return e("a", this)[0]
            }).addClass("ui-tabs-anchor").attr({
                role: "presentation",
                tabIndex: -1
            }), this.panels = e(), this.anchors.each(function(i, o) {
                var a,
                    s,
                    r,
                    l = e(o).uniqueId().attr("id"),
                    c = e(o).closest("li"),
                    d = c.attr("aria-controls");
                n(o) ? (a = o.hash, s = t.element.find(t._sanitizeSelector(a))) : (r = t._tabId(c), a = "#" + r, s = t.element.find(a), s.length || (s = t._createPanel(r), s.insertAfter(t.panels[i - 1] || t.tablist)), s.attr("aria-live", "polite")), s.length && (t.panels = t.panels.add(s)), d && c.data("ui-tabs-aria-controls", d), c.attr({
                    "aria-controls": a.substring(1),
                    "aria-labelledby": l
                }), s.attr("aria-labelledby", l)
            }), this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel")
        },
        _getList: function() {
            return this.element.find("ol,ul").eq(0)
        },
        _createPanel: function(t) {
            return e("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0)
        },
        _setupDisabled: function(t) {
            e.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1);
            for (var i, n = 0; i = this.tabs[n]; n++)
                t === !0 || -1 !== e.inArray(n, t) ? e(i).addClass("ui-state-disabled").attr("aria-disabled", "true") : e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");
            this.options.disabled = t
        },
        _setupEvents: function(t) {
            var i = {
                click: function(e) {
                    e.preventDefault()
                }
            };
            t && e.each(t.split(" "), function(e, t) {
                i[t] = "_eventHandler"
            }), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(this.anchors, i), this._on(this.tabs, {
                keydown: "_tabKeydown"
            }), this._on(this.panels, {
                keydown: "_panelKeydown"
            }), this._focusable(this.tabs), this._hoverable(this.tabs)
        },
        _setupHeightStyle: function(t) {
            var i,
                n = this.element.parent();
            "fill" === t ? (i = n.height(), i -= this.element.outerHeight() - this.element.height(), this.element.siblings(":visible").each(function() {
                var t = e(this),
                    n = t.css("position");
                "absolute" !== n && "fixed" !== n && (i -= t.outerHeight(!0))
            }), this.element.children().not(this.panels).each(function() {
                i -= e(this).outerHeight(!0)
            }), this.panels.each(function() {
                e(this).height(Math.max(0, i - e(this).innerHeight() + e(this).height()))
            }).css("overflow", "auto")) : "auto" === t && (i = 0, this.panels.each(function() {
                i = Math.max(i, e(this).height("").height())
            }).height(i))
        },
        _eventHandler: function(t) {
            var i = this.options,
                n = this.active,
                o = e(t.currentTarget),
                a = o.closest("li"),
                s = a[0] === n[0],
                r = s && i.collapsible,
                l = r ? e() : this._getPanelForTab(a),
                c = n.length ? this._getPanelForTab(n) : e(),
                d = {
                    oldTab: n,
                    oldPanel: c,
                    newTab: r ? e() : a,
                    newPanel: l
                };
            t.preventDefault(), a.hasClass("ui-state-disabled") || a.hasClass("ui-tabs-loading") || this.running || s && !i.collapsible || this._trigger("beforeActivate", t, d) === !1 || (i.active = !r && this.tabs.index(a), this.active = s ? e() : a, this.xhr && this.xhr.abort(), c.length || l.length || e.error("jQuery UI Tabs: Mismatching fragment identifier."), l.length && this.load(this.tabs.index(a), t), this._toggle(t, d))
        },
        _toggle: function(t, i) {
            function n() {
                a.running = !1, a._trigger("activate", t, i)
            }
            function o() {
                i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), s.length && a.options.show ? a._show(s, a.options.show, n) : (s.show(), n())
            }
            var a = this,
                s = i.newPanel,
                r = i.oldPanel;
            this.running = !0, r.length && this.options.hide ? this._hide(r, this.options.hide, function() {
                i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), o()
            }) : (i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), r.hide(), o()), r.attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            }), i.oldTab.attr("aria-selected", "false"), s.length && r.length ? i.oldTab.attr("tabIndex", -1) : s.length && this.tabs.filter(function() {
                return 0 === e(this).attr("tabIndex")
            }).attr("tabIndex", -1), s.attr({
                "aria-expanded": "true",
                "aria-hidden": "false"
            }), i.newTab.attr({
                "aria-selected": "true",
                tabIndex: 0
            })
        },
        _activate: function(t) {
            var i,
                n = this._findActive(t);
            n[0] !== this.active[0] && (n.length || (n = this.active), i = n.find(".ui-tabs-anchor")[0], this._eventHandler({
                target: i,
                currentTarget: i,
                preventDefault: e.noop
            }))
        },
        _findActive: function(t) {
            return t === !1 ? e() : this.tabs.eq(t)
        },
        _getIndex: function(e) {
            return "string" == typeof e && (e = this.anchors.index(this.anchors.filter("[href$='" + e + "']"))), e
        },
        _destroy: function() {
            this.xhr && this.xhr.abort(), this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"), this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"), this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(), this.tabs.add(this.panels).each(function() {
                e.data(this, "ui-tabs-destroy") ? e(this).remove() : e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")
            }), this.tabs.each(function() {
                var t = e(this),
                    i = t.data("ui-tabs-aria-controls");
                i ? t.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls")
            }), this.panels.show(), "content" !== this.options.heightStyle && this.panels.css("height", "")
        },
        enable: function(i) {
            var n = this.options.disabled;
            n !== !1 && (i === t ? n = !1 : (i = this._getIndex(i), n = e.isArray(n) ? e.map(n, function(e) {
                return e !== i ? e : null
            }) : e.map(this.tabs, function(e, t) {
                return t !== i ? t : null
            })), this._setupDisabled(n))
        },
        disable: function(i) {
            var n = this.options.disabled;
            if (n !== !0) {
                if (i === t)
                    n = !0;
                else {
                    if (i = this._getIndex(i), -1 !== e.inArray(i, n))
                        return;
                    n = e.isArray(n) ? e.merge([i], n).sort() : [i]
                }
                this._setupDisabled(n)
            }
        },
        load: function(t, i) {
            t = this._getIndex(t);
            var o = this,
                a = this.tabs.eq(t),
                s = a.find(".ui-tabs-anchor"),
                r = this._getPanelForTab(a),
                l = {
                    tab: a,
                    panel: r
                };
            n(s[0]) || (this.xhr = e.ajax(this._ajaxSettings(s, i, l)), this.xhr && "canceled" !== this.xhr.statusText && (a.addClass("ui-tabs-loading"), r.attr("aria-busy", "true"), this.xhr.success(function(e) {
                setTimeout(function() {
                    r.html(e), o._trigger("load", i, l)
                }, 1)
            }).complete(function(e, t) {
                setTimeout(function() {
                    "abort" === t && o.panels.stop(!1, !0), a.removeClass("ui-tabs-loading"), r.removeAttr("aria-busy"), e === o.xhr && delete o.xhr
                }, 1)
            })))
        },
        _ajaxSettings: function(t, i, n) {
            var o = this;
            return {
                url: t.attr("href"),
                beforeSend: function(t, a) {
                    return o._trigger("beforeLoad", i, e.extend({
                        jqXHR: t,
                        ajaxSettings: a
                    }, n))
                }
            }
        },
        _getPanelForTab: function(t) {
            var i = e(t).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + i))
        }
    })
}(jQuery), function(e) {
    function t(t, i) {
        var n = (t.attr("aria-describedby") || "").split(/\s+/);
        n.push(i), t.data("ui-tooltip-id", i).attr("aria-describedby", e.trim(n.join(" ")))
    }
    function i(t) {
        var i = t.data("ui-tooltip-id"),
            n = (t.attr("aria-describedby") || "").split(/\s+/),
            o = e.inArray(i, n);
        -1 !== o && n.splice(o, 1), t.removeData("ui-tooltip-id"), n = e.trim(n.join(" ")), n ? t.attr("aria-describedby", n) : t.removeAttr("aria-describedby")
    }
    var n = 0;
    e.widget("ui.tooltip", {
        version: "1.10.3",
        options: {
            content: function() {
                var t = e(this).attr("title") || "";
                return e("<a>").text(t).html()
            },
            hide: !0,
            items: "[title]:not([disabled])",
            position: {
                my: "left top+15",
                at: "left bottom",
                collision: "flipfit flip"
            },
            show: !0,
            tooltipClass: null,
            track: !1,
            close: null,
            open: null
        },
        _create: function() {
            this._on({
                mouseover: "open",
                focusin: "open"
            }), this.tooltips = {}, this.parents = {}, this.options.disabled && this._disable()
        },
        _setOption: function(t, i) {
            var n = this;
            return "disabled" === t ? (this[i ? "_disable" : "_enable"](), void (this.options[t] = i)) : (this._super(t, i), void ("content" === t && e.each(this.tooltips, function(e, t) {
                n._updateContent(t)
            })))
        },
        _disable: function() {
            var t = this;
            e.each(this.tooltips, function(i, n) {
                var o = e.Event("blur");
                o.target = o.currentTarget = n[0], t.close(o, !0)
            }), this.element.find(this.options.items).addBack().each(function() {
                var t = e(this);
                t.is("[title]") && t.data("ui-tooltip-title", t.attr("title")).attr("title", "")
            })
        },
        _enable: function() {
            this.element.find(this.options.items).addBack().each(function() {
                var t = e(this);
                t.data("ui-tooltip-title") && t.attr("title", t.data("ui-tooltip-title"))
            })
        },
        open: function(t) {
            var i = this,
                n = e(t ? t.target : this.element).closest(this.options.items);
            n.length && !n.data("ui-tooltip-id") && (n.attr("title") && n.data("ui-tooltip-title", n.attr("title")), n.data("ui-tooltip-open", !0), t && "mouseover" === t.type && n.parents().each(function() {
                var t,
                    n = e(this);
                n.data("ui-tooltip-open") && (t = e.Event("blur"), t.target = t.currentTarget = this, i.close(t, !0)), n.attr("title") && (n.uniqueId(), i.parents[this.id] = {
                    element: this,
                    title: n.attr("title")
                }, n.attr("title", ""))
            }), this._updateContent(n, t))
        },
        _updateContent: function(e, t) {
            var i,
                n = this.options.content,
                o = this,
                a = t ? t.type : null;
            return "string" == typeof n ? this._open(t, e, n) : (i = n.call(e[0], function(i) {
                e.data("ui-tooltip-open") && o._delay(function() {
                    t && (t.type = a), this._open(t, e, i)
                })
            }), void (i && this._open(t, e, i)))
        },
        _open: function(i, n, o) {
            function a(e) {
                c.of = e, s.is(":hidden") || s.position(c)
            }
            var s,
                r,
                l,
                c = e.extend({}, this.options.position);
            if (o) {
                if (s = this._find(n), s.length)
                    return void s.find(".ui-tooltip-content").html(o);
                n.is("[title]") && (i && "mouseover" === i.type ? n.attr("title", "") : n.removeAttr("title")), s = this._tooltip(n), t(n, s.attr("id")), s.find(".ui-tooltip-content").html(o), this.options.track && i && /^mouse/.test(i.type) ? (this._on(this.document, {
                    mousemove: a
                }), a(i)) : s.position(e.extend({
                    of: n
                }, this.options.position)), s.hide(), this._show(s, this.options.show), this.options.show && this.options.show.delay && (l = this.delayedShow = setInterval(function() {
                    s.is(":visible") && (a(c.of), clearInterval(l))
                }, e.fx.interval)), this._trigger("open", i, {
                    tooltip: s
                }), r = {
                    keyup: function(t) {
                        if (t.keyCode === e.ui.keyCode.ESCAPE) {
                            var i = e.Event(t);
                            i.currentTarget = n[0], this.close(i, !0)
                        }
                    },
                    remove: function() {
                        this._removeTooltip(s)
                    }
                }, i && "mouseover" !== i.type || (r.mouseleave = "close"), i && "focusin" !== i.type || (r.focusout = "close"), this._on(!0, n, r)
            }
        },
        close: function(t) {
            var n = this,
                o = e(t ? t.currentTarget : this.element),
                a = this._find(o);
            this.closing || (clearInterval(this.delayedShow), o.data("ui-tooltip-title") && o.attr("title", o.data("ui-tooltip-title")), i(o), a.stop(!0), this._hide(a, this.options.hide, function() {
                n._removeTooltip(e(this))
            }), o.removeData("ui-tooltip-open"), this._off(o, "mouseleave focusout keyup"), o[0] !== this.element[0] && this._off(o, "remove"), this._off(this.document, "mousemove"), t && "mouseleave" === t.type && e.each(this.parents, function(t, i) {
                e(i.element).attr("title", i.title), delete n.parents[t]
            }), this.closing = !0, this._trigger("close", t, {
                tooltip: a
            }), this.closing = !1)
        },
        _tooltip: function(t) {
            var i = "ui-tooltip-" + n++,
                o = e("<div>").attr({
                    id: i,
                    role: "tooltip"
                }).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || ""));
            return e("<div>").addClass("ui-tooltip-content").appendTo(o), o.appendTo(this.document[0].body), this.tooltips[i] = t, o
        },
        _find: function(t) {
            var i = t.data("ui-tooltip-id");
            return i ? e("#" + i) : e()
        },
        _removeTooltip: function(e) {
            e.remove(), delete this.tooltips[e.attr("id")]
        },
        _destroy: function() {
            var t = this;
            e.each(this.tooltips, function(i, n) {
                var o = e.Event("blur");
                o.target = o.currentTarget = n[0], t.close(o, !0), e("#" + i).remove(), n.data("ui-tooltip-title") && (n.attr("title", n.data("ui-tooltip-title")), n.removeData("ui-tooltip-title"))
            })
        }
    })
}(jQuery), !function() {
    var e,
        t,
        i,
        n,
        o,
        a = {}.hasOwnProperty,
        s = function(e, t) {
            function i() {
                this.constructor = e
            }
            for (var n in t)
                a.call(t, n) && (e[n] = t[n]);
            return i.prototype = t.prototype, e.prototype = new i, e.__super__ = t.prototype, e
        };
    n = function() {
        function e() {
            this.options_index = 0, this.parsed = []
        }
        return e.prototype.add_node = function(e) {
            return "OPTGROUP" === e.nodeName.toUpperCase() ? this.add_group(e) : this.add_option(e)
        }, e.prototype.add_group = function(e) {
            var t,
                i,
                n,
                o,
                a,
                s;
            for (t = this.parsed.length, this.parsed.push({
                array_index: t,
                group: !0,
                label: this.escapeExpression(e.label),
                children: 0,
                disabled: e.disabled
            }), a = e.childNodes, s = [], n = 0, o = a.length; o > n; n++)
                i = a[n], s.push(this.add_option(i, t, e.disabled));
            return s
        }, e.prototype.add_option = function(e, t, i) {
            return "OPTION" === e.nodeName.toUpperCase() ? ("" !== e.text ? (null != t && (this.parsed[t].children += 1), this.parsed.push({
                array_index: this.parsed.length,
                options_index: this.options_index,
                value: e.value,
                text: e.text,
                html: e.innerHTML,
                selected: e.selected,
                disabled: i === !0 ? i : e.disabled,
                group_array_index: t,
                classes: e.className,
                style: e.style.cssText
            })) : this.parsed.push({
                array_index: this.parsed.length,
                options_index: this.options_index,
                empty: !0
            }), this.options_index += 1) : void 0
        }, e.prototype.escapeExpression = function(e) {
            var t,
                i;
            return null == e || e === !1 ? "" : /[\&\<\>\"\'\`]/.test(e) ? (t = {
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#x27;",
                "`": "&#x60;"
            }, i = /&(?!\w+;)|[\<\>\"\'\`]/g, e.replace(i, function(e) {
                return t[e] || "&amp;"
            })) : e
        }, e
    }(), n.select_to_array = function(e) {
        var t,
            i,
            o,
            a,
            s;
        for (i = new n, s = e.childNodes, o = 0, a = s.length; a > o; o++)
            t = s[o], i.add_node(t);
        return i.parsed
    }, t = function() {
        function e(t, i) {
            this.form_field = t, this.options = null != i ? i : {}, e.browser_is_supported() && (this.is_multiple = this.form_field.multiple, this.set_default_text(), this.set_default_values(), this.setup(), this.set_up_html(), this.register_observers())
        }
        return e.prototype.set_default_values = function() {
            var e = this;
            return this.click_test_action = function(t) {
                return e.test_active_click(t)
            }, this.activate_action = function(t) {
                return e.activate_field(t)
            }, this.active_field = !1, this.mouse_on_container = !1, this.results_showing = !1, this.result_highlighted = null, this.allow_single_deselect = null != this.options.allow_single_deselect && null != this.form_field.options[0] && "" === this.form_field.options[0].text && this.options.allow_single_deselect, this.disable_search_threshold = this.options.disable_search_threshold || 0, this.disable_search = this.options.disable_search || !1, this.enable_split_word_search = null == this.options.enable_split_word_search || this.options.enable_split_word_search, this.group_search = null == this.options.group_search || this.options.group_search, this.search_contains = this.options.search_contains || !1, this.single_backstroke_delete = null == this.options.single_backstroke_delete || this.options.single_backstroke_delete, this.max_selected_options = this.options.max_selected_options || 1 / 0, this.inherit_select_classes = this.options.inherit_select_classes || !1, this.display_selected_options = null == this.options.display_selected_options || this.options.display_selected_options, this.display_disabled_options = null == this.options.display_disabled_options || this.options.display_disabled_options
        }, e.prototype.set_default_text = function() {
            return this.default_text = this.form_field.getAttribute("data-placeholder") ? this.form_field.getAttribute("data-placeholder") : this.is_multiple ? this.options.placeholder_text_multiple || this.options.placeholder_text || e.default_multiple_text : this.options.placeholder_text_single || this.options.placeholder_text || e.default_single_text, this.results_none_found = this.form_field.getAttribute("data-no_results_text") || this.options.no_results_text || e.default_no_result_text
        }, e.prototype.mouse_enter = function() {
            return this.mouse_on_container = !0
        }, e.prototype.mouse_leave = function() {
            return this.mouse_on_container = !1
        }, e.prototype.input_focus = function() {
            var e = this;
            if (this.is_multiple) {
                if (!this.active_field)
                    return setTimeout(function() {
                        return e.container_mousedown()
                    }, 50)
            } else if (!this.active_field)
                return this.activate_field()
        }, e.prototype.input_blur = function() {
            var e = this;
            return this.mouse_on_container ? void 0 : (this.active_field = !1, setTimeout(function() {
                return e.blur_test()
            }, 100))
        }, e.prototype.results_option_build = function(e) {
            var t,
                i,
                n,
                o,
                a;
            for (t = "", a = this.results_data, n = 0, o = a.length; o > n; n++)
                i = a[n], t += i.group ? this.result_add_group(i) : this.result_add_option(i), (null != e ? e.first : void 0) && (i.selected && this.is_multiple ? this.choice_build(i) : i.selected && !this.is_multiple && this.single_set_selected_text(i.text));
            return t
        }, e.prototype.result_add_option = function(e) {
            var t,
                i;
            return e.search_match && this.include_option_in_results(e) ? (t = [], e.disabled || e.selected && this.is_multiple || t.push("active-result"), !e.disabled || e.selected && this.is_multiple || t.push("disabled-result"), e.selected && t.push("result-selected"), null != e.group_array_index && t.push("group-option"), "" !== e.classes && t.push(e.classes), i = document.createElement("li"), i.className = t.join(" "), i.style.cssText = e.style, i.setAttribute("data-option-array-index", e.array_index), i.innerHTML = e.search_text, this.outerHTML(i)) : ""
        }, e.prototype.result_add_group = function(e) {
            var t;
            return (e.search_match || e.group_match) && e.active_options > 0 ? (t = document.createElement("li"), t.className = "group-result", t.innerHTML = e.search_text, this.outerHTML(t)) : ""
        }, e.prototype.results_update_field = function() {
            return this.set_default_text(), this.is_multiple || this.results_reset_cleanup(), this.result_clear_highlight(), this.results_build(), this.results_showing ? this.winnow_results() : void 0
        }, e.prototype.reset_single_select_options = function() {
            var e,
                t,
                i,
                n,
                o;
            for (n = this.results_data, o = [], t = 0, i = n.length; i > t; t++)
                e = n[t], e.selected ? o.push(e.selected = !1) : o.push(void 0);
            return o
        }, e.prototype.results_toggle = function() {
            return this.results_showing ? this.results_hide() : this.results_show()
        }, e.prototype.results_search = function() {
            return this.results_showing ? this.winnow_results() : this.results_show()
        }, e.prototype.winnow_results = function() {
            var e,
                t,
                i,
                n,
                o,
                a,
                s,
                r,
                l,
                c,
                d,
                u,
                h;
            for (this.no_results_clear(), o = 0, s = this.get_search_text(), e = s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), n = this.search_contains ? "" : "^", i = new RegExp(n + e, "i"), c = new RegExp(e, "i"), h = this.results_data, d = 0, u = h.length; u > d; d++)
                t = h[d], t.search_match = !1, a = null, this.include_option_in_results(t) && (t.group && (t.group_match = !1, t.active_options = 0), null != t.group_array_index && this.results_data[t.group_array_index] && (a = this.results_data[t.group_array_index], 0 === a.active_options && a.search_match && (o += 1), a.active_options += 1), (!t.group || this.group_search) && (t.search_text = t.group ? t.label : t.html, t.search_match = this.search_string_match(t.search_text, i), t.search_match && !t.group && (o += 1), t.search_match ? (s.length && (r = t.search_text.search(c), l = t.search_text.substr(0, r + s.length) + "</em>" + t.search_text.substr(r + s.length), t.search_text = l.substr(0, r) + "<em>" + l.substr(r)), null != a && (a.group_match = !0)) : null != t.group_array_index && this.results_data[t.group_array_index].search_match && (t.search_match = !0)));
            return this.result_clear_highlight(), 1 > o && s.length ? (this.update_results_content(""), this.no_results(s)) : (this.update_results_content(this.results_option_build()), this.winnow_results_set_highlight())
        }, e.prototype.search_string_match = function(e, t) {
            var i,
                n,
                o,
                a;
            if (t.test(e))
                return !0;
            if (this.enable_split_word_search && (e.indexOf(" ") >= 0 || 0 === e.indexOf("[")) && (n = e.replace(/\[|\]/g, "").split(" "), n.length))
                for (o = 0, a = n.length; a > o; o++)
                    if (i = n[o], t.test(i))
                        return !0
        }, e.prototype.choices_count = function() {
            var e,
                t,
                i,
                n;
            if (null != this.selected_option_count)
                return this.selected_option_count;
            for (this.selected_option_count = 0, n = this.form_field.options, t = 0, i = n.length; i > t; t++)
                e = n[t], e.selected && (this.selected_option_count += 1);
            return this.selected_option_count
        }, e.prototype.choices_click = function(e) {
            return e.preventDefault(), this.results_showing || this.is_disabled ? void 0 : this.results_show()
        }, e.prototype.keyup_checker = function(e) {
            var t,
                i;
            switch (t = null != (i = e.which) ? i : e.keyCode, this.search_field_scale(), t) {
            case 8:
                if (this.is_multiple && this.backstroke_length < 1 && this.choices_count() > 0)
                    return this.keydown_backstroke();
                if (!this.pending_backstroke)
                    return this.result_clear_highlight(), this.results_search();
                break;
            case 13:
                if (e.preventDefault(), this.results_showing)
                    return this.result_select(e);
                break;
            case 27:
                return this.results_showing && this.results_hide(), !0;
            case 9:
            case 38:
            case 40:
            case 16:
            case 91:
            case 17:
                break;
            default:
                return this.results_search()
            }
        }, e.prototype.clipboard_event_checker = function() {
            var e = this;
            return setTimeout(function() {
                return e.results_search()
            }, 50)
        }, e.prototype.container_width = function() {
            return null != this.options.width ? this.options.width : "" + this.form_field.offsetWidth + "px"
        }, e.prototype.include_option_in_results = function(e) {
            return !(this.is_multiple && !this.display_selected_options && e.selected) && (!(!this.display_disabled_options && e.disabled) && !e.empty)
        }, e.prototype.search_results_touchstart = function(e) {
            return this.touch_started = !0, this.search_results_mouseover(e)
        }, e.prototype.search_results_touchmove = function(e) {
            return this.touch_started = !1, this.search_results_mouseout(e)
        }, e.prototype.search_results_touchend = function(e) {
            return this.touch_started ? this.search_results_mouseup(e) : void 0
        }, e.prototype.outerHTML = function(e) {
            var t;
            return e.outerHTML ? e.outerHTML : (t = document.createElement("div"), t.appendChild(e), t.innerHTML)
        }, e.browser_is_supported = function() {
            return "Microsoft Internet Explorer" === window.navigator.appName ? document.documentMode >= 8 : !/iP(od|hone)/i.test(window.navigator.userAgent) && (!/Android/i.test(window.navigator.userAgent) || !/Mobile/i.test(window.navigator.userAgent))
        }, e.default_multiple_text = "Select Some Options", e.default_single_text = "Select an Option", e.default_no_result_text = "No results match", e
    }(), e = jQuery, e.fn.extend({
        chosen: function(n) {
            return t.browser_is_supported() ? this.each(function() {
                var t,
                    o;
                t = e(this), o = t.data("chosen"), "destroy" === n && o ? o.destroy() : o || t.data("chosen", new i(this, n))
            }) : this
        }
    }), i = function(t) {
        function i() {
            return o = i.__super__.constructor.apply(this, arguments)
        }
        return s(i, t), i.prototype.setup = function() {
            return this.form_field_jq = e(this.form_field), this.current_selectedIndex = this.form_field.selectedIndex, this.is_rtl = this.form_field_jq.hasClass("chosen-rtl")
        }, i.prototype.set_up_html = function() {
            var t,
                i;
            return t = ["chosen-container"], t.push("chosen-container-" + (this.is_multiple ? "multi" : "single")), this.inherit_select_classes && this.form_field.className && t.push(this.form_field.className), this.is_rtl && t.push("chosen-rtl"), i = {
                "class": t.join(" "),
                style: "width: " + this.container_width() + ";",
                title: this.form_field.title
            }, this.form_field.id.length && (i.id = this.form_field.id.replace(/[^\w]/g, "_") + "_chosen"), this.container = e("<div />", i), this.is_multiple ? this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="' + this.default_text + '" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>') : this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>' + this.default_text + '</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'), this.form_field_jq.hide().after(this.container), this.dropdown = this.container.find("div.chosen-drop").first(), this.search_field = this.container.find("input").first(), this.search_results = this.container.find("ul.chosen-results").first(), this.search_field_scale(), this.search_no_results = this.container.find("li.no-results").first(), this.is_multiple ? (this.search_choices = this.container.find("ul.chosen-choices").first(), this.search_container = this.container.find("li.search-field").first()) : (this.search_container = this.container.find("div.chosen-search").first(), this.selected_item = this.container.find(".chosen-single").first()), this.results_build(), this.set_tab_index(), this.set_label_behavior(), this.form_field_jq.trigger("chosen:ready", {
                chosen: this
            })
        }, i.prototype.register_observers = function() {
            var e = this;
            return this.container.bind("mousedown.chosen", function(t) {
                e.container_mousedown(t)
            }), this.container.bind("mouseup.chosen", function(t) {
                e.container_mouseup(t)
            }), this.container.bind("mouseenter.chosen", function(t) {
                e.mouse_enter(t)
            }), this.container.bind("mouseleave.chosen", function(t) {
                e.mouse_leave(t)
            }), this.search_results.bind("mouseup.chosen", function(t) {
                e.search_results_mouseup(t)
            }), this.search_results.bind("mouseover.chosen", function(t) {
                e.search_results_mouseover(t)
            }), this.search_results.bind("mouseout.chosen", function(t) {
                e.search_results_mouseout(t)
            }), this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen", function(t) {
                e.search_results_mousewheel(t)
            }), this.search_results.bind("touchstart.chosen", function(t) {
                e.search_results_touchstart(t)
            }), this.search_results.bind("touchmove.chosen", function(t) {
                e.search_results_touchmove(t)
            }), this.search_results.bind("touchend.chosen", function(t) {
                e.search_results_touchend(t)
            }), this.form_field_jq.bind("chosen:updated.chosen", function(t) {
                e.results_update_field(t)
            }), this.form_field_jq.bind("chosen:activate.chosen", function(t) {
                e.activate_field(t)
            }), this.form_field_jq.bind("chosen:open.chosen", function(t) {
                e.container_mousedown(t)
            }), this.form_field_jq.bind("chosen:close.chosen", function(t) {
                e.input_blur(t)
            }), this.search_field.bind("blur.chosen", function(t) {
                e.input_blur(t)
            }), this.search_field.bind("keyup.chosen", function(t) {
                e.keyup_checker(t)
            }), this.search_field.bind("keydown.chosen", function(t) {
                e.keydown_checker(t)
            }), this.search_field.bind("focus.chosen", function(t) {
                e.input_focus(t)
            }), this.search_field.bind("cut.chosen", function(t) {
                e.clipboard_event_checker(t)
            }), this.search_field.bind("paste.chosen", function(t) {
                e.clipboard_event_checker(t)
            }), this.is_multiple ? this.search_choices.bind("click.chosen", function(t) {
                e.choices_click(t)
            }) : this.container.bind("click.chosen", function(e) {
                e.preventDefault()
            })
        }, i.prototype.destroy = function() {
            return e(this.container[0].ownerDocument).unbind("click.chosen", this.click_test_action), this.search_field[0].tabIndex && (this.form_field_jq[0].tabIndex = this.search_field[0].tabIndex), this.container.remove(), this.form_field_jq.removeData("chosen"), this.form_field_jq.show()
        }, i.prototype.search_field_disabled = function() {
            return this.is_disabled = this.form_field_jq[0].disabled, this.is_disabled ? (this.container.addClass("chosen-disabled"), this.search_field[0].disabled = !0, this.is_multiple || this.selected_item.unbind("focus.chosen", this.activate_action), this.close_field()) : (this.container.removeClass("chosen-disabled"), this.search_field[0].disabled = !1, this.is_multiple ? void 0 : this.selected_item.bind("focus.chosen", this.activate_action))
        }, i.prototype.container_mousedown = function(t) {
            return this.is_disabled || (t && "mousedown" === t.type && !this.results_showing && t.preventDefault(), null != t && e(t.target).hasClass("search-choice-close")) ? void 0 : (this.active_field ? this.is_multiple || !t || e(t.target)[0] !== this.selected_item[0] && !e(t.target).parents("a.chosen-single").length || (t.preventDefault(), this.results_toggle()) : (this.is_multiple && this.search_field.val(""), e(this.container[0].ownerDocument).bind("click.chosen", this.click_test_action), this.results_show()), this.activate_field())
        }, i.prototype.container_mouseup = function(e) {
            return "ABBR" !== e.target.nodeName || this.is_disabled ? void 0 : this.results_reset(e)
        }, i.prototype.search_results_mousewheel = function(e) {
            var t;
            return e.originalEvent && (t = -e.originalEvent.wheelDelta || e.originalEvent.detail), null != t ? (e.preventDefault(), "DOMMouseScroll" === e.type && (t = 40 * t), this.search_results.scrollTop(t + this.search_results.scrollTop())) : void 0
        }, i.prototype.blur_test = function() {
            return !this.active_field && this.container.hasClass("chosen-container-active") ? this.close_field() : void 0
        }, i.prototype.close_field = function() {
            return e(this.container[0].ownerDocument).unbind("click.chosen", this.click_test_action), this.active_field = !1, this.results_hide(), this.container.removeClass("chosen-container-active"), this.clear_backstroke(), this.show_search_field_default(), this.search_field_scale()
        }, i.prototype.activate_field = function() {
            return this.container.addClass("chosen-container-active"), this.active_field = !0, this.search_field.val(this.search_field.val()), this.search_field.focus()
        }, i.prototype.test_active_click = function(t) {
            var i;
            return i = e(t.target).closest(".chosen-container"), i.length && this.container[0] === i[0] ? this.active_field = !0 : this.close_field()
        }, i.prototype.results_build = function() {
            return this.parsing = !0, this.selected_option_count = null, this.results_data = n.select_to_array(this.form_field), this.is_multiple ? this.search_choices.find("li.search-choice").remove() : this.is_multiple || (this.single_set_selected_text(), this.disable_search || this.form_field.options.length <= this.disable_search_threshold ? (this.search_field[0].readOnly = !0, this.container.addClass("chosen-container-single-nosearch")) : (this.search_field[0].readOnly = !1, this.container.removeClass("chosen-container-single-nosearch"))), this.update_results_content(this.results_option_build({
                first: !0
            })), this.search_field_disabled(), this.show_search_field_default(), this.search_field_scale(), this.parsing = !1
        }, i.prototype.result_do_highlight = function(e) {
            var t,
                i,
                n,
                o,
                a;
            if (e.length) {
                if (this.result_clear_highlight(), this.result_highlight = e, this.result_highlight.addClass("highlighted"), n = parseInt(this.search_results.css("maxHeight"), 10), a = this.search_results.scrollTop(), o = n + a, i = this.result_highlight.position().top + this.search_results.scrollTop(), t = i + this.result_highlight.outerHeight(), t >= o)
                    return this.search_results.scrollTop(t - n > 0 ? t - n : 0);
                if (a > i)
                    return this.search_results.scrollTop(i)
            }
        }, i.prototype.result_clear_highlight = function() {
            return this.result_highlight && this.result_highlight.removeClass("highlighted"), this.result_highlight = null
        }, i.prototype.results_show = function() {
            return this.is_multiple && this.max_selected_options <= this.choices_count() ? (this.form_field_jq.trigger("chosen:maxselected", {
                chosen: this
            }), !1) : (this.container.addClass("chosen-with-drop"), this.results_showing = !0, this.search_field.focus(), this.search_field.val(this.search_field.val()), this.winnow_results(), this.form_field_jq.trigger("chosen:showing_dropdown", {
                chosen: this
            }))
        }, i.prototype.update_results_content = function(e) {
            return this.search_results.html(e)
        }, i.prototype.results_hide = function() {
            return this.results_showing && (this.result_clear_highlight(), this.container.removeClass("chosen-with-drop"), this.form_field_jq.trigger("chosen:hiding_dropdown", {
                chosen: this
            })), this.results_showing = !1
        }, i.prototype.set_tab_index = function() {
            var e;
            return this.form_field.tabIndex ? (e = this.form_field.tabIndex, this.form_field.tabIndex = -1, this.search_field[0].tabIndex = e) : void 0
        }, i.prototype.set_label_behavior = function() {
            var t = this;
            return this.form_field_label = this.form_field_jq.parents("label"), !this.form_field_label.length && this.form_field.id.length && (this.form_field_label = e("label[for='" + this.form_field.id + "']")), this.form_field_label.length > 0 ? this.form_field_label.bind("click.chosen", function(e) {
                return t.is_multiple ? t.container_mousedown(e) : t.activate_field()
            }) : void 0
        }, i.prototype.show_search_field_default = function() {
            return this.is_multiple && this.choices_count() < 1 && !this.active_field ? (this.search_field.val(this.default_text), this.search_field.addClass("default")) : (this.search_field.val(""), this.search_field.removeClass("default"))
        }, i.prototype.search_results_mouseup = function(t) {
            var i;
            return i = e(t.target).hasClass("active-result") ? e(t.target) : e(t.target).parents(".active-result").first(), i.length ? (this.result_highlight = i, this.result_select(t), this.search_field.focus()) : void 0
        }, i.prototype.search_results_mouseover = function(t) {
            var i;
            return i = e(t.target).hasClass("active-result") ? e(t.target) : e(t.target).parents(".active-result").first(), i ? this.result_do_highlight(i) : void 0
        }, i.prototype.search_results_mouseout = function(t) {
            return e(t.target).hasClass("active-result") ? this.result_clear_highlight() : void 0
        }, i.prototype.choice_build = function(t) {
            var i,
                n,
                o = this;
            return i = e("<li />", {
                "class": "search-choice"
            }).html("<span>" + t.html + "</span>"), t.disabled ? i.addClass("search-choice-disabled") : (n = e("<a />", {
                "class": "search-choice-close",
                "data-option-array-index": t.array_index
            }), n.bind("click.chosen", function(e) {
                return o.choice_destroy_link_click(e)
            }), i.append(n)), this.search_container.before(i)
        }, i.prototype.choice_destroy_link_click = function(t) {
            return t.preventDefault(), t.stopPropagation(), this.is_disabled ? void 0 : this.choice_destroy(e(t.target))
        }, i.prototype.choice_destroy = function(e) {
            return this.result_deselect(e[0].getAttribute("data-option-array-index")) ? (this.show_search_field_default(), this.is_multiple && this.choices_count() > 0 && this.search_field.val().length < 1 && this.results_hide(), e.parents("li").first().remove(), this.search_field_scale()) : void 0
        }, i.prototype.results_reset = function() {
            return this.reset_single_select_options(), this.form_field.options[0].selected = !0, this.single_set_selected_text(), this.show_search_field_default(), this.results_reset_cleanup(), this.form_field_jq.trigger("change"), this.active_field ? this.results_hide() : void 0
        }, i.prototype.results_reset_cleanup = function() {
            return this.current_selectedIndex = this.form_field.selectedIndex, this.selected_item.find("abbr").remove()
        }, i.prototype.result_select = function(e) {
            var t,
                i;
            return this.result_highlight ? (t = this.result_highlight, this.result_clear_highlight(), this.is_multiple && this.max_selected_options <= this.choices_count() ? (this.form_field_jq.trigger("chosen:maxselected", {
                chosen: this
            }), !1) : (this.is_multiple ? t.removeClass("active-result") : this.reset_single_select_options(), i = this.results_data[t[0].getAttribute("data-option-array-index")], i.selected = !0, this.form_field.options[i.options_index].selected = !0, this.selected_option_count = null, this.is_multiple ? this.choice_build(i) : this.single_set_selected_text(i.text), (e.metaKey || e.ctrlKey) && this.is_multiple || this.results_hide(), this.search_field.val(""), (this.is_multiple || this.form_field.selectedIndex !== this.current_selectedIndex) && this.form_field_jq.trigger("change", {
                selected: this.form_field.options[i.options_index].value
            }), this.current_selectedIndex = this.form_field.selectedIndex, this.search_field_scale())) : void 0
        }, i.prototype.single_set_selected_text = function(e) {
            return null == e && (e = this.default_text), e === this.default_text ? this.selected_item.addClass("chosen-default") : (this.single_deselect_control_build(), this.selected_item.removeClass("chosen-default")), this.selected_item.find("span").text(e)
        }, i.prototype.result_deselect = function(e) {
            var t;
            return t = this.results_data[e], !this.form_field.options[t.options_index].disabled && (t.selected = !1, this.form_field.options[t.options_index].selected = !1, this.selected_option_count = null, this.result_clear_highlight(), this.results_showing && this.winnow_results(), this.form_field_jq.trigger("change", {
                deselected: this.form_field.options[t.options_index].value
            }), this.search_field_scale(), !0)
        }, i.prototype.single_deselect_control_build = function() {
            return this.allow_single_deselect ? (this.selected_item.find("abbr").length || this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'), this.selected_item.addClass("chosen-single-with-deselect")) : void 0
        }, i.prototype.get_search_text = function() {
            return this.search_field.val() === this.default_text ? "" : e("<div/>").text(e.trim(this.search_field.val())).html()
        }, i.prototype.winnow_results_set_highlight = function() {
            var e,
                t;
            return t = this.is_multiple ? [] : this.search_results.find(".result-selected.active-result"), e = t.length ? t.first() : this.search_results.find(".active-result").first(), null != e ? this.result_do_highlight(e) : void 0
        }, i.prototype.no_results = function(t) {
            var i;
            return i = e('<li class="no-results">' + this.results_none_found + ' "<span></span>"</li>'), i.find("span").first().html(t), this.search_results.append(i), this.form_field_jq.trigger("chosen:no_results", {
                chosen: this
            })
        }, i.prototype.no_results_clear = function() {
            return this.search_results.find(".no-results").remove()
        }, i.prototype.keydown_arrow = function() {
            var e;
            return this.results_showing && this.result_highlight ? (e = this.result_highlight.nextAll("li.active-result").first()) ? this.result_do_highlight(e) : void 0 : this.results_show()
        }, i.prototype.keyup_arrow = function() {
            var e;
            return this.results_showing || this.is_multiple ? this.result_highlight ? (e = this.result_highlight.prevAll("li.active-result"), e.length ? this.result_do_highlight(e.first()) : (this.choices_count() > 0 && this.results_hide(), this.result_clear_highlight())) : void 0 : this.results_show()
        }, i.prototype.keydown_backstroke = function() {
            var e;
            return this.pending_backstroke ? (this.choice_destroy(this.pending_backstroke.find("a").first()), this.clear_backstroke()) : (e = this.search_container.siblings("li.search-choice").last(), e.length && !e.hasClass("search-choice-disabled") ? (this.pending_backstroke = e, this.single_backstroke_delete ? this.keydown_backstroke() : this.pending_backstroke.addClass("search-choice-focus")) : void 0)
        }, i.prototype.clear_backstroke = function() {
            return this.pending_backstroke && this.pending_backstroke.removeClass("search-choice-focus"), this.pending_backstroke = null
        }, i.prototype.keydown_checker = function(e) {
            var t,
                i;
            switch (t = null != (i = e.which) ? i : e.keyCode, this.search_field_scale(), 8 !== t && this.pending_backstroke && this.clear_backstroke(), t) {
            case 8:
                this.backstroke_length = this.search_field.val().length;
                break;
            case 9:
                this.results_showing && !this.is_multiple && this.result_select(e), this.mouse_on_container = !1;
                break;
            case 13:
                e.preventDefault();
                break;
            case 38:
                e.preventDefault(), this.keyup_arrow();
                break;
            case 40:
                e.preventDefault(), this.keydown_arrow()
            }
        }, i.prototype.search_field_scale = function() {
            var t,
                i,
                n,
                o,
                a,
                s,
                r,
                l,
                c;
            if (this.is_multiple) {
                for (n = 0, r = 0, a = "position:absolute; left: -1000px; top: -1000px; display:none;", s = ["font-size", "font-style", "font-weight", "font-family", "line-height", "text-transform", "letter-spacing"], l = 0, c = s.length; c > l; l++)
                    o = s[l], a += o + ":" + this.search_field.css(o) + ";";
                return t = e("<div />", {
                    style: a
                }), t.text(this.search_field.val()), e("body").append(t), r = t.width() + 25, t.remove(), i = this.container.outerWidth(), r > i - 10 && (r = i - 10), this.search_field.css({
                    width: r + "px"
                })
            }
        }, i
    }(t)
}.call(this), function(e, t, i) {
    "use strict";
    var n,
        o = t.event;
    o.special.smartresize = {
        setup: function() {
            t(this).bind("resize", o.special.smartresize.handler)
        },
        teardown: function() {
            t(this).unbind("resize", o.special.smartresize.handler)
        },
        handler: function(e, t) {
            var i = this,
                a = arguments;
            e.type = "smartresize", n && clearTimeout(n), n = setTimeout(function() {
                o.dispatch.apply(i, a)
            }, "execAsap" === t ? 0 : 100)
        }
    }, t.fn.smartresize = function(e) {
        return e ? this.bind("smartresize", e) : this.trigger("smartresize", ["execAsap"])
    }, t.Mason = function(e, i) {
        this.element = t(i), this._create(e), this._init()
    }, t.Mason.settings = {
        isResizable: !0,
        isAnimated: !1,
        animationOptions: {
            queue: !1,
            duration: 500
        },
        gutterWidth: 0,
        isRTL: !1,
        isFitWidth: !1,
        containerStyle: {
            position: "relative"
        }
    }, t.Mason.prototype = {
        _filterFindBricks: function(e) {
            var t = this.options.itemSelector;
            return t ? e.filter(t).add(e.find(t)) : e
        },
        _getBricks: function(e) {
            var t = this._filterFindBricks(e).css({
                position: "absolute"
            }).addClass("masonry-brick");
            return t
        },
        _create: function(i) {
            this.options = t.extend(!0, {}, t.Mason.settings, i), this.styleQueue = [];
            var n = this.element[0].style;
            this.originalStyle = {
                height: n.height || ""
            };
            var o = this.options.containerStyle;
            for (var a in o)
                this.originalStyle[a] = n[a] || "";
            this.element.css(o), this.horizontalDirection = this.options.isRTL ? "right" : "left";
            var s = this.element.css("padding-" + this.horizontalDirection),
                r = this.element.css("padding-top");
            this.offset = {
                x: s ? parseInt(s, 10) : 0,
                y: r ? parseInt(r, 10) : 0
            }, this.isFluid = this.options.columnWidth && "function" == typeof this.options.columnWidth;
            var l = this;
            setTimeout(function() {
                l.element.addClass("masonry")
            }, 0), this.options.isResizable && t(e).bind("smartresize.masonry", function() {
                l.resize()
            }), this.reloadItems()
        },
        _init: function(e) {
            this._getColumns(), this._reLayout(e)
        },
        option: function(e, i) {
            t.isPlainObject(e) && (this.options = t.extend(!0, this.options, e))
        },
        layout: function(e, t) {
            for (var i = 0, n = e.length; i < n; i++)
                this._placeBrick(e[i]);
            var o = {};
            if (o.height = Math.max.apply(Math, this.colYs), this.options.isFitWidth) {
                var a = 0;
                for (i = this.cols; --i && 0 === this.colYs[i];)
                    a++;
                o.width = (this.cols - a) * this.columnWidth - this.options.gutterWidth
            }
            this.styleQueue.push({
                $el: this.element,
                style: o
            });
            var s,
                r = this.isLaidOut && this.options.isAnimated ? "animate" : "css",
                l = this.options.animationOptions;
            for (i = 0, n = this.styleQueue.length; i < n; i++)
                s = this.styleQueue[i], s.$el[r](s.style, l);
            this.styleQueue = [], t && t.call(e), this.isLaidOut = !0
        },
        _getColumns: function() {
            var e = this.options.isFitWidth ? this.element.parent() : this.element,
                t = e.width();
            this.columnWidth = this.isFluid ? this.options.columnWidth(t) : this.options.columnWidth || this.$bricks.outerWidth(!0) || t, this.columnWidth += this.options.gutterWidth, this.cols = Math.floor((t + this.options.gutterWidth) / this.columnWidth), this.cols = Math.max(this.cols, 1)
        },
        _placeBrick: function(e) {
            var i,
                n,
                o,
                a,
                s,
                r = t(e);
            if (i = Math.ceil(r.outerWidth(!0) / this.columnWidth), i = Math.min(i, this.cols), 1 === i)
                o = this.colYs;
            else
                for (n = this.cols + 1 - i, o = [], s = 0; s < n; s++)
                    a = this.colYs.slice(s, s + i), o[s] = Math.max.apply(Math, a);
            for (var l = Math.min.apply(Math, o), c = 0, d = 0, u = o.length; d < u; d++)
                if (o[d] === l) {
                    c = d;
                    break
                }
            var h = {
                top: l + this.offset.y
            };
            h[this.horizontalDirection] = this.columnWidth * c + this.offset.x, this.styleQueue.push({
                $el: r,
                style: h
            });
            var p = l + r.outerHeight(!0),
                f = this.cols + 1 - u;
            for (d = 0; d < f; d++)
                this.colYs[c + d] = p
        },
        resize: function() {
            var e = this.cols;
            this._getColumns(), (this.isFluid || this.cols !== e) && this._reLayout()
        },
        _reLayout: function(e) {
            var t = this.cols;
            for (this.colYs = []; t--;)
                this.colYs.push(0);
            this.layout(this.$bricks, e)
        },
        reloadItems: function() {
            this.$bricks = this._getBricks(this.element.children())
        },
        reload: function(e) {
            this.reloadItems(), this._init(e)
        },
        appended: function(e, t, i) {
            if (t) {
                this._filterFindBricks(e).css({
                    top: this.element.height()
                });
                var n = this;
                setTimeout(function() {
                    n._appended(e, i)
                }, 1)
            } else
                this._appended(e, i)
        },
        _appended: function(e, t) {
            var i = this._getBricks(e);
            this.$bricks = this.$bricks.add(i), this.layout(i, t)
        },
        remove: function(e) {
            this.$bricks = this.$bricks.not(e), e.remove()
        },
        destroy: function() {
            this.$bricks.removeClass("masonry-brick").each(function() {
                this.style.position = "", this.style.top = "", this.style.left = ""
            });
            var i = this.element[0].style;
            for (var n in this.originalStyle)
                i[n] = this.originalStyle[n];
            this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"), t(e).unbind(".masonry")
        }
    }, t.fn.imagesLoaded = function(e) {
        function i() {
            e.call(o, a)
        }
        function n(e) {
            var o = e.target;
            o.src !== r && t.inArray(o, l) === -1 && (l.push(o), --s <= 0 && (setTimeout(i), a.unbind(".imagesLoaded", n)))
        }
        var o = this,
            a = o.find("img").add(o.filter("img")),
            s = a.length,
            r = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",
            l = [];
        return s || i(), a.bind("load.imagesLoaded error.imagesLoaded", n).each(function() {
            var e = this.src;
            this.src = r, this.src = e
        }), o
    };
    var a = function(t) {
        e.console && e.console.error(t)
    };
    t.fn.masonry = function(e) {
        if ("string" == typeof e) {
            var i = Array.prototype.slice.call(arguments, 1);
            this.each(function() {
                var n = t.data(this, "masonry");
                return n ? t.isFunction(n[e]) && "_" !== e.charAt(0) ? void n[e].apply(n, i) : void a("no such method '" + e + "' for masonry instance") : void a("cannot call methods on masonry prior to initialization; attempted to call method '" + e + "'")
            })
        } else
            this.each(function() {
                var i = t.data(this, "masonry");
                i ? (i.option(e || {}), i._init()) : t.data(this, "masonry", new t.Mason(e, this))
            });
        return this
    }
}(window, jQuery), function(e) {
    function t(e, t) {
        if (!(e.originalEvent.touches.length > 1)) {
            e.preventDefault();
            var i = e.originalEvent.changedTouches[0],
                n = document.createEvent("MouseEvents");
            n.initMouseEvent(t, !0, !0, window, 1, i.screenX, i.screenY, i.clientX, i.clientY, !1, !1, !1, !1, 0, null), e.target.dispatchEvent(n)
        }
    }
    if (e.support.touch = "ontouchend" in document, e.support.touch) {
        var i,
            n = e.ui.mouse.prototype,
            o = n._mouseInit;
        n._touchStart = function(e) {
            var n = this;
            !i && n._mouseCapture(e.originalEvent.changedTouches[0]) && (i = !0, n._touchMoved = !1, t(e, "mouseover"), t(e, "mousemove"), t(e, "mousedown"))
        }, n._touchMove = function(e) {
            i && (this._touchMoved = !0, t(e, "mousemove"))
        }, n._touchEnd = function(e) {
            i && (t(e, "mouseup"), t(e, "mouseout"), this._touchMoved || t(e, "click"), i = !1)
        }, n._mouseInit = function() {
            var t = this;
            t.element.bind("touchstart", e.proxy(t, "_touchStart")).bind("touchmove", e.proxy(t, "_touchMove")).bind("touchend", e.proxy(t, "_touchEnd")), o.call(t)
        }
    }
}(jQuery), function(e, t) {
    function i() {
        var e = m.elements;
        return "string" == typeof e ? e.split(" ") : e
    }
    function n(e) {
        var t = f[e[h]];
        return t || (t = {}, p++, e[h] = p, f[p] = t), t
    }
    function o(e, i, o) {
        return i || (i = t), l ? i.createElement(e) : (o || (o = n(i)), i = o.cache[e] ? o.cache[e].cloneNode() : u.test(e) ? (o.cache[e] = o.createElem(e)).cloneNode() : o.createElem(e), i.canHaveChildren && !d.test(e) ? o.frag.appendChild(i) : i)
    }
    function a(e, t) {
        t.cache || (t.cache = {}, t.createElem = e.createElement, t.createFrag = e.createDocumentFragment, t.frag = t.createFrag()), e.createElement = function(i) {
            return m.shivMethods ? o(i, e, t) : t.createElem(i)
        }, e.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + i().join().replace(/\w+/g, function(e) {
            return t.createElem(e), t.frag.createElement(e), 'c("' + e + '")'
        }) + ");return n}")(m, t.frag)
    }
    function s(e) {
        e || (e = t);
        var i = n(e);
        if (m.shivCSS && !r && !i.hasCSS) {
            var o,
                s = e;
            o = s.createElement("p"), s = s.getElementsByTagName("head")[0] || s.documentElement, o.innerHTML = "x<style>article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}</style>", o = s.insertBefore(o.lastChild, s.firstChild), i.hasCSS = !!o
        }
        return l || a(e, i), e
    }
    var r,
        l,
        c = e.html5 || {},
        d = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
        u = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,
        h = "_html5shiv",
        p = 0,
        f = {};
    !function() {
        try {
            var e = t.createElement("a");
            e.innerHTML = "<xyz></xyz>", r = "hidden" in e;
            var i;
            if (!(i = 1 == e.childNodes.length)) {
                t.createElement("a");
                var n = t.createDocumentFragment();
                i = "undefined" == typeof n.cloneNode || "undefined" == typeof n.createDocumentFragment || "undefined" == typeof n.createElement
            }
            l = i
        } catch (o) {
            l = r = !0
        }
    }();
    var m = {
        elements: c.elements || "abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",
        version: "3.6.2pre",
        shivCSS: !1 !== c.shivCSS,
        supportsUnknownElements: l,
        shivMethods: !1 !== c.shivMethods,
        type: "default",
        shivDocument: s,
        createElement: o,
        createDocumentFragment: function(e, o) {
            if (e || (e = t), l)
                return e.createDocumentFragment();
            for (var o = o || n(e), a = o.frag.cloneNode(), s = 0, r = i(), c = r.length; s < c; s++)
                a.createElement(r[s]);
            return a
        }
    };
    e.html5 = m, s(t)
}(this, document);
var swfobject = function() {
    function e() {
        if (!q) {
            try {
                var e = M.getElementsByTagName("body")[0].appendChild(g("span"));
                e.parentNode.removeChild(e)
            } catch (t) {
                return
            }
            q = !0;
            for (var i = L.length, n = 0; n < i; n++)
                L[n]()
        }
    }
    function t(e) {
        q ? e() : L[L.length] = e
    }
    function i(e) {
        if (typeof E.addEventListener != S)
            E.addEventListener("load", e, !1);
        else if (typeof M.addEventListener != S)
            M.addEventListener("load", e, !1);
        else if (typeof E.attachEvent != S)
            v(E, "onload", e);
        else if ("function" == typeof E.onload) {
            var t = E.onload;
            E.onload = function() {
                t(), e()
            }
        } else
            E.onload = e
    }
    function n() {
        F ? o() : a()
    }
    function o() {
        var e = M.getElementsByTagName("body")[0],
            t = g(P);
        t.setAttribute("type", O);
        var i = e.appendChild(t);
        if (i) {
            var n = 0;
            !function() {
                if (typeof i.GetVariable != S) {
                    var o = i.GetVariable("$version");
                    o && (o = o.split(" ")[1].split(","), K.pv = [parseInt(o[0], 10), parseInt(o[1], 10), parseInt(o[2], 10)])
                } else if (n < 10)
                    return n++, void setTimeout(arguments.callee, 10);
                e.removeChild(t), i = null, a()
            }()
        } else
            a()
    }
    function a() {
        var e = R.length;
        if (e > 0)
            for (var t = 0; t < e; t++) {
                var i = R[t].id,
                    n = R[t].callbackFn,
                    o = {
                        success: !1,
                        id: i
                    };
                if (K.pv[0] > 0) {
                    var a = m(i);
                    if (a)
                        if (!_(R[t].swfVersion) || K.wk && K.wk < 312)
                            if (R[t].expressInstall && r()) {
                                var d = {};
                                d.data = R[t].expressInstall, d.width = a.getAttribute("width") || "0", d.height = a.getAttribute("height") || "0", a.getAttribute("class") && (d.styleclass = a.getAttribute("class")), a.getAttribute("align") && (d.align = a.getAttribute("align"));
                                for (var u = {}, h = a.getElementsByTagName("param"), p = h.length, f = 0; f < p; f++)
                                    "movie" != h[f].getAttribute("name").toLowerCase() && (u[h[f].getAttribute("name")] = h[f].getAttribute("value"));
                                l(d, u, i, n)
                            } else
                                c(a), n && n(o);
                        else
                            w(i, !0), n && (o.success = !0, o.ref = s(i), n(o))
                } else if (w(i, !0), n) {
                    var g = s(i);
                    g && typeof g.SetVariable != S && (o.success = !0, o.ref = g), n(o)
                }
            }
    }
    function s(e) {
        var t = null,
            i = m(e);
        if (i && "OBJECT" == i.nodeName)
            if (typeof i.SetVariable != S)
                t = i;
            else {
                var n = i.getElementsByTagName(P)[0];
                n && (t = n)
            }
        return t
    }
    function r() {
        return !W && _("6.0.65") && (K.win || K.mac) && !(K.wk && K.wk < 312)
    }
    function l(e, t, i, n) {
        W = !0, x = n || null, C = {
            success: !1,
            id: i
        };
        var o = m(i);
        if (o) {
            "OBJECT" == o.nodeName ? ($ = d(o), k = null) : ($ = o, k = i), e.id = j, (typeof e.width == S || !/%$/.test(e.width) && parseInt(e.width, 10) < 310) && (e.width = "310"), (typeof e.height == S || !/%$/.test(e.height) && parseInt(e.height, 10) < 137) && (e.height = "137"), M.title = M.title.slice(0, 47) + " - Flash Player Installation";
            var a = K.ie && K.win ? "ActiveX" : "PlugIn",
                s = "MMredirectURL=" + E.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + a + "&MMdoctitle=" + M.title;
            if (typeof t.flashvars != S ? t.flashvars += "&" + s : t.flashvars = s, K.ie && K.win && 4 != o.readyState) {
                var r = g("div");
                i += "SWFObjectNew", r.setAttribute("id", i), o.parentNode.insertBefore(r, o), o.style.display = "none", function() {
                    4 == o.readyState ? o.parentNode.removeChild(o) : setTimeout(arguments.callee, 10)
                }()
            }
            u(e, t, i)
        }
    }
    function c(e) {
        if (K.ie && K.win && 4 != e.readyState) {
            var t = g("div");
            e.parentNode.insertBefore(t, e), t.parentNode.replaceChild(d(e), t), e.style.display = "none", function() {
                4 == e.readyState ? e.parentNode.removeChild(e) : setTimeout(arguments.callee, 10)
            }()
        } else
            e.parentNode.replaceChild(d(e), e)
    }
    function d(e) {
        var t = g("div");
        if (K.win && K.ie)
            t.innerHTML = e.innerHTML;
        else {
            var i = e.getElementsByTagName(P)[0];
            if (i) {
                var n = i.childNodes;
                if (n)
                    for (var o = n.length, a = 0; a < o; a++)
                        1 == n[a].nodeType && "PARAM" == n[a].nodeName || 8 == n[a].nodeType || t.appendChild(n[a].cloneNode(!0))
            }
        }
        return t
    }
    function u(e, t, i) {
        var n,
            o = m(i);
        if (K.wk && K.wk < 312)
            return n;
        if (o)
            if (typeof e.id == S && (e.id = i), K.ie && K.win) {
                var a = "";
                for (var s in e)
                    e[s] != Object.prototype[s] && ("data" == s.toLowerCase() ? t.movie = e[s] : "styleclass" == s.toLowerCase() ? a += ' class="' + e[s] + '"' : "classid" != s.toLowerCase() && (a += " " + s + '="' + e[s] + '"'));
                var r = "";
                for (var l in t)
                    t[l] != Object.prototype[l] && (r += '<param name="' + l + '" value="' + t[l] + '" />');
                o.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + a + ">" + r + "</object>", H[H.length] = e.id, n = m(e.id)
            } else {
                var c = g(P);
                c.setAttribute("type", O);
                for (var d in e)
                    e[d] != Object.prototype[d] && ("styleclass" == d.toLowerCase() ? c.setAttribute("class", e[d]) : "classid" != d.toLowerCase() && c.setAttribute(d, e[d]));
                for (var u in t)
                    t[u] != Object.prototype[u] && "movie" != u.toLowerCase() && h(c, u, t[u]);
                o.parentNode.replaceChild(c, o), n = c
            }
        return n
    }
    function h(e, t, i) {
        var n = g("param");
        n.setAttribute("name", t), n.setAttribute("value", i), e.appendChild(n)
    }
    function p(e) {
        var t = m(e);
        t && "OBJECT" == t.nodeName && (K.ie && K.win ? (t.style.display = "none", function() {
            4 == t.readyState ? f(e) : setTimeout(arguments.callee, 10)
        }()) : t.parentNode.removeChild(t))
    }
    function f(e) {
        var t = m(e);
        if (t) {
            for (var i in t)
                "function" == typeof t[i] && (t[i] = null);
            t.parentNode.removeChild(t)
        }
    }
    function m(e) {
        var t = null;
        try {
            t = M.getElementById(e)
        } catch (i) {}
        return t
    }
    function g(e) {
        return M.createElement(e)
    }
    function v(e, t, i) {
        e.attachEvent(t, i), B[B.length] = [e, t, i]
    }
    function _(e) {
        var t = K.pv,
            i = e.split(".");
        return i[0] = parseInt(i[0], 10), i[1] = parseInt(i[1], 10) || 0, i[2] = parseInt(i[2], 10) || 0, t[0] > i[0] || t[0] == i[0] && t[1] > i[1] || t[0] == i[0] && t[1] == i[1] && t[2] >= i[2]
    }
    function b(e, t, i, n) {
        if (!K.ie || !K.mac) {
            var o = M.getElementsByTagName("head")[0];
            if (o) {
                var a = i && "string" == typeof i ? i : "screen";
                if (n && (T = null, I = null), !T || I != a) {
                    var s = g("style");
                    s.setAttribute("type", "text/css"), s.setAttribute("media", a), T = o.appendChild(s), K.ie && K.win && typeof M.styleSheets != S && M.styleSheets.length > 0 && (T = M.styleSheets[M.styleSheets.length - 1]), I = a
                }
                K.ie && K.win ? T && typeof T.addRule == P && T.addRule(e, t) : T && typeof M.createTextNode != S && T.appendChild(M.createTextNode(e + " {" + t + "}"))
            }
        }
    }
    function w(e, t) {
        if (U) {
            var i = t ? "visible" : "hidden";
            q && m(e) ? m(e).style.visibility = i : b("#" + e, "visibility:" + i)
        }
    }
    function y(e) {
        var t = /[\\\"<>\.;]/,
            i = null != t.exec(e);
        return i && typeof encodeURIComponent != S ? encodeURIComponent(e) : e
    }
    var $,
        k,
        x,
        C,
        T,
        I,
        S = "undefined",
        P = "object",
        D = "Shockwave Flash",
        A = "ShockwaveFlash.ShockwaveFlash",
        O = "application/x-shockwave-flash",
        j = "SWFObjectExprInst",
        z = "onreadystatechange",
        E = window,
        M = document,
        N = navigator,
        F = !1,
        L = [n],
        R = [],
        H = [],
        B = [],
        q = !1,
        W = !1,
        U = !0,
        K = function() {
            var e = typeof M.getElementById != S && typeof M.getElementsByTagName != S && typeof M.createElement != S,
                t = N.userAgent.toLowerCase(),
                i = N.platform.toLowerCase(),
                n = i ? /win/.test(i) : /win/.test(t),
                o = i ? /mac/.test(i) : /mac/.test(t),
                a = !!/webkit/.test(t) && parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")),
                s = !1,
                r = [0, 0, 0],
                l = null;
            if (typeof N.plugins != S && typeof N.plugins[D] == P)
                l = N.plugins[D].description, !l || typeof N.mimeTypes != S && N.mimeTypes[O] && !N.mimeTypes[O].enabledPlugin || (F = !0, s = !1, l = l.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), r[0] = parseInt(l.replace(/^(.*)\..*$/, "$1"), 10), r[1] = parseInt(l.replace(/^.*\.(.*)\s.*$/, "$1"), 10), r[2] = /[a-zA-Z]/.test(l) ? parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0);
            else if (typeof E.ActiveXObject != S)
                try {
                    var c = new ActiveXObject(A);
                    c && (l = c.GetVariable("$version"), l && (s = !0, l = l.split(" ")[1].split(","), r = [parseInt(l[0], 10), parseInt(l[1], 10), parseInt(l[2], 10)]))
                } catch (d) {}
            return {
                w3: e,
                pv: r,
                wk: a,
                ie: s,
                win: n,
                mac: o
            }
        }();
    (function() {
        K.w3 && ((typeof M.readyState != S && "complete" == M.readyState || typeof M.readyState == S && (M.getElementsByTagName("body")[0] || M.body)) && e(), q || (typeof M.addEventListener != S && M.addEventListener("DOMContentLoaded", e, !1), K.ie && K.win && (M.attachEvent(z, function() {
            "complete" == M.readyState && (M.detachEvent(z, arguments.callee), e())
        }), E == top && !function() {
            if (!q) {
                try {
                    M.documentElement.doScroll("left")
                } catch (t) {
                    return void setTimeout(arguments.callee, 0)
                }
                e()
            }
        }()), K.wk && !function() {
            if (!q)
                return /loaded|complete/.test(M.readyState) ? void e() : void setTimeout(arguments.callee, 0)
        }(), i(e)))
    })(), function() {
        K.ie && K.win && window.attachEvent("onunload", function() {
            for (var e = B.length, t = 0; t < e; t++)
                B[t][0].detachEvent(B[t][1], B[t][2]);
            for (var i = H.length, n = 0; n < i; n++)
                p(H[n]);
            for (var o in K)
                K[o] = null;
            K = null;
            for (var a in swfobject)
                swfobject[a] = null;
            swfobject = null
        })
    }();
    return {
        registerObject: function(e, t, i, n) {
            if (K.w3 && e && t) {
                var o = {};
                o.id = e, o.swfVersion = t, o.expressInstall = i, o.callbackFn = n, R[R.length] = o, w(e, !1)
            } else
                n && n({
                    success: !1,
                    id: e
                })
        },
        getObjectById: function(e) {
            if (K.w3)
                return s(e)
        },
        embedSWF: function(e, i, n, o, a, s, c, d, h, p) {
            var f = {
                success: !1,
                id: i
            };
            K.w3 && !(K.wk && K.wk < 312) && e && i && n && o && a ? (w(i, !1), t(function() {
                n += "", o += "";
                var t = {};
                if (h && typeof h === P)
                    for (var m in h)
                        t[m] = h[m];
                t.data = e, t.width = n, t.height = o;
                var g = {};
                if (d && typeof d === P)
                    for (var v in d)
                        g[v] = d[v];
                if (c && typeof c === P)
                    for (var b in c)
                        typeof g.flashvars != S ? g.flashvars += "&" + b + "=" + c[b] : g.flashvars = b + "=" + c[b];
                if (_(a)) {
                    var y = u(t, g, i);
                    t.id == i && w(i, !0), f.success = !0, f.ref = y
                } else {
                    if (s && r())
                        return t.data = s, void l(t, g, i, p);
                    w(i, !0)
                }
                p && p(f)
            })) : p && p(f)
        },
        switchOffAutoHideShow: function() {
            U = !1
        },
        ua: K,
        getFlashPlayerVersion: function() {
            return {
                major: K.pv[0],
                minor: K.pv[1],
                release: K.pv[2]
            }
        },
        hasFlashPlayerVersion: _,
        createSWF: function(e, t, i) {
            return K.w3 ? u(e, t, i) : void 0
        },
        showExpressInstall: function(e, t, i, n) {
            K.w3 && r() && l(e, t, i, n)
        },
        removeSWF: function(e) {
            K.w3 && p(e)
        },
        createCSS: function(e, t, i, n) {
            K.w3 && b(e, t, i, n)
        },
        addDomLoadEvent: t,
        addLoadEvent: i,
        getQueryParamValue: function(e) {
            var t = M.location.search || M.location.hash;
            if (t) {
                if (/\?/.test(t) && (t = t.split("?")[1]), null == e)
                    return y(t);
                for (var i = t.split("&"), n = 0; n < i.length; n++)
                    if (i[n].substring(0, i[n].indexOf("=")) == e)
                        return y(i[n].substring(i[n].indexOf("=") + 1))
            }
            return ""
        },
        expressInstallCallback: function() {
            if (W) {
                var e = m(j);
                e && $ && (e.parentNode.replaceChild($, e), k && (w(k, !0), K.ie && K.win && ($.style.display = "block")), x && x(C)), W = !1
            }
        }
    }
}();
jQuery && !function(e) {
    e.extend(e.fn, {
        uploadify: function(t) {
            e(this).each(function() {
                var i = e.extend({
                    id: e(this).attr("id"),
                    uploader: "uploadify.swf",
                    script: "uploadify.php",
                    expressInstall: null,
                    folder: "",
                    height: 30,
                    width: 120,
                    cancelImg: "cancel.png",
                    wmode: "opaque",
                    scriptAccess: "sameDomain",
                    fileDataName: "Filedata",
                    method: "POST",
                    queueSizeLimit: 999,
                    simUploadLimit: 1,
                    queueID: !1,
                    displayData: "percentage",
                    removeCompleted: !0,
                    onInit: function() {},
                    onSelect: function() {},
                    onSelectOnce: function() {},
                    onQueueFull: function() {},
                    onCheck: function() {},
                    onCancel: function() {},
                    onClearQueue: function() {},
                    onError: function() {},
                    onProgress: function() {},
                    onComplete: function() {},
                    onAllComplete: function() {}
                }, t);
                e(this).data("settings", i);
                var n = location.pathname;
                n = n.split("/"), n.pop(), n = n.join("/") + "/";
                var o = {};
                if (o.uploadifyID = i.id, o.pagepath = n, i.buttonImg && (o.buttonImg = escape(i.buttonImg)), i.buttonText && (o.buttonText = escape(i.buttonText)), i.rollover && (o.rollover = !0), o.script = i.script, o.folder = escape(i.folder), i.scriptData) {
                    var a = "";
                    for (var s in i.scriptData)
                        a += "&" + s + "=" + i.scriptData[s];
                    o.scriptData = escape(a.substr(1))
                }
                o.width = i.width, o.height = i.height, o.wmode = i.wmode, o.method = i.method, o.queueSizeLimit = i.queueSizeLimit, o.simUploadLimit = i.simUploadLimit, i.hideButton && (o.hideButton = !0), i.fileDesc && (o.fileDesc = i.fileDesc), i.fileExt && (o.fileExt = i.fileExt), i.multi && (o.multi = !0), i.auto && (o.auto = !0), i.sizeLimit && (o.sizeLimit = i.sizeLimit), i.checkScript && (o.checkScript = i.checkScript), i.fileDataName && (o.fileDataName = i.fileDataName), i.queueID && (o.queueID = i.queueID), i.onInit() !== !1 && (e(this).css("display", "none"), e(this).after('<div id="' + e(this).attr("id") + 'Uploader"></div>'), swfobject.embedSWF(i.uploader, i.id + "Uploader", i.width, i.height, "9.0.24", i.expressInstall, o, {
                    quality: "high",
                    wmode: i.wmode,
                    allowScriptAccess: i.scriptAccess
                }, {}, function(e) {
                    "function" == typeof i.onSWFReady && e.success && i.onSWFReady()
                }), 0 == i.queueID ? e("#" + e(this).attr("id") + "Uploader").after('<div id="' + e(this).attr("id") + 'Queue" class="uploadifyQueue"></div>') : e("#" + i.queueID).addClass("uploadifyQueue")), "function" == typeof i.onOpen && e(this).bind("uploadifyOpen", i.onOpen), e(this).bind("uploadifySelect", {
                    action: i.onSelect,
                    queueID: i.queueID
                }, function(t, n, o) {
                    if (t.data.action(t, n, o) !== !1) {
                        var a = .01 * Math.round(o.size / 1024 * 100),
                            s = "KB";
                        a > 1e3 && (a = .01 * Math.round(.001 * a * 100), s = "MB");
                        var r = a.toString().split(".");
                        a = r.length > 1 ? r[0] + "." + r[1].substr(0, 2) : r[0], o.name.length > 20 ? fileName = o.name.substr(0, 20) + "..." : fileName = o.name, queue = "#" + e(this).attr("id") + "Queue", t.data.queueID && (queue = "#" + t.data.queueID), e(queue).append('<div id="' + e(this).attr("id") + n + '" class="uploadifyQueueItem"><div class="cancel"><a href="javascript:jQuery(\'#' + e(this).attr("id") + "').uploadifyCancel('" + n + '\')"><img src="' + i.cancelImg + '" border="0" /></a></div><span class="fileName">' + fileName + " (" + a + s + ')</span><span class="percentage"></span><div class="uploadifyProgress"><div id="' + e(this).attr("id") + n + 'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div></div></div>')
                    }
                }), e(this).bind("uploadifySelectOnce", {
                    action: i.onSelectOnce
                }, function(t, n) {
                    t.data.action(t, n), i.auto && (i.checkScript ? e(this).uploadifyUpload(null, !1) : e(this).uploadifyUpload(null, !0))
                }), e(this).bind("uploadifyQueueFull", {
                    action: i.onQueueFull
                }, function(e, t) {
                    e.data.action(e, t) !== !1 && alert("The queue is full.  The max size is " + t + ".")
                }), e(this).bind("uploadifyCheckExist", {
                    action: i.onCheck
                }, function(t, i, o, a, s) {
                    var r = new Object;
                    if (r = o, r.folder = "/" == a.substr(0, 1) ? a : n + a, s)
                        for (var l in o)
                            var c = l;
                    e.post(i, r, function(i) {
                        for (var n in i)
                            if (t.data.action(t, i, n) !== !1) {
                                var o = confirm("Do you want to replace the file " + i[n] + "?");
                                o || document.getElementById(e(t.target).attr("id") + "Uploader").cancelFileUpload(n, !0, !0)
                            }
                        s ? document.getElementById(e(t.target).attr("id") + "Uploader").startFileUpload(c, !0) : document.getElementById(e(t.target).attr("id") + "Uploader").startFileUpload(null, !0)
                    }, "json")
                }), e(this).bind("uploadifyCancel", {
                    action: i.onCancel
                }, function(t, i, n, o, a, s) {
                    if (t.data.action(t, i, n, o, s) !== !1 && a) {
                        var r = 1 == s ? 0 : 250;
                        e("#" + e(this).attr("id") + i).fadeOut(r, function() {
                            e(this).remove()
                        })
                    }
                }), e(this).bind("uploadifyClearQueue", {
                    action: i.onClearQueue
                }, function(t, n) {
                    var o = i.queueID ? i.queueID : e(this).attr("id") + "Queue";
                    n && e("#" + o).find(".uploadifyQueueItem").remove(), t.data.action(t, n) !== !1 && e("#" + o).find(".uploadifyQueueItem").each(function() {
                        var t = e(".uploadifyQueueItem").index(this);
                        e(this).delay(100 * t).fadeOut(250, function() {
                            e(this).remove()
                        })
                    })
                });
                var r = [];
                e(this).bind("uploadifyError", {
                    action: i.onError
                }, function(t, i, n, o) {
                    if (t.data.action(t, i, n, o) !== !1) {
                        var a = new Array(i, n, o);
                        r.push(a), e("#" + e(this).attr("id") + i).find(".percentage").text(" - " + o.type + " Error"), e("#" + e(this).attr("id") + i).find(".uploadifyProgress").hide(), e("#" + e(this).attr("id") + i).addClass("uploadifyError")
                    }
                }), "function" == typeof i.onUpload && e(this).bind("uploadifyUpload", i.onUpload), e(this).bind("uploadifyProgress", {
                    action: i.onProgress,
                    toDisplay: i.displayData
                }, function(t, i, n, o) {
                    t.data.action(t, i, n, o) !== !1 && (e("#" + e(this).attr("id") + i + "ProgressBar").animate({
                        width: o.percentage + "%"
                    }, 250, function() {
                        100 == o.percentage && e(this).closest(".uploadifyProgress").fadeOut(250, function() {
                            e(this).remove()
                        })
                    }), "percentage" == t.data.toDisplay && (displayData = " - " + o.percentage + "%"), "speed" == t.data.toDisplay && (displayData = " - " + o.speed + "KB/s"), null == t.data.toDisplay && (displayData = " "), e("#" + e(this).attr("id") + i).find(".percentage").text(displayData))
                }), e(this).bind("uploadifyComplete", {
                    action: i.onComplete
                }, function(t, n, o, a, s) {
                    t.data.action(t, n, o, unescape(a), s) !== !1 && (e("#" + e(this).attr("id") + n).find(".percentage").text(" - Completed"), i.removeCompleted && e("#" + e(t.target).attr("id") + n).fadeOut(250, function() {
                        e(this).remove()
                    }), e("#" + e(t.target).attr("id") + n).addClass("completed"))
                }), "function" == typeof i.onAllComplete && e(this).bind("uploadifyAllComplete", {
                    action: i.onAllComplete
                }, function(e, t) {
                    e.data.action(e, t) !== !1 && (r = [])
                })
            })
        },
        uploadifySettings: function(t, i, n) {
            var o = !1;
            if (e(this).each(function() {
                if ("scriptData" == t && null != i) {
                    if (n)
                        var a = i;
                    else
                        var a = e.extend(e(this).data("settings").scriptData, i);
                    var s = "";
                    for (var r in a)
                        s += "&" + r + "=" + a[r];
                    i = escape(s.substr(1))
                }
                o = document.getElementById(e(this).attr("id") + "Uploader").updateSettings(t, i)
            }), null == i && "scriptData" == t) {
                for (var a = unescape(o).split("&"), s = new Object, r = 0; r < a.length; r++) {
                    var l = a[r].split("=");
                    s[l[0]] = l[1]
                }
                o = s
            }
            return o
        },
        uploadifyUpload: function(t, i) {
            e(this).each(function() {
                i || (i = !1), document.getElementById(e(this).attr("id") + "Uploader").startFileUpload(t, i)
            })
        },
        uploadifyCancel: function(t) {
            e(this).each(function() {
                document.getElementById(e(this).attr("id") + "Uploader").cancelFileUpload(t, !0, !0, !1)
            })
        },
        uploadifyClearQueue: function() {
            e(this).each(function() {
                document.getElementById(e(this).attr("id") + "Uploader").clearFileUploadQueue(!1)
            })
        }
    })
}(jQuery), !function(e, t, o) {
    var a = e[o.k] = {
        w: e,
        d: t,
        a: o,
        s: {},
        f: function() {
            return {
                callback: [],
                get: function(e, t) {
                    var i = null;
                    return i = "string" == typeof e[t] ? e[t] : e.getAttribute(t)
                },
                getData: function(e, t) {
                    return t = a.a.dataAttributePrefix + t, a.f.get(e, t)
                },
                set: function(e, t, i) {
                    "string" == typeof e[t] ? e[t] = i : e.setAttribute(t, i)
                },
                make: function(e) {
                    var t,
                        i,
                        n = !1;
                    for (t in e)
                        if (e[t].hasOwnProperty) {
                            n = a.d.createElement(t);
                            for (i in e[t])
                                e[t][i].hasOwnProperty && "string" == typeof e[t][i] && a.f.set(n, i, e[t][i]);
                            break
                        }
                    return n
                },
                kill: function(e) {
                    "string" == typeof e && (e = a.d.getElementById(e)), e && e.parentNode && e.parentNode.removeChild(e)
                },
                replace: function(e, t) {
                    e.parentNode.insertBefore(t, e), a.f.kill(e)
                },
                getEl: function(e) {
                    var t = null;
                    return t = e.target ? 3 === e.target.nodeType ? e.target.parentNode : e.target : e.srcElement
                },
                listen: function(e, t, i) {
                    e && ("undefined" != typeof a.w.addEventListener ? e.addEventListener(t, i, !1) : "undefined" != typeof a.w.attachEvent && e.attachEvent("on" + t, i))
                },
                call: function(e, t) {
                    var i,
                        n,
                        o = "?";
                    i = a.f.callback.length, n = a.a.k + ".f.callback[" + i + "]", a.f.callback[i] = function(e) {
                        t(e, i), a.f.kill(n)
                    }, e.match(/\?/) && (o = "&"), a.d.b.appendChild(a.f.make({
                        SCRIPT: {
                            id: n,
                            type: "text/javascript",
                            charset: "utf-8",
                            src: e + o + "callback=" + n
                        }
                    }))
                },
                debug: function(e, t) {
                    (a.v.config.debug || t) && a.w.console && a.w.console.log && a.w.console.log(e)
                },
                presentation: function() {
                    var e,
                        t,
                        i;
                    e = a.f.make({
                        STYLE: {
                            type: "text/css"
                        }
                    }), t = a.a.cdn[a.v.protocol] || a.a.cdn["http:"], i = a.a.rules.join("\n"), i = i.replace(/\._/g, "." + o.k + "_"), i = i.replace(/;/g, "!important;"), i = i.replace(/_cdn/g, t), i = i.replace(/_rez/g, a.v.resolution), e.styleSheet ? e.styleSheet.cssText = i : e.appendChild(a.d.createTextNode(i)), a.d.h ? a.d.h.appendChild(e) : a.d.b.appendChild(e)
                },
                getStyle: function(e, t, i) {
                    var n = null;
                    return a.w.getComputedStyle ? n = a.w.getComputedStyle(e).getPropertyValue(t) : e.currentStyle && (n = e.currentStyle[t]), n && i && (n = parseInt(n) || 0), n
                },
                getPos: function(e) {
                    var t,
                        i,
                        n,
                        o,
                        s,
                        r = 0,
                        l = 0;
                    if (e.offsetParent) {
                        do r += e.offsetLeft, l += e.offsetTop;
                        while (e = e.offsetParent);
                        if (!a.v.hazIE) {
                            var t = a.d.getElementsByTagName("HTML")[0],
                                i = a.f.getStyle(t, "margin-top", !0) || 0,
                                n = a.f.getStyle(t, "padding-top", !0) || 0,
                                o = a.f.getStyle(t, "margin-left", !0) || 0,
                                s = a.f.getStyle(t, "padding-left", !0) || 0;
                            r += o + s, l += i + n
                        }
                        return {
                            left: r,
                            top: l
                        }
                    }
                },
                hideFloatingButton: function() {
                    a.s.floatingButton && a.f.kill(a.s.floatingButton)
                },
                getButtonConfig: function(e) {
                    var t = {
                        height: a.f.getData(e, "height") || a.v.config.height,
                        color: a.f.getData(e, "color") || a.v.config.color,
                        shape: a.f.getData(e, "shape") || a.v.config.shape,
                        assets: a.f.getData(e, "lang") || a.v.config.lang,
                        zero: a.f.getData(e, "zero") || null,
                        pad: a.f.getData(e, "count-pad") || null,
                        config: a.f.getData(e, "config") || "none"
                    };
                    return "round" === t.shape ? ("16" !== t.height && "32" !== t.height && (t.height = "16"), t.color = "red") : "rect" === t.shape ? ("20" !== t.height && "28" !== t.height && (t.height = "20"), "gray" !== t.color && "red" !== t.color && "white" !== t.color && (t.color = "gray")) : (t.shape = "rect", t.height = "20", t.color = "gray"), "rect" === t.shape ? a.a.hazAssets[t.assets] || (t.assets = a.v.config.assets) : t.assets = "en", t
                },
                showFloatingButton: function(e) {
                    a.f.debug("show floating Pin It button"), a.f.hideFloatingButton();
                    var t = a.f.getButtonConfig(e);
                    if (e.height > a.a.minImgSize && e.width > a.a.minImgSize && !e.src.match(/^data/)) {
                        var i = a.a.k + "_pin_it_button_" + t.height + " " + a.a.k + "_pin_it_button_" + t.assets + "_" + t.height + "_" + t.color + " " + a.a.k + "_pin_it_button_floating_" + t.height;
                        "round" === t.shape && (i = a.a.k + "_pin_it_button_en_" + t.height + "_red_round " + a.a.k + "_pin_it_button_floating_en_" + t.height + "_red_round");
                        var n = a.f.getPos(e),
                            o = a.v.endpoint.create;
                        o = o + "url=" + encodeURIComponent(a.d.URL) + "&media=" + encodeURIComponent(e.src) + "&description=" + encodeURIComponent(e.getAttribute("data-pin-description") || e.title || e.alt || a.d.title), a.s.floatingButton = a.f.make({
                            A: {
                                className: i,
                                title: "Pin it!",
                                "data-pin-log": "button_pinit_floating",
                                "data-pin-href": o
                            }
                        }), a.d.b.appendChild(a.s.floatingButton), a.s.floatingButton.style.top = n.top + a.a.floatingButtonOffsetTop + "px", a.s.floatingButton.style.left = n.left + a.a.floatingButtonOffsetLeft + "px", a.s.floatingButton.style.zIndex = "8675309", a.s.floatingButton.style.display = "block"
                    }
                },
                over: function(e) {
                    var t,
                        i;
                    t = e || a.w.event, i = a.f.getEl(t), i && ("IMG" !== i.tagName || !i.src || a.f.getData(i, "no-hover") || a.f.get(i, "nopin") || a.f.getData(i, "nopin") || !a.v.config.hover ? a.v.hazFloatingButton === !0 && i !== a.s.floatingButton && (a.v.hazFloatingButton = !1, a.f.hideFloatingButton()) : a.v.hazFloatingButton === !1 ? (a.v.hazFloatingButton = !0, a.f.showFloatingButton(i)) : (a.f.hideFloatingButton(), a.f.showFloatingButton(i)))
                },
                click: function(e) {
                    e = e || a.w.event;
                    var t,
                        i;
                    if (t = a.f.getEl(e), t && (i = a.f.getData(t, "log")))
                        if ("embed_pin_play" === i) {
                            var n = t.parentNode.getElementsByTagName("IMG")[0];
                            "II GIF" !== t.innerHTML ? (t.innerHTML = "II GIF", n.src = n.src.replace(/237x/, "originals")) : (t.innerHTML = "&#9654; GIF", n.src = n.src.replace(/originals/, "237x"))
                        } else {
                            var o = a.f.getData(t, "href");
                            if (o)
                                switch (a.f.log("&type=" + i + "&href=" + encodeURIComponent(o)), t.className.match(/hazClick/) || (t.className = t.className + " " + a.a.k + "_hazClick"), i) {
                                case "button_pinit":
                                    var s = a.f.parse(o, {
                                        url: !0,
                                        media: !0,
                                        description: !0
                                    });
                                    s.description || a.f.log("&type=config_warning&warning_msg=no_description&href=" + encodeURIComponent(a.d.URL)), s.url && s.url.match(/^http/i) && s.media && s.media.match(/^http/i) ? a.v.config.shallow || "function" != typeof a.f.deepLink[a.v.deepBrowser] ? a.w.open(o, "pin" + (new Date).getTime(), a.a.pop) : a.f.deepLink[a.v.deepBrowser](o) : (a.f.log("&type=config_error&error_msg=invalid_url&href=" + encodeURIComponent(a.d.URL)), a.f.fireBookmark());
                                    break;
                                case "button_pinit_bookmarklet":
                                    a.f.fireBookmark();
                                    break;
                                case "button_pinit_floating":
                                    a.w.open(o, "pin" + (new Date).getTime(), a.a.pop), a.f.hideFloatingButton(), a.v.hazFloatingButton = !1;
                                    break;
                                case "embed_pin":
                                case "embed_pin_repin":
                                case "embed_board_thumb":
                                case "embed_user_thumb":
                                    a.w.open(o, "pin" + (new Date).getTime(), a.a.popLarge);
                                    break;
                                case "embed_pin_pinner":
                                case "embed_pin_img":
                                case "embed_board_hd":
                                case "embed_user_hd":
                                case "embed_board_ft":
                                case "embed_user_ft":
                                case "button_follow":
                                    a.w.open(o, "_blank")
                                }
                        }
                },
                filter: function(e) {
                    var t,
                        i;
                    t = "", i = "";
                    try {
                        t = decodeURIComponent(e)
                    } catch (n) {}
                    return i = t.replace(/</g, "&lt;"), i = i.replace(/>/g, "&gt;")
                },
                behavior: function() {
                    a.f.listen(a.d.b, "click", a.f.click), a.v.config.hover && (a.d.b.setAttribute("data-pin-hover", !0), a.f.listen(a.d.b, "mouseover", a.f.over));
                    var e = function() {
                        for (var t = a.d.getElementsByTagName("SCRIPT"), i = 0, n = t.length; i < n; i += 1)
                            t[i] && t[i].src && t[i].src.match(/^https?:\/\/logc?\.pinterest\.com/) && a.f.kill(t[i]);
                        a.w.setTimeout(function() {
                            e()
                        }, 2e3)
                    };
                    e()
                },
                getPinCount: function(e) {
                    var t = "?url=" + e + "&ref=" + encodeURIComponent(a.v.here) + "&source=" + a.a.countSource;
                    a.f.call(a.a.endpoint.count + t, a.f.ping.count)
                },
                prettyPinCount: function(e) {
                    return e > 999 && (e = e < 1e6 ? parseInt(e / 1e3, 10) + "K+" : e < 1e9 ? parseInt(e / 1e6, 10) + "M+" : "++"), e
                },
                grid: function(e, t, i) {
                    i || (i = "embed_grid"), e.style.display = "block";
                    var n = {
                            height: a.a.tile.scale.height,
                            width: a.a.tile.scale.width
                        },
                        o = a.f.getData(e, "scale-height");
                    o && o >= a.a.tile.scale.minHeight && (n.height = parseInt(o, 10));
                    var s = a.f.getData(e, "scale-width");
                    s && s >= a.a.tile.scale.minWidth && (n.width = parseInt(s, 10));
                    var r = a.f.getData(e, "board-width") || e.offsetWidth;
                    r > e.offsetWidth && (r = e.offsetWidth);
                    var l = Math.floor(r / (n.width + a.a.tile.style.margin));
                    if (l > a.a.tile.maxColumns && (l = a.a.tile.maxColumns), l < a.a.tile.minColumns)
                        return !1;
                    var c = a.f.make({
                        SPAN: {
                            className: a.a.k + "_embed_grid_bd"
                        }
                    });
                    c.style.height = n.height + "px", a.v.renderedWidth = l * (n.width + a.a.tile.style.margin) - a.a.tile.style.margin, c.style.width = a.v.renderedWidth + "px";
                    for (var d = a.f.make({
                            SPAN: {
                                className: a.a.k + "_embed_grid_ct"
                            }
                        }), u = 0, h = [], p = 0, f = t.length; p < f; p += 1) {
                        var m = a.f.make({
                                SPAN: {
                                    innerHTML: t[p].description
                                }
                            }),
                            g = a.f.make({
                                A: {
                                    className: a.a.k + "_embed_grid_th",
                                    title: m.innerHTML,
                                    "data-pin-href": a.v.endpoint.repin.replace(/%s/, t[p].id),
                                    "data-pin-id": t[p].id,
                                    "data-pin-log": i + "_thumb"
                                }
                            }),
                            v = {
                                height: t[p].images["237x"].height * (n.width / t[p].images["237x"].width),
                                width: n.width
                            },
                            _ = a.f.make({
                                IMG: {
                                    src: t[p].images["237x"].url,
                                    "data-pin-nopin": "true",
                                    height: v.height,
                                    width: v.width,
                                    className: a.a.k + "_embed_grid_img",
                                    alt: t[p].description
                                }
                            });
                        _.style.height = v.height + "px", _.style.width = v.width + "px", _.style.marginTop = 0 - v.height / a.a.tile.style.margin + "px", v.height > n.height && (v.height = n.height), g.appendChild(_), g.style.height = v.height + "px", g.style.width = v.width + "px", h[u] || (h[u] = 0), g.style.top = h[u] + "px", g.style.left = u * (n.width + a.a.tile.style.margin) + "px", h[u] = h[u] + v.height + a.a.tile.style.margin, g.appendChild(_), d.appendChild(g), u = (u + 1) % l
                    }
                    for (var b = 1e4, p = 0; p < h.length; p += 1)
                        h[p] < b && (b = h[p]);
                    return d.style.height = b + "px", c.appendChild(d), a.v.userAgent.match(/Mac OS X/) && (c.className = c.className + " " + a.a.k + "_embed_grid_scrolling_okay"), c
                },
                makeHeader: function(e, t, i, n) {
                    var o = a.v.endpoint.pinterest + t.href.split(".com")[1],
                        s = a.f.make({
                            SPAN: {
                                className: a.a.k + "_embed_grid_hd"
                            }
                        }),
                        r = a.f.make({
                            A: {
                                className: a.a.k + "_avatar",
                                "data-pin-log": i,
                                "data-pin-href": o
                            }
                        }),
                        l = a.f.make({
                            IMG: {
                                src: e.data.user.image_small_url.replace(/_30.jpg/, "_60.jpg")
                            }
                        });
                    if (r.appendChild(l), s.appendChild(r), n) {
                        var c = a.f.make({
                            A: {
                                className: a.a.k + "_embed_grid_first",
                                innerHTML: a.f.filter(e.data.user.full_name),
                                target: "_blank",
                                "data-pin-href": o,
                                "data-pin-log": i
                            }
                        });
                        c.style.width = a.v.renderedWidth - 45 + "px", s.appendChild(c);
                        var d = a.f.make({
                            A: {
                                className: a.a.k + "_embed_grid_second",
                                innerHTML: a.f.filter(e.data.board.name),
                                "data-pin-href": o,
                                "data-pin-log": i
                            }
                        });
                        d.style.width = a.v.renderedWidth - 45 + "px", s.appendChild(d)
                    } else {
                        var u = a.f.make({
                            A: {
                                className: a.a.k + "_embed_grid_mid",
                                innerHTML: a.f.filter(e.data.user.full_name),
                                "data-pin-log": i,
                                "data-pin-href": o
                            }
                        });
                        u.style.width = a.v.renderedWidth - 45 + "px", s.appendChild(u)
                    }
                    return s
                },
                makeFooter: function(e, t, i) {
                    var n,
                        o,
                        s,
                        r;
                    r = a.v.endpoint.pinterest + e.href.split(".com")[1], n = a.f.make({
                        A: {
                            className: a.a.k + "_embed_grid_ft",
                            "data-pin-log": t,
                            "data-pin-href": r
                        }
                    }), o = a.f.make({
                        SPAN: {
                            className: a.a.k + "_embed_grid_ft_logo",
                            "data-pin-log": t,
                            "data-pin-href": r
                        }
                    });
                    var l = a.v.strings;
                    return i && a.a.strings[i] && (l = a.a.strings[i]), a.v.renderedWidth > a.a.tile.minWidthToShowAuxText ? (s = a.f.make({
                        SPAN: {
                            innerHTML: l.seeOn,
                            "data-pin-log": t,
                            "data-pin-href": r
                        }
                    }), l.seeOnTextAfterLogo ? (n.appendChild(o), n.appendChild(s)) : (n.appendChild(s), n.appendChild(o))) : n.appendChild(o), n
                },
                cssHook: function(e, t) {
                    var i = a.f.getData(e, "css-hook");
                    i && (t.className = t.className + " " + i)
                },
                fireBookmark: function() {
                    a.d.b.appendChild(a.f.make({
                        SCRIPT: {
                            type: "text/javascript",
                            charset: "utf-8",
                            pinMethod: "button",
                            src: a.a.endpoint.bookmark + "?r=" + 99999999 * Math.random()
                        }
                    }))
                },
                ping: {
                    log: function() {},
                    count: function(e, t) {
                        var i = a.d.getElementById(a.a.k + "_pin_count_" + t);
                        if (i) {
                            a.f.debug("API replied with count: " + e.count);
                            var n = i.parentNode,
                                o = a.f.getData(n, "config");
                            0 === e.count && ("above" === o ? (a.f.debug("Rendering zero count above."), i.className = a.a.k + "_pin_it_button_count", i.appendChild(a.d.createTextNode("0"))) : a.f.getData(n, "zero") ? (a.f.debug("Zero pin count rendered to the side."), i.className = a.a.k + "_pin_it_button_count", i.appendChild(a.d.createTextNode("0"))) : a.f.debug("Zero pin count NOT rendered to the side.")), e.count > 0 && (a.f.debug("Got " + e.count + " pins for the requested URL."), "above" === o || "beside" === o ? (a.f.debug("Rendering pin count " + o), i.className = a.a.k + "_pin_it_button_count", i.appendChild(a.d.createTextNode(a.f.prettyPinCount(e.count)))) : a.f.debug("No valid pin count position specified; not rendering.")), a.f.cssHook(n, i)
                        } else
                            a.f.debug("Pin It button container not found.")
                    },
                    pin: function(e, t) {
                        var i = a.d.getElementById(a.a.k + "_" + t);
                        if (i && e.data && e.data[0]) {
                            a.f.debug("API replied with pin data");
                            var n = e.data[0],
                                o = {};
                            if (n.images && (o = n.images["237x"]), n && n.id && n.description && o.url && o.width && o.height) {
                                a.f.debug("Found enough data to embed a pin");
                                var s = a.v.strings,
                                    r = a.f.getData(i, "lang") || a.v.config.lang;
                                a.a.strings[r] && (s = a.a.strings[r]);
                                var l = a.f.make({
                                        SPAN: {
                                            className: a.a.k + "_embed_pin",
                                            "data-pin-id": n.id
                                        }
                                    }),
                                    c = a.f.getData(i, "style");
                                "plain" !== c && (l.className = l.className + " " + a.a.k + "_fancy");
                                var d = a.f.make({
                                        A: {
                                            className: a.a.k + "_embed_pin_link",
                                            "data-pin-log": "embed_pin",
                                            "data-pin-href": a.v.endpoint.repin.replace(/%s/, n.id)
                                        }
                                    }),
                                    u = a.f.make({
                                        IMG: {
                                            className: a.a.k + "_embed_pin_link_img",
                                            alt: n.description,
                                            "data-pin-nopin": "true",
                                            src: o.url,
                                            width: o.width,
                                            height: o.height,
                                            "data-pin-log": "embed_pin_img",
                                            "data-pin-href": a.v.endpoint.pinterest + "/pin/" + n.id + "/"
                                        }
                                    });
                                u.style.width = o.width + "px", u.style.height = o.height + "px", d.appendChild(u);
                                var h = a.a.k + "_repin";
                                "ja" === r && (h += "_ja");
                                var p = a.f.make({
                                    I: {
                                        className: h,
                                        "data-pin-id": n.id,
                                        "data-pin-log": "embed_pin_repin",
                                        "data-pin-href": a.v.endpoint.repin.replace(/%s/, n.id)
                                    }
                                });
                                if (d.appendChild(p), n.embed && n.embed.type && "gif" === n.embed.type) {
                                    var f = a.f.make({
                                        I: {
                                            className: a.a.k + "_play " + a.a.k + "_paused",
                                            innerHTML: "&#9654; GIF",
                                            "data-pin-log": "embed_pin_play"
                                        }
                                    });
                                    d.appendChild(f)
                                }
                                l.appendChild(d);
                                var m = a.f.make({
                                    SPAN: {
                                        className: a.a.k + "_embed_pin_desc",
                                        innerHTML: a.f.filter(n.description)
                                    }
                                });
                                if (n.attribution && n.attribution.url && n.attribution.author_name && n.attribution.provider_icon_url) {
                                    a.f.debug("Building attribution line");
                                    var g = a.f.make({
                                        SPAN: {
                                            className: a.a.k + "_embed_pin_attrib"
                                        }
                                    });
                                    g.appendChild(a.f.make({
                                        IMG: {
                                            className: a.a.k + "_embed_pin_attrib_icon",
                                            src: n.attribution.provider_icon_url
                                        }
                                    })), g.appendChild(a.f.make({
                                        SPAN: {
                                            className: a.a.k + "_embed_pin_attrib",
                                            innerHTML: s.attribTo + ' <a href="' + n.attribution.url + '" target="_blank">' + a.f.filter(n.attribution.author_name) + "</a>"
                                        }
                                    })), m.appendChild(g)
                                }
                                if (n.repin_count || n.like_count) {
                                    var v = a.f.make({
                                        SPAN: {
                                            className: a.a.k + "_embed_pin_stats"
                                        }
                                    });
                                    if (n.repin_count) {
                                        var _ = a.f.make({
                                            SPAN: {
                                                className: a.a.k + "_embed_pin_stats_repin_count",
                                                innerHTML: "" + n.repin_count
                                            }
                                        });
                                        v.appendChild(_)
                                    }
                                    if (n.like_count) {
                                        var b = a.f.make({
                                            SPAN: {
                                                className: a.a.k + "_embed_pin_stats_like_count",
                                                innerHTML: "" + n.like_count
                                            }
                                        });
                                        v.appendChild(b)
                                    }
                                    m.appendChild(v)
                                }
                                if (l.appendChild(m), n.pinner && n.pinner.profile_url && n.pinner.image_small_url && n.pinner.full_name) {
                                    a.f.debug("Building pinner line"), n.pinner.profile_url = n.pinner.profile_url.replace("//" + a.a.defaults.domain + ".pinterest.com", a.v.endpoint.pinterest);
                                    var w = a.f.make({
                                        A: {
                                            className: a.a.k + "_embed_pin_text"
                                        }
                                    });
                                    w.appendChild(a.f.make({
                                        IMG: {
                                            className: a.a.k + "_embed_pin_text_avatar",
                                            src: n.pinner.image_small_url,
                                            "data-pin-log": "embed_pin_pinner",
                                            "data-pin-href": n.pinner.profile_url
                                        }
                                    })), w.appendChild(a.f.make({
                                        SPAN: {
                                            className: a.a.k + "_embed_pin_text_container",
                                            innerHTML: '<span data-pin-log="embed_pin_pinner" data-pin-href="' + n.pinner.profile_url + '" class="' + a.a.k + '_embed_pin_text_container_pinner">' + a.f.filter(n.pinner.full_name) + '</span><span class="' + a.a.k + '_embed_pin_text_container_board">' + a.f.filter(n.board.name) + "</span>",
                                            "data-pin-log": "embed_pin_pinner",
                                            "data-pin-href": n.pinner.profile_url
                                        }
                                    }));
                                    var y = a.f.make({
                                        B: {
                                            className: a.a.k + "_embed_pin_link_shield",
                                            "data-pin-log": "embed_pin_pinner",
                                            "data-pin-href": n.pinner.profile_url
                                        }
                                    });
                                    w.appendChild(y), l.appendChild(w)
                                }
                                a.f.cssHook(i, l), a.f.replace(i, l)
                            } else
                                a.f.debug("Not enough data to embed a pin; aborting")
                        }
                    },
                    user: function(e, t) {
                        var i = a.d.getElementById(a.a.k + "_" + t);
                        if (i && e.data && e.data.pins && e.data.pins.length) {
                            var n = a.f.getData(i, "lang") || a.v.config.lang;
                            a.f.debug("API replied with a user");
                            var o = a.f.make({
                                    SPAN: {
                                        className: a.a.k + "_embed_grid"
                                    }
                                }),
                                s = a.f.getData(i, "style");
                            "plain" !== s && (o.className = o.className + " " + a.a.k + "_fancy");
                            var r = a.f.grid(i, e.data.pins, "embed_user");
                            if (r) {
                                var l = a.f.makeHeader(e, i, "embed_user_hd");
                                o.appendChild(l), o.appendChild(r), o.appendChild(a.f.makeFooter(i, "embed_user_ft", n)), a.f.cssHook(i, o), a.f.replace(i, o)
                            }
                        }
                    },
                    board: function(e, t) {
                        var i = a.d.getElementById(a.a.k + "_" + t);
                        if (i && e.data && e.data.pins && e.data.pins.length) {
                            a.f.debug("API replied with a group of pins");
                            var n = a.f.getData(i, "lang") || a.v.config.lang,
                                o = a.f.make({
                                    SPAN: {
                                        className: a.a.k + "_embed_grid"
                                    }
                                }),
                                s = a.f.getData(i, "style");
                            "plain" !== s && (o.className = o.className + " " + a.a.k + "_fancy");
                            var r = a.f.grid(i, e.data.pins, "embed_board");
                            if (r) {
                                var l = a.f.makeHeader(e, i, "embed_board_hd", !0);
                                o.appendChild(l), o.appendChild(r), o.appendChild(a.f.makeFooter(i, "embed_board_ft", n)), a.f.cssHook(i, o), a.f.replace(i, o)
                            }
                        }
                    }
                },
                parse: function(e, t) {
                    var i,
                        n,
                        o,
                        a,
                        s,
                        r;
                    if (r = {}, i = e.split("#")[0].split("?"), i[1])
                        for (n = i[1].split("&"), a = 0, s = n.length; a < s; a += 1)
                            o = n[a].split("="), 2 === o.length && t[o[0]] && (r[o[0]] = o[1]);
                    return r
                },
                fixUrl: function(e) {
                    var t = "";
                    try {
                        t = decodeURIComponent(e)
                    } catch (i) {}
                    return t === e && (e = encodeURIComponent(e)), e.match(/^http/i) || (e.match(/^%2F%2F/i) || (e = "%2F%2F" + e), e = "http%3A" + e, a.f.debug("fixed URL: " + e)), e
                },
                deepLink: {
                    ios_safari: function(e) {
                        var t,
                            i,
                            n,
                            o,
                            s,
                            r,
                            l;
                        t = e, i = t.split("?")[1], i = i.replace(/url=/, "source_url="), i = i.replace(/media=/, "image_url="), i = "pinit://pinit/?" + i, n = (new Date).getTime(), o = 0, s = 10, r = 80, l = function() {
                            a.w.setTimeout(function() {
                                if (o < s)
                                    l();
                                else {
                                    var e = n + o * r,
                                        i = (new Date).getTime(),
                                        c = (i - e) / s;
                                    c < r && (a.w.top.location = t)
                                }
                                o += 1
                            }, r)
                        }, a.w.location = i, l()
                    }
                },
                render: {
                    buttonBookmark: function(e) {
                        a.f.debug("build bookmarklet button");
                        var t = a.f.getButtonConfig(e),
                            i = a.a.k + "_pin_it_button_" + t.height + " " + a.a.k + "_pin_it_button_" + t.assets + "_" + t.height + "_" + t.color + " " + a.a.k + "_pin_it_button_inline_" + t.height;
                        "round" === t.shape && (i = a.a.k + "_pin_it_button_en_" + t.height + "_red_round " + a.a.k + "_pin_it_button_inline_en_" + t.height + "_red_round");
                        var n = a.f.make({
                            A: {
                                "data-pin-href": e.href,
                                "data-pin-log": "button_pinit_bookmarklet",
                                className: i
                            }
                        });
                        if ((a.f.getData(e, "zero") || a.v.config.zero) && a.f.set(n, a.a.dataAttributePrefix + "zero", !0), a.a.config.pinItCountPosition[t.config] === !0 && "rect" === t.shape) {
                            a.f.set(n, a.a.dataAttributePrefix + "config", t.config), n.className = n.className + " " + a.a.k + "_pin_it_" + t.config + "_" + t.height;
                            var o = a.f.make({
                                SPAN: {
                                    className: a.a.k + "_hidden",
                                    id: a.a.k + "_pin_count_" + a.f.callback.length,
                                    innerHTML: "<i></i>"
                                }
                            });
                            n.appendChild(o), a.f.getPinCount(a.d.URL)
                        } else
                            n.className = n.className + " " + a.a.k + "_pin_it_none";
                        a.f.replace(e, n), a.v.countButton = a.v.countButton + 1
                    },
                    buttonPin: function(e) {
                        a.f.debug("build Pin It button");
                        var t = a.f.getButtonConfig(e),
                            i = a.a.k + "_pin_it_button_" + t.height + " " + a.a.k + "_pin_it_button_" + t.assets + "_" + t.height + "_" + t.color + " " + a.a.k + "_pin_it_button_inline_" + t.height;
                        "round" === t.shape && (i = a.a.k + "_pin_it_button_en_" + t.height + "_red_round " + a.a.k + "_pin_it_button_inline_en_" + t.height + "_red_round");
                        var n,
                            o;
                        o = a.f.parse(e.href, {
                            url: !0,
                            media: !0,
                            description: !0
                        }), o.media ? o.media = a.f.fixUrl(o.media) : (o.media = "", a.f.debug("no media found; click will pop bookmark")), o.url ? o.url = a.f.fixUrl(o.url) : (o.url = encodeURIComponent(a.d.URL), a.f.debug("no url found; click will pin this page")), o.description || (o.description = encodeURIComponent(a.d.title || "")), n = a.v.endpoint.create + "url=" + o.url + "&media=" + o.media + "&guid=" + a.v.guid + "-" + a.v.buttonId + "&description=" + o.description, a.v.buttonId = a.v.buttonId + 1;
                        var s = a.f.make({
                            A: {
                                className: i,
                                "data-pin-href": n,
                                "data-pin-log": "button_pinit"
                            }
                        });
                        (a.f.getData(e, "zero") || a.v.config.zero) && a.f.set(s, a.a.dataAttributePrefix + "zero", !0);
                        var r = a.f.getData(e, "config");
                        if (a.a.config.pinItCountPosition[r] === !0 ? (a.f.set(s, a.a.dataAttributePrefix + "config", r), s.className = s.className + " " + a.a.k + "_pin_it_" + t.config + "_" + t.height, t.pad && (s.className = s.className + " " + a.a.k + "_pin_it_" + t.config + "_" + t.height + "_pad")) : s.className = s.className + " " + a.a.k + "_pin_it_none", o.url) {
                            if ("rect" === t.shape) {
                                var l = a.f.make({
                                    SPAN: {
                                        className: a.a.k + "_hidden",
                                        id: a.a.k + "_pin_count_" + a.f.callback.length,
                                        innerHTML: "<i></i>"
                                    }
                                });
                                s.appendChild(l), a.f.getPinCount(o.url)
                            }
                            a.f.replace(e, s), a.v.countButton = a.v.countButton + 1
                        }
                    },
                    buttonFollow: function(e) {
                        a.f.debug("build follow button");
                        var t = "_follow_me_button",
                            i = a.f.getData(e, "render");
                        i && (t = t + "_" + i);
                        var n = a.f.make({
                            A: {
                                className: a.a.k + t,
                                innerHTML: e.innerHTML,
                                "data-pin-href": e.href,
                                "data-pin-log": "button_follow"
                            }
                        });
                        n.appendChild(a.f.make({
                            B: {}
                        })), n.appendChild(a.f.make({
                            I: {}
                        })), a.f.replace(e, n), a.v.countFollow = a.v.countFollow + 1
                    },
                    embedPin: function(e) {
                        a.f.debug("build embedded pin");
                        var t = e.href.split("/")[4];
                        t && parseInt(t, 10) > 0 && a.f.getPinsIn("pin", "", {
                            pin_ids: t
                        }), a.v.countPin = a.v.countPin + 1
                    },
                    embedUser: function(e) {
                        a.f.debug("build embedded profile");
                        var t = e.href.split("/")[3];
                        t && a.f.getPinsIn("user", t + "/pins/"), a.v.countProfile = a.v.countProfile + 1
                    },
                    embedBoard: function(e) {
                        a.f.debug("build embedded board");
                        var t = e.href.split("/")[3],
                            i = e.href.split("/")[4];
                        t && i && a.f.getPinsIn("board", t + "/" + i + "/pins/"), a.v.countBoard = a.v.countBoard + 1
                    }
                },
                getPinsIn: function(e, t, i) {
                    i || (i = {});
                    var n,
                        o = "",
                        s = "?";
                    i.sub = a.v.config.domain;
                    for (n in i)
                        i[n].hasOwnProperty && (o = o + s + n + "=" + i[n], s = "&");
                    a.f.call(a.a.endpoint[e] + t + o, a.f.ping[e])
                },
                build: function(e) {
                    "object" == typeof e && null !== e && e.parentNode || (e = a.d);
                    var t,
                        i,
                        n,
                        o,
                        s,
                        r = e.getElementsByTagName("A"),
                        l = {
                            vertical: "above",
                            horizontal: "beside"
                        },
                        c = [];
                    for (i = 0, t = r.length; i < t; i += 1)
                        c.push(r[i]);
                    for (i = 0, t = c.length; i < t; i += 1)
                        c[i].href && c[i].href.match(a.a.myDomain) && (n = a.f.getData(c[i], "do"), !n && c[i].href.match(/pin\/create\/button/) && (n = "buttonPin", s = "none", o = a.f.get(c[i], "count-layout"), o && l[o] && (s = l[o]), a.f.set(c[i], "data-pin-config", s)), "function" == typeof a.f.render[n] && (c[i].id = a.a.k + "_" + a.f.callback.length, a.f.render[n](c[i])))
                },
                config: function() {
                    var e,
                        t,
                        i,
                        n = a.d.getElementsByTagName("SCRIPT");
                    for (e = n.length - 1; e > -1; e -= 1)
                        if (a.a.me && n[e] && n[e].src && n[e].src.match(a.a.me)) {
                            for (t = 0; t < a.a.configParam.length; t += 1)
                                i = a.f.get(n[e], a.a.dataAttributePrefix + a.a.configParam[t]), i && (a.v.config[a.a.configParam[t]] = i);
                            a.f.kill(n[e])
                        }
                    "string" == typeof a.v.config.build && (a.w[a.v.config.build] = function(e) {
                        a.f.build(e)
                    }), a.w.setTimeout(function() {
                        var e = "&type=pidget&sub=" + a.v.config.domain + "&button_count=" + a.v.countButton + "&follow_count=" + a.v.countFollow + "&pin_count=" + a.v.countPin + "&profile_count=" + a.v.countProfile + "&board_count=" + a.v.countBoard;
                        "string" == typeof a.v.config.logc ? a.f.log(e + "&logc=" + a.v.config.logc, a.a.endpoint.logc) : a.f.log(e)
                    }, 1e3)
                },
                log: function(e, t) {
                    t || (t = a.a.endpoint.log);
                    var i = "?guid=" + a.v.guid;
                    e && (i += e), i = i + "&via=" + encodeURIComponent(a.v.here), a.f.call(t + i, a.f.ping.log)
                },
                langToDomain: function(e) {
                    var t,
                        o,
                        s,
                        r,
                        l,
                        c,
                        d,
                        u;
                    e || (e = "en"), e = e.toLowerCase(), s = e.split("-"), t = s[0], 2 === s.length && (o = s[1]), c = a.a.defaults.domain, d = a.a.defaults.lang, stringMatch = a.a.defaults.strings, assetMatch = a.a.defaults.assets, u = !1;
                    for (r in a.a.domains)
                        if (!u)
                            for (l = a.a.domains[r], i = 0, n = l.lang.length; i < n; i += 1)
                                if ((l.lang[i] === t || l.lang[i] === t + "-" + o) && (c = r, d = t, l.lang[i] === t + "-" + o)) {
                                    d = t + "-" + o, u = !0;
                                    break
                                }
                    return l = a.a.domains[c], l.assets && (assetMatch = l.assets), l.strings && a.a.strings[l.strings] && (stringMatch = l.strings), c = c.split(":")[0], {
                        lang: d,
                        domain: c,
                        strings: stringMatch,
                        assets: assetMatch
                    }
                },
                init: function() {
                    if (a.d.b = a.d.getElementsByTagName("BODY")[0], a.d.b) {
                        a.d.h = a.d.getElementsByTagName("HEAD")[0], a.v = {
                            resolution: 1,
                            here: a.d.URL.split("#")[0],
                            hazFloatingButton: !1,
                            config: {
                                color: "gray",
                                assets: "en",
                                height: "20",
                                shape: "rect"
                            },
                            strings: a.a.strings.en,
                            guid: "",
                            buttonId: 0,
                            deepBrowser: null,
                            protocol: a.w.location.protocol,
                            userAgent: a.w.navigator.userAgent,
                            countButton: 0,
                            countFollow: 0,
                            countPin: 0,
                            countBoard: 0,
                            countProfile: 0
                        }, "file:" === a.v.protocol && (a.v.protocol = "http:");
                        for (var e in a.a.endpoint)
                            a.a.endpoint[e] = a.v.protocol + a.a.endpoint[e];
                        null !== a.v.userAgent.match(/iP/) && null === a.v.userAgent.match(/Pinterest/) && null === a.v.userAgent.match(/CriOS/) && (a.v.deepBrowser = "ios_safari"), null !== a.v.userAgent.match(/MSIE/) && (a.v.hazIE = !0);
                        for (var t = 0; t < 12; t += 1)
                            a.v.guid = a.v.guid + "0123456789ABCDEFGHJKLMNPQRSTUVWXYZ_abcdefghijkmnopqrstuvwxyz".substr(Math.floor(60 * Math.random()), 1);
                        a.w.devicePixelRatio && a.w.devicePixelRatio >= 2 && (a.v.resolution = 2), a.f.config();
                        var i = a.a.defaults.lang;
                        if (a.v.config.lang && "object" == typeof a.a.strings[a.v.config.lang])
                            i = a.v.config.lang;
                        else {
                            var i = a.d.getElementsByTagName("HTML")[0].getAttribute("lang");
                            if (!i) {
                                var o = a.d.getElementsByTagName("META");
                                for (t = 0, n = o.length; t < n; t += 1) {
                                    var s = a.f.get(o[t], "http-equiv");
                                    if (s && (s = s.toLowerCase(), "content-language" === s)) {
                                        var r = a.f.get(o[t], "content");
                                        if (r) {
                                            i = r.split("-")[0];
                                            break
                                        }
                                    }
                                }
                            }
                        }
                        a.v.config.lang && (i = a.v.config.lang);
                        var l = a.f.langToDomain(i);
                        a.v.config.assets = l.assets, a.v.config.lang = l.lang, a.v.config.domain = l.domain, a.v.endpoint = {
                            pinterest: "//" + l.domain + ".pinterest.com",
                            repin: "//" + l.domain + ".pinterest.com/pin/%s/repin/x/",
                            create: "//" + l.domain + ".pinterest.com/pin/create/button/?"
                        }, a.f.build(), a.f.presentation(), a.f.behavior()
                    }
                }
            }
        }()
    };
    a.f.init()
}(window, document, {
    k: "PIN_" + (new Date).getTime(),
    myDomain: /^https?:\/\/(([a-z]{1,3})\.)?pinterest\.com\//,
    me: /pinit\.js$/,
    floatingButtonOffsetTop: 10,
    floatingButtonOffsetLeft: 10,
    endpoint: {
        bookmark: "//assets.pinterest.com/js/pinmarklet.js",
        count: "//widgets.pinterest.com/v1/urls/count.json",
        pin: "//widgets.pinterest.com/v3/pidgets/pins/info/",
        board: "//widgets.pinterest.com/v3/pidgets/boards/",
        user: "//widgets.pinterest.com/v3/pidgets/users/",
        log: "//log.pinterest.com/",
        logc: "//logc.pinterest.com/"
    },
    config: {
        pinItCountPosition: {
            none: !0,
            above: !0,
            beside: !0
        }
    },
    minImgSize: 119,
    countSource: 6,
    dataAttributePrefix: "data-pin-",
    configParam: ["build", "debug", "style", "hover", "logc", "shallow", "zero", "color", "height", "lang", "shape"],
    pop: "status=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,location=no,toolbar=no,menubar=no,width=632,height=270,left=0,top=0",
    popLarge: "status=no,resizable=yes,scrollbars=yes,personalbar=no,directories=no,location=no,toolbar=no,menubar=no,width=900,height=500,left=0,top=0",
    cdn: {
        "https:": "https://s-passets.pinimg.com",
        "http:": "http://passets.pinterest.com",
        "file:": "http://passets.pinterest.com"
    },
    tile: {
        scale: {
            minWidth: 60,
            minHeight: 60,
            width: 92,
            height: 175
        },
        minWidthToShowAuxText: 150,
        minContentWidth: 120,
        minColumns: 1,
        maxColumns: 8,
        style: {
            margin: 2,
            padding: 10
        }
    },
    hazAssets: {
        en: !0,
        ja: !0
    },
    defaults: {
        domain: "www",
        strings: "en",
        lang: "en",
        assets: "en"
    },
    domains: {
        www: {
            lang: ["en"],
            strings: "en",
            assets: "en"
        },
        br: {
            lang: ["pt-br"],
            strings: "pt-br"
        },
        cz: {
            lang: ["cs"],
            strings: "cs"
        },
        de: {
            lang: ["de"],
            strings: "de"
        },
        dk: {
            lang: ["da"],
            strings: "da"
        },
        es: {
            lang: ["es"],
            strings: "es"
        },
        fi: {
            lang: ["fi"],
            strings: "fi"
        },
        fr: {
            lang: ["fr"],
            strings: "fr"
        },
        uk: {
            lang: ["en-uk", "en-gb", "en-ie"],
            strings: "en"
        },
        gr: {
            lang: ["el"],
            strings: "el"
        },
        hu: {
            lang: ["hu"],
            strings: "hu"
        },
        id: {
            lang: ["id", "in"],
            strings: "id"
        },
        "in": {
            lang: ["hi"],
            strings: "hi"
        },
        it: {
            lang: ["it"],
            strings: "it"
        },
        jp: {
            lang: ["ja"],
            strings: "ja",
            assets: "ja"
        },
        kr: {
            lang: ["ko", "kr"],
            strings: "ko"
        },
        "www:my": {
            lang: ["ms"],
            strings: "ms"
        },
        nl: {
            lang: ["nl"],
            strings: "nl"
        },
        no: {
            lang: ["nb"],
            strings: "nb"
        },
        "www:ph": {
            lang: ["tl"],
            strings: "tl"
        },
        pl: {
            lang: ["pl"],
            strings: "pl"
        },
        pt: {
            lang: ["pt"],
            strings: "pt"
        },
        ro: {
            lang: ["ro"],
            strings: "ro"
        },
        ru: {
            lang: ["ru"],
            strings: "ru"
        },
        sk: {
            lang: ["sk"],
            strings: "sk"
        },
        se: {
            lang: ["sv", "sv-se"],
            strings: "sv"
        },
        "www:th": {
            lang: ["th"],
            strings: "th"
        },
        tr: {
            lang: ["tr"],
            strings: "tr"
        },
        "www:ua": {
            lang: ["ua"],
            strings: "ua"
        },
        "www:vn": {
            lang: ["vi"],
            strings: "vi"
        }
    },
    strings: {
        cs: {
            seeOn: "Zobrazit na",
            attribTo: "od"
        },
        da: {
            seeOn: "Se p&#229;",
            attribTo: "af"
        },
        de: {
            seeOn: "Ansehen auf",
            attribTo: "von"
        },
        el: {
            seeOn: "&delta;&epsilon;&#943;&tau;&epsilon; &tau;&omicron; &sigma;&tau;&omicron;",
            attribTo: "&alpha;&pi;&omicron;&delta;&#943;&delta;&epsilon;&tau;&alpha;&iota; &sigma;&tau;&omicron;"
        },
        en: {
            seeOn: "See On",
            attribTo: "by"
        },
        "en-gb": {
            seeOn: "See On",
            attribTo: "by"
        },
        "en-uk": {
            seeOn: "See On",
            attribTo: "by"
        },
        es: {
            seeOn: "Ver En",
            attribTo: "por"
        },
        fi: {
            seeOn: "Katso palvelussa",
            attribTo: "tekij&#228;"
        },
        fr: {
            seeOn: "Voir sur",
            attribTo: "par"
        },
        hi: {
            seeOn: "&#2346;&#2352; &#2342;&#2375;&#2326;&#2375;&#2306;",
            attribTo: "&#2325;&#2379; &#2358;&#2381;&#2352;&#2375;&#2351; &#2342;&#2375;&#2344;&#2366;"
        },
        hu: {
            seeOn: "L&aacute;sd itt",
            attribTo: "Hozz&aacute;rendelve a k&ouml;vetkez&#337;h&ouml;z:"
        },
        id: {
            seeOn: "Lihat di",
            attribTo: "oleh"
        },
        it: {
            seeOn: "Visualizza in",
            attribTo: "da"
        },
        ko: {
            seeOn: "&#45796;&#51020;&#50640;&#49436; &#48372;&#44592;",
            attribTo: "&#51060; &#54592;&#54632;"
        },
        ja: {
            seeOn: "&#12391;&#35211;&#12427;",
            seeOnTextAfterLogo: !0,
            attribTo: ""
        },
        ms: {
            seeOn: "lihat di",
            attribTo: "attribut ke"
        },
        nb: {
            seeOn: "Vis p&#229;",
            attribTo: "av"
        },
        nl: {
            seeOn: "Bekijken op",
            attribTo: "door"
        },
        pl: {
            seeOn: "Zobacz na",
            attribTo: "przez"
        },
        pt: {
            seeOn: "Ver em",
            attribTo: "por"
        },
        "pt-br": {
            seeOn: "Ver em",
            attribTo: "por"
        },
        ro: {
            seeOn: "vezi pe",
            attribTo: "de la"
        },
        ru: {
            seeOn: "&#1055;&#1086;&#1089;&#1084;&#1086;&#1090;&#1088;&#1077;&#1090;&#1100; &#1074;",
            attribTo: "&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1077;&#1084;"
        },
        tl: {
            seeOn: "tingnan sa",
            attribTo: ""
        },
        th: {
            seeOn: "&#3604;&#3641;&#3651;&#3609;",
            attribTo: "&#3648;&#3586;&#3637;&#3618;&#3609;&#3650;&#3604;&#3618;"
        },
        sk: {
            seeOn: "Zobrazi&#357; na",
            attribTo: "od"
        },
        sv: {
            seeOn: "Visa p&#229;",
            attribTo: "av"
        },
        tr: {
            seeOn: "&#220;zerinde g&#246;r",
            attribTo: "taraf&#305;ndan"
        },
        ua: {
            seeOn: "&#1076;&#1080;&#1074;&#1110;&#1090;&#1100;&#1089;&#1103; &#1085;&#1072;",
            attribTo: "&#1086;&#1087;&#1080;&#1089;"
        },
        vi: {
            seeOn: "xem tr&ecirc;n",
            attribTo: "&#273;&#432;a v&agrave;o"
        }
    },
    rules: ["a._pin_it_button_20 { cursor: pointer; background-repeat: none; background-size: 40px 60px; height: 20px; padding: 0; vertical-align: baseline; text-decoration: none; width: 40px; background-position: 0 -20px }", "a._pin_it_button_20:hover { background-position: 0 0px }", "a._pin_it_button_20:active, a._pin_it_button_20._hazClick { background-position: 0 -40px }", "a._pin_it_button_inline_20 { cursor: pointer; position: relative; display: inline-block; }", "a._pin_it_button_floating_20 { cursor: pointer; position: absolute; }", "a._pin_it_beside_20_pad { margin-right: 45px; }", "a._pin_it_button_en_20_red { background-image: url(_cdn/images/pidgets/pinit_bg_en_rect_red_20__rez.png); }", "a._pin_it_button_en_20_white { background-image: url(_cdn/images/pidgets/pinit_bg_en_rect_white_20__rez.png); }", "a._pin_it_button_en_20_gray { background-image: url(_cdn/images/pidgets/pinit_bg_en_rect_gray_20__rez.png); }", "a._pin_it_button_ja_20_red { background-image: url(_cdn/images/pidgets/pinit_bg_ja_rect_red_20__rez.png); }", "a._pin_it_button_ja_20_white { background-image: url(_cdn/images/pidgets/pinit_bg_ja_rect_white_20__rez.png); }", "a._pin_it_button_ja_20_gray { background-image: url(_cdn/images/pidgets/pinit_bg_ja_rect_gray_20__rez.png); }", "a._pin_it_above_20 span._pin_it_button_count { background: transparent url(_cdn/images/pidgets/count_north_white_rect_20__rez.png) 0 0 no-repeat; background-size: 40px 29px; position: absolute; bottom: 21px; left: 0px; height: 29px; width: 40px; font: 12px Arial, Helvetica, sans-serif; line-height: 24px; text-indent: 0;}", "a._pin_it_button_20 span._pin_it_button_count { position: absolute; color: #777; text-align: center; text-indent: 0; }", "a._pin_it_beside_20 span._pin_it_button_count, a._pin_it_beside_20 span._pin_it_button_count i { background-color: transparent; background-repeat: no-repeat; background-image: url(_cdn/images/pidgets/count_east_white_rect_20__rez.png); }", "a._pin_it_beside_20 span._pin_it_button_count { padding: 0 3px 0 10px; background-size: 45px 20px; background-position: 0 0; position: absolute; top: 0; left: 41px; height: 20px; font: 10px Arial, Helvetica, sans-serif; line-height: 20px; }", "a._pin_it_beside_20 span._pin_it_button_count i { background-position: 100% 0; position: absolute; top: 0; right: -2px; height: 20px; width: 2px; }", "a._pin_it_button_20._pin_it_above { margin-top: 20px; }", "a._pin_it_button_28 { cursor: pointer; background-repeat: none; background-size: 56px 84px; height: 28px; padding: 0; vertical-align: baseline; text-decoration: none; width: 56px; background-position: 0 -28px }", "a._pin_it_button_28:hover { background-position: 0 0px }", "a._pin_it_button_28:active, a._pin_it_button_28._hazClick { background-position: 0 -56px }", "a._pin_it_button_inline_28 { cursor: pointer; position: relative; display: inline-block; }", "a._pin_it_button_floating_28 { cursor: pointer; position: absolute; }", "a._pin_it_beside_28_pad { margin-right: 50px;}", "a._pin_it_button_en_28_red { background-image: url(_cdn/images/pidgets/pinit_bg_en_rect_red_28__rez.png); }", "a._pin_it_button_en_28_white { background-image: url(_cdn/images/pidgets/pinit_bg_en_rect_white_28__rez.png); }", "a._pin_it_button_en_28_gray { background-image: url(_cdn/images/pidgets/pinit_bg_en_rect_gray_28__rez.png); }", "a._pin_it_button_ja_28_red { background-image: url(_cdn/images/pidgets/pinit_bg_ja_rect_red_28__rez.png); }", "a._pin_it_button_ja_28_white { background-image: url(_cdn/images/pidgets/pinit_bg_ja_rect_white_28__rez.png); }", "a._pin_it_button_ja_28_gray { background-image: url(_cdn/images/pidgets/pinit_bg_ja_rect_gray_28__rez.png); }", "a._pin_it_button_en_16_red_round, a._pin_it_button_en_32_red_round { background-repeat: none; margin: 0; padding: 0; vertical-align: baseline; text-decoration: none; }", "a._pin_it_button_en_16_red_round { height: 16px; width: 16px; background-size: 16px 16px; background-image: url(_cdn/images/pidgets/pinit_bg_en_round_red_16__rez.png);}", "a._pin_it_button_en_32_red_round { height: 32px; width: 32px; background-size: 32px 32px; background-image: url(_cdn/images/pidgets/pinit_bg_en_round_red_32__rez.png);}", "a._pin_it_button_inline_en_16_red_round, a._pin_it_button_inline_en_32_red_round { position: relative; display: inline-block; }", "a._pin_it_button_floating_en_16_red_round, a._pin_it_button_floating_en_32_red_round  { position: absolute; }", "a._pin_it_button_28 span._pin_it_button_count { position: absolute; color: #777; text-align: center; text-indent: 0; }", "a._pin_it_above_28 span._pin_it_button_count { background: transparent url(_cdn/images/pidgets/count_north_white_rect_28__rez.png) 0 0 no-repeat; background-size: 56px 37px; position: absolute; bottom: 29px; left: 0px; height: 37px; width: 56px; font: 15px Arial, Helvetica, sans-serif; line-height: 28px; text-indent: 0;}", "a._pin_it_beside_28 span._pin_it_button_count, a._pin_it_beside_28 span._pin_it_button_count i { background-color: transparent; background-repeat: no-repeat; background-image: url(_cdn/images/pidgets/count_east_white_rect_28__rez.png); }", "a._pin_it_beside_28 span._pin_it_button_count { padding: 0 3px 0 10px; background-size: 63px 28px; background-position: 0 0; position: absolute; top: 0; left: 57px; height: 28px; font: 12px Arial, Helvetica, sans-serif; line-height: 28px; }", "a._pin_it_beside_28 span._pin_it_button_count i { background-position: 100% 0; position: absolute; top: 0; right: -2px; height: 28px; width: 2px; }", "a._pin_it_button_28._pin_it_above { margin-top: 28px; }", "a._follow_me_button, a._follow_me_button i { cursor: pointer; background-size: 200px 60px; background: transparent url(_cdn/images/pidgets/bfs_rez.png) 0 0 no-repeat }", 'a._follow_me_button { color: #444; display: inline-block; font: bold normal normal 11px/20px "Helvetica Neue",helvetica,arial,san-serif; height: 20px; margin: 0; padding: 0; position: relative; text-decoration: none; text-indent: 19px; vertical-align: baseline;}', "a._follow_me_button:hover { background-position: 0 -20px}", "a._follow_me_button:active  { background-position: 0 -40px}", "a._follow_me_button b { position: absolute; top: 3px; left: 3px; height: 14px; width: 14px; background-size: 14px 14px; background-image: url(_cdn/images/pidgets/log_rez.png); }", "a._follow_me_button i { position: absolute; top: 0; right: -4px; height: 20px; width: 4px; background-position: 100% 0px; }", "a._follow_me_button:hover i { background-position: 100% -20px;  }", "a._follow_me_button:active i { background-position: 100% -40px; }", "a._follow_me_button_tall, a._follow_me_button_tall i { background-size: 400px 84px; background: transparent url(_cdn/images/pidgets/bft_rez.png) 0 0 no-repeat }", 'a._follow_me_button_tall { color: #444; display: inline-block; font: bold normal normal 13px/28px "Helvetica Neue",helvetica,arial,san-serif; height: 28px; margin: 0; padding: 0; position: relative; text-decoration: none; text-indent: 33px; vertical-align: baseline;}', "a._follow_me_button_tall:hover { background-position: 0 -28px}", "a._follow_me_button_tall:active  { background-position: 0 -56px}", "a._follow_me_button_tall b { position: absolute; top: 5px; left: 10px; height: 18px; width: 18px; background-size: 18px 18px; background-image: url(_cdn/images/pidgets/smt_rez.png); }", "a._follow_me_button_tall i { position: absolute; top: 0; right: -10px; height: 28px; width: 10px; background-position: 100% 0px; }", "a._follow_me_button_tall:hover i { background-position: 100% -28px;  }", "a._follow_me_button_tall:active i { background-position: 100% -56px; }", "span._embed_pin { -webkit-font-smoothing: antialiased; cursor: pointer; display: inline-block; text-align: center; width: 237px; overflow: hidden; vertical-align: top; }", "span._embed_pin._fancy { background: #fff; box-shadow: 0 1px 3px rgba(0, 0, 0, .33); border-radius: 3px; }", "span._embed_pin a._embed_pin_link { display: block;  margin: 0 auto; padding: 0; position: relative;  line-height: 0}", "span._embed_pin img._embed_pin_link_img { border: 0; margin: 0; padding: 0; border-bottom: 1px solid rgba(0, 0, 0, .09);}", "span._embed_pin a._embed_pin_link i._repin { left: 12px; top: 12px; position: absolute; height: 20px; width: 40px; background-size: 40px 60px;  background: transparent url(_cdn/images/pidgets/pinit_bg_en_rect_red_20__rez.png) }", "span._embed_pin a._embed_pin_link i._repin_ja { left: 12px; top: 12px; position: absolute; height: 20px; width: 40px; background-size: 40px 60px; background: transparent url(_cdn/images/pidgets/pinit_bg_ja_rect_red_20__rez.png) }", "span._embed_pin a._embed_pin_link i._repin:hover, span._embed_pin a._embed_pin_link i._repin_ja:hover { background-position: 0 -20px; }", "span._embed_pin a._embed_pin_link i._repin._hazClick, span._embed_pin a._embed_pin_link i._repin_ja._hazClick { background-position: 0 -40px; }", 'span._embed_pin a._embed_pin_link i._play { display: block; width: 50px; white-space: pre; font-family: "Helvetica Neue",helvetica,arial,san-serif; font-weight: bold; font-style: normal; font-size: 9px; line-height: 12px; margin: 0; position: absolute; bottom: 12px; left: 12px; text-decoration: none; background: rgba(0, 0, 0, .4); color: rgba(255, 255, 255, 1); border-radius: 13px; padding: 5px 0; box-shadow: 0 0 2px rgba(0, 0, 0, .2); border: 2px solid rgba(255, 255, 255, .68);}', "span._embed_pin a._embed_pin_link i._play:hover { background: rgba(0, 0, 0, .8); color: #fff; }", 'span._embed_pin span._embed_pin_desc { color: #363636; white-space: normal; border-bottom: 1px solid rgba(0, 0, 0, .09);; display: block; font-family: "Helvetica Neue", arial, sans-serif; font-size: 13px; line-height: 17px; padding: 12px; text-align: left; }', 'span._embed_pin span._embed_pin_attrib { color: #a8a8a8; font-family: "Helvetica Neue", sans-serif; font-size: 11px; line-height: 18px; margin-top: 12px; font-weight: bold; display: block;}', "span._embed_pin span._embed_pin_attrib img._embed_pin_attrib_icon { height: 16px; width: 16px; vertical-align: middle; padding: 0; margin: 0 5px 0 0; float: left;}", "span._embed_pin span._embed_pin_attrib a { color: #a8a8a8; text-decoration: none;}", "span._embed_pin span._embed_pin_stats { display: block; }", 'span._embed_pin span._embed_pin_stats span._embed_pin_stats_repin_count, span._embed_pin span._embed_pin_stats span._embed_pin_stats_like_count { display: inline-block; padding-left: 17px; padding-right: 10px; color: #a8a8a8; font-family: "Helvetica Neue", sans-serif; font-size: 11px; line-height: 12px; margin-top: 12px; font-weight: bold; }', "span._embed_pin span._embed_pin_stats span._embed_pin_stats_repin_count { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAALCAAAAABq7uO+AAAASklEQVQI10WNMQrAMBRCvf/Z3pQcImPplsIPdqhNXOSJqLxVtnWQsuUO9IM3cHlV8dSSDZQHAOPH2YA2FU+qtH7MRhaVh/xt/PQCEW6N4EV+CPEAAAAASUVORK5CYII=) 0 0 no-repeat; }", "span._embed_pin span._embed_pin_stats span._embed_pin_stats_like_count { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAAAAAClR+AmAAAAUElEQVR4AT2HMQpFIQwEc/+zbXhFLBW8QUihIAT2E8Q/xe6M0Jv2zK7NKUcBzAlAjzjqtdZl4c8S2nOjMPS6BoWMr/wLVnAbYJs3mGMkXzx+OeRqUf5HHRoAAAAASUVORK5CYII=) 0 2px no-repeat; }", 'span._embed_pin a._embed_pin_text { padding: 12px; position: relative; text-decoration: none; display: block; font-weight: bold; color: #b7b7b7; font-family: "Helvetica Neue", arial, sans-serif; font-size: 11px; line-height: 14px; height: 30px; text-align: left; }', "span._embed_pin a._embed_pin_text:hover { background: #eee;}", "span._embed_pin a._embed_pin_text img._embed_pin_text_avatar { border-radius: 15px; overflow: hidden; height: 30px; width: 30px; vertical-align: middle; margin: 0 8px 12px 0; float: left;}", "span._embed_pin a._embed_pin_text span._embed_pin_text_container_pinner, span._embed_pin a._embed_pin_text span._embed_pin_text_container_board { display: block; width: 175px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}", "span._embed_pin a._embed_pin_text span._embed_pin_text_container_pinner { color: #777;}", "span._embed_pin a._embed_pin_text b._embed_pin_link_shield { position: absolute; top: 0; left: 0; height: 100%; width: 100%; }", "span._embed_grid { display: inline-block; margin: 0; padding:10px 0; position: relative; text-align: center}", "span._embed_grid._fancy { background: #fff; box-shadow: 0 0 3px #aaa; border-radius: 3px; }", "span._embed_grid span._embed_grid_hd { display: block; margin: 0 10px; padding: 0; height: 45px; position: relative; background: #fff}", "span._embed_grid span._embed_grid_hd a._avatar { position: absolute; top: 0; left: 0; height: 36px; width: 36px; }", 'span._embed_grid span._embed_grid_hd a._avatar::before { position: absolute; content:""; z-index: 2; top: 0; left: 0; right: 0; bottom: 0; box-shadow: inset 0 0 2px #888;  border-radius: 3px; }', "span._embed_grid span._embed_grid_hd a._avatar img { position: relative; height: 36px; width: 36px; margin: 0; padding: 0; border-radius: 3px; border: none;}", "span._embed_grid span._embed_grid_hd a { text-decoration: none; background: transparent; cursor: pointer; white-space: nowrap; position: absolute; left: 44px; text-align: left; overflow: hidden; text-overflow: ellipsis; }", "span._embed_grid span._embed_grid_hd a:hover { text-decoration: none; background: #fff; }", "span._embed_grid span._embed_grid_hd a:active { text-decoration: none; background: #fff; }", "span._embed_grid span._embed_grid_hd a._embed_grid_first { top: 2px; font-family: helvetica, sans-serif; font-weight: bold; color:#333; font-size: 14px; line-height: 16px; }", "span._embed_grid span._embed_grid_hd a._embed_grid_second { bottom: 11px; font-family: helvetica, sans-serif; color:#8e8e8e; font-size: 12px; line-height: 14px; }", "span._embed_grid span._embed_grid_hd a._embed_grid_mid { top: 12px; font-family: helvetica, sans-serif; font-weight: bold; color:#333; font-size: 14px; line-height: 16px; }", "span._embed_grid span._embed_grid_bd { display:block; margin: 0 10px; border-radius: 2px; position: relative; overflow: hidden }", "span._embed_grid span._embed_grid_scrolling_okay { overflow: auto; }", "span._embed_grid span._embed_grid_bd span._embed_grid_ct { display:block; position: relative; overflow: hidden; }", "span._embed_grid span._embed_grid_bd a._embed_grid_th { cursor: pointer; display: inline-block; position: absolute; overflow: hidden; }", 'span._embed_grid span._embed_grid_bd a._embed_grid_th::before { position: absolute; content:""; z-index: 2; top: 0; left: 0; right: 0; bottom: 0; box-shadow: inset 0 0 2px #888; }', "span._embed_grid span._embed_grid_bd a._embed_grid_th img._embed_grid_img { border: none; position: absolute; top: 50%; left: 0; }", "a._embed_grid_ft { cursor: pointer; text-shadow: 0 1px #fff; display: block; text-align: center; border: 1px solid #ccc; margin: 10px 10px 0; height: 31px; line-height: 30px;border-radius: 2px; text-decoration: none; font-family: Helvetica; font-weight: bold; font-size: 13px; color: #746d6a; background: #f4f4f4 url(_cdn/images/pidgets/board_button_link.png) 0 0 repeat-x}", "a._embed_grid_ft:hover { text-decoration: none; background: #fefefe url(_cdn/images/pidgets/board_button_hover.png) 0 0 repeat-x}", "a._embed_grid_ft:active { text-decoration: none; background: #e4e4e4 url(_cdn/images/pidgets/board_button_active.png) 0 0 repeat-x}", "a._embed_grid_ft span._embed_grid_ft_logo { vertical-align: top; display: inline-block; margin-left: 2px; height: 30px; width: 66px; background: transparent url(_cdn/images/pidgets/board_button_logo.png) 50% 48% no-repeat; }", "._hidden { display:none; }"]
}), !function(e, t, i, n, o) {
    "use strict";
    function a(e) {
        var t = "bez_" + n.makeArray(arguments).join("_").replace(".", "p");
        if ("function" != typeof n.easing[t]) {
            var i = function(e, t) {
                var i = [null, null],
                    n = [null, null],
                    o = [null, null],
                    a = function(a, s) {
                        return o[s] = 3 * e[s], n[s] = 3 * (t[s] - e[s]) - o[s], i[s] = 1 - o[s] - n[s], a * (o[s] + a * (n[s] + a * i[s]))
                    },
                    s = function(e) {
                        return o[0] + e * (2 * n[0] + 3 * i[0] * e)
                    },
                    r = function(e) {
                        for (var t, i = e, n = 0; ++n < 14 && (t = a(i, 0) - e, !(Math.abs(t) < .001));)
                            i -= t / s(i);
                        return i
                    };
                return function(e) {
                    return a(r(e), 1)
                }
            };
            n.easing[t] = function(t, n, o, a, s) {
                return a * i([e[0], e[1]], [e[2], e[3]])(n / s) + o
            }
        }
        return t
    }
    function s() {}
    function r(e, t, i) {
        return Math.max(isNaN(t) ? -1 / 0 : t, Math.min(isNaN(i) ? 1 / 0 : i, e))
    }
    function l(e) {
        return e.match(/ma/) && e.match(/-?\d+(?!d)/g)[e.match(/3d/) ? 12 : 4]
    }
    function c(e) {
        return Dt ? +l(e.css("transform")) : +e.css("left").replace("px", "")
    }
    function d(e, t) {
        var i = {};
        return Dt ? i.transform = "translate3d(" + (e + (t ? .001 : 0)) + "px,0,0)" : i.left = e, i
    }
    function u(e) {
        return {
            "transition-duration": e + "ms"
        }
    }
    function h(e, t) {
        return +String(e).replace(t || "px", "") || o
    }
    function p(e) {
        return /%$/.test(e) && h(e, "%")
    }
    function f(e, t) {
        return p(e) / 100 * t || h(e)
    }
    function m(e) {
        return (!!h(e) || !!h(e, "%")) && e
    }
    function g(e, t, i, n) {
        return (e - (n || 0)) * (t + (i || 0))
    }
    function v(e, t, i, n) {
        return -Math.round(e / (t + (i || 0)) - (n || 0))
    }
    function _(e) {
        var t = e.data();
        if (!t.tEnd) {
            var i = e[0],
                n = {
                    WebkitTransition: "webkitTransitionEnd",
                    MozTransition: "transitionend",
                    OTransition: "oTransitionEnd otransitionend",
                    msTransition: "MSTransitionEnd",
                    transition: "transitionend"
                };
            i.addEventListener(n[ht.prefixed("transition")], function(e) {
                t.tProp && e.propertyName.match(t.tProp) && t.onEndFn()
            }, !1), t.tEnd = !0
        }
    }
    function b(e, t, i, n) {
        var o,
            a = e.data();
        a && (a.onEndFn = function() {
            o || (o = !0, clearTimeout(a.tT), i())
        }, a.tProp = t, clearTimeout(a.tT), a.tT = setTimeout(function() {
            a.onEndFn()
        }, 1.5 * n), _(e))
    }
    function w(e, t, i) {
        if (e.length) {
            var n = e.data();
            Dt ? (e.css(u(0)), n.onEndFn = s, clearTimeout(n.tT)) : e.stop();
            var o = y(t, function() {
                return c(e)
            });
            return e.css(d(o, i)), o
        }
    }
    function y() {
        for (var e, t = 0, i = arguments.length; i > t && (e = t ? arguments[t]() : arguments[t], "number" != typeof e); t++)
            ;
        return e
    }
    function $(e, t) {
        return Math.round(e + (t - e) / 1.5)
    }
    function k() {
        return k.p = k.p || ("https:" === i.protocol ? "https://" : "http://"), k.p
    }
    function x(e) {
        var i = t.createElement("a");
        return i.href = e, i
    }
    function C(e, t) {
        if ("string" != typeof e)
            return e;
        e = x(e);
        var i,
            n;
        if (e.host.match(/youtube\.com/) && e.search) {
            if (i = e.search.split("v=")[1]) {
                var o = i.indexOf("&");
                -1 !== o && (i = i.substring(0, o)), n = "youtube"
            }
        } else
            e.host.match(/youtube\.com|youtu\.be/) ? (i = e.pathname.replace(/^\/(embed\/|v\/)?/, "").replace(/\/.*/, ""), n = "youtube") : e.host.match(/vimeo\.com/) && (n = "vimeo", i = e.pathname.replace(/^\/(video\/)?/, "").replace(/\/.*/, ""));
        return i && n || !t || (i = e.href, n = "custom"), !!i && {
            id: i,
            type: n,
            s: e.search.replace(/^\?/, "")
        }
    }
    function T(e, t, i) {
        var o,
            a,
            s = e.video;
        return "youtube" === s.type ? (a = k() + "img.youtube.com/vi/" + s.id + "/default.jpg", o = a.replace(/\/default.jpg$/, "/hqdefault.jpg"), e.thumbsReady = !0) : "vimeo" === s.type ? n.ajax({
            url: k() + "vimeo.com/api/v2/video/" + s.id + ".json",
            dataType: "jsonp",
            success: function(n) {
                e.thumbsReady = !0, I(t, {
                    img: n[0].thumbnail_large,
                    thumb: n[0].thumbnail_small
                }, e.i, i)
            }
        }) : e.thumbsReady = !0, {
            img: o,
            thumb: a
        }
    }
    function I(e, t, i, o) {
        for (var a = 0, s = e.length; s > a; a++) {
            var r = e[a];
            if (r.i === i && r.thumbsReady) {
                var l = {
                    videoReady: !0
                };
                l[Kt] = l[Zt] = l[Yt] = !1, o.splice(a, 1, n.extend({}, r, l, t));
                break
            }
        }
    }
    function S(e) {
        function t(e, t, o) {
            var a = e.children("img").eq(0),
                s = e.attr("href"),
                r = e.attr("src"),
                l = a.attr("src"),
                c = t.video,
                d = !!o && C(s, c === !0);
            d ? s = !1 : d = c, i(e, a, n.extend(t, {
                video: d,
                img: t.img || s || r || l,
                thumb: t.thumb || l || r || s
            }))
        }
        function i(e, t, i) {
            var o = i.thumb && i.img !== i.thumb,
                a = h(i.width || e.attr("width")),
                s = h(i.height || e.attr("height"));
            n.extend(i, {
                width: a,
                height: s,
                thumbratio: q(i.thumbratio || h(i.thumbwidth || t && t.attr("width") || o || a) / h(i.thumbheight || t && t.attr("height") || o || s))
            })
        }
        var o = [];
        return e.children().each(function() {
            var e = n(this),
                a = B(n.extend(e.data(), {
                    id: e.attr("id")
                }));
            if (e.is("a, img"))
                t(e, a, !0);
            else {
                if (e.is(":empty"))
                    return;
                i(e, null, n.extend(a, {
                    html: this,
                    _html: e.html()
                }))
            }
            o.push(a)
        }), o
    }
    function P(e) {
        return 0 === e.offsetWidth && 0 === e.offsetHeight
    }
    function D(e) {
        return !n.contains(t.documentElement, e)
    }
    function A(e, t, i) {
        e() ? t() : setTimeout(function() {
            A(e, t)
        }, i || 100)
    }
    function O(e) {
        i.replace(i.protocol + "//" + i.host + i.pathname.replace(/^\/?/, "/") + i.search + "#" + e)
    }
    function j(e, t, i) {
        var n = e.data(),
            o = n.measures;
        if (o && (!n.l || n.l.W !== o.width || n.l.H !== o.height || n.l.r !== o.ratio || n.l.w !== t.w || n.l.h !== t.h || n.l.m !== i)) {
            var a = o.width,
                s = o.height,
                l = t.w / t.h,
                c = o.ratio >= l,
                d = "scaledown" === i,
                u = "contain" === i,
                h = "cover" === i;
            c && (d || u) || !c && h ? (a = r(t.w, 0, d ? a : 1 / 0), s = a / o.ratio) : (c && h || !c && (d || u)) && (s = r(t.h, 0, d ? s : 1 / 0), a = s * o.ratio), e.css({
                width: Math.ceil(a),
                height: Math.ceil(s),
                marginLeft: Math.floor(-a / 2),
                marginTop: Math.floor(-s / 2)
            }), n.l = {
                W: o.width,
                H: o.height,
                r: o.ratio,
                w: t.w,
                h: t.h,
                m: i
            }
        }
        return !0
    }
    function z(e, t) {
        var i = e[0];
        i.styleSheet ? i.styleSheet.cssText = t : e.html(t)
    }
    function E(e, t, i) {
        return t !== i && (t >= e ? "left" : e >= i ? "right" : "left right")
    }
    function M(e, t, i, n) {
        if (!i)
            return !1;
        if (!isNaN(e))
            return e - (n ? 0 : 1);
        for (var o, a = 0, s = t.length; s > a; a++) {
            var r = t[a];
            if (r.id === e) {
                o = a;
                break
            }
        }
        return o
    }
    function N(e, t, i) {
        i = i || {}, e.each(function() {
            var e,
                o = n(this),
                a = o.data();
            a.clickOn || (a.clickOn = !0, n.extend(Q(o, {
                onStart: function(t) {
                    e = t, (i.onStart || s).call(this, t)
                },
                onMove: i.onMove || s,
                onTouchEnd: i.onTouchEnd || s,
                onEnd: function(i) {
                    i.moved || t.call(this, e)
                }
            }), {
                noMove: !0
            }))
        })
    }
    function F(e, t) {
        return '<div class="' + e + '">' + (t || "") + "</div>"
    }
    function L(e) {
        for (var t = e.length; t;) {
            var i = Math.floor(Math.random() * t--),
                n = e[t];
            e[t] = e[i], e[i] = n
        }
        return e
    }
    function R(e) {
        return "[object Array]" == Object.prototype.toString.call(e) && n.map(e, function(e) {
                return n.extend({}, e)
            })
    }
    function H(e, t) {
        Tt.scrollLeft(e).scrollTop(t)
    }
    function B(e) {
        if (e) {
            var t = {};
            return n.each(e, function(e, i) {
                t[e.toLowerCase()] = i
            }), t
        }
    }
    function q(e) {
        if (e) {
            var t = +e;
            return isNaN(t) ? (t = e.split("/"), +t[0] / +t[1] || o) : t
        }
    }
    function W(e, t) {
        e.preventDefault(), t && e.stopPropagation()
    }
    function U(e) {
        return e ? ">" : "<"
    }
    function K(e, t) {
        var i = e.data(),
            o = Math.round(t.pos),
            a = function() {
                i.sliding = !1, (t.onEnd || s)()
            };
        "undefined" != typeof t.overPos && t.overPos !== t.pos && (o = t.overPos, a = function() {
            K(e, n.extend({}, t, {
                overPos: t.pos,
                time: Math.max(Lt, t.time / 2)
            }))
        });
        var r = n.extend(d(o, t._001), t.width && {
            width: t.width
        });
        i.sliding = !0, Dt ? (e.css(n.extend(u(t.time), r)), t.time > 10 ? b(e, "transform", a, t.time) : a()) : e.stop().animate(r, t.time, Qt, a)
    }
    function Y(e, t, i, o, a, r) {
        var l = "undefined" != typeof r;
        if (l || (a.push(arguments), Array.prototype.push.call(arguments, a.length), !(a.length > 1))) {
            e = e || n(e), t = t || n(t);
            var c = e[0],
                d = t[0],
                u = "crossfade" === o.method,
                h = function() {
                    if (!h.done) {
                        h.done = !0;
                        var e = (l || a.shift()) && a.shift();
                        e && Y.apply(this, e), (o.onEnd || s)(!!e)
                    }
                },
                p = o.time / (r || 1);
            i.removeClass(Me + " " + Ee), e.stop().addClass(Me), t.stop().addClass(Ee), u && d && e.fadeTo(0, 0), e.fadeTo(u ? p : 0, 1, u && h), t.fadeTo(p, 0, h), c && u || d || h()
        }
    }
    function Z(e) {
        var t = (e.touches || [])[0] || e;
        e._x = t.pageX, e._y = t.clientY, e._now = n.now()
    }
    function Q(i, o) {
        function a(e) {
            return p = n(e.target), y.checked = g = v = b = !1, u || y.flow || e.touches && e.touches.length > 1 || e.which > 1 || $t && $t.type !== e.type && xt || (g = o.select && p.is(o.select, w)) ? g : (m = "touchstart" === e.type, v = p.is("a, a *", w), f = y.control, _ = y.noMove || y.noSwipe || f ? 16 : y.snap ? 0 : 4, Z(e), h = $t = e, kt = e.type.replace(/down|start/, "move").replace(/Down/, "Move"), (o.onStart || s).call(w, e, {
                control: f,
                $target: p
            }), u = y.flow = !0, void ((!m || y.go) && W(e)))
        }
        function r(e) {
            if (e.touches && e.touches.length > 1 || Mt && !e.isPrimary || kt !== e.type || !u)
                return u && l(), void (o.onTouchEnd || s)();
            Z(e);
            var t = Math.abs(e._x - h._x),
                i = Math.abs(e._y - h._y),
                n = t - i,
                a = (y.go || y.x || n >= 0) && !y.noSwipe,
                r = 0 > n;
            m && !y.checked ? (u = a) && W(e) : (W(e), (o.onMove || s).call(w, e, {
                touch: m
            })), !b && Math.sqrt(Math.pow(t, 2) + Math.pow(i, 2)) > _ && (b = !0), y.checked = y.checked || a || r
        }
        function l(e) {
            (o.onTouchEnd || s)();
            var t = u;
            y.control = u = !1, t && (y.flow = !1), !t || v && !y.checked || (e && W(e), xt = !0, clearTimeout(Ct), Ct = setTimeout(function() {
                xt = !1
            }, 1e3), (o.onEnd || s).call(w, {
                moved: b,
                $target: p,
                control: f,
                touch: m,
                startEvent: h,
                aborted: !e || "MSPointerCancel" === e.type
            }))
        }
        function c() {
            y.flow || setTimeout(function() {
                y.flow = !0
            }, 10)
        }
        function d() {
            y.flow && setTimeout(function() {
                y.flow = !1
            }, Ft)
        }
        var u,
            h,
            p,
            f,
            m,
            g,
            v,
            _,
            b,
            w = i[0],
            y = {};
        return Mt ? (w[Et]("MSPointerDown", a, !1), t[Et]("MSPointerMove", r, !1), t[Et]("MSPointerCancel", l, !1), t[Et]("MSPointerUp", l, !1)) : (w[Et] && (w[Et]("touchstart", a, !1), w[Et]("touchmove", r, !1), w[Et]("touchend", l, !1), t[Et]("touchstart", c, !1), t[Et]("touchend", d, !1), t[Et]("touchcancel", d, !1), e[Et]("scroll", d, !1)), i.on("mousedown", a), It.on("mousemove", r).on("mouseup", l)), i.on("click", "a", function(e) {
            y.checked && W(e)
        }), y
    }
    function V(e, t) {
        function i(i, n) {
            T = !0, c = u = i._x, g = i._now, m = [[g, c]], h = p = P.noMove || n ? 0 : w(e, (t.getPos || s)(), t._001), (t.onStart || s).call(I, i)
        }
        function o(e, t) {
            _ = P.min, b = P.max, y = P.snap, k = e.altKey, T = C = !1, x = t.control, x || S.sliding || i(e)
        }
        function a(n, o) {
            P.noSwipe || (T || i(n), u = n._x, m.push([n._now, u]), p = h - (c - u), f = E(p, _, b), _ >= p ? p = $(p, _) : p >= b && (p = $(p, b)), P.noMove || (e.css(d(p, t._001)), C || (C = !0, o.touch || Mt || e.addClass(Ge)), (t.onMove || s).call(I, n, {
                pos: p,
                edge: f
            })))
        }
        function l(o) {
            if (!P.noSwipe || !o.moved) {
                T || i(o.startEvent, !0), o.touch || Mt || e.removeClass(Ge), v = n.now();
                for (var a, l, c, d, f, g, w, $, x, C = v - Ft, S = null, D = Lt, A = t.friction, O = m.length - 1; O >= 0; O--) {
                    if (a = m[O][0], l = Math.abs(a - C), null === S || c > l)
                        S = a, d = m[O][1];
                    else if (S === C || l > c)
                        break;
                    c = l
                }
                w = r(p, _, b);
                var j = d - u,
                    z = j >= 0,
                    E = v - S,
                    M = E > Ft,
                    N = !M && p !== h && w === p;
                y && (w = r(Math[N ? z ? "floor" : "ceil" : "round"](p / y) * y, _, b), _ = b = w), N && (y || w === p) && (x = -(j / E), D *= r(Math.abs(x), t.timeLow, t.timeHigh), f = Math.round(p + x * D / A), y || (w = f), (!z && f > b || z && _ > f) && (g = z ? _ : b, $ = f - g, y || (w = g), $ = r(w + .03 * $, g - 50, g + 50), D = Math.abs((p - $) / (x / A)))), D *= k ? 10 : 1, (t.onEnd || s).call(I, n.extend(o, {
                    moved: o.moved || M && y,
                    pos: p,
                    newPos: w,
                    overPos: $,
                    time: D
                }))
            }
        }
        var c,
            u,
            h,
            p,
            f,
            m,
            g,
            v,
            _,
            b,
            y,
            k,
            x,
            C,
            T,
            I = e[0],
            S = e.data(),
            P = {};
        return P = n.extend(Q(t.$wrap, {
            onStart: o,
            onMove: a,
            onTouchEnd: t.onTouchEnd,
            onEnd: l,
            select: t.select
        }), P)
    }
    function G(e, t) {
        var i,
            o,
            a,
            r = e[0],
            l = {
                prevent: {}
            };
        return r[Et] && r[Et](Nt, function(e) {
            var r = e.wheelDeltaY || -1 * e.deltaY || 0,
                c = e.wheelDeltaX || -1 * e.deltaX || 0,
                d = Math.abs(c) > Math.abs(r),
                u = U(0 > c),
                h = o === u,
                p = n.now(),
                f = Ft > p - a;
            o = u, a = p, d && l.ok && (!l.prevent[u] || i) && (W(e, !0), i && h && f || (t.shift && (i = !0, clearTimeout(l.t), l.t = setTimeout(function() {
                i = !1
            }, Rt)), (t.onEnd || s)(e, t.shift ? u : c)))
        }, !1), l
    }
    function X() {
        n.each(n.Fotorama.instances, function(e, t) {
            t.index = e
        })
    }
    function J(e) {
        n.Fotorama.instances.push(e), X()
    }
    function ee(e) {
        n.Fotorama.instances.splice(e.index, 1), X()
    }
    var te = "fotorama",
        ie = "fullscreen",
        ne = te + "__wrap",
        oe = ne + "--css2",
        ae = ne + "--css3",
        se = ne + "--video",
        re = ne + "--fade",
        le = ne + "--slide",
        ce = ne + "--no-controls",
        de = ne + "--no-shadows",
        ue = ne + "--pan-y",
        he = ne + "--rtl",
        pe = ne + "--only-active",
        fe = ne + "--no-captions",
        me = ne + "--toggle-arrows",
        ge = te + "__stage",
        ve = ge + "__frame",
        _e = ve + "--video",
        be = ge + "__shaft",
        we = te + "__grab",
        ye = te + "__pointer",
        $e = te + "__arr",
        ke = $e + "--disabled",
        xe = $e + "--prev",
        Ce = $e + "--next",
        Te = te + "__nav",
        Ie = Te + "-wrap",
        Se = Te + "__shaft",
        Pe = Te + "--dots",
        De = Te + "--thumbs",
        Ae = Te + "__frame",
        Oe = Ae + "--dot",
        je = Ae + "--thumb",
        ze = te + "__fade",
        Ee = ze + "-front",
        Me = ze + "-rear",
        Ne = te + "__shadow",
        Fe = Ne + "s",
        Le = Fe + "--left",
        Re = Fe + "--right",
        He = te + "__active",
        Be = te + "__select",
        qe = te + "--hidden",
        We = te + "--fullscreen",
        Ue = te + "__fullscreen-icon",
        Ke = te + "__error",
        Ye = te + "__loading",
        Ze = te + "__loaded",
        Qe = Ze + "--full",
        Ve = Ze + "--img",
        Ge = te + "__grabbing",
        Xe = te + "__img",
        Je = Xe + "--full",
        et = te + "__dot",
        tt = te + "__thumb",
        it = tt + "-border",
        nt = te + "__html",
        ot = te + "__video",
        at = ot + "-play",
        st = ot + "-close",
        rt = te + "__caption",
        lt = te + "__caption__wrap",
        ct = te + "__spinner",
        dt = n && n.fn.jquery.split(".");
    if (!dt || dt[0] < 1 || 1 == dt[0] && dt[1] < 8)
        throw "Fotorama requires jQuery 1.8 or later and will not run without it.";
    var ut = {},
        ht = function(e, t, i) {
            function n(e) {
                v.cssText = e
            }
            function o(e, t) {
                return typeof e === t
            }
            function a(e, t) {
                return !!~("" + e).indexOf(t)
            }
            function s(e, t) {
                for (var n in e) {
                    var o = e[n];
                    if (!a(o, "-") && v[o] !== i)
                        return "pfx" != t || o
                }
                return !1
            }
            function r(e, t, n) {
                for (var a in e) {
                    var s = t[e[a]];
                    if (s !== i)
                        return n === !1 ? e[a] : o(s, "function") ? s.bind(n || t) : s
                }
                return !1
            }
            function l(e, t, i) {
                var n = e.charAt(0).toUpperCase() + e.slice(1),
                    a = (e + " " + w.join(n + " ") + n).split(" ");
                return o(t, "string") || o(t, "undefined") ? s(a, t) : (a = (e + " " + y.join(n + " ") + n).split(" "), r(a, t, i))
            }
            var c,
                d,
                u,
                h = "2.6.2",
                p = {},
                f = t.documentElement,
                m = "modernizr",
                g = t.createElement(m),
                v = g.style,
                _ = ({}.toString, " -webkit- -moz- -o- -ms- ".split(" ")),
                b = "Webkit Moz O ms",
                w = b.split(" "),
                y = b.toLowerCase().split(" "),
                $ = {},
                k = [],
                x = k.slice,
                C = function(e, i, n, o) {
                    var a,
                        s,
                        r,
                        l,
                        c = t.createElement("div"),
                        d = t.body,
                        u = d || t.createElement("body");
                    if (parseInt(n, 10))
                        for (; n--;)
                            r = t.createElement("div"), r.id = o ? o[n] : m + (n + 1), c.appendChild(r);
                    return a = ["&#173;", '<style id="s', m, '">', e, "</style>"].join(""), c.id = m, (d ? c : u).innerHTML += a, u.appendChild(c), d || (u.style.background = "", u.style.overflow = "hidden", l = f.style.overflow, f.style.overflow = "hidden", f.appendChild(u)), s = i(c, e), d ? c.parentNode.removeChild(c) : (u.parentNode.removeChild(u), f.style.overflow = l), !!s
                },
                T = {}.hasOwnProperty;
            u = o(T, "undefined") || o(T.call, "undefined") ? function(e, t) {
                return t in e && o(e.constructor.prototype[t], "undefined")
            } : function(e, t) {
                return T.call(e, t)
            }, Function.prototype.bind || (Function.prototype.bind = function(e) {
                var t = this;
                if ("function" != typeof t)
                    throw new TypeError;
                var i = x.call(arguments, 1),
                    n = function() {
                        if (this instanceof n) {
                            var o = function() {};
                            o.prototype = t.prototype;
                            var a = new o,
                                s = t.apply(a, i.concat(x.call(arguments)));
                            return Object(s) === s ? s : a
                        }
                        return t.apply(e, i.concat(x.call(arguments)))
                    };
                return n
            }), $.csstransforms3d = function() {
                var e = !!l("perspective");
                return e
            };
            for (var I in $)
                u($, I) && (d = I.toLowerCase(), p[d] = $[I](), k.push((p[d] ? "" : "no-") + d));
            return p.addTest = function(e, t) {
                if ("object" == typeof e)
                    for (var n in e)
                        u(e, n) && p.addTest(n, e[n]);
                else {
                    if (e = e.toLowerCase(), p[e] !== i)
                        return p;
                    t = "function" == typeof t ? t() : t, "undefined" != typeof enableClasses && enableClasses && (f.className += " " + (t ? "" : "no-") + e), p[e] = t
                }
                return p
            }, n(""), g = c = null, p._version = h, p._prefixes = _, p._domPrefixes = y, p._cssomPrefixes = w, p.testProp = function(e) {
                return s([e])
            }, p.testAllProps = l, p.testStyles = C, p.prefixed = function(e, t, i) {
                return t ? l(e, t, i) : l(e, "pfx")
            }, p
        }(e, t),
        pt = {
            ok: !1,
            is: function() {
                return !1
            },
            request: function() {},
            cancel: function() {},
            event: "",
            prefix: ""
        },
        ft = "webkit moz o ms khtml".split(" ");
    if ("undefined" != typeof t.cancelFullScreen)
        pt.ok = !0;
    else
        for (var mt = 0, gt = ft.length; gt > mt; mt++)
            if (pt.prefix = ft[mt], "undefined" != typeof t[pt.prefix + "CancelFullScreen"]) {
                pt.ok = !0;
                break
            }
    pt.ok && (pt.event = pt.prefix + "fullscreenchange", pt.is = function() {
        switch (this.prefix) {
        case "":
            return t.fullScreen;
        case "webkit":
            return t.webkitIsFullScreen;
        default:
            return t[this.prefix + "FullScreen"]
        }
    }, pt.request = function(e) {
        return "" === this.prefix ? e.requestFullScreen() : e[this.prefix + "RequestFullScreen"]()
    }, pt.cancel = function() {
        return "" === this.prefix ? t.cancelFullScreen() : t[this.prefix + "CancelFullScreen"]()
    });
    var vt,
        _t = {
            lines: 12,
            length: 5,
            width: 2,
            radius: 7,
            corners: 1,
            rotate: 15,
            color: "rgba(128, 128, 128, .75)",
            hwaccel: !0
        },
        bt = {
            top: "auto",
            left: "auto",
            className: ""
        };
    !function(e, t) {
        vt = t()
    }(this, function() {
        function e(e, i) {
            var n,
                o = t.createElement(e || "div");
            for (n in i)
                o[n] = i[n];
            return o
        }
        function i(e) {
            for (var t = 1, i = arguments.length; i > t; t++)
                e.appendChild(arguments[t]);
            return e
        }
        function n(e, t, i, n) {
            var o = ["opacity", t, ~~(100 * e), i, n].join("-"),
                a = .01 + i / n * 100,
                s = Math.max(1 - (1 - e) / t * (100 - a), e),
                r = h.substring(0, h.indexOf("Animation")).toLowerCase(),
                l = r && "-" + r + "-" || "";
            return f[o] || (m.insertRule("@" + l + "keyframes " + o + "{0%{opacity:" + s + "}" + a + "%{opacity:" + e + "}" + (a + .01) + "%{opacity:1}" + (a + t) % 100 + "%{opacity:" + e + "}100%{opacity:" + s + "}}", m.cssRules.length), f[o] = 1), o
        }
        function a(e, t) {
            var i,
                n,
                a = e.style;
            for (t = t.charAt(0).toUpperCase() + t.slice(1), n = 0; n < p.length; n++)
                if (i = p[n] + t, a[i] !== o)
                    return i;
            return a[t] !== o ? t : void 0
        }
        function s(e, t) {
            for (var i in t)
                e.style[a(e, i) || i] = t[i];
            return e
        }
        function r(e) {
            for (var t = 1; t < arguments.length; t++) {
                var i = arguments[t];
                for (var n in i)
                    e[n] === o && (e[n] = i[n])
            }
            return e
        }
        function l(e) {
            for (var t = {
                x: e.offsetLeft,
                y: e.offsetTop
            }; e = e.offsetParent;)
                t.x += e.offsetLeft, t.y += e.offsetTop;
            return t
        }
        function c(e, t) {
            return "string" == typeof e ? e : e[t % e.length]
        }
        function d(e) {
            return "undefined" == typeof this ? new d(e) : void (this.opts = r(e || {}, d.defaults, g))
        }
        function u() {
            function t(t, i) {
                return e("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', i)
            }
            m.addRule(".spin-vml", "behavior:url(#default#VML)"), d.prototype.lines = function(e, n) {
                function o() {
                    return s(t("group", {
                        coordsize: d + " " + d,
                        coordorigin: -l + " " + -l
                    }), {
                        width: d,
                        height: d
                    })
                }
                function a(e, a, r) {
                    i(h, i(s(o(), {
                        rotation: 360 / n.lines * e + "deg",
                        left: ~~a
                    }), i(s(t("roundrect", {
                        arcsize: n.corners
                    }), {
                        width: l,
                        height: n.width,
                        left: n.radius,
                        top: -n.width >> 1,
                        filter: r
                    }), t("fill", {
                        color: c(n.color, e),
                        opacity: n.opacity
                    }), t("stroke", {
                        opacity: 0
                    }))))
                }
                var r,
                    l = n.length + n.width,
                    d = 2 * l,
                    u = 2 * -(n.width + n.length) + "px",
                    h = s(o(), {
                        position: "absolute",
                        top: u,
                        left: u
                    });
                if (n.shadow)
                    for (r = 1; r <= n.lines; r++)
                        a(r, -2, "progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
                for (r = 1; r <= n.lines; r++)
                    a(r);
                return i(e, h)
            }, d.prototype.opacity = function(e, t, i, n) {
                var o = e.firstChild;
                n = n.shadow && n.lines || 0, o && t + n < o.childNodes.length && (o = o.childNodes[t + n], o = o && o.firstChild, o = o && o.firstChild, o && (o.opacity = i))
            }
        }
        var h,
            p = ["webkit", "Moz", "ms", "O"],
            f = {},
            m = function() {
                var n = e("style", {
                    type: "text/css"
                });
                return i(t.getElementsByTagName("head")[0], n), n.sheet || n.styleSheet
            }(),
            g = {
                lines: 12,
                length: 7,
                width: 5,
                radius: 10,
                rotate: 0,
                corners: 1,
                color: "#000",
                direction: 1,
                speed: 1,
                trail: 100,
                opacity: .25,
                fps: 20,
                zIndex: 2e9,
                className: "spinner",
                top: "auto",
                left: "auto",
                position: "relative"
            };
        d.defaults = {}, r(d.prototype, {
            spin: function(t) {
                this.stop();
                var i,
                    n,
                    o = this,
                    a = o.opts,
                    r = o.el = s(e(0, {
                        className: a.className
                    }), {
                        position: a.position,
                        width: 0,
                        zIndex: a.zIndex
                    }),
                    c = a.radius + a.length + a.width;
                if (t && (t.insertBefore(r, t.firstChild || null), n = l(t), i = l(r), s(r, {
                    left: ("auto" == a.left ? n.x - i.x + (t.offsetWidth >> 1) : parseInt(a.left, 10) + c) + "px",
                    top: ("auto" == a.top ? n.y - i.y + (t.offsetHeight >> 1) : parseInt(a.top, 10) + c) + "px"
                })), r.setAttribute("role", "progressbar"), o.lines(r, o.opts), !h) {
                    var d,
                        u = 0,
                        p = (a.lines - 1) * (1 - a.direction) / 2,
                        f = a.fps,
                        m = f / a.speed,
                        g = (1 - a.opacity) / (m * a.trail / 100),
                        v = m / a.lines;
                    !function _() {
                        u++;
                        for (var e = 0; e < a.lines; e++)
                            d = Math.max(1 - (u + (a.lines - e) * v) % m * g, a.opacity), o.opacity(r, e * a.direction + p, d, a);
                        o.timeout = o.el && setTimeout(_, ~~(1e3 / f))
                    }()
                }
                return o
            },
            stop: function() {
                var e = this.el;
                return e && (clearTimeout(this.timeout), e.parentNode && e.parentNode.removeChild(e), this.el = o), this
            },
            lines: function(t, o) {
                function a(t, i) {
                    return s(e(), {
                        position: "absolute",
                        width: o.length + o.width + "px",
                        height: o.width + "px",
                        background: t,
                        boxShadow: i,
                        transformOrigin: "left",
                        transform: "rotate(" + ~~(360 / o.lines * l + o.rotate) + "deg) translate(" + o.radius + "px,0)",
                        borderRadius: (o.corners * o.width >> 1) + "px"
                    })
                }
                for (var r, l = 0, d = (o.lines - 1) * (1 - o.direction) / 2; l < o.lines; l++)
                    r = s(e(), {
                        position: "absolute",
                        top: 1 + ~(o.width / 2) + "px",
                        transform: o.hwaccel ? "translate3d(0,0,0)" : "",
                        opacity: o.opacity,
                        animation: h && n(o.opacity, o.trail, d + l * o.direction, o.lines) + " " + 1 / o.speed + "s linear infinite"
                    }), o.shadow && i(r, s(a("#000", "0 0 4px #000"), {
                        top: "2px"
                    })), i(t, i(r, a(c(o.color, l), "0 0 1px rgba(0,0,0,.1)")));
                return t
            },
            opacity: function(e, t, i) {
                t < e.childNodes.length && (e.childNodes[t].style.opacity = i)
            }
        });
        var v = s(e("group"), {
            behavior: "url(#default#VML)"
        });
        return !a(v, "transform") && v.adj ? u() : h = a(v, "animation"), d
    });
    var wt,
        yt,
        $t,
        kt,
        xt,
        Ct,
        Tt = n(e),
        It = n(t),
        St = "quirks" === i.hash.replace("#", ""),
        Pt = ht.csstransforms3d,
        Dt = Pt && !St,
        At = Pt || "CSS1Compat" === t.compatMode,
        Ot = pt.ok,
        jt = navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),
        zt = !Dt || jt,
        Et = "addEventListener",
        Mt = navigator.msPointerEnabled,
        Nt = "onwheel" in t.createElement("div") ? "wheel" : t.onmousewheel !== o ? "mousewheel" : "DOMMouseScroll",
        Ft = 250,
        Lt = 300,
        Rt = 1400,
        Ht = 5e3,
        Bt = 2,
        qt = 64,
        Wt = 500,
        Ut = 333,
        Kt = "$stageFrame",
        Yt = "$navDotFrame",
        Zt = "$navThumbFrame",
        Qt = a([.1, 0, .25, 1]),
        Vt = 99999,
        Gt = {
            width: null,
            minwidth: null,
            maxwidth: "100%",
            height: null,
            minheight: null,
            maxheight: null,
            ratio: null,
            margin: Bt,
            glimpse: 0,
            nav: "dots",
            navposition: "bottom",
            navwidth: null,
            thumbwidth: qt,
            thumbheight: qt,
            thumbmargin: Bt,
            thumbborderwidth: Bt,
            allowfullscreen: !1,
            fit: "contain",
            transition: "slide",
            clicktransition: null,
            transitionduration: Lt,
            captions: !0,
            hash: !1,
            startindex: 0,
            loop: !1,
            autoplay: !1,
            stopautoplayontouch: !0,
            keyboard: !1,
            arrows: !0,
            click: !0,
            swipe: !0,
            trackpad: !0,
            shuffle: !1,
            direction: "ltr",
            shadows: !0,
            spinner: null
        },
        Xt = {
            left: !0,
            right: !0,
            down: !1,
            up: !1,
            space: !1,
            home: !1,
            end: !1
        };
    jQuery.Fotorama = function(e, o) {
        function a() {
            n.each(mi, function(e, t) {
                if (!t.i) {
                    t.i = nn++;
                    var i = C(t.video, !0);
                    if (i) {
                        var n = {};
                        t.video = i, t.img || t.thumb ? t.thumbsReady = !0 : n = T(t, mi, Xi), I(mi, {
                            img: n.img,
                            thumb: n.thumb
                        }, t.i, Xi)
                    }
                }
            })
        }
        function s(e) {
            return Hi[e] || Xi.fullScreen
        }
        function l(e) {
            var t = "keydown." + te,
                i = "keydown." + te + Ji,
                n = "resize." + te + Ji;
            e ? (It.on(i, function(e) {
                var t,
                    i;
                bi && 27 === e.keyCode ? (t = !0, ai(bi, !0, !0)) : (Xi.fullScreen || o.keyboard && !Xi.index) && (27 === e.keyCode ? (t = !0, Xi.cancelFullScreen()) : e.shiftKey && 32 === e.keyCode && s("space") || 37 === e.keyCode && s("left") || 38 === e.keyCode && s("up") ? i = "<" : 32 === e.keyCode && s("space") || 39 === e.keyCode && s("right") || 40 === e.keyCode && s("down") ? i = ">" : 36 === e.keyCode && s("home") ? i = "<<" : 35 === e.keyCode && s("end") && (i = ">>")), (t || i) && W(e), i && Xi.show({
                    index: i,
                    slow: e.altKey,
                    user: !0
                })
            }), Xi.index || It.off(t).on(t, "textarea, input, select", function(e) {
                !yt.hasClass(ie) && e.stopPropagation()
            }), Tt.on(n, Xi.resize)) : (It.off(i), Tt.off(n))
        }
        function c(t) {
            t !== c.f && (t ? (e.html("").addClass(te + " " + en).append(rn).before(an).before(sn), J(Xi)) : (rn.detach(), an.detach(), sn.detach(), e.html(on.urtext).removeClass(en), ee(Xi)), l(t), c.f = t)
        }
        function p() {
            mi = Xi.data = mi || R(o.data) || S(e), gi = Xi.size = mi.length, !fi.ok && o.shuffle && L(mi), a(), Tn = x(Tn), gi && c(!0)
        }
        function _() {
            var e = 2 > gi || bi;
            Pn.noMove = e || zi, Pn.noSwipe = e || !o.swipe, !Fi && cn.toggleClass(we, !Pn.noMove && !Pn.noSwipe), Mt && rn.toggleClass(ue, !Pn.noSwipe)
        }
        function b(e) {
            e === !0 && (e = ""), o.autoplay = Math.max(+e || Ht, 1.5 * Ni)
        }
        function $() {
            function e(e, i) {
                t[e ? "add" : "remove"].push(i)
            }
            Xi.options = o = B(o), zi = "crossfade" === o.transition || "dissolve" === o.transition, Si = o.loop && (gi > 2 || zi) && (!Fi || "slide" !== Fi), Ni = +o.transitionduration || Lt, Ri = "rtl" === o.direction, Hi = n.extend({}, o.keyboard && Xt, o.keyboard);
            var t = {
                add: [],
                remove: []
            };
            gi > 1 ? (Pi = o.nav, Ai = "top" === o.navposition, t.remove.push(Be), pn.toggle(!!o.arrows)) : (Pi = !1, pn.hide()), ot(), _i = new vt(n.extend(_t, o.spinner, bt, {
                direction: Ri ? -1 : 1
            })), xt(), Ct(), o.autoplay && b(o.autoplay), Ei = h(o.thumbwidth) || qt, Mi = h(o.thumbheight) || qt, Dn.ok = On.ok = o.trackpad && !zt, _(), Qt(o, [Sn]), Di = "thumbs" === Pi, Di ? (ut(gi, "navThumb"), vi = _n, Gi = Zt, z(an, n.Fotorama.jst.style({
                w: Ei,
                h: Mi,
                b: o.thumbborderwidth,
                m: o.thumbmargin,
                s: Ji,
                q: !At
            })), mn.addClass(De).removeClass(Pe)) : "dots" === Pi ? (ut(gi, "navDot"), vi = vn, Gi = Yt, mn.addClass(Pe).removeClass(De)) : (Pi = !1, mn.removeClass(De + " " + Pe)), Pi && (Ai ? fn.insertBefore(ln) : fn.insertAfter(ln), gt.nav = !1, gt(vi, gn, "nav")), Oi = o.allowfullscreen, Oi ? (wn.appendTo(ln), ji = Ot && "native" === Oi) : (wn.detach(), ji = !1), e(zi, re), e(!zi, le), e(!o.captions, fe), e(Ri, he), e("always" !== o.arrows, me), Li = o.shadows && !zt, e(!Li, de), rn.addClass(t.add.join(" ")).removeClass(t.remove.join(" ")), In = n.extend({}, o)
        }
        function k(e) {
            return 0 > e ? (gi + e % gi) % gi : e >= gi ? e % gi : e
        }
        function x(e) {
            return r(e, 0, gi - 1)
        }
        function P(e) {
            return Si ? k(e) : x(e)
        }
        function Z(e) {
            return !!(e > 0 || Si) && e - 1
        }
        function Q(e) {
            return !!(gi - 1 > e || Si) && e + 1
        }
        function X() {
            Pn.min = Si ? -1 / 0 : -g(gi - 1, Sn.w, o.margin, $i), Pn.max = Si ? 1 / 0 : -g(0, Sn.w, o.margin, $i), Pn.snap = Sn.w + o.margin
        }
        function ze() {
            An.min = Math.min(0, Sn.nw - gn.width()), An.max = 0, gn.toggleClass(we, !(An.noMove = An.min === An.max))
        }
        function Ee(e, t, i) {
            if ("number" == typeof e) {
                e = new Array(e);
                var o = !0
            }
            return n.each(e, function(e, n) {
                if (o && (n = e), "number" == typeof n) {
                    var a = mi[k(n)];
                    if (a) {
                        var s = "$" + t + "Frame",
                            r = a[s];
                        i.call(this, e, n, a, r, s, r && r.data())
                    }
                }
            })
        }
        function Me(e, t, i, n) {
            (!Bi || "*" === Bi && n === Ii) && (e = m(o.width) || m(e) || Wt, t = m(o.height) || m(t) || Ut, Xi.resize({
                width: e,
                ratio: o.ratio || i || e / t
            }, 0, n === Ii || "*"))
        }
        function Ne(e, t, i, a, s) {
            Ee(e, t, function(e, r, l, c, d, u) {
                function h(e) {
                    var t = k(r);
                    Gt(e, {
                        index: t,
                        src: y,
                        frame: mi[t]
                    })
                }
                function p() {
                    _.remove(), n.Fotorama.cache[y] = "error", l.html && "stage" === t || !$ || $ === y ? (!y || l.html || g ? "stage" === t && (c.trigger("f:load").removeClass(Ye + " " + Ke).addClass(Ze), h("load"), Me()) : (c.trigger("f:error").removeClass(Ye).addClass(Ke), h("error")), u.state = "error", !(gi > 1 && mi[r] === l) || l.html || l.deleted || l.video || g || (l.deleted = !0, Xi.splice(r, 1))) : (l[w] = y = $, Ne([r], t, i, a, !0))
                }
                function f() {
                    n.Fotorama.measures[y] = b.measures = n.Fotorama.measures[y] || {
                        width: v.width,
                        height: v.height,
                        ratio: v.width / v.height
                    }, Me(b.measures.width, b.measures.height, b.measures.ratio, r), _.off("load error").addClass(Xe + (g ? " " + Je : "")).prependTo(c), j(_, i || Sn, a || l.fit || o.fit), n.Fotorama.cache[y] = u.state = "loaded", setTimeout(function() {
                        c.trigger("f:load").removeClass(Ye + " " + Ke).addClass(Ze + " " + (g ? Qe : Ve)), "stage" === t && h("load")
                    }, 5)
                }
                function m() {
                    var e = 10;
                    A(function() {
                        return !Qi || !e-- && !zt
                    }, function() {
                        f()
                    })
                }
                if (c) {
                    var g = Xi.fullScreen && l.full && l.full !== l.img && !u.$full && "stage" === t;
                    if (!u.$img || s || g) {
                        var v = new Image,
                            _ = n(v),
                            b = _.data();
                        u[g ? "$full" : "$img"] = _;
                        var w = "stage" === t ? g ? "full" : "img" : "thumb",
                            y = l[w],
                            $ = g ? null : l["stage" === t ? "thumb" : "img"];
                        if ("navThumb" === t && (c = u.$wrap), !y)
                            return void p();
                        n.Fotorama.cache[y] ? !function x() {
                            "error" === n.Fotorama.cache[y] ? p() : "loaded" === n.Fotorama.cache[y] ? setTimeout(m, 0) : setTimeout(x, 100)
                        }() : (n.Fotorama.cache[y] = "*", _.on("load", m).on("error", p)), u.state = "", v.src = y
                    }
                }
            })
        }
        function Ge(e) {
            Cn.append(_i.spin().el).appendTo(e)
        }
        function ot() {
            Cn.detach(), _i && _i.stop()
        }
        function dt() {
            var e = Xi.activeFrame[Kt];
            e && !e.data().state && (Ge(e), e.on("f:load f:error", function() {
                e.off("f:load f:error"), ot()
            }))
        }
        function ut(e, t) {
            Ee(e, t, function(e, i, a, s, r, l) {
                s || (s = a[r] = rn[r].clone(), l = s.data(), l.data = a, "stage" === t ? (a.html && n('<div class="' + nt + '"></div>').append(a._html ? n(a.html).removeAttr("id").html(a._html) : a.html).appendTo(s), o.captions && a.caption && n(F(rt, F(lt, a.caption))).appendTo(s), a.video && s.addClass(_e).append($n.clone()), dn = dn.add(s)) : "navDot" === t ? vn = vn.add(s) : "navThumb" === t && (l.$wrap = s.children(":first"), _n = _n.add(s), a.video && s.append($n.clone())))
            })
        }
        function ht(e, t, i) {
            return e && e.length && j(e, t, i)
        }
        function ft(e) {
            Ee(e, "stage", function(e, t, i, a, s, r) {
                if (a) {
                    zn[Kt][k(t)] = a.css(n.extend({
                        left: zi ? 0 : g(t, Sn.w, o.margin, $i)
                    }, zi && u(0))), D(a[0]) && (a.appendTo(cn), ai(i.$video));
                    var l = i.fit || o.fit;
                    ht(r.$img, Sn, l), ht(r.$full, Sn, l)
                }
            })
        }
        function mt(e, t) {
            if ("thumbs" === Pi && !isNaN(e)) {
                var i = -e,
                    o = -e + Sn.nw;
                _n.each(function() {
                    var e = n(this),
                        a = e.data(),
                        s = a.eq,
                        r = {
                            h: Mi
                        },
                        l = "cover";
                    r.w = a.w, a.l + a.w < i || a.l > o || ht(a.$img, r, l) || t && Ne([s], "navThumb", r, l)
                })
            }
        }
        function gt(e, t, i) {
            if (!gt[i]) {
                var a = "nav" === i && Di,
                    s = 0;
                t.append(e.filter(function() {
                    for (var e, t = n(this), i = t.data(), o = 0, a = mi.length; a > o; o++)
                        if (i.data === mi[o]) {
                            e = !0, i.eq = o;
                            break
                        }
                    return e || t.remove() && !1
                }).sort(function(e, t) {
                    return n(e).data().eq - n(t).data().eq
                }).each(function() {
                    if (a) {
                        var e = n(this),
                            t = e.data(),
                            i = Math.round(Mi * t.data.thumbratio) || Ei;
                        t.l = s, t.w = i, e.css({
                            width: i
                        }), s += i + o.thumbmargin
                    }
                })), gt[i] = !0
            }
        }
        function $t(e) {
            return e - En > Sn.w / 3
        }
        function kt(e) {
            return !(Si || Tn + e && Tn - gi + e || bi)
        }
        function xt() {
            un.toggleClass(ke, kt(0)), hn.toggleClass(ke, kt(1))
        }
        function Ct() {
            Dn.ok && (Dn.prevent = {
                "<": kt(0),
                ">": kt(1)
            })
        }
        function St(e) {
            var t,
                i,
                n = e.data();
            return Di ? (t = n.l, i = n.w) : (t = e.position().left, i = e.width()), {
                c: t + i / 2,
                min: -t + 10 * o.thumbmargin,
                max: -t + Sn.w - i - 10 * o.thumbmargin
            }
        }
        function Pt(e) {
            var t = Xi.activeFrame[Gi].data();
            K(bn, {
                time: .9 * e,
                pos: t.l,
                width: t.w - 2 * o.thumbborderwidth
            })
        }
        function jt(e) {
            var t = mi[e.guessIndex][Gi];
            if (t) {
                var i = An.min !== An.max,
                    n = i && St(Xi.activeFrame[Gi]),
                    o = i && (e.keep && jt.l ? jt.l : r((e.coo || Sn.nw / 2) - St(t).c, n.min, n.max)),
                    a = i && r(o, An.min, An.max),
                    s = .9 * e.time;
                K(gn, {
                    time: s,
                    pos: a || 0,
                    onEnd: function() {
                        mt(a, !0)
                    }
                }), oi(mn, E(a, An.min, An.max)), jt.l = o
            }
        }
        function Et() {
            Nt(Gi), jn[Gi].push(Xi.activeFrame[Gi].addClass(He))
        }
        function Nt(e) {
            for (var t = jn[e]; t.length;)
                t.shift().removeClass(He)
        }
        function Rt(e) {
            var t = zn[e];
            n.each(yi, function(e, i) {
                delete t[k(i)]
            }), n.each(t, function(e, i) {
                delete t[e], i.detach()
            })
        }
        function Bt(e) {
            $i = ki = Tn;
            var t = Xi.activeFrame,
                i = t[Kt];
            i && (Nt(Kt), jn[Kt].push(i.addClass(He)), e || Xi.show.onEnd(!0), w(cn, 0, !0), Rt(Kt), ft(yi), X(), ze())
        }
        function Qt(e, t) {
            e && n.each(t, function(t, i) {
                i && n.extend(i, {
                    width: e.width || i.width,
                    height: e.height,
                    minwidth: e.minwidth,
                    maxwidth: e.maxwidth,
                    minheight: e.minheight,
                    maxheight: e.maxheight,
                    ratio: q(e.ratio)
                })
            })
        }
        function Gt(t, i) {
            e.trigger(te + ":" + t, [Xi, i])
        }
        function Jt() {
            clearTimeout(ei.t), Qi = 1, o.stopautoplayontouch ? Xi.stopAutoplay() : Ki = !0
        }
        function ei() {
            o.stopautoplayontouch || (ti(), ii()), ei.t = setTimeout(function() {
                Qi = 0
            }, Lt + Ft)
        }
        function ti() {
            Ki = !(!bi && !Yi)
        }
        function ii() {
            if (clearTimeout(ii.t), !o.autoplay || Ki)
                return void (Xi.autoplay && (Xi.autoplay = !1, Gt("stopautoplay")));
            Xi.autoplay || (Xi.autoplay = !0, Gt("startautoplay"));
            var e = Tn,
                t = Xi.activeFrame[Kt].data();
            A(function() {
                return t.state || e !== Tn
            }, function() {
                ii.t = setTimeout(function() {
                    Ki || e !== Tn || Xi.show(Si ? U(!Ri) : k(Tn + (Ri ? -1 : 1)))
                }, o.autoplay)
            })
        }
        function ni() {
            Xi.fullScreen && (Xi.fullScreen = !1, Ot && pt.cancel(tn), yt.removeClass(ie), wt.removeClass(ie), e.removeClass(We).insertAfter(sn), Sn = n.extend({}, Zi), ai(bi, !0, !0), di("x", !1), Xi.resize(), Ne(yi, "stage"), H(Wi, qi), Gt("fullscreenexit"))
        }
        function oi(e, t) {
            Li && (e.removeClass(Le + " " + Re), t && !bi && e.addClass(t.replace(/^|\s/g, " " + Fe + "--")))
        }
        function ai(e, t, i) {
            t && (rn.removeClass(se), bi = !1, _()), e && e !== bi && (e.remove(), Gt("unloadvideo")), i && (ti(), ii())
        }
        function si(e) {
            rn.toggleClass(ce, e)
        }
        function ri(e) {
            if (!Pn.flow) {
                var t = e ? e.pageX : ri.x,
                    i = t && !kt($t(t)) && o.click;
                ri.p === i || !zi && o.swipe || !ln.toggleClass(ye, i) || (ri.p = i, ri.x = t)
            }
        }
        function li(e) {
            clearTimeout(li.t), o.clicktransition && o.clicktransition !== o.transition ? (Fi = o.transition, Xi.setOptions({
                transition: o.clicktransition
            }), li.t = setTimeout(function() {
                Xi.show(e)
            }, 10)) : Xi.show(e)
        }
        function ci(e, t) {
            var i = e.target,
                a = n(i);
            a.hasClass(at) ? Xi.playVideo() : i === yn ? Xi[(Xi.fullScreen ? "cancel" : "request") + "FullScreen"]() : bi ? i === xn && ai(bi, !0, !0) : t ? si() : o.click && li({
                index: e.shiftKey || U($t(e._x)),
                slow: e.altKey,
                user: !0
            })
        }
        function di(e, t) {
            Pn[e] = An[e] = t
        }
        function ui(e, t) {
            var i = n(this).data().eq;
            li({
                index: i,
                slow: e.altKey,
                user: !0,
                coo: e._x - mn.offset().left,
                time: t
            })
        }
        function hi() {
            if (p(), $(), !hi.i) {
                hi.i = !0;
                var e = o.startindex;
                (e || o.hash && i.hash) && (Ii = M(e || i.hash.replace(/^#/, ""), mi, 0 === Xi.index || e, e)), Tn = $i = ki = xi = Ii = P(Ii) || 0
            }
            if (gi) {
                if (pi())
                    return;
                bi && ai(bi, !0), yi = [], Rt(Kt), Xi.show({
                    index: Tn,
                    time: 0,
                    reset: hi.ok
                }), Xi.resize()
            } else
                Xi.destroy();
            hi.ok = !0
        }
        function pi() {
            return !pi.f === Ri ? (pi.f = Ri, Tn = gi - 1 - Tn, Xi.reverse(), !0) : void 0
        }
        function fi() {
            fi.ok || (fi.ok = !0, Gt("ready"))
        }
        wt = wt || n("html"), yt = yt || n("body");
        var mi,
            gi,
            vi,
            _i,
            bi,
            wi,
            yi,
            $i,
            ki,
            xi,
            Ci,
            Ti,
            Ii,
            Si,
            Pi,
            Di,
            Ai,
            Oi,
            ji,
            zi,
            Ei,
            Mi,
            Ni,
            Fi,
            Li,
            Ri,
            Hi,
            Bi,
            qi,
            Wi,
            Ui,
            Ki,
            Yi,
            Zi,
            Qi,
            Vi,
            Gi,
            Xi = this,
            Ji = n.now(),
            en = te + Ji,
            tn = e[0],
            nn = 1,
            on = e.data(),
            an = n("<style></style>"),
            sn = n(F(qe)),
            rn = n(F(ne)),
            ln = n(F(ge)).appendTo(rn),
            cn = (ln[0], n(F(be)).appendTo(ln)),
            dn = n(),
            un = n(F($e + " " + xe)),
            hn = n(F($e + " " + Ce)),
            pn = un.add(hn).appendTo(ln),
            fn = n(F(Ie)),
            mn = n(F(Te)).appendTo(fn),
            gn = n(F(Se)).appendTo(mn),
            vn = n(),
            _n = n(),
            bn = (cn.data(), gn.data(), n(F(it)).appendTo(gn)),
            wn = n(F(Ue)),
            yn = wn[0],
            $n = n(F(at)),
            kn = n(F(st)).appendTo(ln),
            xn = kn[0],
            Cn = n(F(ct)),
            Tn = !1,
            In = {},
            Sn = {},
            Pn = {},
            Dn = {},
            An = {},
            On = {},
            jn = {},
            zn = {},
            En = 0,
            Mn = [];
        rn[Kt] = n(F(ve)), rn[Zt] = n(F(Ae + " " + je, F(tt))), rn[Yt] = n(F(Ae + " " + Oe, F(et))), jn[Kt] = [], jn[Zt] = [], jn[Yt] = [], zn[Kt] = {}, rn.addClass(Dt ? ae : oe), on.fotorama = this, Xi.startAutoplay = function(e) {
            return Xi.autoplay ? this : (Ki = Yi = !1, b(e || o.autoplay), ii(), this)
        }, Xi.stopAutoplay = function() {
            return Xi.autoplay && (Ki = Yi = !0, ii()), this
        }, Xi.show = function(e) {
            var t;
            "object" != typeof e ? (t = e, e = {}) : t = e.index, t = ">" === t ? ki + 1 : "<" === t ? ki - 1 : "<<" === t ? 0 : ">>" === t ? gi - 1 : t, t = isNaN(t) ? M(t, mi, !0) : t, t = "undefined" == typeof t ? Tn || 0 : t, Xi.activeIndex = Tn = P(t), Ci = Z(Tn), Ti = Q(Tn), yi = [Tn, Ci, Ti], ki = Si ? t : Tn;
            var i = Math.abs(xi - ki),
                n = y(e.time, function() {
                    return Math.min(Ni * (1 + (i - 1) / 12), 2 * Ni)
                }),
                a = e.overPos;
            e.slow && (n *= 10), Xi.activeFrame = wi = mi[Tn], ai(bi, wi.i !== mi[k($i)].i), ut(yi, "stage"), ft(zt ? [ki] : [ki, Z(ki), Q(ki)]), di("go", !0), e.reset || Gt("show", {
                user: e.user,
                time: n
            }), Ki = !0;
            var s = Xi.show.onEnd = function(t) {
                if (!s.ok) {
                    if (s.ok = !0, t || Bt(!0), !e.reset && (Gt("showend", {
                        user: e.user
                    }), !t && Fi && Fi !== o.transition))
                        return Xi.setOptions({
                            transition: Fi
                        }), void (Fi = !1);
                    dt(), Ne(yi, "stage"), di("go", !1), Ct(), ri(), ti(), ii()
                }
            };
            if (zi) {
                var l = wi[Kt],
                    c = Tn !== xi ? mi[xi][Kt] : null;
                Y(l, c, dn, {
                    time: n,
                    method: o.transition,
                    onEnd: s
                }, Mn)
            } else
                K(cn, {
                    pos: -g(ki, Sn.w, o.margin, $i),
                    overPos: a,
                    time: n,
                    onEnd: s,
                    _001: !0
                });
            if (xt(), Pi) {
                Et();
                var d = x(Tn + r(ki - xi, -1, 1));
                jt({
                    time: n,
                    coo: d !== Tn && e.coo,
                    guessIndex: "undefined" != typeof e.coo ? d : Tn,
                    keep: e.reset
                }), Di && Pt(n)
            }
            return Ui = "undefined" != typeof xi && xi !== Tn, xi = Tn, o.hash && Ui && !Xi.eq && O(wi.id || Tn + 1), this
        }, Xi.requestFullScreen = function() {
            return Oi && !Xi.fullScreen && (qi = Tt.scrollTop(), Wi = Tt.scrollLeft(), H(0, 0), di("x", !0), Zi = n.extend({}, Sn), e.addClass(We).appendTo(yt.addClass(ie)), wt.addClass(ie), ai(bi, !0, !0), Xi.fullScreen = !0, ji && pt.request(tn), Xi.resize(), Ne(yi, "stage"), dt(), Gt("fullscreenenter")), this
        }, Xi.cancelFullScreen = function() {
            return ji && pt.is() ? pt.cancel(t) : ni(), this
        }, t.addEventListener && t.addEventListener(pt.event, function() {
            !mi || pt.is() || bi || ni()
        }, !1), Xi.resize = function(e) {
            if (!mi)
                return this;
            Qt(Xi.fullScreen ? {
                width: "100%",
                maxwidth: null,
                minwidth: null,
                height: "100%",
                maxheight: null,
                minheight: null
            } : B(e), [Sn, Xi.fullScreen || o]);
            var t = arguments[1] || 0,
                i = arguments[2],
                n = Sn.width,
                a = Sn.height,
                s = Sn.ratio,
                l = Tt.height() - (Pi ? mn.height() : 0);
            return m(n) && (rn.addClass(pe).css({
                width: n,
                minWidth: Sn.minwidth || 0,
                maxWidth: Sn.maxwidth || Vt
            }), n = Sn.W = Sn.w = rn.width(), Sn.nw = Pi && f(o.navwidth, n) || n, o.glimpse && (Sn.w -= Math.round(2 * (f(o.glimpse, n) || 0))), cn.css({
                width: Sn.w,
                marginLeft: (Sn.W - Sn.w) / 2
            }), a = f(a, l), a = a || s && n / s, a && (n = Math.round(n), a = Sn.h = Math.round(r(a, f(Sn.minheight, l), f(Sn.maxheight, l))), ln.stop().animate({
                width: n,
                height: a
            }, t, function() {
                rn.removeClass(pe)
            }), Bt(), Pi && (mn.stop().animate({
                width: Sn.nw
            }, t), jt({
                guessIndex: Tn,
                time: t,
                keep: !0
            }), Di && gt.nav && Pt(t)), Bi = i || !0, fi())), En = ln.offset().left, this
        }, Xi.setOptions = function(e) {
            return n.extend(o, e), hi(), this
        }, Xi.shuffle = function() {
            return mi && L(mi) && hi(), this
        }, Xi.destroy = function() {
            return Xi.cancelFullScreen(), Xi.stopAutoplay(), mi = Xi.data = null, c(), yi = [], Rt(Kt), this
        }, Xi.playVideo = function() {
            var e = Xi.activeFrame,
                t = e.video,
                i = Tn;
            return "object" == typeof t && e.videoReady && (ji && Xi.fullScreen && Xi.cancelFullScreen(), A(function() {
                return !pt.is() || i !== Tn
            }, function() {
                i === Tn && (e.$video = e.$video || n(n.Fotorama.jst.video(t)), e.$video.appendTo(e[Kt]), rn.addClass(se), bi = e.$video, _(), Gt("loadvideo"))
            })), this
        }, Xi.stopVideo = function() {
            return ai(bi, !0, !0), this
        }, ln.on("mousemove", ri), Pn = V(cn, {
            onStart: Jt,
            onMove: function(e, t) {
                oi(ln, t.edge)
            },
            onTouchEnd: ei,
            onEnd: function(e) {
                oi(ln);
                var t = (Mt && !Vi || e.touch) && o.arrows && "always" !== o.arrows;
                if (e.moved || t && e.pos !== e.newPos && !e.control) {
                    var i = v(e.newPos, Sn.w, o.margin, $i);
                    Xi.show({
                        index: i,
                        time: zi ? Ni : e.time,
                        overPos: e.overPos,
                        user: !0
                    })
                } else
                    e.aborted || e.control || ci(e.startEvent, t)
            },
            _001: !0,
            timeLow: 1,
            timeHigh: 1,
            friction: 2,
            select: "." + Be + ", ." + Be + " *",
            $wrap: ln
        }), An = V(gn, {
            onStart: Jt,
            onMove: function(e, t) {
                oi(mn, t.edge)
            },
            onTouchEnd: ei,
            onEnd: function(e) {
                function t() {
                    jt.l = e.newPos, ti(), ii(), mt(e.newPos, !0)
                }
                if (e.moved)
                    e.pos !== e.newPos ? (Ki = !0, K(gn, {
                        time: e.time,
                        pos: e.newPos,
                        overPos: e.overPos,
                        onEnd: t
                    }), mt(e.newPos), Li && oi(mn, E(e.newPos, An.min, An.max))) : t();
                else {
                    var i = e.$target.closest("." + Ae, gn)[0];
                    i && ui.call(i, e.startEvent)
                }
            },
            timeLow: .5,
            timeHigh: 2,
            friction: 5,
            $wrap: mn
        }), Dn = G(ln, {
            shift: !0,
            onEnd: function(e, t) {
                Jt(), ei(), Xi.show({
                    index: t,
                    slow: e.altKey
                })
            }
        }), On = G(mn, {
            onEnd: function(e, t) {
                Jt(), ei();
                var i = w(gn) + .25 * t;
                gn.css(d(r(i, An.min, An.max))), Li && oi(mn, E(i, An.min, An.max)), On.prevent = {
                    "<": i >= An.max,
                    ">": i <= An.min
                }, clearTimeout(On.t), On.t = setTimeout(function() {
                    mt(i, !0)
                }, Ft), mt(i)
            }
        }), rn.hover(function() {
            setTimeout(function() {
                Qi || (Vi = !0, si(!Vi))
            }, 0)
        }, function() {
            Vi && (Vi = !1, si(!Vi))
        }), N(pn, function(e) {
            W(e), li({
                index: pn.index(this) ? ">" : "<",
                slow: e.altKey,
                user: !0
            })
        }, {
            onStart: function() {
                Jt(), Pn.control = !0
            },
            onTouchEnd: ei
        }), n.each("load push pop shift unshift reverse sort splice".split(" "), function(e, t) {
            Xi[t] = function() {
                return mi = mi || [], "load" !== t ? Array.prototype[t].apply(mi, arguments) : arguments[0] && "object" == typeof arguments[0] && arguments[0].length && (mi = R(arguments[0])), hi(), Xi
            }
        }), hi()
    }, n.fn.fotorama = function(t) {
        return this.each(function() {
            var i = this,
                o = n(this),
                a = o.data(),
                s = a.fotorama;
            s ? s.setOptions(t) : A(function() {
                return !P(i)
            }, function() {
                a.urtext = o.html(), new n.Fotorama(o, n.extend({}, Gt, e.fotoramaDefaults, t, a))
            })
        })
    }, n.Fotorama.instances = [], n.Fotorama.cache = {}, n.Fotorama.measures = {}, n = n || {}, n.Fotorama = n.Fotorama || {}, n.Fotorama.jst = n.Fotorama.jst || {}, n.Fotorama.jst.style = function(e) {
        var t,
            i = "";
        return ut.escape, i += ".fotorama" + (null == (t = e.s) ? "" : t) + " .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:" + (null == (t = e.m) ? "" : t) + "px;\nheight:" + (null == (t = e.h) ? "" : t) + "px}\n.fotorama" + (null == (t = e.s) ? "" : t) + " .fotorama__thumb-border{\nheight:" + (null == (t = e.h - e.b * (e.q ? 0 : 2)) ? "" : t) + "px;\nborder-width:" + (null == (t = e.b) ? "" : t) + "px;\nmargin-top:" + (null == (t = e.m) ? "" : t) + "px}"
    }, n.Fotorama.jst.video = function(e) {
        function t() {
            i += n.call(arguments, "")
        }
        var i = "",
            n = (ut.escape, Array.prototype.join);
        return i += '<div class="fotorama__video"><iframe src="', t(("youtube" == e.type ? "https://youtube.com/embed/" + e.id + "?autoplay=1&enablejsapi=1" : "vimeo" == e.type ? "https://player.vimeo.com/video/" + e.id + "?autoplay=1&badge=0" : e.id) + (e.s && "custom" != e.type ? "&" + e.s : "")), i += '" frameborder="0" allowfullscreen></iframe></div>'
    }, n(function() {
        n("." + te + ':not([data-auto="false"])').fotorama()
    })
}(window, document, location, "undefined" != typeof jQuery && jQuery), !function(e, t) {
    var i = function(e, i) {
        var n = this;
        n.field = t(e), n.el = null, n.json = null, n.items = [], n.selectedItem = null, n.list = t('<ul class="autocomplete-list" />'), n.lastSearch = null, n.options = i
    };
    i.prototype = {
        defaults: {
            minChars: 2,
            wrapField: !0,
            markAsBold: !0,
            grouped: !1,
            queryProperty: "q",
            queryParameters: {},
            method: "get",
            scrollOnFocus: "auto",
            maxItems: 100,
            keyboardDelay: 300,
            lastItemTemplate: null,
            closeOnSelect: !0,
            groupContentName: ".autocomplete-items",
            groupTemplate: '<li class="autocomplete-group"><span class="autocomplete-group-header">{{title}}</span><ul class="autocomplete-items" /></li>',
            itemTemplate: '<li class="autocomplete-item">{{title}}</li>',
            showNoResults: !1,
            noResultsTemplate: '<li class="autocomplete-item">No results for {{title}}</li>',
            ajaxSettings: {},
            getRequestData: !1
        },
        init: function() {
            return this.defaults.templateMethod = this.template, this.settings = t.extend({}, this.defaults, this.options), this.setupSettings(), this.setupMarkup(), this.setupEvents(), this
        },
        template: function(e, t) {
            return e.replace(/{{\s*[\w]+\s*}}/g, function(e) {
                return t[e.substr(2, e.length - 4)]
            })
        },
        debounce: function(e, t, i) {
            var n;
            return function() {
                var o = this,
                    a = arguments,
                    s = function() {
                        n = null, i || e.apply(o, a)
                    },
                    r = i && !n;
                clearTimeout(n), n = setTimeout(s, t), r && e.apply(o, a)
            }
        },
        setupSettings: function() {
            "auto" == this.settings.scrollOnFocus && (this.settings.scrollOnFocus = this.isTouchDevice()), t(e).height() < 500 && (this.settings.maxItems = Math.min(this.settings.maxItems, 3)), this.settings.data ? this.request = this.localRequest : this.request = this.remoteRequest, null != this.settings.keyboardDelay && (this.request = this.debounce(this.request, this.settings.keyboardDelay))
        },
        setupEvents: function() {
            this.el.on("keyup", ".autocomplete-field", t.proxy(this.onKeyUp, this)), this.el.on("keydown", ".autocomplete-field", t.proxy(this.onKeyDown, this)), this.el.on("click", ".autocomplete-item", t.proxy(this.onClickItem, this)), this.settings.scrollOnFocus && this.field.on("focus", function() {
                var i = t(this).offset().top;
                setTimeout(function() {
                    e.scrollTo(0, i)
                }, 0)
            })
        },
        setupMarkup: function() {
            this.settings.wrapField && this.field.wrap('<div class="autocomplete" />'), this.field.addClass("autocomplete-field"), this.field.attr("autocomplete", "off"), this.el = this.field.parent()
        },
        remoteRequest: function(e) {
            this.field.trigger("beforerequest", [this, e]);
            var i = {};
            t.isFunction(this.settings.getRequestData) ? i = this.settings.getRequestData.call(this, e) : (t.extend(i, this.settings.queryParameters), i[this.settings.queryProperty] = e);
            var n = {
                method: this.settings.method,
                url: this.settings.url,
                dataType: "json",
                data: i,
                success: t.proxy(this.beforeReceiveData, this)
            };
            t.extend(n, this.settings.ajaxSettings), t.ajax(n)
        },
        localRequest: function(e) {
            this.settings.grouped ? this.beforeReceiveData(this.matchLocalPatternGrouped(e)) : this.beforeReceiveData(this.matchLocalPatternFlat(e))
        },
        matchLocalPatternFlat: function(e) {
            return this.matchArray(e, this.settings.data)
        },
        matchLocalPatternGrouped: function(e) {
            for (var i = t.extend(!0, [], this.settings.data), n = 0; n < i.length; n++) {
                var o = this.matchArray(e, i[n].data);
                0 == o.length ? (i.splice(n, 1), n--) : i[n].data = o
            }
            return i
        },
        matchArray: function(e, t) {
            for (var i = [], n = 0; n < t.length; n++)
                for (var o in t[n])
                    if (t[n][o].toLowerCase && t[n][o].toLowerCase().indexOf(e.toLowerCase()) > -1 || t[n][o] == e) {
                        i.push(t[n]);
                        break
                    }
            return i
        },
        itemAt: function(e) {
            return null == e ? t() : this.list.find(".autocomplete-item").eq(e)
        },
        clickedItemAt: function(e) {
            for (var t = 0; t < this.items.length; t++)
                if (e == this.list.find(".autocomplete-item").eq(t).get(0))
                    return t;
            return null
        },
        prevItem: function() {
            --this.selectedItem < 0 && (this.selectedItem = null), this.markSelected(this.selectedItem)
        },
        nextItem: function() {
            null == this.selectedItem && (this.selectedItem = -1), this.selectedItem++;
            var e = this.settings.lastItemTemplate ? this.items.length : this.items.length - 1;
            this.selectedItem >= e && (this.selectedItem = e), this.markSelected(this.selectedItem)
        },
        markSelected: function(e) {
            this.list.find(".active").removeClass("active"), this.itemAt(e).addClass("active")
        },
        markHitText: function(e, t) {
            var i = t.split(" ");
            for (var n in e)
                if ("string" == typeof e[n] && "template" != n) {
                    for (var o = [t], a = 0; a < i.length; a++) {
                        var s = i[a].trim().replace(/[^a-0-9]/gi, "");
                        s.length > 0 && o.push(s)
                    }
                    e[n] = e[n].replace(new RegExp("(" + o.join("|") + ")", "gi"), "<strong>$1</strong>")
                }
            return e
        },
        renderGroups: function() {
            this.list.remove(), this.list = t('<ul class="autocomplete-list" />');
            for (var e in this.json)
                this.list.append(this.settings.templateMethod(this.settings.groupTemplate, this.json[e]));
            this.el.append(this.list)
        },
        renderItemsInGroups: function() {
            for (var e = this.field.val(), i = 0; i < this.json.length; i++)
                for (var n = this.el.find(this.settings.groupContentName).eq(i), o = 0; o < this.json[i].data.length && o < this.settings.maxItems; o++) {
                    var a = t.extend({}, this.json[i].data[o]);
                    this.settings.markAsBold && (a = this.markHitText(a, e)), n.append(this.settings.templateMethod(this.json[i].template || this.settings.itemTemplate, a))
                }
        },
        renderItemsFlat: function() {
            this.list.remove(), this.list = t('<ul class="autocomplete-list" />');
            for (var e = this.field.val(), i = 0; i < this.json.length && i < this.settings.maxItems; i++) {
                var n = t.extend({}, this.json[i]);
                this.settings.markAsBold && (n = this.markHitText(n, e)), this.list.append(this.settings.templateMethod(this.json[i].template || this.settings.itemTemplate, n))
            }
            this.el.append(this.list)
        },
        renderLastItem: function() {
            this.list.append(this.settings.templateMethod(this.settings.lastItemTemplate, {
                title: this.field.val()
            }))
        },
        renderNoResults: function() {
            this.list.append(this.settings.templateMethod(this.settings.noResultsTemplate, {
                title: this.field.val()
            }))
        },
        closeList: function() {
            t("html").off("click"), this.list.remove(), this.selectedItem = null
        },
        getItemsFromGroups: function() {
            var e = [];
            for (var t in this.json)
                for (var i = 0; i < this.json[t].data.length; i++)
                    i < this.settings.maxItems && e.push(this.json[t].data[i]);
            return e
        },
        valueHasChanged: function() {
            return this.field.val() != this.lastSearch && (this.lastSearch = this.field.val(), !0)
        },
        isTouchDevice: function() {
            return !!("ontouchstart" in e)
        },
        beforeReceiveData: function(e, t) {
            this.json = e, this.field.trigger("receivedata", [this, e, t]), this.onReceiveData(this.json)
        },
        onReceiveData: function(e) {
            this.selectedItem = null, this.settings.grouped ? (this.renderGroups(), this.items = this.getItemsFromGroups(), this.renderItemsInGroups()) : (this.items = this.json, this.renderItemsFlat()), this.items.length || this.settings.showNoResults && this.renderNoResults(), this.settings.lastItemTemplate && this.renderLastItem(), t("html").one("click", t.proxy(this.closeList, this))
        },
        onKeyUp: function(e) {
            this.field.val().length >= this.settings.minChars && this.valueHasChanged() && this.request(this.field.val()), "" == this.field.val() && (this.lastSearch = "", this.closeList())
        },
        onKeyDown: function(e) {
            38 == e.keyCode && (e.preventDefault(), this.prevItem()), 40 == e.keyCode && (e.preventDefault(), this.nextItem()), 13 == e.keyCode && this.onPressEnter(e), 27 == e.keyCode && (e.preventDefault(), this.closeList())
        },
        onClickItem: function(e) {
            var t = this.clickedItemAt(e.currentTarget);
            this.onSelect(e.currentTarget, this.items[t])
        },
        onPressEnter: function(e) {
            return null === this.selectedItem || (e.preventDefault(), void this.onSelect(this.itemAt(this.selectedItem), this.items[this.selectedItem]))
        },
        onSelect: function(e, t) {
            this.settings.onSelect && this.settings.onSelect.apply(this.field, [e, t]), this.lastSearch = this.field.val(), this.settings.closeOnSelect && this.closeList()
        }
    }, i.defaults = i.prototype.defaults, t.fn.tinyAutocomplete = function(e) {
        return this.each(function() {
            if (this.tinyAutocomplete)
                return t.extend(this.tinyAutocomplete.settings, e), this;
            var n = new i(this, e).init();
            this.tinyAutocomplete = {
                settings: n.settings
            }
        })
    }, t.tinyAutocomplete = i
}(window, $), !function(e) {
    function t(n) {
        if (i[n])
            return i[n].exports;
        var o = i[n] = {
            exports: {},
            id: n,
            loaded: !1
        };
        return e[n].call(o.exports, o, o.exports, t), o.loaded = !0, o.exports
    }
    var i = {};
    return t.m = e, t.c = i, t.p = "", t(0)
}([function(e, t, i) {
    "use strict";
    t.__esModule = !0;
    var n = i(1),
        o = function() {
            var e = new n.Tracker,
                t = 0;
            return setTimeout(function() {
                var i = function() {
                        var i = Array.prototype.slice.call(arguments),
                            n = i.shift();
                        if ("function" != typeof e[n])
                            return console.error("Tracking:: Unable to execute " + n + ". This method not exists "), null;
                        var o = e[n].apply(e, i);
                        return t && clearTimeout(t), t = setTimeout(function() {
                            e.sendBeacon()
                        }, 1e3), o
                    },
                    n = window,
                    o = n[n.CRMTracker].q || [];
                o.forEach(function(e) {
                    i.apply(i, e)
                }), n[n.CRMTracker] = i
            }, 1), window.addEventListener("beforeunload", function(t) {
                e.onUnload();
                var i = document.activeElement;
                i && i.href && i.href.indexOf(location.host) !== -1 || e.sendBeacon()
            }, !0), function() {}
        },
        a = document.readyState;
    "interactive" === a || "complete" === a ? o() : document.addEventListener("DOMContentLoaded", o)
}, function(e, t, i) {
    "use strict";
    t.__esModule = !0;
    var n = i(2),
        o = i(3),
        a = i(4),
        s = i(6),
        r = i(7),
        l = i(5),
        c = function() {
            function e(e) {
                void 0 === e && (e = null), this.eventQueue = [], this.forceData = !1, this.parameters = [], this.config = s["default"], e && this.setConfig(e), this.startTime = (new Date).getTime(), this.information = new a.Information(this.config)
            }
            return e.prototype.setConfig = function(e) {
                return this.config = r(this.config, e), this.information.setConfig(this.config), !0
            }, e.prototype.setPageValue = function(e) {
                return this.information.setPageValue(e), this
            }, e.prototype.getTrackData = function() {
                var e = this.getTrackId();
                return {
                    id: e,
                    localId: this.config.localId,
                    queue: this.getQueueList(!0),
                    data: this.information.getData(!!e),
                    parameters: this.parameters
                }
            }, e.prototype.getTrackId = function() {
                var e = n.Cookie.getCookie(this.config.keys.cookieId);
                return e ? e : (e = o.SessionStorage.get(this.config.keys.cookieId)) ? e : (e = l.LocalStorage.get(this.config.keys.cookieId), e ? e : null)
            }, e.prototype.setTrackId = function(e) {
                return n.Cookie.setCookie(this.config.keys.cookieId, e), o.SessionStorage.put(this.config.keys.cookieId, e), l.LocalStorage.put(this.config.keys.cookieId, e), this
            }, e.prototype.setVisitId = function(e) {
                return o.SessionStorage.put(this.config.keys.visitId, e), l.LocalStorage.put(this.config.keys.visitId, e), this.config.currentVisitId = e, this
            }, e.prototype.getBeaconData = function() {
                var e = this.getTrackId(),
                    t = {
                        id: e,
                        localId: this.config.localId,
                        queue: this.getQueueList(),
                        parameters: this.parameters
                    };
                return this.forceData && (t.data = this.information.getData(!1)), t
            }, e.prototype.processResult = function(e) {
                var t = this;
                if (e && e.success)
                    return this.setTrackId(e.data.id), this.setVisitId(e.data.visitId), this.parameters = [], this.eventQueue.forEach(function(i) {
                        t.addRawEvent(e.data.visitId, i)
                    }), e.data.calls.forEach(function(e) {
                        t[e.method].apply(t, e.params)
                    }), !0
            }, e.prototype.clearMe = function() {
                return n.Cookie.setCookie(this.config.keys.cookieId, ""), o.SessionStorage.put(this.config.keys.cookieId, ""), l.LocalStorage.put(this.config.keys.cookieId, ""), !0
            }, e.prototype.addEvent = function(e, t, i, n) {
                void 0 === n && (n = null);
                var o = this.config.currentVisitId,
                    a = {
                        category: e,
                        action: t,
                        value: i,
                        params: n,
                        time: Math.floor(Date.now() / 1e3)
                    };
                return o ? this.addRawEvent(o, a) : (this.eventQueue.push(a), !0)
            }, e.prototype.onUnload = function() {
                var e = this.config.currentVisitId;
                if (e) {
                    window.performance && window.performance.timing && (this.savePerformance(e, this.information.getPerformance()), this.startTime = window.performance.timing.loadEventEnd);
                    var t = (new Date).getTime(),
                        i = (t - this.startTime) / 1e3;
                    t <= this.startTime && (i = .1), this.saveVisitTime(e, i)
                }
            }, e.prototype.makeRequest = function(e, t, i) {
                if (window.fetch)
                    return void window.fetch(e, {
                        method: "POST",
                        body: t,
                        mode: "cors",
                        credentials: "include"
                    }).then(function(e) {
                        return e.json()
                    }).then(function(e) {
                        return i(e), !0
                    })["catch"](function(e) {
                        console.log("There has been a problem with your fetch operation: ", e)
                    });
                try {
                    var n = new XMLHttpRequest;
                    return n.open("POST", e, !0), n.withCredentials = !0, n.onload = function() {
                        200 == n.status && i(JSON.parse(n.responseText))
                    }, n.onerror = function(e) {}, n.send(t), n
                } catch (e) {
                    return null
                }
            }, e.prototype.isBeaconEmpty = function(e) {
                return !(e.parameters && e.parameters.length > 0 || e.queue && Object.keys(e.queue).length > 0 || e.data)
            }, e.prototype.sendBeacon = function() {
                var e = this,
                    t = this.getBeaconData();
                if (this.isBeaconEmpty(t))
                    return !1;
                var i = this.config.endpoint + "?id=" + t.id + "&rand=" + Math.random(),
                    n = JSON.stringify(t),
                    o = n,
                    a = window.navigator;
                if (a.sendBeacon && a.sendBeacon(i, o))
                    return this.getQueueList(!0), this.parameters = [], !0;
                var s = this.parameters;
                this.parameters = [];
                try {
                    var r = new XMLHttpRequest;
                    return r.open("POST", i, !0), r.withCredentials = !0, r.onload = function() {
                        200 == r.status && (e.parameters = [], e.getQueueList(!0))
                    }, r.onerror = function(t) {
                        e.appendParameters(s)
                    }, r.send(o), !0
                } catch (e) {
                    return !1
                }
            }, e.prototype.savePerformance = function(e, t) {
                var i = this.getQueue(e);
                return i.performance = t, this.saveQueue(e, i), !0
            }, e.prototype.addRawEvent = function(e, t) {
                var i = this.getQueue(e);
                return i.event = i.event || [], i.event.push(t), this.saveQueue(e, i), !0
            }, e.prototype.saveVisitTime = function(e, t) {
                var i = this.getQueue(e);
                return i.visitTime = t, this.saveQueue(e, i), !0
            }, e.prototype.getQueue = function(e) {
                var t = l.LocalStorage.get(this.config.keys.queueId) || {};
                return "undefined" == typeof t[e] ? {} : t[e]
            }, e.prototype.getQueueList = function(e) {
                void 0 === e && (e = !0);
                var t = l.LocalStorage.get(this.config.keys.queueId) || {};
                return e && l.LocalStorage.put(this.config.keys.queueId, {}), t
            }, e.prototype.saveQueue = function(e, t) {
                var i = l.LocalStorage.get(this.config.keys.queueId) || {};
                return i[e] = t, l.LocalStorage.put(this.config.keys.queueId, i), !0
            }, e.prototype.setForceSendData = function(e) {
                return this.forceData = e, this
            }, e.prototype.track = function() {
                var e = this,
                    t = this.getTrackData(),
                    i = this.config.endpoint + "?id=" + t.id + "&rand=" + Math.random(),
                    n = JSON.stringify(t);
                this.makeRequest(i, n, function(t) {
                    e.processResult(t)
                })
            }, e.prototype.setParameters = function(e) {
                return this.parameters = e, this
            }, e.prototype.appendParameters = function(e) {
                var t = this;
                return e.forEach(function(e) {
                    t.parameters.push(e)
                }), this
            }, e.prototype.addParameter = function(e, t, i) {
                return this.parameters.push({
                    param: e,
                    value: t,
                    points: i
                }), this
            }, e.prototype.start = function() {
                this.track()
            }, e
        }();
    t.Tracker = c
}, function(e, t) {
    "use strict";
    t.__esModule = !0;
    var i = function() {
        function e() {}
        return e.getCookiesList = function() {
            var e = {};
            if (document.cookie && "" != document.cookie)
                for (var t = document.cookie.split(";"), i = 0; i < t.length; i++) {
                    var n = t[i].split("=");
                    n[0] = n[0].replace(/^ /, ""), e[decodeURIComponent(n[0])] = decodeURIComponent(n[1])
                }
            return e
        }, e.getCookie = function(e) {
            for (var t = e + "=", i = document.cookie.split(";"), n = 0; n < i.length; n++) {
                for (var o = i[n]; " " == o.charAt(0);)
                    o = o.substring(1);
                if (0 == o.indexOf(t)) {
                    var a = o.substring(t.length, o.length);
                    return "undefined" == typeof a ? null : a
                }
            }
            return null
        }, e.setCookie = function(e, t, i) {
            void 0 === i && (i = 9999999);
            var n = new Date;
            n.setTime(n.getTime() + 24 * i * 60 * 60 * 1e3);
            var o = "expires=" + n.toUTCString();
            return document.cookie = e + "=" + t + ";" + o + ";path=/", !0
        }, e
    }();
    t.Cookie = i
}, function(e, t) {
    "use strict";
    t.__esModule = !0;
    var i = function() {
        function e() {}
        return e.getStorage = function() {
            return window.sessionStorage || null
        }, e.put = function(e, t) {
            try {
                return !!this.getStorage() && (this.getStorage().setItem(e, JSON.stringify(t)), !0)
            } catch (e) {}
            return !1
        }, e.get = function(e) {
            try {
                if (!this.getStorage())
                    return null;
                var t = this.getStorage().getItem(e);
                return null === t ? t : JSON.parse(t)
            } catch (e) {
                return null
            }
        }, e
    }();
    t.SessionStorage = i
}, function(e, t, i) {
    "use strict";
    t.__esModule = !0;
    var n = i(2),
        o = i(5),
        a = i(3),
        s = function() {
            function e(e) {
                this.pageValue = null, this.setConfig(e)
            }
            return e.prototype.setPageValue = function(e) {
                return this.pageValue = e, this
            }, e.prototype.setConfig = function(e) {
                return this.config = e, this
            }, e.prototype.getScreen = function() {
                return {
                    width: screen.width,
                    height: screen.height,
                    pixelDepth: screen.pixelDepth,
                    availWidth: screen.availWidth,
                    availHeight: screen.availHeight,
                    colorDepth: screen.colorDepth
                }
            }, e.prototype.getNavigator = function() {
                var e = this.config.window.navigator;
                return {
                    appCodeName: e.appCodeName,
                    appName: e.appName,
                    appVersion: e.appVersion,
                    cookieEnabled: e.cookieEnabled,
                    doNotTrack: !!e.doNotTrack,
                    hardwareConcurrency: 0 | e.hardwareConcurrency,
                    language: e.language,
                    languages: e.languages,
                    maxTouchPoints: 0 | e.maxTouchPoints,
                    platform: e.platform,
                    product: e.product,
                    productSub: e.productSub,
                    userAgent: e.userAgent,
                    vendor: e.vendor,
                    vendorSub: e.vendorSub
                }
            }, e.prototype.getTabId = function() {
                var e = this.config.keys.tabId,
                    t = a.SessionStorage.get(e);
                if (t)
                    return t;
                var i = o.LocalStorage.get(e);
                return i = (0 | i) + 1, o.LocalStorage.put(e, i), a.SessionStorage.put(e, i), i
            }, e.prototype.getPerformance = function() {
                var e = this.config.window.performance;
                if (!e)
                    return null;
                var t = null;
                e.memory && (t = {
                    jsHeapSizeLimit: e.memory.jsHeapSizeLimit,
                    totalJSHeapSize: e.memory.totalJSHeapSize,
                    usedJSHeapSize: e.memory.usedJSHeapSize
                });
                var i = null;
                return e.getEntries && (i = e.getEntries()), {
                    timing: e.timing,
                    memory: t,
                    entries: i
                }
            }, e.prototype.getData = function(e) {
                return void 0 === e && (e = !1), {
                    url: this.config.window.location.href,
                    referrer: this.config.window.document.referrer,
                    tabId: this.getTabId(),
                    pageValue: this.pageValue,
                    screen: e ? null : this.getScreen(),
                    cookie: e ? null : n.Cookie.getCookiesList(),
                    navigator: e ? null : this.getNavigator(),
                    prev: a.SessionStorage.get(this.config.keys.visitId)
                }
            }, e
        }();
    t.Information = s
}, function(e, t, i) {
    "use strict";
    var n = this && this.__extends || function() {
        var e = Object.setPrototypeOf || {
            __proto__: []
        } instanceof Array && function(e, t) {
            e.__proto__ = t
        } || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        };
        return function(t, i) {
            function n() {
                this.constructor = t
            }
            e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n)
        }
    }();
    t.__esModule = !0;
    var o = i(3),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n(t, e), t.getStorage = function() {
                return window.localStorage || null
            }, t
        }(o.SessionStorage);
    t.LocalStorage = a
}, function(e, t) {
    "use strict";
    t.__esModule = !0;
    var i = "tracking__",
        n = {
            keys: {
                tabId: i + "tab_id",
                cookieId: i + "session_id",
                visitId: i + "visit_id",
                queueId: i + "queue"
            },
            endpoint: "",
            localId: Math.random().toString(),
            window: window,
            currentVisitId: null
        };
    t["default"] = n
}, function(e, t, i) {
    var n,
        o;
    !function(a, s) {
        n = s, o = "function" == typeof n ? n.call(t, i, t, e) : n, !(void 0 !== o && (e.exports = o))
    }(this, function() {
        function e(e) {
            var t = e && "object" == typeof e;
            return t && "[object RegExp]" !== Object.prototype.toString.call(e) && "[object Date]" !== Object.prototype.toString.call(e)
        }
        function t(e) {
            return Array.isArray(e) ? [] : {}
        }
        function i(i, n) {
            var o = n && n.clone === !0;
            return o && e(i) ? a(t(i), i, n) : i
        }
        function n(t, n, o) {
            var s = t.slice();
            return n.forEach(function(n, r) {
                "undefined" == typeof s[r] ? s[r] = i(n, o) : e(n) ? s[r] = a(t[r], n, o) : t.indexOf(n) === -1 && s.push(i(n, o))
            }), s
        }
        function o(t, n, o) {
            var s = {};
            return e(t) && Object.keys(t).forEach(function(e) {
                s[e] = i(t[e], o)
            }), Object.keys(n).forEach(function(r) {
                e(n[r]) && t[r] ? s[r] = a(t[r], n[r], o) : s[r] = i(n[r], o)
            }), s
        }
        function a(e, t, a) {
            var s = Array.isArray(t),
                r = a || {
                    arrayMerge: n
                },
                l = r.arrayMerge || n;
            return s ? Array.isArray(e) ? l(e, t, a) : i(t, a) : o(e, t, a)
        }
        return a.all = function(e, t) {
            if (!Array.isArray(e) || e.length < 2)
                throw new Error("first argument should be an array with at least two elements");
            return e.reduce(function(e, i) {
                return a(e, i, t)
            })
        }, a
    })
}]);

